if ("undefined" === typeof DOMLoader) var DOMLoader = {};
(function () {
    var a, g = {};
    DOMLoader.image = function (d) {
        var c = new Image,
            b = function () {
                var b = d.src;
                return DOMLoader.sendRequestBase64({
                    url: b,
                    onerror: function (a) {
                        f(3);
                        g[l.host] = 3
                    },
                    onload: function (c) {
                        if (c) {
                            var e = b.split(".").pop();
                            d.src = "data:image/" + e + ";base64," + c.responseText;
                            f(0);
                            g[l.host] = !0 === a ? 1 : 0
                        }
                    },
                    onprogress: d.onprogress
                })
            }, f = function (a) {
                c.onload = d.onload;
                c.onerror = d.onerror;
                switch (a) {
                case 0:
                    c.src = d.src;
                    break;
                case 1:
                    c.crossOrigin = "anonymous";
                    c.src = d.src;
                    break;
                case 2:
                    b();
                    break;
                case 3:
                    if (!DOMLoader.image.proxyUrl) break;
                    c.src = DOMLoader.image.proxyUrl + escape(d.src)
                }
                return c
            }, h = function (a) {
                a = a.match(/^([^:\/?#]+:)?(?:\/\/([^\/?#]*))?([^?#]+)?(\?[^#]*)?(#.*)?/);
                return "data:" === a[1] || "blob:" === a[1] || "filesystem:" === a[1] ? !0 : "string" === typeof a[1] && 0 < a[1].length && a[1].toLowerCase() !== location.protocol || "string" === typeof a[2] && 0 < a[2].length && a[2].replace(RegExp(":(" + {
                    "http:": 80,
                    "https:": 443
                }[location.protocol] + ")?$"), "") !== location.host ? !1 : !0
            }, e = function () {
                if (h(d.src)) return f(0);
                var c = g[l.host];
                return "undefined" !== typeof c ?
                    f(c) : !1 !== a || "withCredentials" in req ? b() : f(3)
            }, l = document.createElement("a");
        l.href = d.src;
        if (h(d.src)) return f(0);
        if ("undefined" !== typeof a) return e(a);
        var m = new Image;
        m.crossOrigin = "anonymous";
        m.onload = function () {
            var b = document.createElement("canvas").getContext("2d");
            b.drawImage(m, 0, 0);
            try {
                b.getImageData(0, 0, 1, 1), e(a = !0)
            } catch (c) {
                e(a = !1)
            }
        };
        m.src = "https://lh4.googleusercontent.com/-Qw7nlh9DWec/TvV5qTZ9yfI/AAAAAAAADOA/XdalA5bQBOY/s128/1x1.png";
        return c
    };
    DOMLoader.encodeBinary = function (a) {
        var c = "",
            b, f = Array(4),
            h = 0;
        for (b = 0; h < a.length;) {
            b = Array(3);
            for (var e = 0; e < b.length; e++) b[e] = h < a.length ? a.charCodeAt(h++) & 255 : 0;
            f[0] = b[0] >> 2;
            f[1] = (b[0] & 3) << 4 | b[1] >> 4;
            f[2] = (b[1] & 15) << 2 | b[2] >> 6;
            f[3] = b[2] & 63;
            b = h - (a.length - 1);
            switch (b) {
            case 2:
                f[3] = 64;
                f[2] = 64;
                break;
            case 1:
                f[3] = 64
            }
            for (e = 0; e < f.length; e++) c += "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(f[e])
        }
        return c
    };
    DOMLoader.sendRequestBase64 = function (a) {
        var c = a.onload;
        a.onload = function (b) {
            if (b.responseText) {
                b = DOMLoader.encodeBinary(b.responseText);
                if (a.JS64) {
                    b = "data:image/png;base64," + b;
                    var f = document.createElement("canvas"),
                        h = f.getContext("2d"),
                        e = new Image;
                    e.onload = function () {
                        var a = this.offsetWidth,
                            b = this.offsetHeight;
                        f.width = a;
                        f.height = b;
                        f.style.width = a + "px";
                        f.style.height = b + "px";
                        document.getElementById("output");
                        h.drawImage(this, 0, 0);
                        for (var a = h.getImageData(0, 0, a, b).data, b = [], d = a.length, g = -1, p = 0; p < d; p += 4) 0 < a[p] && (b[++g] = String.fromCharCode(a[p]));
                        a = b.join("");
                        c({
                            responseText: a
                        });
                        document.body.removeChild(e)
                    };
                    e.src = b;
                    return !0
                }
                c({
                    responseText: b
                })
            }
        };
        DOMLoader.sendRequest(a)
    }
})();
"undefined" === typeof DOMLoader && (DOMLoader = {});
(function () {
    DOMLoader.script = function () {
        this.loaded = {};
        this.loading = {};
        return this
    };
    DOMLoader.script.prototype.add = function (a) {
        var g = this;
        "string" === typeof a && (a = {
            url: a
        });
        var d = a.urls;
        "undefined" === typeof d && (d = [{
            url: a.url,
            verify: a.verify
        }]);
        var c = document.getElementsByTagName("head")[0],
            b = function (a, b) {
                if (!(g.loaded[a.url] || b && "undefined" === typeof window[b])) {
                    g.loaded[a.url] = !0;
                    if (g.loading[a.url]) g.loading[a.url]();
                    delete g.loading[a.url];
                    a.callback && a.callback();
                    "undefined" !== typeof q && q()
                }
            }, f = !1,
            h = [],
            e = function (e) {
                "string" === typeof e && (e = {
                    url: e,
                    verify: a.verify
                });
                if (/([\w\d.])$/.test(e.verify)) {
                    var d = e.test = e.verify;
                    if ("object" === typeof d)
                        for (var k = 0; k < d.length; k++) h.push(d[k]);
                    else h.push(d)
                }
                g.loaded[e.url] || (d = document.createElement("script"), d.onreadystatechange = function () {
                        "loaded" !== this.readyState && "complete" !== this.readyState || b(e)
                    }, d.onload = function () {
                        b(e)
                    }, d.onerror = function () {
                        f = !0;
                        delete g.loading[e.url];
                        if ("object" === typeof e.test)
                            for (var a in e.test) l(e.test[a]);
                        else l(e.test)
                    },
                    d.setAttribute("type", "text/javascript"), d.setAttribute("src", e.url), c.appendChild(d), g.loading[e.url] = function () {})
            }, l = function (a) {
                for (var b = [], e = 0; e < h.length; e++) h[e] !== a && b.push(h[e]);
                h = b
            }, m = function (e) {
                if (e) b(e, e.test);
                else
                    for (var c = 0; c < d.length; c++) b(d[c], d[c].test);
                for (var l = !0, c = 0; c < h.length; c++) {
                    var k = h[c];
                    if (k && -1 !== k.indexOf(".")) {
                        var k = k.split("."),
                            g = window[k[0]];
                        "undefined" !== typeof g && (2 === k.length ? "undefined" === typeof g[k[1]] && (l = !1) : 3 === k.length && "undefined" === typeof g[k[1]][k[2]] &&
                            (l = !1))
                    } else "undefined" === typeof window[k] && (l = !1)
                }!a.strictOrder && l ? f ? a.error && a.error() : a.callback && a.callback() : window.setTimeout(function () {
                    m(e)
                }, 10)
            };
        if (a.strictOrder) {
            var k = -1,
                q = function () {
                    k++;
                    if (d[k]) {
                        var b = d[k],
                            c = b.url;
                        g.loading[c] ? g.loading[c] = function () {
                            b.callback && b.callback();
                            q()
                        } : g.loaded[c] ? q() : (e(b), m(b))
                    } else f ? a.error && a.error() : a.callback && a.callback()
                };
            q()
        } else
            for (k = 0; k < d.length; k++) e(d[k]), m(d[k])
    };
    DOMLoader.script = new DOMLoader.script
})();
"undefined" === typeof DOMLoader && (DOMLoader = {});
if ("undefined" === typeof XMLHttpRequest) {
    var XMLHttpRequest;
    (function () {
        for (var a = [
            function () {
                return new ActiveXObject("Msxml2.XMLHTTP")
            },
            function () {
                return new ActiveXObject("Msxml3.XMLHTTP")
            },
            function () {
                return new ActiveXObject("Microsoft.XMLHTTP")
            }
        ], g = 0; g < a.length; g++) {
            try {
                a[g]()
            } catch (d) {
                continue
            }
            break
        }
        XMLHttpRequest = a[g]
    })()
}
if ("undefined" === typeof (new XMLHttpRequest).responseText) {
    var IEBinaryToArray_ByteStr_Script = "\x3c!-- IEBinaryToArray_ByteStr --\x3e\r\n<script type='text/vbscript'>\r\nFunction IEBinaryToArray_ByteStr(Binary)\r\n   IEBinaryToArray_ByteStr = CStr(Binary)\r\nEnd Function\r\nFunction IEBinaryToArray_ByteStr_Last(Binary)\r\n   Dim lastIndex\r\n   lastIndex = LenB(Binary)\r\n   if lastIndex mod 2 Then\r\n       IEBinaryToArray_ByteStr_Last = Chr( AscB( MidB( Binary, lastIndex, 1 ) ) )\r\n   Else\r\n       IEBinaryToArray_ByteStr_Last = \"\"\r\n   End If\r\nEnd Function\r\n\x3c/script>\r\n";
    document.write(IEBinaryToArray_ByteStr_Script);
    DOMLoader.sendRequest = function (a) {
        function g(a) {
            for (var c = {}, h = 0; 256 > h; h++)
                for (var e = 0; 256 > e; e++) c[String.fromCharCode(h + 256 * e)] = String.fromCharCode(h) + String.fromCharCode(e);
            h = IEBinaryToArray_ByteStr(a);
            a = IEBinaryToArray_ByteStr_Last(a);
            return h.replace(/[\s\S]/g, function (a) {
                return c[a]
            }) + a
        }
        "string" === typeof a && (a = {
            url: a
        });
        var d = XMLHttpRequest();
        d.open(a.body ? "POST" : "GET", a.url, !0);
        d.overrideMimeType && d.overrideMimeType("text/plain; charset=x-user-defined");
        if (a.headers)
            for (var c in a.headers) d.setRequestHeader(c,
                a.headers[c]);
        else a.body && d.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
        a.responseType && (d.responseType = a.responseType);
        a.onerror && "onerror" in d && (d.onerror = a.onerror);
        a.onprogress && "onprogress" in d && (d.onprogress = a.onprogress);
        d.onreadystatechange = function (b) {
            if (4 === d.readyState)
                if (200 === d.status || 304 === d.status || 0 === d.status) {
                    if (d.responseText = g(d.responseBody), a.onload) a.onload(d)
                } else if (a.onerror) a.onerror(b, !1)
        };
        d.setRequestHeader("Accept-Charset", "x-user-defined");
        d.send(null);
        return d
    }
} else DOMLoader.sendRequest = function (a) {
    "string" === typeof a && (a = {
        url: a
    });
    var g = new XMLHttpRequest;
    g.open(a.body ? "POST" : "GET", a.url, !0);
    g.overrideMimeType && g.overrideMimeType("text/plain; charset=x-user-defined");
    if (a.headers)
        for (var d in a.headers) g.setRequestHeader(d, a.headers[d]);
    else a.body && g.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    a.responseType && (g.responseType = a.responseType);
    a.onerror && "onerror" in g && (g.onerror = a.onerror);
    a.onprogress && "onprogress" in
        g && (g.onprogress = a.onprogress);
    g.onreadystatechange = function (c) {
        if (4 === g.readyState)
            if (200 === g.status || 304 === g.status) {
                if (a.onload) a.onload(g)
            } else if (a.onerror) a.onerror(c, !1)
    };
    g.send(a.body);
    return g
}; if ("undefined" === typeof FiniteMath) var FiniteMath = {};
var PI = Math.PI,
    RAD_DEG = 180 / PI,
    DEG_RAD = 1 / RAD_DEG,
    INFINITY = 4294967295,
    INFINITY_255 = INFINITY - 255;
(Random = function (a) {
    this.seed = "number" === typeof a ? a : 2147483648 * Math.random() >> 0;
    this.n = Number(this.seed);
    return this
}).prototype = {
        toInt: function () {
            return this.n = 16807 * this.n % 2147483647
        },
        toDouble: function () {
            return (this.n = 16807 * this.n % 2147483647) / 2147483647
        },
        intRange: function (a, g) {
            a -= 0.4999;
            return Math.round(a + (g + 0.4999 - a) * ((this.n = 16807 * this.n % 2147483647) / 2147483647))
        },
        doubleRange: function (a, g) {
            return a + (g - a) * ((this.n = 16807 * this.n % 2147483647) / 2147483647)
        }
};
FiniteMath.getScreenMetrics = function () {
    function a(b, c, f, d) {
        for (var k in c) "object" === typeof (d = c[k]) ? a(b, d, k) : (f && (b["px>" + k] = b["px>" + f] * b[f + ">" + k], b[f + ">" + d] = b[f + ">" + k] * b[k + ">" + d], b[f + ">px"] = 1 / b["px>" + f], b[d + ">" + f] = 1 * (1 / b[k + ">" + d]) / b[f + ">" + k], b[k + ">" + f] = 1 / b[f + ">" + k]), b["px>" + d] = b["px>" + k] * b[k + ">" + d], b[k + ">px"] = 1 / b["px>" + k], b[d + ">px"] = 1 * (1 / b["px>" + k]) / b[k + ">" + d], b[d + ">" + k] = 1 / b[k + ">" + d])
    }
    var g = function (a) {
        try {
            d.style.fontSize = a
        } catch (b) {
            d.style.fontSize = ""
        }
        return d.offsetHeight / 1E4
    }, d = document.createElement("div");
    d.setAttribute("style", "position: absolute; width: 100em; height: 10000em; overflow: hidden;");
    document.body.appendChild(d);
    for (var c = "normal xx-small x-small small medium large x-large xx-large".split(" "), b = {}, f = 0; f < c.length; f++) b[c[f] + "_px"] = g(c[f]);
    b["%>px"] = g("100%") / 100;
    b["px>pt"] = 1 / g("1pt");
    b["pt>pc"] = 1 / 12;
    b["px>in"] = 1 / g("72pt");
    b["in>ft"] = 1 / 12;
    b["ft>yd"] = 1 / 3;
    b["px>mm"] = 25.4 * b["px>in"];
    b["mm>cm"] = 0.1;
    b["cm>m"] = 0.01;
    b["px>ex"] = 1 / g("1ex");
    b["ex>em"] = 1 / b["px>ex"] / g("1em");
    b["px>px"] = 1;
    document.body.removeChild(d);
    a(b, {
        pt: "pc",
        mm: {
            cm: "m"
        },
        "in": {
            ft: "yd"
        },
        ex: "em"
    });
    return b
};
var createHash = function (a) {
    if (!a) return 0;
    for (var g = 5381, d = 0, c = a.length; d < c; d++) var b = a[d].charCodeAt(),
    g = (g << 5) + g + b;
    return g
}, STRING = {
        rxSplitByUppercase: /([A-Z]?[^A-Z]*)/g,
        rxAlphaNumeric: /[^A-Z0-9]+/gi,
        rxNumeric: /[0-9.-]*/g,
        replaceAll: function (a, g, d) {
            if ("object" === typeof g) {
                for (var c = 0; c < g.length; c++) a = a.split(g[c]).join(d[c]);
                return a
            }
            return a.split(g).join(d)
        },
        ucfirst: function (a) {
            return a[0].toUpperCase() + a.substr(1)
        },
        ucwords: function (a) {
            return a.replace(/^(.)|\s(.)/g, function (a) {
                return a.toUpperCase()
            })
        },
        addslashes: function (a) {
            return a.replace(/([\\"'])/g, "\\$1").replace(/\0/g, "\\0")
        },
        stripslashes: function (a) {
            return a.replace(/\0/g, "0").replace(/\\([\\'"])/g, "$1")
        },
        basename: function (a) {
            return a.replace(/\\/g, "/").replace(/.*\//, "")
        },
        splitByUpperCase: function (a) {
            return a.match(/([A-Z]?[^A-Z]*)/g).slice(0, -1)
        },
        extension: function (a) {
            return a ? a.split(".").pop().toLowerCase() : ""
        },
        lpad: function (a, g, d) {
            for (; a.length < d;) a = g + a;
            return a
        },
        rpad: function (a, g, d) {
            for (; a.length < d;) a += g;
            return a
        },
        encode_utf8: function (a) {
            return unescape(encodeURIComponent(a))
        },
        decode_utf8: function (a) {
            return decodeURIComponent(escape(a))
        }
    };
"trim" in String.prototype || (String.prototype.trim = function (a) {
    return this.replace(/^\s+|\s+$/g, "")
});
if ("undefined" === typeof eventjs) var eventjs = {};
(function (a) {
    a.modifyEventListener = !1;
    a.modifySelectors = !1;
    a.add = function (a, b, c, e) {
        return d(a, b, c, e, "add")
    };
    a.remove = function (a, b, c, e) {
        return d(a, b, c, e, "remove")
    };
    a.stop = function (a) {
        a && (a.stopPropagation && a.stopPropagation(), a.cancelBubble = !0, a.cancelBubbleCount = 0)
    };
    a.prevent = function (a) {
        a && (a.preventDefault && a.preventDefault(), a.preventManipulation && a.preventManipulation(), a.returnValue = !1)
    };
    a.cancel = function (b) {
        a.stop(b);
        a.prevent(b)
    };
    a.blur = function () {
        var a = document.activeElement;
        if (a) {
            var b = document.activeElement.nodeName;
            ("INPUT" === b || "TEXTAREA" === b || "true" === a.contentEditable) && a.blur && a.blur()
        }
    };
    a.getEventSupport = function (a, b) {
        "string" === typeof a && (b = a, a = window);
        b = "on" + b;
        if (b in a) return !0;
        a.setAttribute || (a = document.createElement("div"));
        if (a.setAttribute && a.removeAttribute) {
            a.setAttribute(b, "");
            var c = "function" === typeof a[b];
            "undefined" !== typeof a[b] && (a[b] = null);
            a.removeAttribute(b);
            return c
        }
    };
    var g = function (a) {
        if (!a || "object" !== typeof a) return a;
        var b = new a.constructor,
            c;
        for (c in a) b[c] = a[c] && "object" === typeof a[c] ?
            g(a[c]) : a[c];
        return b
    }, d = function (f, h, m, u, y, w) {
            u = u || {};
            if ("[object Object]" === String(f)) {
                var v = f;
                f = v.target;
                h = v.type;
                m = v.listener;
                delete v.target;
                delete v.type;
                delete v.listener;
                for (var x in v) u[x] = v[x]
            }
            if (f && h && m) {
                if ("string" === typeof f && "ready" === h)
                    if (window.eventjs_stallOnReady) h = "load", f = window;
                    else {
                        var A = (new Date).getTime(),
                            C = u.timeout,
                            D = window.setInterval(function () {
                                    (new Date).getTime() - A > C && window.clearInterval(D);
                                    document.querySelector(f) && (window.clearInterval(D), setTimeout(m, 1))
                                }, u.interval ||
                                1E3 / 60);
                        return
                    }
                if ("string" === typeof f) {
                    f = document.querySelectorAll(f);
                    if (0 === f.length) return b("Missing target on listener!", arguments);
                    1 === f.length && (f = f[0])
                }
                var B, v = {};
                if (0 < f.length && f !== window) {
                    x = 0;
                    for (var F = f.length; x < F; x++)(B = d(f[x], h, m, g(u), y)) && (v[x] = B);
                    return c(v)
                }
                h.indexOf && (h = h.toLowerCase(), -1 !== h.indexOf(" ") ? h = h.split(" ") : -1 !== h.indexOf(",") && (h = h.split(",")));
                if ("string" !== typeof h) {
                    if ("number" === typeof h.length)
                        for (x = 0, F = h.length; x < F; x++)(B = d(f, h[x], m, g(u), y)) && (v[h[x]] = B);
                    else
                        for (x in h)(B =
                            "function" === typeof h[x] ? d(f, x, h[x], g(u), y) : d(f, x, h[x].listener, g(h[x]), y)) && (v[x] = B);
                    return c(v)
                }
                if ("object" !== typeof f) return b("Target is not defined!", arguments);
                if ("function" !== typeof m) return b("Listener is not a function!", arguments);
                v = u.useCapture || !1;
                x = k(f) + "." + k(m) + "." + (v ? 1 : 0);
                if (a.Gesture && a.Gesture._gestureHandlers[h]) {
                    x = h + x;
                    if ("remove" === y) {
                        if (!l[x]) return;
                        l[x].remove();
                        delete l[x]
                    } else if ("add" === y) {
                        if (l[x]) return l[x].add(), l[x];
                        if (u.useCall && !a.modifyEventListener) {
                            var G = m;
                            m = function (a,
                                b) {
                                for (var c in b) a[c] = b[c];
                                return G.call(f, a)
                            }
                        }
                        u.gesture = h;
                        u.target = f;
                        u.listener = m;
                        u.fromOverwrite = w;
                        l[x] = a.proxy[h](u)
                    }
                    return l[x]
                }
                for (var z = e(h), F = 0; F < z.length; F++)
                    if (h = z[F], B = h + "." + x, "remove" === y) l[B] && (f[p](h, m, v), delete l[B]);
                    else if ("add" === y) {
                    if (l[B]) break;
                    f[q](h, m, v);
                    l[B] = {
                        id: B,
                        type: h,
                        target: f,
                        listener: m,
                        remove: function () {
                            for (var b = 0; b < z.length; b++) a.remove(f, z[b], m, u)
                        }
                    }
                }
                return l[B]
            }
        }, c = function (a) {
            return {
                remove: function () {
                    for (var b in a) a[b].remove()
                },
                add: function () {
                    for (var b in a) a[b].add()
                }
            }
        },
        b = function (a, b) {
            "undefined" !== typeof console && "undefined" !== typeof console.error && console.error(a, b)
        }, f = {
            msPointer: ["MSPointerDown", "MSPointerMove", "MSPointerUp"],
            touch: ["touchstart", "touchmove", "touchend"],
            mouse: ["mousedown", "mousemove", "mouseup"]
        }, h = {
            MSPointerDown: 0,
            MSPointerMove: 1,
            MSPointerUp: 2,
            touchstart: 0,
            touchmove: 1,
            touchend: 2,
            mousedown: 0,
            mousemove: 1,
            mouseup: 2
        };
    a.supports = {};
    window.navigator.msPointerEnabled && (a.supports.msPointer = !0);
    a.getEventSupport("touchstart") && (a.supports.touch = !0);
    a.getEventSupport("mousedown") &&
        (a.supports.mouse = !0);
    var e = function () {
        return function (b) {
            var c = document.addEventListener ? "" : "on",
                e = h[b];
            if (isFinite(e)) {
                b = [];
                for (var l in a.supports) b.push(c + f[l][e]);
                return b
            }
            return [c + b]
        }
    }(),
        l = {}, m = 0,
        k = function (a) {
            if (a === window) return "#window";
            if (a === document) return "#document";
            a.uniqueID || (a.uniqueID = "e" + m++);
            return a.uniqueID
        }, q = document.addEventListener ? "addEventListener" : "attachEvent",
        p = document.removeEventListener ? "removeEventListener" : "detachEvent";
    a.createPointerEvent = function (b, c, e) {
        var f =
            c.gesture,
            h = c.target,
            l = b.changedTouches || a.proxy.getCoords(b);
        if (l.length) {
            var d = l[0];
            c.pointers = e ? [] : l;
            c.pageX = d.pageX;
            c.pageY = d.pageY;
            c.x = c.pageX;
            c.y = c.pageY
        }
        e = document.createEvent("Event");
        e.initEvent(f, !0, !0);
        e.originalEvent = b;
        for (var k in c) "target" !== k && (e[k] = c[k]);
        b = e.type;
        a.Gesture && a.Gesture._gestureHandlers[b] && c.oldListener.call(h, e, c, !1)
    };
    a.modifyEventListener && window.HTMLElement && function () {
        var b = function (b) {
            var c = function (c) {
                var f = c + "EventListener",
                    h = b[f];
                b[f] = function (b, f, l) {
                    if (a.Gesture &&
                        a.Gesture._gestureHandlers[b]) {
                        var k = l;
                        "object" === typeof l ? k.useCall = !0 : k = {
                            useCall: !0,
                            useCapture: l
                        };
                        d(this, b, f, k, c, !0)
                    } else
                        for (b = e(b), k = 0; k < b.length; k++) h.call(this, b[k], f, l)
                }
            };
            c("add");
            c("remove")
        };
        navigator.userAgent.match(/Firefox/) ? (b(HTMLDivElement.prototype), b(HTMLCanvasElement.prototype)) : b(HTMLElement.prototype);
        b(document);
        b(window)
    }();
    a.modifySelectors && function () {
        var a = NodeList.prototype;
        a.removeEventListener = function (a, b, c) {
            for (var e = 0, f = this.length; e < f; e++) this[e].removeEventListener(a,
                b, c)
        };
        a.addEventListener = function (a, b, c) {
            for (var e = 0, f = this.length; e < f; e++) this[e].addEventListener(a, b, c)
        }
    }();
    return a
})(eventjs);
"undefined" === typeof eventjs && (eventjs = {});
"undefined" === typeof eventjs.proxy && (eventjs.proxy = {});
eventjs.proxy = function (a) {
    a.pointerSetup = function (a, b) {
        a.doc = a.target.ownerDocument || a.target;
        a.minFingers = a.minFingers || a.fingers || 1;
        a.maxFingers = a.maxFingers || a.fingers || Infinity;
        a.position = a.position || "relative";
        delete a.fingers;
        b = b || {};
        b.enabled = !0;
        b.gesture = a.gesture;
        b.target = a.target;
        b.env = a.env;
        eventjs.modifyEventListener && a.fromOverwrite && (a.oldListener = a.listener, a.listener = eventjs.createPointerEvent);
        var f = 0,
            h = 0 === b.gesture.indexOf("pointer") && eventjs.modifyEventListener ? "pointer" : "mouse";
        a.oldListener && (b.oldListener = a.oldListener);
        b.listener = a.listener;
        b.proxy = function (e) {
            b.defaultListener = a.listener;
            a.listener = e;
            e(a.event, b)
        };
        b.add = function () {
            !0 !== b.enabled && (a.onPointerDown && eventjs.add(a.target, h + "down", a.onPointerDown), a.onPointerMove && eventjs.add(a.doc, h + "move", a.onPointerMove), a.onPointerUp && eventjs.add(a.doc, h + "up", a.onPointerUp), b.enabled = !0)
        };
        b.remove = function () {
            !1 !== b.enabled && (a.onPointerDown && eventjs.remove(a.target, h + "down", a.onPointerDown), a.onPointerMove && eventjs.remove(a.doc,
                h + "move", a.onPointerMove), a.onPointerUp && eventjs.remove(a.doc, h + "up", a.onPointerUp), b.reset(), b.enabled = !1)
        };
        b.pause = function (b) {
            !a.onPointerMove || b && !b.move || eventjs.remove(a.doc, h + "move", a.onPointerMove);
            !a.onPointerUp || b && !b.up || eventjs.remove(a.doc, h + "up", a.onPointerUp);
            f = a.fingers;
            a.fingers = 0
        };
        b.resume = function (b) {
            !a.onPointerMove || b && !b.move || eventjs.add(a.doc, h + "move", a.onPointerMove);
            !a.onPointerUp || b && !b.up || eventjs.add(a.doc, h + "up", a.onPointerUp);
            a.fingers = f
        };
        b.reset = function () {
            a.tracker = {};
            a.fingers = 0
        };
        return b
    };
    var g = eventjs.supports;
    eventjs.pointerType = g.mouse ? "mouse" : g.touch ? "touch" : "mspointer";
    a.pointerStart = function (c, b, f) {
        var h = (c.type || "mousedown").toUpperCase();
        0 === h.indexOf("MOUSE") ? eventjs.pointerType = "mouse" : 0 === h.indexOf("TOUCH") ? eventjs.pointerType = "touch" : 0 === h.indexOf("MSPOINTER") && (eventjs.pointerType = "mspointer");
        var e = function (a, b) {
            var e = f.bbox,
                c = l[b] = {};
            switch (f.position) {
            case "absolute":
                c.offsetX = 0;
                c.offsetY = 0;
                break;
            case "differenceFromLast":
                c.offsetX = a.pageX;
                c.offsetY = a.pageY;
                break;
            case "difference":
                c.offsetX = a.pageX;
                c.offsetY = a.pageY;
                break;
            case "move":
                c.offsetX = a.pageX - e.x1;
                c.offsetY = a.pageY - e.y1;
                break;
            default:
                c.offsetX = e.x1 - e.scrollLeft, c.offsetY = e.y1 - e.scrollTop
            }
            var e = a.pageX - c.offsetX,
                h = a.pageY - c.offsetY;
            c.rotation = 0;
            c.scale = 1;
            c.startTime = c.moveTime = (new Date).getTime();
            c.move = {
                x: e,
                y: h
            };
            c.start = {
                x: e,
                y: h
            };
            f.fingers++
        };
        f.event = c;
        b.defaultListener && (f.listener = b.defaultListener, delete b.defaultListener);
        var h = !f.fingers,
            l = f.tracker;
        c = c.changedTouches ||
            a.getCoords(c);
        for (var d = c.length, k = 0; k < d; k++) {
            var g = c[k],
                p = g.identifier || Infinity;
            if (f.fingers) {
                if (f.fingers >= f.maxFingers) {
                    var r = [];
                    for (p in f.tracker) r.push(p);
                    b.identifier = r.join(",");
                    return h
                }
                var t = 0;
                for (r in l) {
                    if (l[r].up) {
                        delete l[r];
                        e(g, p);
                        f.cancel = !0;
                        break
                    }
                    t++
                }
                l[p] || e(g, p)
            } else l = f.tracker = {}, b.bbox = f.bbox = a.getBoundingBox(f.target), f.fingers = 0, f.cancel = !1, e(g, p)
        }
        r = [];
        for (p in f.tracker) r.push(p);
        b.identifier = r.join(",");
        return h
    };
    a.pointerEnd = function (a, b, f, h) {
        var e = a.touches || [],
            l = e.length;
        a = {};
        for (var d = 0; d < l; d++) {
            var k = e[d].identifier;
            a[k || Infinity] = !0
        }
        for (k in f.tracker) e = f.tracker[k], a[k] || e.up || (h && h({
            pageX: e.pageX,
            pageY: e.pageY,
            changedTouches: [{
                pageX: e.pageX,
                pageY: e.pageY,
                identifier: "Infinity" === k ? Infinity : k
            }]
        }, "up"), e.up = !0, f.fingers--);
        if (0 !== f.fingers) return !1;
        h = [];
        f.gestureFingers = 0;
        for (k in f.tracker) f.gestureFingers++, h.push(k);
        b.identifier = h.join(",");
        return !0
    };
    a.getCoords = function (c) {
        a.getCoords = "undefined" !== typeof c.pageX ? function (a) {
            return Array({
                type: "mouse",
                x: a.pageX,
                y: a.pageY,
                pageX: a.pageX,
                pageY: a.pageY,
                identifier: a.pointerId || Infinity
            })
        } : function (a) {
            a = a || window.event;
            return Array({
                type: "mouse",
                x: a.clientX + document.documentElement.scrollLeft,
                y: a.clientY + document.documentElement.scrollTop,
                pageX: a.clientX + document.documentElement.scrollLeft,
                pageY: a.clientY + document.documentElement.scrollTop,
                identifier: Infinity
            })
        };
        return a.getCoords(c)
    };
    a.getCoord = function (c) {
        if ("ontouchstart" in window) {
            var b = 0,
                f = 0;
            a.getCoord = function (a) {
                return (a = a.changedTouches) && a.length ? {
                    x: b =
                        a[0].pageX,
                    y: f = a[0].pageY
                } : {
                    x: b,
                    y: f
                }
            }
        } else a.getCoord = "undefined" !== typeof c.pageX && "undefined" !== typeof c.pageY ? function (a) {
            return {
                x: a.pageX,
                y: a.pageY
            }
        } : function (a) {
            a = a || window.event;
            return {
                x: a.clientX + document.documentElement.scrollLeft,
                y: a.clientY + document.documentElement.scrollTop
            }
        };
        return a.getCoord(c)
    };
    var d = function (a, b) {
        var f = parseFloat(a.getPropertyValue(b), 10);
        return isFinite(f) ? f : 0
    };
    a.getBoundingBox = function (a) {
        if (a === window || a === document) a = document.body;
        var b = {}, f = a.getBoundingClientRect();
        b.width = f.width;
        b.height = f.height;
        b.x1 = f.left;
        b.y1 = f.top;
        b.scaleX = f.width / a.offsetWidth || 1;
        b.scaleY = f.height / a.offsetHeight || 1;
        b.scrollLeft = 0;
        b.scrollTop = 0;
        var f = window.getComputedStyle(a),
            h = d(f, "border-left-width"),
            e = d(f, "border-right-width"),
            l = d(f, "border-bottom-width"),
            m = d(f, "border-top-width");
        b.border = [h, e, m, l];
        b.x1 += h;
        b.y1 += m;
        b.width -= e + h;
        b.height -= l + m;
        b.x2 = b.x1 + b.width;
        b.y2 = b.y1 + b.height;
        f = f.getPropertyValue("position");
        for (a = "fixed" === f ? a : a.parentNode; null !== a && a !== document.body && void 0 !==
            a.scrollTop;) {
            f = window.getComputedStyle(a);
            f = f.getPropertyValue("position");
            if ("absolute" !== f)
                if ("fixed" === f) {
                    b.scrollTop -= a.parentNode.scrollTop;
                    b.scrollLeft -= a.parentNode.scrollLeft;
                    break
                } else b.scrollLeft += a.scrollLeft, b.scrollTop += a.scrollTop;
            a = a.parentNode
        }
        b.scrollBodyLeft = void 0 !== window.pageXOffset ? window.pageXOffset : (document.documentElement || document.body.parentNode || document.body).scrollLeft;
        b.scrollBodyTop = void 0 !== window.pageYOffset ? window.pageYOffset : (document.documentElement || document.body.parentNode ||
            document.body).scrollTop;
        b.scrollLeft -= b.scrollBodyLeft;
        b.scrollTop -= b.scrollBodyTop;
        return b
    };
    (function () {
        var c = navigator.userAgent.toLowerCase(),
            b = -1 !== c.indexOf("macintosh"),
            f = b && -1 !== c.indexOf("khtml") ? {
                91: !0,
                93: !0
            } : b && -1 !== c.indexOf("firefox") ? {
                224: !0
            } : {
                17: !0
            };
        a.metaTrackerReset = function () {
            a.metaKey = !1;
            a.ctrlKey = !1;
            a.shiftKey = !1;
            a.altKey = !1
        };
        a.metaTracker = function (b) {
            var e = !! f[b.keyCode];
            e && (a.metaKey = "keydown" === b.type);
            a.ctrlKey = b.ctrlKey;
            a.shiftKey = b.shiftKey;
            a.altKey = b.altKey;
            return e
        }
    })();
    return a
}(eventjs.proxy);
"undefined" === typeof eventjs && (eventjs = {});
eventjs.MutationObserver = function () {
    var a = window.MutationObserver || window.WebKitMutationObserver || window.MozMutationObserver,
        g = !a && function () {
            var a = document.createElement("p"),
                c = !1,
                b = function () {
                    c = !0
                };
            if (a.addEventListener) a.addEventListener("DOMAttrModified", b, !1);
            else if (a.attachEvent) a.attachEvent("onDOMAttrModified", b);
            else return !1;
            a.setAttribute("id", "target");
            return c
        }();
    return function (d, c) {
        a ? (new a(function (a) {
            a.forEach(function (a) {
                c.call(a.target, a.attributeName)
            })
        })).observe(d, {
            subtree: !1,
            attributes: !0
        }) : g ? eventjs.add(d, "DOMAttrModified", function (a) {
            c.call(d, a.attrName)
        }) : "onpropertychange" in document.body && eventjs.add(d, "propertychange", function (a) {
            c.call(d, window.event.propertyName)
        })
    }
}();
"undefined" === typeof eventjs && (eventjs = {});
"undefined" === typeof eventjs.proxy && (eventjs.proxy = {});
eventjs.proxy = function (a) {
    a.click = function (g) {
        g.gesture = g.gesture || "click";
        g.maxFingers = g.maxFingers || g.fingers || 1;
        var d;
        g.onPointerDown = function (b) {
            a.pointerStart(b, c, g) && (eventjs.add(g.doc, "mousemove", g.onPointerMove).listener(b), eventjs.add(g.doc, "mouseup", g.onPointerUp))
        };
        g.onPointerMove = function (a) {
            d = a
        };
        g.onPointerUp = function (b) {
            if (a.pointerEnd(b, c, g) && (eventjs.remove(g.doc, "mousemove", g.onPointerMove), eventjs.remove(g.doc, "mouseup", g.onPointerUp), !(b.cancelBubble && 1 < ++b.cancelBubbleCount) &&
                d)) {
                var f = (d.changedTouches || a.getCoords(d))[0];
                b = g.bbox;
                var h = a.getBoundingBox(g.target),
                    e = f.pageY - h.scrollBodyTop,
                    f = f.pageX - h.scrollBodyLeft;
                if (f > b.x1 && e > b.y1 && f < b.x2 && e < b.y2 && b.scrollTop === h.scrollTop) {
                    for (var l in g.tracker) break;
                    l = g.tracker[l];
                    c.x = l.start.x;
                    c.y = l.start.y;
                    g.listener(d, c)
                }
            }
        };
        var c = a.pointerSetup(g);
        c.state = "click";
        eventjs.add(g.target, "mousedown", g.onPointerDown);
        return c
    };
    eventjs.Gesture = eventjs.Gesture || {};
    eventjs.Gesture._gestureHandlers = eventjs.Gesture._gestureHandlers || {};
    eventjs.Gesture._gestureHandlers.click = a.click;
    return a
}(eventjs.proxy);
"undefined" === typeof eventjs && (eventjs = {});
"undefined" === typeof eventjs.proxy && (eventjs.proxy = {});
eventjs.proxy = function (a) {
    a.dbltap = a.dblclick = function (g) {
        g.gesture = g.gesture || "dbltap";
        g.maxFingers = g.maxFingers || g.fingers || 1;
        var d, c, b, f, h;
        g.onPointerDown = function (l) {
            var m = l.changedTouches || a.getCoords(l);
            d && !c ? (h = m[0], c = (new Date).getTime() - d) : (f = m[0], d = (new Date).getTime(), c = 0, clearTimeout(b), b = setTimeout(function () {
                d = 0
            }, 700));
            a.pointerStart(l, e, g) && (eventjs.add(g.doc, "mousemove", g.onPointerMove).listener(l), eventjs.add(g.doc, "mouseup", g.onPointerUp))
        };
        g.onPointerMove = function (e) {
            d && !c && (h =
                (e.changedTouches || a.getCoords(e))[0]);
            e = g.bbox;
            var m = h.pageX - e.x1,
                k = h.pageY - e.y1;
            0 < m && m < e.width && 0 < k && k < e.height && 25 >= Math.abs(h.pageX - f.pageX) && 25 >= Math.abs(h.pageY - f.pageY) || (eventjs.remove(g.doc, "mousemove", g.onPointerMove), clearTimeout(b), d = c = 0)
        };
        g.onPointerUp = function (f) {
            a.pointerEnd(f, e, g) && (eventjs.remove(g.doc, "mousemove", g.onPointerMove), eventjs.remove(g.doc, "mouseup", g.onPointerUp));
            if (d && c) {
                if (700 >= c && !(f.cancelBubble && 1 < ++f.cancelBubbleCount)) {
                    e.state = g.gesture;
                    for (var h in g.tracker) break;
                    h = g.tracker[h];
                    e.x = h.start.x;
                    e.y = h.start.y;
                    g.listener(f, e)
                }
                clearTimeout(b);
                d = c = 0
            }
        };
        var e = a.pointerSetup(g);
        e.state = "dblclick";
        eventjs.add(g.target, "mousedown", g.onPointerDown);
        return e
    };
    eventjs.Gesture = eventjs.Gesture || {};
    eventjs.Gesture._gestureHandlers = eventjs.Gesture._gestureHandlers || {};
    eventjs.Gesture._gestureHandlers.dbltap = a.dbltap;
    eventjs.Gesture._gestureHandlers.dblclick = a.dblclick;
    return a
}(eventjs.proxy);
"undefined" === typeof eventjs && (eventjs = {});
"undefined" === typeof eventjs.proxy && (eventjs.proxy = {});
eventjs.proxy = function (a) {
    a.dragElement = function (g, d) {
        a.drag({
            event: d,
            target: g,
            position: "move",
            listener: function (a, b) {
                g.style.left = b.x + "px";
                g.style.top = b.y + "px";
                eventjs.prevent(a)
            }
        })
    };
    a.drag = function (g) {
        g.gesture = "drag";
        g.onPointerDown = function (c) {
            a.pointerStart(c, d, g) && !g.monitor && (eventjs.add(g.doc, "mousemove", g.onPointerMove), eventjs.add(g.doc, "mouseup", g.onPointerUp));
            g.onPointerMove(c, "down")
        };
        g.onPointerMove = function (c, b) {
            if (!g.tracker) return g.onPointerDown(c);
            for (var f = c.changedTouches || a.getCoords(c),
                    h = f.length, e = 0; e < h; e++) {
                var l = f[e],
                    m = l.identifier || Infinity,
                    k = g.tracker[m];
                k && (k.pageX = l.pageX, k.pageY = l.pageY, d.state = b || "move", d.identifier = m, d.start = k.start, d.fingers = g.fingers, "differenceFromLast" === g.position ? (d.x = k.pageX - k.offsetX, d.y = k.pageY - k.offsetY, k.offsetX = k.pageX, k.offsetY = k.pageY) : (d.x = k.pageX - k.offsetX, d.y = k.pageY - k.offsetY), g.listener(c, d))
            }
        };
        g.onPointerUp = function (c) {
            a.pointerEnd(c, d, g, g.onPointerMove) && !g.monitor && (eventjs.remove(g.doc, "mousemove", g.onPointerMove), eventjs.remove(g.doc,
                "mouseup", g.onPointerUp))
        };
        var d = a.pointerSetup(g);
        if (g.event) g.onPointerDown(g.event);
        else eventjs.add(g.target, "mousedown", g.onPointerDown), g.monitor && (eventjs.add(g.doc, "mousemove", g.onPointerMove), eventjs.add(g.doc, "mouseup", g.onPointerUp));
        return d
    };
    eventjs.Gesture = eventjs.Gesture || {};
    eventjs.Gesture._gestureHandlers = eventjs.Gesture._gestureHandlers || {};
    eventjs.Gesture._gestureHandlers.drag = a.drag;
    return a
}(eventjs.proxy);
"undefined" === typeof eventjs && (eventjs = {});
"undefined" === typeof eventjs.proxy && (eventjs.proxy = {});
eventjs.proxy = function (a) {
    var g = Math.PI / 180;
    a.gesture = function (d) {
        d.gesture = d.gesture || "gesture";
        d.minFingers = d.minFingers || d.fingers || 2;
        d.onPointerDown = function (b) {
            var f = d.fingers;
            a.pointerStart(b, c, d) && (eventjs.add(d.doc, "mousemove", d.onPointerMove), eventjs.add(d.doc, "mouseup", d.onPointerUp));
            if (d.fingers === d.minFingers && f !== d.fingers) {
                c.fingers = d.minFingers;
                c.scale = 1;
                c.rotation = 0;
                c.state = "start";
                var f = "",
                    h;
                for (h in d.tracker) f += h;
                c.identifier = parseInt(f);
                d.listener(b, c)
            }
        };
        d.onPointerMove = function (b,
            f) {
            for (var h = d.bbox, e = d.tracker, l = b.changedTouches || a.getCoords(b), m = l.length, k = 0; k < m; k++) {
                var q = l[k],
                    p = q.identifier || Infinity,
                    r = e[p];
                r && (r.move.x = q.pageX - h.x1, r.move.y = q.pageY - h.y1)
            }
            if (!(d.fingers < d.minFingers)) {
                var l = [],
                    t = r = k = h = 0,
                    m = 0;
                for (p in e) q = e[p], q.up || (r += q.move.x, t += q.move.y, m++);
                r /= m;
                t /= m;
                for (p in e)
                    if (q = e[p], !q.up) {
                        m = q.start;
                        if (!m.distance) {
                            var s = m.x - r,
                                u = m.y - t;
                            m.distance = Math.sqrt(s * s + u * u);
                            m.angle = Math.atan2(s, u) / g
                        }
                        var s = q.move.x - r,
                            u = q.move.y - t,
                            y = Math.sqrt(s * s + u * u),
                            h = h + y / m.distance,
                            s = Math.atan2(s,
                                u) / g,
                            m = (m.angle - s + 360) % 360 - 180;
                        q.DEG2 = q.DEG1;
                        q.DEG1 = 0 < m ? m : -m;
                        "undefined" !== typeof q.DEG2 && (q.rotation = 0 < m ? q.rotation + (q.DEG1 - q.DEG2) : q.rotation - (q.DEG1 - q.DEG2), k += q.rotation);
                        l.push(q.move)
                    }
                c.touches = l;
                c.fingers = d.fingers;
                c.scale = h / d.fingers;
                c.rotation = k / d.fingers;
                c.state = "change";
                d.listener(b, c)
            }
        };
        d.onPointerUp = function (b) {
            var f = d.fingers;
            a.pointerEnd(b, c, d) && (eventjs.remove(d.doc, "mousemove", d.onPointerMove), eventjs.remove(d.doc, "mouseup", d.onPointerUp));
            f === d.minFingers && d.fingers < d.minFingers &&
                (c.fingers = d.fingers, c.state = "end", d.listener(b, c))
        };
        var c = a.pointerSetup(d);
        eventjs.add(d.target, "mousedown", d.onPointerDown);
        return c
    };
    eventjs.Gesture = eventjs.Gesture || {};
    eventjs.Gesture._gestureHandlers = eventjs.Gesture._gestureHandlers || {};
    eventjs.Gesture._gestureHandlers.gesture = a.gesture;
    return a
}(eventjs.proxy);
"undefined" === typeof eventjs && (eventjs = {});
"undefined" === typeof eventjs.proxy && (eventjs.proxy = {});
eventjs.proxy = function (a) {
    a.pointerdown = a.pointermove = a.pointerup = function (g) {
        g.gesture = g.gesture || "pointer";
        if (!g.target.isPointerEmitter) {
            var d = !0;
            g.onPointerDown = function (a) {
                d = !1;
                c.gesture = "pointerdown";
                g.listener(a, c)
            };
            g.onPointerMove = function (a) {
                c.gesture = "pointermove";
                g.listener(a, c, d)
            };
            g.onPointerUp = function (a) {
                d = !0;
                c.gesture = "pointerup";
                g.listener(a, c, !0)
            };
            var c = a.pointerSetup(g);
            eventjs.add(g.target, "mousedown", g.onPointerDown);
            eventjs.add(g.target, "mousemove", g.onPointerMove);
            eventjs.add(g.doc,
                "mouseup", g.onPointerUp);
            g.target.isPointerEmitter = !0;
            return c
        }
    };
    eventjs.Gesture = eventjs.Gesture || {};
    eventjs.Gesture._gestureHandlers = eventjs.Gesture._gestureHandlers || {};
    eventjs.Gesture._gestureHandlers.pointerdown = a.pointerdown;
    eventjs.Gesture._gestureHandlers.pointermove = a.pointermove;
    eventjs.Gesture._gestureHandlers.pointerup = a.pointerup;
    return a
}(eventjs.proxy);
"undefined" === typeof eventjs && (eventjs = {});
"undefined" === typeof eventjs.proxy && (eventjs.proxy = {});
eventjs.proxy = function (a) {
    a.shake = function (a) {
        var d = {
            gesture: "devicemotion",
            acceleration: {},
            accelerationIncludingGravity: {},
            target: a.target,
            listener: a.listener,
            remove: function () {
                window.removeEventListener("devicemotion", h, !1)
            }
        }, c = (new Date).getTime(),
            b = {
                x: 0,
                y: 0,
                z: 0
            }, f = {
                x: {
                    count: 0,
                    value: 0
                },
                y: {
                    count: 0,
                    value: 0
                },
                z: {
                    count: 0,
                    value: 0
                }
            }, h = function (e) {
                var h = e.accelerationIncludingGravity;
                b.x = 0.8 * b.x + (1 - 0.8) * h.x;
                b.y = 0.8 * b.y + (1 - 0.8) * h.y;
                b.z = 0.8 * b.z + (1 - 0.8) * h.z;
                d.accelerationIncludingGravity = b;
                d.acceleration.x =
                    h.x - b.x;
                d.acceleration.y = h.y - b.y;
                d.acceleration.z = h.z - b.z;
                if ("devicemotion" === a.gesture) a.listener(e, d);
                else
                    for (var h = (new Date).getTime(), m = 0; 3 > m; m++) {
                        var k = "xyz" [m],
                            q = d.acceleration[k],
                            k = f[k],
                            p = Math.abs(q);
                        !(1E3 > h - c) && 4 < p && (q = h * q / p, p = Math.abs(q + k.value), k.value && 200 > p ? (k.value = q, k.count++, 3 === k.count && (a.listener(e, d), c = h, k.value = 0, k.count = 0)) : (k.value = q, k.count = 1))
                    }
            };
        if (window.addEventListener) return window.addEventListener("devicemotion", h, !1), d
    };
    eventjs.Gesture = eventjs.Gesture || {};
    eventjs.Gesture._gestureHandlers =
        eventjs.Gesture._gestureHandlers || {};
    eventjs.Gesture._gestureHandlers.shake = a.shake;
    return a
}(eventjs.proxy);
"undefined" === typeof eventjs && (eventjs = {});
"undefined" === typeof eventjs.proxy && (eventjs.proxy = {});
eventjs.proxy = function (a) {
    var g = Math.PI / 180;
    a.swipe = function (d) {
        d.snap = d.snap || 90;
        d.threshold = d.threshold || 1;
        d.gesture = d.gesture || "swipe";
        d.onPointerDown = function (b) {
            a.pointerStart(b, c, d) && (eventjs.add(d.doc, "mousemove", d.onPointerMove).listener(b), eventjs.add(d.doc, "mouseup", d.onPointerUp))
        };
        d.onPointerMove = function (b) {
            b = b.changedTouches || a.getCoords(b);
            for (var c = b.length, h = 0; h < c; h++) {
                var e = b[h],
                    l = d.tracker[e.identifier || Infinity];
                l && (l.move.x = e.pageX, l.move.y = e.pageY, l.moveTime = (new Date).getTime())
            }
        };
        d.onPointerUp = function (b) {
            if (a.pointerEnd(b, c, d)) {
                eventjs.remove(d.doc, "mousemove", d.onPointerMove);
                eventjs.remove(d.doc, "mouseup", d.onPointerUp);
                var f, h, e, l, m = {
                        x: 0,
                        y: 0
                    }, k = 0,
                    q = 0,
                    p = 0,
                    r;
                for (r in d.tracker) {
                    var t = d.tracker[r];
                    l = t.move.x - t.start.x;
                    var s = t.move.y - t.start.y,
                        k = k + t.move.x,
                        q = q + t.move.y;
                    m.x += t.start.x;
                    m.y += t.start.y;
                    p++;
                    h = Math.sqrt(l * l + s * s);
                    t = t.moveTime - t.startTime;
                    l = Math.atan2(l, s) / g + 180;
                    h = t ? h / t : 0;
                    if ("undefined" === typeof e) e = l, f = h;
                    else if (20 >= Math.abs(l - e)) e = (e + l) / 2, f = (f + h) / 2;
                    else return
                }
                r =
                    d.gestureFingers;
                d.minFingers <= r && d.maxFingers >= r && f > d.threshold && (m.x /= p, m.y /= p, c.start = m, c.x = k / p, c.y = q / p, c.angle = -(((e / d.snap + 0.5 >> 0) * d.snap || 360) - 360), c.velocity = f, c.fingers = r, c.state = "swipe", d.listener(b, c))
            }
        };
        var c = a.pointerSetup(d);
        eventjs.add(d.target, "mousedown", d.onPointerDown);
        return c
    };
    eventjs.Gesture = eventjs.Gesture || {};
    eventjs.Gesture._gestureHandlers = eventjs.Gesture._gestureHandlers || {};
    eventjs.Gesture._gestureHandlers.swipe = a.swipe;
    return a
}(eventjs.proxy);
"undefined" === typeof eventjs && (eventjs = {});
"undefined" === typeof eventjs.proxy && (eventjs.proxy = {});
eventjs.proxy = function (a) {
    a.longpress = function (g) {
        g.gesture = "longpress";
        return a.tap(g)
    };
    a.tap = function (g) {
        g.delay = g.delay || 500;
        g.timeout = g.timeout || 250;
        g.driftDeviance = g.driftDeviance || 10;
        g.gesture = g.gesture || "tap";
        var d, c;
        g.onPointerDown = function (f) {
            a.pointerStart(f, b, g) && (d = (new Date).getTime(), eventjs.add(g.doc, "mousemove", g.onPointerMove).listener(f), eventjs.add(g.doc, "mouseup", g.onPointerUp), "longpress" === g.gesture && (c = setTimeout(function () {
                if (!(f.cancelBubble && 1 < ++f.cancelBubbleCount)) {
                    var a =
                        0,
                        e;
                    for (e in g.tracker) {
                        var c = g.tracker[e];
                        if (!0 === c.end || g.cancel) return;
                        a++
                    }
                    g.minFingers <= a && g.maxFingers >= a && (b.state = "start", b.fingers = a, b.x = c.start.x, b.y = c.start.y, g.listener(f, b))
                }
            }, g.delay)))
        };
        g.onPointerMove = function (b) {
            var c = g.bbox;
            b = b.changedTouches || a.getCoords(b);
            for (var e = b.length, l = 0; l < e; l++) {
                var d = b[l],
                    k = g.tracker[d.identifier || Infinity];
                if (k) {
                    var q = d.pageX - c.x1,
                        d = d.pageY - c.y1,
                        p = q - k.start.x,
                        k = d - k.start.y,
                        k = Math.sqrt(p * p + k * k);
                    if (!(0 < q && q < c.width && 0 < d && d < c.height && k <= g.driftDeviance)) {
                        eventjs.remove(g.doc,
                            "mousemove", g.onPointerMove);
                        g.cancel = !0;
                        break
                    }
                }
            }
        };
        g.onPointerUp = function (f) {
            if (a.pointerEnd(f, b, g) && (clearTimeout(c), eventjs.remove(g.doc, "mousemove", g.onPointerMove), eventjs.remove(g.doc, "mouseup", g.onPointerUp), !(f.cancelBubble && 1 < ++f.cancelBubbleCount)))
                if ("longpress" === g.gesture) "start" === b.state && (b.state = "end", g.listener(f, b));
                else if (!(g.cancel || (new Date).getTime() - d > g.timeout)) {
                var h = g.gestureFingers;
                g.minFingers <= h && g.maxFingers >= h && (b.state = "tap", b.fingers = g.gestureFingers, g.listener(f,
                    b))
            }
        };
        var b = a.pointerSetup(g);
        eventjs.add(g.target, "mousedown", g.onPointerDown);
        return b
    };
    eventjs.Gesture = eventjs.Gesture || {};
    eventjs.Gesture._gestureHandlers = eventjs.Gesture._gestureHandlers || {};
    eventjs.Gesture._gestureHandlers.tap = a.tap;
    eventjs.Gesture._gestureHandlers.longpress = a.longpress;
    return a
}(eventjs.proxy);
"undefined" === typeof eventjs && (eventjs = {});
"undefined" === typeof eventjs.proxy && (eventjs.proxy = {});
eventjs.proxy = function (a) {
    a.wheelPreventElasticBounce = function (a) {
        a && ("string" === typeof a && (a = document.querySelector(a)), Event.add(a, "wheel", function (a, c) {
            c.preventElasticBounce();
            eventjs.stop(a)
        }))
    };
    a.wheel = function (a) {
        var d, c = a.timeout || 150,
            b = 0,
            f = {
                gesture: "wheel",
                state: "start",
                wheelDelta: 0,
                target: a.target,
                listener: a.listener,
                preventElasticBounce: function (a) {
                    var b = this.target,
                        e = b.scrollTop;
                    e + b.offsetHeight === b.scrollHeight && 0 >= this.wheelDelta ? eventjs.cancel(a) : 0 === e && 0 <= this.wheelDelta && eventjs.cancel(a);
                    eventjs.stop(a)
                },
                add: function () {
                    a.target[e](m, h, !1)
                },
                remove: function () {
                    a.target[l](m, h, !1)
                }
            }, h = function (e) {
                e = e || window.event;
                f.state = b++ ? "change" : "start";
                f.wheelDelta = e.detail ? -20 * e.detail : e.wheelDelta;
                a.listener(e, f);
                clearTimeout(d);
                d = setTimeout(function () {
                    b = 0;
                    f.state = "end";
                    f.wheelDelta = 0;
                    a.listener(e, f)
                }, c)
            }, e = document.addEventListener ? "addEventListener" : "attachEvent",
            l = document.removeEventListener ? "removeEventListener" : "detachEvent",
            m = eventjs.getEventSupport("mousewheel") ? "mousewheel" : "DOMMouseScroll";
        a.target[e](m, h, !1);
        return f
    };
    eventjs.Gesture = eventjs.Gesture || {};
    eventjs.Gesture._gestureHandlers = eventjs.Gesture._gestureHandlers || {};
    eventjs.Gesture._gestureHandlers.wheel = a.wheel;
    return a
}(eventjs.proxy);
var addEvent = eventjs.add,
    removeEvent = eventjs.remove;
(function () {
    for (var a in eventjs) Event[a] = eventjs[a];
    for (a in eventjs.proxy) addEvent[a] = eventjs.proxy[a]
})();
var dom = {};
dom.$ = document.querySelector.bind(document);
dom.$$ = document.querySelectorAll.bind(document);
dom.fromId = document.getElementById.bind(document);
dom.fromClass = document.getElementsByClassName.bind(document);
dom.fromTag = document.getElementsByTagName.bind(document);
dom.select = dom.selectAll = function (a, g) {
    if (this === window) return new dom.select(a, g);
    switch (typeof a) {
    case "object":
        a = [a];
        break;
    case "string":
        a = document.querySelectorAll(a)
    }
    var d = a.length;
    if (g)
        for (var c = function (b, e) {
            return function () {
                for (var e = 0; e < d; e++) a[e][b].apply(a[e], arguments)
            }
        }, b = 0; b < d; b++) {
            var f = a[b],
                h;
            for (h in f) this[h] || "function" === typeof f[h] && (this[h] = c(h))
        }
    this.selection = a;
    this.length = d;
    var e = {};
    this.removeEvent = function (a, b) {
        for (var c in e) {
            var f = e[c];
            a === f.type && (f.remove(), delete e[f.id])
        }
    };
    this.addEvent = function (b, c) {
        for (var f = 0; f < d; f++) {
            var h = Event.add(a[f], b, c);
            e[h.id] = h
        }
    };
    this.toggleClass = function (b, e) {
        for (var c = "undefined" === typeof e, f = 0; f < d; f++) {
            var h = a[f],
                g = " " + b + " ",
                t = " " + h.className + " ",
                s = -1 !== t.indexOf(g);
            c && (e = !s);
            !e && s ? h.className = t.split(g).join(" ").trim() : e && !s && (h.className = (h.className + g).trim())
        }
    };
    this.css = function (b, e) {
        for (var c = 0; c < d; c++) a[c].style[b] = e
    };
    this.each = function (b) {
        for (var e = 0; e < d; e++) b(a[e])
    };
    return this
};
(function () {
    dom.getCount = function (a) {
        if (isFinite(a.length)) return a.length;
        if ("object" === typeof a) {
            var d = 0,
                c;
            for (c in a)++d;
            return d
        }
    };
    dom.getMetrics = function (g) {
        g = g || this.selection[0];
        if (g === window || g === document) g = document.body;
        var d = {}, c = g.getBoundingClientRect();
        d.width = c.width;
        d.height = c.height;
        d.x1 = c.left;
        d.y1 = c.top;
        d.scaleX = c.width / g.offsetWidth || 1;
        d.scaleY = c.height / g.offsetHeight || 1;
        d.scrollLeft = 0;
        d.scrollTop = 0;
        var c = window.getComputedStyle(g),
            b = a(c, "border-left-width"),
            f = a(c, "border-right-width"),
            h = a(c, "border-bottom-width"),
            e = a(c, "border-top-width");
        d.border = [b, f, e, h];
        d.x1 += b;
        d.y1 += e;
        d.width -= f + b;
        d.height -= h + e;
        b = a(c, "padding-left");
        f = a(c, "padding-right");
        h = a(c, "padding-bottom");
        e = a(c, "padding-top");
        d.padding = [b, f, e, h];
        d.x2 = d.x1 + d.width;
        d.y2 = d.y1 + d.height;
        c = c.getPropertyValue("position");
        for (g = "fixed" === c ? g : g.parentNode; null !== g && g !== document.body && void 0 !== g.scrollTop;) {
            c = window.getComputedStyle(g);
            c = c.getPropertyValue("position");
            if ("absolute" !== c)
                if ("fixed" === c) {
                    d.scrollTop -= g.parentNode.scrollTop;
                    d.scrollLeft -= g.parentNode.scrollLeft;
                    break
                } else d.scrollLeft += g.scrollLeft, d.scrollTop += g.scrollTop;
            g = g.parentNode
        }
        d.scrollBodyLeft = void 0 !== window.pageXOffset ? window.pageXOffset : (document.documentElement || document.body.parentNode || document.body).scrollLeft;
        d.scrollBodyTop = void 0 !== window.pageYOffset ? window.pageYOffset : (document.documentElement || document.body.parentNode || document.body).scrollTop;
        d.scrollLeft -= d.scrollBodyLeft;
        d.scrollTop -= d.scrollBodyTop;
        return d
    };
    var a = function (a, d) {
        var c = parseFloat(a.getPropertyValue(d),
            10);
        return isFinite(c) ? c : 0
    };
    dom.setClassName = function (a, d, c, b) {
        a && d ? (b = b || [a], c = isFinite(c) ? c : !0) : (c = a, d = c.className || "active", a = c.target || {}, b = c.list || [a], c = isFinite(c.on) ? c.on : !0);
        if ("string" === typeof b) {
            if (!a.parentNode) return;
            b = a.parentNode.querySelectorAll(b)
        }
        for (var f = a.className, h = 0, e = b.length; h < e; h++) b[h].className = (" " + b[h].className + " ").split(" " + d + " ").join(" ").trim();
        !1 === c || "toggle" === c && -1 !== f.indexOf(d) || (a.className = (a.className + " " + d).trim())
    }
})();
var removeChildNodes = function (a) {
    if (a)
        for (; a.hasChildNodes();) a.removeChild(a.firstChild)
}, clamp = function (a, g, d) {
        return a < g ? g : a > d ? d : a
    }, clone = function (a) {
        if (!a || "object" !== typeof a) return a;
        if (a.constructor && !a.childNodes) {
            var g = new a.constructor,
                d;
            for (d in a) g[d] = a[d] && "object" === typeof a[d] ? clone(a[d]) : a[d];
            return g
        }
    }, globalExists = function (a, g) {
        for (var d = a.split("."), c = d.length, b = g || window, f = 0; f < c; f++) {
            var h = d[f];
            if (null == b[h]) return !1;
            b = b[h]
        }
        return !0
    }, each = function (a, g) {
        for (var d = 0; d < a.length; d++) g(a[d])
    },
    mergeObject = function (a, g) {
        if (!a || "object" !== typeof a) return g;
        for (var d in a) g[d] = a[d] && "object" === typeof a[d] ? mergeObject(a[d], g[d] || new a[d].constructor) : a[d];
        return g
    }, parseUri = function (a) {
        a || (a = window.location);
        var g = parseUri.options;
        a = g.parser[g.strictMode ? "strict" : "loose"].exec(a);
        for (var d = {}, c = 14; c--;) d[g.key[c]] = a[c] || "";
        d[g.q.name] = {};
        d[g.key[12]].replace(g.q.parser, function (a, c, h) {
            c && (d[g.q.name][c] = h)
        });
        return d
    };
parseUri.isLocalhost = function (a) {
    var g = a.match(/^([^:\/?#]+:)?(?:\/\/([^\/?#]*))?([^?#]+)?(\?[^#]*)?(#.*)?/);
    return "<" === a.substr(0, 1) || "string" === typeof g[1] && 0 < g[1].length && g[1].toLowerCase() !== location.protocol || "string" === typeof g[2] && 0 < g[2].length && g[2].replace(RegExp(":(" + {
        "http:": 80,
        "https:": 443
    }[location.protocol] + ")?$"), "") !== location.host ? !1 : !0
};
parseUri.options = {
    strictMode: !1,
    key: "source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),
    q: {
        name: "queryKey",
        parser: /(?:^|&)([^&=]*)=?([^&]*)/g
    },
    parser: {
        strict: /^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,
        loose: /^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/
    }
};
(function (a) {
    if ("object" === typeof exports) module.exports = a();
    else if ("function" === typeof define && define.amd) define(a);
    else {
        var g;
        try {
            g = window
        } catch (d) {
            g = self
        }
        g.SparkMD5 = a()
    }
})(function () {
    var a = function (a, b) {
        return a + b & 4294967295
    }, g = function (b, e, c, f, h, l) {
            e = a(a(e, b), a(f, l));
            return a(e << h | e >>> 32 - h, c)
        }, d = function (a, b, e, c, f, h, l) {
            return g(b & e | ~b & c, a, b, f, h, l)
        }, c = function (a, b, e, c, f, h, l) {
            return g(b & c | e & ~c, a, b, f, h, l)
        }, b = function (a, b, e, c, f, h, l) {
            return g(e ^ (b | ~c), a, b, f, h, l)
        }, f = function (e, f) {
            var h = e[0],
                l = e[1],
                k = e[2],
                m = e[3],
                h = d(h, l, k, m, f[0], 7, -680876936),
                m = d(m, h, l, k, f[1], 12, -389564586),
                k = d(k, m, h, l, f[2], 17, 606105819),
                l = d(l, k, m, h, f[3], 22, -1044525330),
                h = d(h, l, k, m, f[4], 7, -176418897),
                m = d(m, h, l, k, f[5], 12, 1200080426),
                k = d(k, m, h, l, f[6], 17, -1473231341),
                l = d(l, k, m, h, f[7], 22, -45705983),
                h = d(h, l, k, m, f[8], 7, 1770035416),
                m = d(m, h, l, k, f[9], 12, -1958414417),
                k = d(k, m, h, l, f[10], 17, -42063),
                l = d(l, k, m, h, f[11], 22, -1990404162),
                h = d(h, l, k, m, f[12], 7, 1804603682),
                m = d(m, h, l, k, f[13], 12, -40341101),
                k = d(k, m, h, l, f[14], 17, -1502002290),
                l = d(l, k,
                    m, h, f[15], 22, 1236535329),
                h = c(h, l, k, m, f[1], 5, -165796510),
                m = c(m, h, l, k, f[6], 9, -1069501632),
                k = c(k, m, h, l, f[11], 14, 643717713),
                l = c(l, k, m, h, f[0], 20, -373897302),
                h = c(h, l, k, m, f[5], 5, -701558691),
                m = c(m, h, l, k, f[10], 9, 38016083),
                k = c(k, m, h, l, f[15], 14, -660478335),
                l = c(l, k, m, h, f[4], 20, -405537848),
                h = c(h, l, k, m, f[9], 5, 568446438),
                m = c(m, h, l, k, f[14], 9, -1019803690),
                k = c(k, m, h, l, f[3], 14, -187363961),
                l = c(l, k, m, h, f[8], 20, 1163531501),
                h = c(h, l, k, m, f[13], 5, -1444681467),
                m = c(m, h, l, k, f[2], 9, -51403784),
                k = c(k, m, h, l, f[7], 14, 1735328473),
                l =
                    c(l, k, m, h, f[12], 20, -1926607734),
                h = g(l ^ k ^ m, h, l, f[5], 4, -378558),
                m = g(h ^ l ^ k, m, h, f[8], 11, -2022574463),
                k = g(m ^ h ^ l, k, m, f[11], 16, 1839030562),
                l = g(k ^ m ^ h, l, k, f[14], 23, -35309556),
                h = g(l ^ k ^ m, h, l, f[1], 4, -1530992060),
                m = g(h ^ l ^ k, m, h, f[4], 11, 1272893353),
                k = g(m ^ h ^ l, k, m, f[7], 16, -155497632),
                l = g(k ^ m ^ h, l, k, f[10], 23, -1094730640),
                h = g(l ^ k ^ m, h, l, f[13], 4, 681279174),
                m = g(h ^ l ^ k, m, h, f[0], 11, -358537222),
                k = g(m ^ h ^ l, k, m, f[3], 16, -722521979),
                l = g(k ^ m ^ h, l, k, f[6], 23, 76029189),
                h = g(l ^ k ^ m, h, l, f[9], 4, -640364487),
                m = g(h ^ l ^ k, m, h, f[12], 11, -421815835),
                k = g(m ^ h ^ l, k, m, f[15], 16, 530742520),
                l = g(k ^ m ^ h, l, k, f[2], 23, -995338651),
                h = b(h, l, k, m, f[0], 6, -198630844),
                m = b(m, h, l, k, f[7], 10, 1126891415),
                k = b(k, m, h, l, f[14], 15, -1416354905),
                l = b(l, k, m, h, f[5], 21, -57434055),
                h = b(h, l, k, m, f[12], 6, 1700485571),
                m = b(m, h, l, k, f[3], 10, -1894986606),
                k = b(k, m, h, l, f[10], 15, -1051523),
                l = b(l, k, m, h, f[1], 21, -2054922799),
                h = b(h, l, k, m, f[8], 6, 1873313359),
                m = b(m, h, l, k, f[15], 10, -30611744),
                k = b(k, m, h, l, f[6], 15, -1560198380),
                l = b(l, k, m, h, f[13], 21, 1309151649),
                h = b(h, l, k, m, f[4], 6, -145523070),
                m = b(m, h, l, k, f[11],
                    10, -1120210379),
                k = b(k, m, h, l, f[2], 15, 718787259),
                l = b(l, k, m, h, f[9], 21, -343485551);
            e[0] = a(h, e[0]);
            e[1] = a(l, e[1]);
            e[2] = a(k, e[2]);
            e[3] = a(m, e[3])
        }, h = function (a) {
            var b = [],
                e;
            for (e = 0; 64 > e; e += 4) b[e >> 2] = a.charCodeAt(e) + (a.charCodeAt(e + 1) << 8) + (a.charCodeAt(e + 2) << 16) + (a.charCodeAt(e + 3) << 24);
            return b
        }, e = function (a) {
            var b = [],
                e;
            for (e = 0; 64 > e; e += 4) b[e >> 2] = a[e] + (a[e + 1] << 8) + (a[e + 2] << 16) + (a[e + 3] << 24);
            return b
        }, l = function (a) {
            var b = a.length,
                e = [1732584193, -271733879, -1732584194, 271733878],
                c, l, d;
            for (c = 64; c <= b; c += 64) f(e, h(a.substring(c -
                64, c)));
            a = a.substring(c - 64);
            l = a.length;
            d = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
            for (c = 0; c < l; c += 1) d[c >> 2] |= a.charCodeAt(c) << (c % 4 << 3);
            d[c >> 2] |= 128 << (c % 4 << 3);
            if (55 < c)
                for (f(e, d), c = 0; 16 > c; c += 1) d[c] = 0;
            b = (8 * b).toString(16).match(/(.*?)(.{0,8})$/);
            a = parseInt(b[2], 16);
            b = parseInt(b[1], 16) || 0;
            d[14] = a;
            d[15] = b;
            f(e, d);
            return e
        }, m = "0123456789abcdef".split(""),
        k = function (a) {
            var b;
            for (b = 0; b < a.length; b += 1) {
                for (var e = a, h = b, f = a[b], c = "", l = void 0, l = 0; 4 > l; l += 1) c += m[f >> 8 * l + 4 & 15] + m[f >> 8 * l & 15];
                e[h] = c
            }
            return a.join("")
        }, q = function () {
            this.reset()
        };
    "5d41402abc4b2a76b9719d911017c592" !== k(l("hello")) && (a = function (a, b) {
        var e = (a & 65535) + (b & 65535);
        return (a >> 16) + (b >> 16) + (e >> 16) << 16 | e & 65535
    });
    q.prototype.append = function (a) {
        /[\u0080-\uFFFF]/.test(a) && (a = unescape(encodeURIComponent(a)));
        this.appendBinary(a);
        return this
    };
    q.prototype.appendBinary = function (a) {
        this._buff += a;
        this._length += a.length;
        a = this._buff.length;
        var b;
        for (b = 64; b <= a; b += 64) f(this._state, h(this._buff.substring(b - 64, b)));
        this._buff = this._buff.substr(b - 64);
        return this
    };
    q.prototype.end = function (a) {
        var b =
            this._buff,
            e = b.length,
            h, c = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
        for (h = 0; h < e; h += 1) c[h >> 2] |= b.charCodeAt(h) << (h % 4 << 3);
        this._finish(c, e);
        a = a ? this._state : k(this._state);
        this.reset();
        return a
    };
    q.prototype._finish = function (a, b) {
        var e = b,
            h;
        a[e >> 2] |= 128 << (e % 4 << 3);
        if (55 < e)
            for (f(this._state, a), e = 0; 16 > e; e += 1) a[e] = 0;
        h = 8 * this._length;
        h = h.toString(16).match(/(.*?)(.{0,8})$/);
        e = parseInt(h[2], 16);
        h = parseInt(h[1], 16) || 0;
        a[14] = e;
        a[15] = h;
        f(this._state, a)
    };
    q.prototype.reset = function () {
        this._buff = "";
        this._length = 0;
        this._state = [1732584193, -271733879, -1732584194, 271733878];
        return this
    };
    q.prototype.destroy = function () {
        delete this._state;
        delete this._buff;
        delete this._length
    };
    q.hash = function (a, b) {
        /[\u0080-\uFFFF]/.test(a) && (a = unescape(encodeURIComponent(a)));
        var e = l(a);
        return b ? e : k(e)
    };
    q.hashBinary = function (a, b) {
        var e = l(a);
        return b ? e : k(e)
    };
    q.ArrayBuffer = function () {
        this.reset()
    };
    q.ArrayBuffer.prototype.append = function (a) {
        var b = this._concatArrayBuffer(this._buff, a),
            h = b.length;
        this._length += a.byteLength;
        for (a = 64; a <= h; a += 64) f(this._state,
            e(b.subarray(a - 64, a)));
        this._buff = a - 64 < h ? b.subarray(a - 64) : new Uint8Array(0);
        return this
    };
    q.ArrayBuffer.prototype.end = function (a) {
        var b = this._buff,
            e = b.length,
            h = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            c;
        for (c = 0; c < e; c += 1) h[c >> 2] |= b[c] << (c % 4 << 3);
        this._finish(h, e);
        a = a ? this._state : k(this._state);
        this.reset();
        return a
    };
    q.ArrayBuffer.prototype._finish = q.prototype._finish;
    q.ArrayBuffer.prototype.reset = function () {
        this._buff = new Uint8Array(0);
        this._length = 0;
        this._state = [1732584193, -271733879, -1732584194, 271733878];
        return this
    };
    q.ArrayBuffer.prototype.destroy = q.prototype.destroy;
    q.ArrayBuffer.prototype._concatArrayBuffer = function (a, b) {
        var e = a.length,
            h = new Uint8Array(e + b.byteLength);
        h.set(a);
        h.set(new Uint8Array(b), e);
        return h
    };
    q.ArrayBuffer.hash = function (a, b) {
        var h = new Uint8Array(a),
            c = h.length,
            l = [1732584193, -271733879, -1732584194, 271733878],
            d, m, g;
        for (d = 64; d <= c; d += 64) f(l, e(h.subarray(d - 64, d)));
        h = d - 64 < c ? h.subarray(d - 64) : new Uint8Array(0);
        m = h.length;
        g = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
        for (d = 0; d < m; d += 1) g[d >> 2] |=
            h[d] << (d % 4 << 3);
        g[d >> 2] |= 128 << (d % 4 << 3);
        if (55 < d)
            for (f(l, g), d = 0; 16 > d; d += 1) g[d] = 0;
        c = (8 * c).toString(16).match(/(.*?)(.{0,8})$/);
        h = parseInt(c[2], 16);
        c = parseInt(c[1], 16) || 0;
        g[14] = h;
        g[15] = c;
        f(l, g);
        return b ? l : k(l)
    };
    return q
});
"undefined" === typeof window && (window = {});
window.Queue = function (a) {
    var g = this;
    this.next = function () {
        var d = g.queue,
            c = g.remaining,
            b = g.length,
            f = b - c - 1,
            h = g.keys[f];
        if (a.onprogress) a.onprogress(b ? 1 - c / b : 1);
        if (d.length)
            if (g.remaining--, b = (c = "[object Object]" === String(e)) && e.length, a.flatten) a.next(d.shift(), f, h);
            else {
                var e = d[0];
                c && !b && d.shift();
                c && b ? a.next(e.shift(), f, h) : a.next(d.shift(), f, h)
            } else if (a.oncomplete) a.oncomplete()
    };
    this.reset = function (d) {
        if (a.range) {
            var c = a.range,
                b = c.from;
            for (d = []; b <= c.to; b++) d.push(b)
        } else d = d || a.items;
        this.length =
            0;
        this.remaining = -1;
        this.queue = [];
        this.keys = [];
        for (var f in d)
            if ("[object Object]" !== String(d[f]) || a.flatten) this.keys.push(f), this.queue.push(d[f]), this.length++, this.remaining++;
            else {
                c = [];
                this.queue.push(c);
                for (var h in d[f]) c.push(d[f][h]), this.keys.push(h), this.length++, this.remaining++
            }
    };
    this.reset();
    setTimeout(this.next, 1);
    return this
};
"undefined" !== typeof module && module.exports && (module.exports = window.Queue);
Array.prototype.map || (Array.prototype.map = function (a, g) {
    for (var d = this.length, c = Array(d), b = 0; b < d; b++) c[b] = a.call(g, this[b] || this.charAt && this.charAt(b), b, this);
    return c
});
Array.prototype.concat || (Array.prototype.concat = function (a) {
    for (var g = 0; g < a.length; g++) this.push(a[g]);
    return this
});
Array.prototype.indexOf || (Array.prototype.indexOf = function (a) {
    for (var g = 0, d = this.length; g < d; ++g)
        if (this[g] === a) return g;
    return -1
});
(function (a, g, d) {
    function c(a, b, e) {
        var h = a.runtimeStyle && a.runtimeStyle[b],
            c, f = a.style;
        !/^-?[0-9]+\.?[0-9]*(?:px)?$/i.test(e) && /^-?\d/.test(e) && (c = f.left, h && (a.runtimeStyle.left = a.currentStyle.left), f.left = "fontSize" === b ? "1em" : e || 0, e = f.pixelLeft + "px", f.left = c, h && (a.runtimeStyle.left = h));
        return /^(thin|medium|thick)$/i.test(e) ? e : Math.round(parseFloat(e)) + "px"
    }

    function b(a) {
        return parseInt(a, 10)
    }

    function f(a, b, h, c, f, l) {
        b = e.Util.getCSS(b, a, f);
        var d;
        1 === b.length && (f = b[0], b = [], b[0] = f, b[1] = f); - 1 !== b[0].toString().indexOf("%") ?
            (d = parseFloat(b[0]) / 100, f = h.width * d, "backgroundSize" !== a && (f -= (l || c).width * d)) : f = "backgroundSize" === a ? "auto" === b[0] ? c.width : /contain|cover/.test(b[0]) ? e.Util.resizeBounds(c.width, c.height, h.width, h.height, b[0]).width : parseInt(b[0], 10) : parseInt(b[0], 10);
        "auto" === b[1] ? h = f / c.width * c.height : -1 !== b[1].toString().indexOf("%") ? (d = parseFloat(b[1]) / 100, h = h.height * d, "backgroundSize" !== a && (h -= (l || c).height * d)) : h = parseInt(b[1], 10);
        return [f, h]
    }

    function h(a, b) {
        var e = [];
        return {
            storage: e,
            width: a,
            height: b,
            clip: function () {
                e.push({
                    type: "function",
                    name: "clip",
                    arguments: arguments
                })
            },
            translate: function () {
                e.push({
                    type: "function",
                    name: "translate",
                    arguments: arguments
                })
            },
            fill: function () {
                e.push({
                    type: "function",
                    name: "fill",
                    arguments: arguments
                })
            },
            save: function () {
                e.push({
                    type: "function",
                    name: "save",
                    arguments: arguments
                })
            },
            restore: function () {
                e.push({
                    type: "function",
                    name: "restore",
                    arguments: arguments
                })
            },
            fillRect: function () {
                e.push({
                    type: "function",
                    name: "fillRect",
                    arguments: arguments
                })
            },
            createPattern: function () {
                e.push({
                    type: "function",
                    name: "createPattern",
                    arguments: arguments
                })
            },
            drawShape: function () {
                var a = [];
                e.push({
                    type: "function",
                    name: "drawShape",
                    arguments: a
                });
                return {
                    moveTo: function () {
                        a.push({
                            name: "moveTo",
                            arguments: arguments
                        })
                    },
                    lineTo: function () {
                        a.push({
                            name: "lineTo",
                            arguments: arguments
                        })
                    },
                    arcTo: function () {
                        a.push({
                            name: "arcTo",
                            arguments: arguments
                        })
                    },
                    bezierCurveTo: function () {
                        a.push({
                            name: "bezierCurveTo",
                            arguments: arguments
                        })
                    },
                    quadraticCurveTo: function () {
                        a.push({
                            name: "quadraticCurveTo",
                            arguments: arguments
                        })
                    }
                }
            },
            drawImage: function () {
                e.push({
                    type: "function",
                    name: "drawImage",
                    arguments: arguments
                })
            },
            fillText: function () {
                e.push({
                    type: "function",
                    name: "fillText",
                    arguments: arguments
                })
            },
            setVariable: function (a, b) {
                e.push({
                    type: "variable",
                    name: a,
                    arguments: b
                });
                return b
            }
        }
    }
    var e = {}, l;
    e.Util = {};
    e.Util.log = function (b) {
        e.logging && (a.console && a.console.log) && a.console.log(b)
    };
    e.Util.trimText = function (a) {
        return function (b) {
            return a ? a.apply(b) : ((b || "") + "").replace(/^\s+|\s+$/g, "")
        }
    }(String.prototype.trim);
    e.Util.asFloat = function (a) {
        return parseFloat(a)
    };
    (function () {
        var a =
            /((rgba|rgb)\([^\)]+\)(\s-?\d+px){0,})/g,
            b = /(-?\d+px)|(#.+)|(rgb\(.+\))|(rgba\(.+\))/g;
        e.Util.parseTextShadows = function (e) {
            if (!e || "none" === e) return [];
            e = e.match(a);
            for (var h = [], c = 0; e && c < e.length; c++) {
                var f = e[c].match(b);
                h.push({
                    color: f[0],
                    offsetX: f[1] ? f[1].replace("px", "") : 0,
                    offsetY: f[2] ? f[2].replace("px", "") : 0,
                    blur: f[3] ? f[3].replace("px", "") : 0
                })
            }
            return h
        }
    })();
    e.Util.parseBackgroundImage = function (a) {
        var b, e, h, c, f, l = [],
            d, g = 0,
            w = 0,
            v, x, A = function () {
                b && ('"' === e.substr(0, 1) && (e = e.substr(1, e.length - 2)), e &&
                    x.push(e), "-" === b.substr(0, 1) && 0 < (c = b.indexOf("-", 1) + 1) && (h = b.substr(0, c), b = b.substr(c)), l.push({
                        prefix: h,
                        method: b.toLowerCase(),
                        value: f,
                        args: x
                    }));
                x = [];
                b = h = e = f = ""
            };
        A();
        for (var C = 0, D = a.length; C < D; C++)
            if (d = a[C], !(0 === g && -1 < " \r\n\t".indexOf(d))) {
                switch (d) {
                case '"':
                    v ? v === d && (v = null) : v = d;
                    break;
                case "(":
                    if (v) break;
                    else if (0 === g) {
                        g = 1;
                        f += d;
                        continue
                    } else w++;
                    break;
                case ")":
                    if (v) break;
                    else if (1 === g)
                        if (0 === w) {
                            g = 0;
                            f += d;
                            A();
                            continue
                        } else w--;
                    break;
                case ",":
                    if (!v)
                        if (0 === g) {
                            A();
                            continue
                        } else if (1 === g && 0 === w && !b.match(/^url$/i)) {
                        x.push(e);
                        e = "";
                        f += d;
                        continue
                    }
                }
                f += d;
                0 === g ? b += d : e += d
            }
        A();
        return l
    };
    e.Util.Bounds = function (a) {
        var b, e = {};
        a.getBoundingClientRect && (b = a.getBoundingClientRect(), e.top = b.top, e.bottom = b.bottom || b.top + b.height, e.left = b.left, e.width = a.offsetWidth, e.height = a.offsetHeight);
        return e
    };
    e.Util.OffsetBounds = function (a) {
        var b = a.offsetParent ? e.Util.OffsetBounds(a.offsetParent) : {
            top: 0,
            left: 0
        };
        return {
            top: a.offsetTop + b.top,
            bottom: a.offsetTop + a.offsetHeight + b.top,
            left: a.offsetLeft + b.left,
            width: a.offsetWidth,
            height: a.offsetHeight
        }
    };
    e.Util.getCSS = function (a, h, f) {
        void 0 !== a && (l = g.defaultView.getComputedStyle(a, null));
        var p = l[h];
        if (/^background(Size|Position)$/.test(h)) {
            a: {
                p = (p || "").split(",");
                p = p[f || 0] || p[0] || "auto";
                p = e.Util.trimText(p).split(" ");
                if ("backgroundSize" !== h || p[0] && !p[0].match(/cover|contain|auto/)) {
                    p[0] = -1 === p[0].indexOf("%") ? c(a, h + "X", p[0]) : p[0];
                    if (p[1] === d)
                        if ("backgroundSize" === h) {
                            p[1] = "auto";
                            a = p;
                            break a
                        } else p[1] = p[0];
                    p[1] = -1 === p[1].indexOf("%") ? c(a, h + "Y", p[1]) : p[1]
                }
                a = p
            }
            return a
        }
        return /border(Top|Bottom)(Left|Right)Radius/.test(h) ?
            (a = p.split(" "), 1 >= a.length && (a[1] = a[0]), a.map(b)) : p
    };
    e.Util.resizeBounds = function (a, b, e, h, c) {
        a /= b;
        c && "auto" !== c ? e / h < a ^ "contain" === c ? (e = h, c = h * a) : (c = e, e /= a) : (c = e, e = h);
        return {
            width: c,
            height: e
        }
    };
    e.Util.BackgroundPosition = function (a, b, e, h, c) {
        a = f("backgroundPosition", a, b, e, h, c);
        return {
            left: a[0],
            top: a[1]
        }
    };
    e.Util.BackgroundSize = function (a, b, e, h) {
        a = f("backgroundSize", a, b, e, h);
        return {
            width: a[0],
            height: a[1]
        }
    };
    e.Util.Extend = function (a, b) {
        for (var e in a) a.hasOwnProperty(e) && (b[e] = a[e]);
        return b
    };
    e.Util.Children =
        function (a) {
            var b;
            try {
                var h;
                if (a.nodeName && "IFRAME" === a.nodeName.toUpperCase()) h = a.contentDocument || a.contentWindow.document;
                else {
                    var c = a.childNodes;
                    a = [];
                    if (null !== c) {
                        var f = a.length,
                            l = 0;
                        if ("number" === typeof c.length)
                            for (var g = c.length; l < g; l++) a[f++] = c[l];
                        else
                            for (; c[l] !== d;) a[f++] = c[l++];
                        a.length = f
                    }
                    h = a
                }
                b = h
            } catch (u) {
                e.Util.log("html2canvas.Util.Children failed with exception: " + u.message), b = []
            }
            return b
    };
    e.Util.isTransparent = function (a) {
        return "transparent" === a || "rgba(0, 0, 0, 0)" === a
    };
    e.Util.Font = function () {
        var a = {};
        return function (b, e, h) {
            if (a[b + "-" + e] !== d) return a[b + "-" + e];
            var c = h.createElement("div"),
                f = h.createElement("img"),
                l = h.createElement("span"),
                g;
            c.style.visibility = "hidden";
            c.style.fontFamily = b;
            c.style.fontSize = e;
            c.style.margin = 0;
            c.style.padding = 0;
            h.body.appendChild(c);
            f.src = "data:image/gif;base64,R0lGODlhAQABAIABAP///wAAACwAAAAAAQABAAACAkQBADs=";
            f.width = 1;
            f.height = 1;
            f.style.margin = 0;
            f.style.padding = 0;
            f.style.verticalAlign = "baseline";
            l.style.fontFamily = b;
            l.style.fontSize = e;
            l.style.margin = 0;
            l.style.padding =
                0;
            l.appendChild(h.createTextNode("Hidden Text"));
            c.appendChild(l);
            c.appendChild(f);
            g = f.offsetTop - l.offsetTop + 1;
            c.removeChild(l);
            c.appendChild(h.createTextNode("Hidden Text"));
            c.style.lineHeight = "normal";
            f.style.verticalAlign = "super";
            f = {
                baseline: g,
                lineWidth: 1,
                middle: f.offsetTop - c.offsetTop + 1
            };
            a[b + "-" + e] = f;
            h.body.removeChild(c);
            return f
        }
    }();
    (function () {
        function a(e) {
            return function (a) {
                try {
                    e.addColorStop(a.stop, a.color)
                } catch (h) {
                    b.log(["failed to add color stop: ", h, "; tried to add: ", a])
                }
            }
        }
        var b = e.Util,
            h = {};
        e.Generate = h;
        var c = [/^(-webkit-linear-gradient)\(([a-z\s]+)([\w\d\.\s,%\(\)]+)\)$/, /^(-o-linear-gradient)\(([a-z\s]+)([\w\d\.\s,%\(\)]+)\)$/, /^(-webkit-gradient)\((linear|radial),\s((?:\d{1,3}%?)\s(?:\d{1,3}%?),\s(?:\d{1,3}%?)\s(?:\d{1,3}%?))([\w\d\.\s,%\(\)\-]+)\)$/, /^(-moz-linear-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?))([\w\d\.\s,%\(\)]+)\)$/, /^(-webkit-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s([a-z\-]+)([\w\d\.\s,%\(\)]+)\)$/, /^(-moz-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s?([a-z\-]*)([\w\d\.\s,%\(\)]+)\)$/,
            /^(-o-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s([a-z\-]+)([\w\d\.\s,%\(\)]+)\)$/
        ];
        h.parseGradient = function (a, b) {
            var e, h, f = c.length,
                l, d, k, m;
            for (h = 0; h < f && !(l = a.match(c[h])); h += 1);
            if (l) switch (l[1]) {
            case "-webkit-linear-gradient":
            case "-o-linear-gradient":
                e = {
                    type: "linear",
                    x0: null,
                    y0: null,
                    x1: null,
                    y1: null,
                    colorStops: []
                };
                if (f = l[2].match(/\w+/g))
                    for (d = f.length, h = 0; h < d; h += 1) switch (f[h]) {
                    case "top":
                        e.y0 = 0;
                        e.y1 = b.height;
                        break;
                    case "right":
                        e.x0 = b.width;
                        e.x1 = 0;
                        break;
                    case "bottom":
                        e.y0 = b.height;
                        e.y1 = 0;
                        break;
                    case "left":
                        e.x0 = 0, e.x1 = b.width
                    }
                null === e.x0 && null === e.x1 && (e.x0 = e.x1 = b.width / 2);
                null === e.y0 && null === e.y1 && (e.y0 = e.y1 = b.height / 2);
                if (f = l[3].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}(?:%|px))?)+/g))
                    for (d = f.length, k = 1 / Math.max(d - 1, 1), h = 0; h < d; h += 1) m = f[h].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%|px)?/), m[2] ? (l = parseFloat(m[2]), l = "%" === m[3] ? l / 100 : l / b.width) : l = h * k, e.colorStops.push({
                        color: m[1],
                        stop: l
                    });
                break;
            case "-webkit-gradient":
                e = {
                    type: "radial" === l[2] ? "circle" : l[2],
                    x0: 0,
                    y0: 0,
                    x1: 0,
                    y1: 0,
                    colorStops: []
                };
                if (f = l[3].match(/(\d{1,3})%?\s(\d{1,3})%?,\s(\d{1,3})%?\s(\d{1,3})%?/)) e.x0 = f[1] * b.width / 100, e.y0 = f[2] * b.height / 100, e.x1 = f[3] * b.width / 100, e.y1 = f[4] * b.height / 100;
                if (f = l[4].match(/((?:from|to|color-stop)\((?:[0-9\.]+,\s)?(?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)\))+/g))
                    for (d = f.length, h = 0; h < d; h += 1) m = f[h].match(/(from|to|color-stop)\(([0-9\.]+)?(?:,\s)?((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\)/),
                l = parseFloat(m[2]), "from" === m[1] && (l = 0), "to" === m[1] && (l = 1), e.colorStops.push({
                    color: m[3],
                    stop: l
                });
                break;
            case "-moz-linear-gradient":
                e = {
                    type: "linear",
                    x0: 0,
                    y0: 0,
                    x1: 0,
                    y1: 0,
                    colorStops: []
                };
                if (f = l[2].match(/(\d{1,3})%?\s(\d{1,3})%?/)) e.x0 = f[1] * b.width / 100, e.y0 = f[2] * b.height / 100, e.x1 = b.width - e.x0, e.y1 = b.height - e.y0;
                if (f = l[3].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}%)?)+/g))
                    for (d = f.length, k = 1 / Math.max(d - 1, 1), h = 0; h < d; h += 1) m = f[h].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%)?/),
                m[2] ? (l = parseFloat(m[2]), m[3] && (l /= 100)) : l = h * k, e.colorStops.push({
                    color: m[1],
                    stop: l
                });
                break;
            case "-webkit-radial-gradient":
            case "-moz-radial-gradient":
            case "-o-radial-gradient":
                e = {
                    type: "circle",
                    x0: 0,
                    y0: 0,
                    x1: b.width,
                    y1: b.height,
                    cx: 0,
                    cy: 0,
                    rx: 0,
                    ry: 0,
                    colorStops: []
                };
                if (f = l[2].match(/(\d{1,3})%?\s(\d{1,3})%?/)) e.cx = f[1] * b.width / 100, e.cy = f[2] * b.height / 100;
                f = l[3].match(/\w+/);
                m = l[4].match(/[a-z\-]*/);
                if (f && m) switch (m[0]) {
                case "farthest-corner":
                case "cover":
                case "":
                    h = Math.sqrt(Math.pow(e.cx, 2) + Math.pow(e.cy,
                        2));
                    f = Math.sqrt(Math.pow(e.cx, 2) + Math.pow(e.y1 - e.cy, 2));
                    d = Math.sqrt(Math.pow(e.x1 - e.cx, 2) + Math.pow(e.y1 - e.cy, 2));
                    m = Math.sqrt(Math.pow(e.x1 - e.cx, 2) + Math.pow(e.cy, 2));
                    e.rx = e.ry = Math.max(h, f, d, m);
                    break;
                case "closest-corner":
                    h = Math.sqrt(Math.pow(e.cx, 2) + Math.pow(e.cy, 2));
                    f = Math.sqrt(Math.pow(e.cx, 2) + Math.pow(e.y1 - e.cy, 2));
                    d = Math.sqrt(Math.pow(e.x1 - e.cx, 2) + Math.pow(e.y1 - e.cy, 2));
                    m = Math.sqrt(Math.pow(e.x1 - e.cx, 2) + Math.pow(e.cy, 2));
                    e.rx = e.ry = Math.min(h, f, d, m);
                    break;
                case "farthest-side":
                    "circle" === f[0] ? e.rx =
                        e.ry = Math.max(e.cx, e.cy, e.x1 - e.cx, e.y1 - e.cy) : (e.type = f[0], e.rx = Math.max(e.cx, e.x1 - e.cx), e.ry = Math.max(e.cy, e.y1 - e.cy));
                    break;
                case "closest-side":
                case "contain":
                    "circle" === f[0] ? e.rx = e.ry = Math.min(e.cx, e.cy, e.x1 - e.cx, e.y1 - e.cy) : (e.type = f[0], e.rx = Math.min(e.cx, e.x1 - e.cx), e.ry = Math.min(e.cy, e.y1 - e.cy))
                }
                if (f = l[5].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}(?:%|px))?)+/g))
                    for (d = f.length, k = 1 / Math.max(d - 1, 1), h = 0; h < d; h += 1) m = f[h].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%|px)?/),
                m[2] ? (l = parseFloat(m[2]), l = "%" === m[3] ? l / 100 : l / b.width) : l = h * k, e.colorStops.push({
                    color: m[1],
                    stop: l
                })
            }
            return e
        };
        h.Gradient = function (b, h) {
            if (0 !== h.width && 0 !== h.height) {
                var f = g.createElement("canvas"),
                    c = f.getContext("2d"),
                    l, d;
                f.width = h.width;
                f.height = h.height;
                if (l = e.Generate.parseGradient(b, h)) switch (l.type) {
                case "linear":
                    d = c.createLinearGradient(l.x0, l.y0, l.x1, l.y1);
                    l.colorStops.forEach(a(d));
                    c.fillStyle = d;
                    c.fillRect(0, 0, h.width, h.height);
                    break;
                case "circle":
                    d = c.createRadialGradient(l.cx, l.cy, 0, l.cx,
                        l.cy, l.rx);
                    l.colorStops.forEach(a(d));
                    c.fillStyle = d;
                    c.fillRect(0, 0, h.width, h.height);
                    break;
                case "ellipse":
                    var k = g.createElement("canvas"),
                        q = k.getContext("2d");
                    d = Math.max(l.rx, l.ry);
                    var p = 2 * d;
                    k.width = k.height = p;
                    d = q.createRadialGradient(l.rx, l.ry, 0, l.rx, l.ry, d);
                    l.colorStops.forEach(a(d));
                    q.fillStyle = d;
                    q.fillRect(0, 0, p, p);
                    c.fillStyle = l.colorStops[l.colorStops.length - 1].color;
                    c.fillRect(0, 0, f.width, f.height);
                    c.drawImage(k, l.cx - l.rx, l.cy - l.ry, 2 * l.rx, 2 * l.ry)
                }
                return f
            }
        };
        h.ListAlpha = function (a) {
            var b = "",
                e;
            do e = a % 26, b = String.fromCharCode(e + 64) + b, a /= 26; while (26 < 26 * a);
            return b
        };
        h.ListRoman = function (a) {
            var b = "M CM D CD C XC L XL X IX V IV I".split(" "),
                e = [1E3, 900, 500, 400, 100, 90, 50, 40, 10, 9, 5, 4, 1],
                h = "",
                f, c = b.length;
            if (0 >= a || 4E3 <= a) return a;
            for (f = 0; f < c; f += 1)
                for (; a >= e[f];) a -= e[f], h += b[f];
            return h
        }
    })();
    e.Parse = function (b, f) {
        function c(a, b) {
            var e = parseInt($(a, b), 10);
            return isNaN(e) ? 0 : e
        }

        function l(a, b, e, h, f, c) {
            "transparent" !== c && (a.setVariable("fillStyle", c), a.fillRect(b, e, h, f))
        }

        function r(a, b, e) {
            if (0 < a.length) return b +
                e.toUpperCase()
        }

        function t(a, b) {
            switch (b) {
            case "lowercase":
                return a.toLowerCase();
            case "capitalize":
                return a.replace(/(^|\s|:|-|\(|\))([a-z])/g, r);
            case "uppercase":
                return a.toUpperCase();
            default:
                return a
            }
        }

        function s(a) {
            return /^(normal|none|0px)$/.test(a)
        }

        function u(a, b, e, h) {
            var f = $(b, "fontWeight"),
                c = $(b, "fontFamily"),
                l = $(b, "fontSize"),
                d = ia.parseTextShadows($(b, "textShadow"));
            switch (parseInt(f, 10)) {
            case 401:
                f = "bold";
                break;
            case 400:
                f = "normal"
            }
            a.setVariable("fillStyle", h);
            a.setVariable("font", [$(b, "fontStyle"),
                $(b, "fontVariant"), f, l, c
            ].join(" "));
            a.setVariable("textAlign", "left");
            d.length && (a.setVariable("shadowColor", d[0].color), a.setVariable("shadowOffsetX", d[0].offsetX), a.setVariable("shadowOffsetY", d[0].offsetY), a.setVariable("shadowBlur", d[0].blur));
            if ("none" !== e) return ia.Font(c, l, ga)
        }

        function y(a, b, e) {
            var h = e.ctx,
                c = $(a, "color"),
                d = $(a, "textDecoration"),
                m = $(a, "textAlign"),
                g, q, r = b,
                y = 0;
            0 < ia.trimText(b.nodeValue).length && (b.nodeValue = t(b.nodeValue, $(a, "textTransform")), m = m.replace(["-webkit-auto"], ["auto"]),
                q = !f.letterRendering && /^(left|right|justify|auto)$/.test(m) && s($(a, "letterSpacing")) ? b.nodeValue.split(/(\b| )/) : b.nodeValue.split(""), g = u(h, a, d, c), f.chinese && q.forEach(function (a, b) {
                    /.*[\u4E00-\u9FA5].*$/.test(a) && (a = a.split(""), a.unshift(b, 1), q.splice.apply(q, a))
                }), q.forEach(function (a, b) {
                    var f, k = b < q.length - 1;
                    f = e.transform.matrix;
                    var m;
                    if (Ga.rangeBounds && !f) {
                        if ("none" !== d || 0 !== ia.trimText(a).length) f = r, k = y, m = ga.createRange(), m.setStart(f, k), m.setEnd(f, k + a.length), m = m.getBoundingClientRect();
                        y +=
                            a.length
                    } else if (r && "string" === typeof r.nodeValue) {
                        var k = k ? r.splitText(a.length) : null,
                            t = r;
                        m = t.parentNode;
                        var s = ga.createElement("wrapper"),
                            u = t.cloneNode(!0);
                        s.appendChild(t.cloneNode(!0));
                        m.replaceChild(s, t);
                        f = f ? ia.OffsetBounds(s) : ia.Bounds(s);
                        m.replaceChild(u, s);
                        m = f;
                        r = k
                    }
                    if (f = m) switch (k = f.left, m = f.bottom, null !== a && 0 < ia.trimText(a).length && h.fillText(a, k, m), d) {
                    case "underline":
                        l(h, f.left, Math.round(f.top + g.baseline + g.lineWidth), f.width, 1, c);
                        break;
                    case "overline":
                        l(h, f.left, Math.round(f.top), f.width,
                            1, c);
                        break;
                    case "line-through":
                        l(h, f.left, Math.ceil(f.top + g.middle + g.lineWidth), f.width, 1, c)
                    }
                }))
        }

        function w(a, b, h) {
            var f;
            b = b.ctx;
            var c = $(a, "listStyleType");
            if (/^(decimal|decimal-leading-zero|upper-alpha|upper-latin|upper-roman|lower-alpha|lower-greek|lower-latin|lower-roman)$/i.test(c)) {
                var l;
                l = -1;
                var d = 1,
                    k = a.parentNode.childNodes;
                if (a.parentNode) {
                    for (; k[++l] !== a;) 1 === k[l].nodeType && d++;
                    l = d
                } else l = -1;
                switch (c) {
                case "decimal":
                    f = l;
                    break;
                case "decimal-leading-zero":
                    f = 1 === l.toString().length ? "0" + l.toString() :
                        l.toString();
                    break;
                case "upper-roman":
                    f = e.Generate.ListRoman(l);
                    break;
                case "lower-roman":
                    f = e.Generate.ListRoman(l).toLowerCase();
                    break;
                case "lower-alpha":
                    f = e.Generate.ListAlpha(l).toLowerCase();
                    break;
                case "upper-alpha":
                    f = e.Generate.ListAlpha(l)
                }
                f += ". ";
                l = ga.createElement("boundelement");
                l.style.display = "inline";
                d = a.style.listStyleType;
                a.style.listStyleType = "none";
                l.appendChild(ga.createTextNode(f));
                a.insertBefore(l, a.firstChild);
                c = ia.Bounds(l);
                a.removeChild(l);
                a.style.listStyleType = d;
                u(b, a, "none",
                    $(a, "color"));
                "inside" === $(a, "listStylePosition") && (b.setVariable("textAlign", "left"), a = h.left, h = c.bottom, null !== f && 0 < ia.trimText(f).length && b.fillText(f, a, h))
            }
        }

        function v(a) {
            return (a = b[a]) && !0 === a.succeeded ? a.img : !1
        }

        function x(a, b) {
            var e = Math.max(a.left, b.left),
                h = Math.max(a.top, b.top),
                f = Math.min(a.left + a.width, b.left + b.width),
                c = Math.min(a.top + a.height, b.top + b.height);
            return {
                left: e,
                top: h,
                width: f - e,
                height: c - h
            }
        }

        function A(a, b, e, h, f) {
            var l = c(b, "paddingLeft"),
                d = c(b, "paddingTop"),
                k = c(b, "paddingRight");
            b = c(b, "paddingBottom");
            K(a, e, 0, 0, e.width, e.height, h.left + l + f[3].width, h.top + d + f[0].width, h.width - (f[1].width + f[3].width + l + k), h.height - (f[0].width + f[2].width + d + b))
        }

        function C(a) {
            return ["Top", "Right", "Bottom", "Left"].map(function (b) {
                return {
                    width: c(a, "border" + b + "Width"),
                    color: $(a, "border" + b + "Color")
                }
            })
        }

        function D(a) {
            return ["TopLeft", "TopRight", "BottomRight", "BottomLeft"].map(function (b) {
                return $(a, "border" + b + "Radius")
            })
        }

        function B(a, b, e, h) {
            var f = function (a, b, e) {
                return {
                    x: a.x + (b.x - a.x) * e,
                    y: a.y + (b.y - a.y) *
                        e
                }
            };
            return {
                start: a,
                startControl: b,
                endControl: e,
                end: h,
                subdivide: function (c) {
                    var l = f(a, b, c),
                        d = f(b, e, c),
                        k = f(e, h, c),
                        m = f(l, d, c),
                        d = f(d, k, c);
                    c = f(m, d, c);
                    return [B(a, l, m, c), B(c, d, k, h)]
                },
                curveTo: function (a) {
                    a.push(["bezierCurve", b.x, b.y, e.x, e.y, h.x, h.y])
                },
                curveToReversed: function (h) {
                    h.push(["bezierCurve", e.x, e.y, b.x, b.y, a.x, a.y])
                }
            }
        }

        function F(a, b, e, h, f, c, l) {
            0 < b[0] || 0 < b[1] ? (a.push(["line", h[0].start.x, h[0].start.y]), h[0].curveTo(a), h[1].curveTo(a)) : a.push(["line", c, l]);
            (0 < e[0] || 0 < e[1]) && a.push(["line", f[0].start.x,
                f[0].start.y
            ])
        }

        function G(a, b, e, h, f, c, l) {
            var d = [];
            0 < b[0] || 0 < b[1] ? (d.push(["line", h[1].start.x, h[1].start.y]), h[1].curveTo(d)) : d.push(["line", a.c1[0], a.c1[1]]);
            0 < e[0] || 0 < e[1] ? (d.push(["line", c[0].start.x, c[0].start.y]), c[0].curveTo(d), d.push(["line", l[0].end.x, l[0].end.y]), l[0].curveToReversed(d)) : (d.push(["line", a.c2[0], a.c2[1]]), d.push(["line", a.c3[0], a.c3[1]]));
            0 < b[0] || 0 < b[1] ? (d.push(["line", f[1].end.x, f[1].end.y]), f[1].curveToReversed(d)) : d.push(["line", a.c4[0], a.c4[1]]);
            return d
        }

        function z(a,
            b, e) {
            var h, f, c, l, d, k, m, g, q = b.left,
                p = b.top,
                t = b.width,
                r = b.height,
                s, u, y, w, v = D(a);
            g = b.left;
            s = b.top;
            k = b.width;
            m = b.height;
            f = v[0][0];
            c = v[0][1];
            l = v[1][0];
            d = v[1][1];
            var x = v[2][0],
                z = v[2][1];
            u = v[3][0];
            y = v[3][1];
            var C = k - l,
                A = m - z,
                J = k - x,
                B = m - y;
            h = va(g, s, f, c).topLeft.subdivide(0.5);
            f = va(g + e[3].width, s + e[0].width, Math.max(0, f - e[3].width), Math.max(0, c - e[0].width)).topLeft.subdivide(0.5);
            c = va(g + C, s, l, d).topRight.subdivide(0.5);
            l = va(g + Math.min(C, k + e[3].width), s + e[0].width, C > k + e[3].width ? 0 : l - e[3].width, d - e[0].width).topRight.subdivide(0.5);
            d = va(g + J, s + A, x, z).bottomRight.subdivide(0.5);
            k = va(g + Math.min(J, k + e[3].width), s + Math.min(A, m + e[0].width), Math.max(0, x - e[1].width), Math.max(0, z - e[2].width)).bottomRight.subdivide(0.5);
            m = va(g, s + B, u, y).bottomLeft.subdivide(0.5);
            g = va(g + e[3].width, s + B, Math.max(0, u - e[3].width), Math.max(0, y - e[2].width)).bottomLeft.subdivide(0.5);
            s = [];
            switch ($(a, "backgroundClip")) {
            case "content-box":
            case "padding-box":
                F(s, v[0], v[1], f, l, b.left + e[3].width, b.top + e[0].width);
                F(s, v[1], v[2], l, k, b.left + b.width - e[1].width, b.top + e[0].width);
                F(s, v[2], v[3], k, g, b.left + b.width - e[1].width, b.top + b.height - e[2].width);
                F(s, v[3], v[0], g, f, b.left + e[3].width, b.top + b.height - e[2].width);
                break;
            default:
                F(s, v[0], v[1], h, c, b.left, b.top), F(s, v[1], v[2], c, d, b.left + b.width, b.top), F(s, v[2], v[3], d, m, b.left + b.width, b.top + b.height), F(s, v[3], v[0], m, h, b.left, b.top + b.height)
            }
            B = {
                clip: s,
                borders: []
            };
            for (a = 0; 4 > a; a++)
                if (0 < e[a].width) {
                    b = q;
                    s = p;
                    u = t;
                    y = r - e[2].width;
                    switch (a) {
                    case 0:
                        y = e[0].width;
                        w = G({
                                c1: [b, s],
                                c2: [b + u, s],
                                c3: [b + u - e[1].width, s + y],
                                c4: [b + e[3].width, s + y]
                            }, v[0], v[1],
                            h, f, c, l);
                        break;
                    case 1:
                        b = q + t - e[1].width;
                        u = e[1].width;
                        w = G({
                            c1: [b + u, s],
                            c2: [b + u, s + y + e[2].width],
                            c3: [b, s + y],
                            c4: [b, s + e[0].width]
                        }, v[1], v[2], c, l, d, k);
                        break;
                    case 2:
                        s = s + r - e[2].width;
                        y = e[2].width;
                        w = G({
                            c1: [b + u, s + y],
                            c2: [b, s + y],
                            c3: [b + e[3].width, s],
                            c4: [b + u - e[3].width, s]
                        }, v[2], v[3], d, k, m, g);
                        break;
                    case 3:
                        u = e[3].width, w = G({
                            c1: [b, s + y + e[2].width],
                            c2: [b, s],
                            c3: [b + u, s + e[0].width],
                            c4: [b + u, s + y]
                        }, v[3], v[0], m, g, h, f)
                    }
                    B.borders.push({
                        args: w,
                        color: e[a].color
                    })
                }
            return B
        }

        function J(a, b) {
            var e = a.drawShape();
            b.forEach(function (a,
                b) {
                e[0 === b ? "moveTo" : a[0] + "To"].apply(null, a.slice(1))
            });
            return e
        }

        function O(a, b, e) {
            var h = ga.createElement("valuewrap");
            "lineHeight textAlign fontFamily color fontSize paddingLeft paddingTop width height border borderLeftWidth borderTopWidth".split(" ").forEach(function (b) {
                try {
                    h.style[b] = $(a, b)
                } catch (e) {
                    ia.log("html2canvas: Parse: Exception caught in renderFormValue: " + e.message)
                }
            });
            h.style.borderColor = "black";
            h.style.borderStyle = "solid";
            h.style.display = "block";
            h.style.position = "absolute";
            if (/^(submit|reset|button|text|password)$/.test(a.type) ||
                "SELECT" === a.nodeName) h.style.lineHeight = $(a, "height");
            h.style.top = b.top + "px";
            h.style.left = b.left + "px";
            b = "SELECT" === a.nodeName ? (a.options[a.selectedIndex] || 0).text : a.value;
            b || (b = a.placeholder);
            b = ga.createTextNode(b);
            h.appendChild(b);
            Ha.appendChild(h);
            y(a, b, e);
            Ha.removeChild(h)
        }

        function K(a) {
            a.drawImage.apply(a, Array.prototype.slice.call(arguments, 1))
        }

        function R(b, e) {
            var h = a.getComputedStyle(b, e);
            if (h && h.content && "none" !== h.content && "-moz-alt-content" !== h.content && "none" !== h.display) {
                var f = h.content +
                    "",
                    c = f.substr(0, 1);
                c === f.substr(f.length - 1) && c.match(/'|"/) && (f = f.substr(1, f.length - 2));
                var c = "url" === f.substr(0, 3),
                    l = g.createElement(c ? "img" : "span");
                l.className = Aa + "-before " + Aa + "-after";
                Object.keys(h).filter(N).forEach(function (a) {
                    try {
                        l.style[a] = h[a]
                    } catch (b) {
                        ia.log(["Tried to assign readonly property ", a, "Error:", b])
                    }
                });
                c ? l.src = ia.parseBackgroundImage(f)[0].args[0] : l.innerHTML = f;
                return l
            }
        }

        function N(b) {
            return isNaN(a.parseInt(b, 10))
        }

        function E(a, b) {
            var e = R(a, ":before"),
                h = R(a, ":after");
            if (e || h) e &&
                (a.className += " " + Aa + "-before", a.parentNode.insertBefore(e, a), ra(e, b, !0), a.parentNode.removeChild(e), a.className = a.className.replace(Aa + "-before", "").trim()), h && (a.className += " " + Aa + "-after", a.appendChild(h), ra(h, b, !0), a.removeChild(h), a.className = a.className.replace(Aa + "-after", "").trim())
        }

        function aa(a, b, e, h) {
            var f = Math.round(h.left + e.left);
            e = Math.round(h.top + e.top);
            a.createPattern(b);
            a.translate(f, e);
            a.fill();
            a.translate(-f, -e)
        }

        function da(a, b, e, h, f, c, l, d) {
            var k = [];
            k.push(["line", Math.round(f),
                Math.round(c)
            ]);
            k.push(["line", Math.round(f + l), Math.round(c)]);
            k.push(["line", Math.round(f + l), Math.round(d + c)]);
            k.push(["line", Math.round(f), Math.round(d + c)]);
            J(a, k);
            a.save();
            a.clip();
            aa(a, b, e, h);
            a.restore()
        }

        function X(a, b, e) {
            for (var h = $(a, "backgroundImage"), f = ia.parseBackgroundImage(h), c, l = f.length; l--;)
                if (h = f[l], h.args && 0 !== h.args.length)
                    if (c = v("url" === h.method ? h.args[0] : h.value)) {
                        var d = a,
                            h = b,
                            k = e,
                            m = c;
                        c = l;
                        var g = ia.BackgroundSize(d, h, m, c),
                            q = ia.BackgroundPosition(d, h, m, c, g),
                            d = $(d, "backgroundRepeat").split(",").map(ia.trimText);
                        if (m.width !== g.width || m.height !== g.height) {
                            var p = void 0,
                                t = ga.createElement("canvas");
                            t.width = g.width;
                            t.height = g.height;
                            p = t.getContext("2d");
                            K(p, m, 0, 0, m.width, m.height, 0, 0, g.width, g.height);
                            m = t
                        }
                        d = d[c] || d[0];
                        switch (d) {
                        case "repeat-x":
                            da(k, m, q, h, h.left, h.top + q.top, 99999, m.height);
                            break;
                        case "repeat-y":
                            da(k, m, q, h, h.left + q.left, h.top, m.width, 99999);
                            break;
                        case "no-repeat":
                            da(k, m, q, h, h.left + q.left, h.top + q.top, m.width, m.height);
                            break;
                        default:
                            aa(k, m, q, {
                                top: h.top,
                                left: h.left,
                                width: m.width,
                                height: m.height
                            })
                        }
                    } else ia.log("html2canvas: Error loading background:",
                        h)
        }

        function la(a) {
            return a.replace("px", "")
        }

        function V(a, b) {
            var e = $(a, "transform") || $(a, "-webkit-transform") || $(a, "-moz-transform") || $(a, "-ms-transform") || $(a, "-o-transform"),
                h = $(a, "transform-origin") || $(a, "-webkit-transform-origin") || $(a, "-moz-transform-origin") || $(a, "-ms-transform-origin") || $(a, "-o-transform-origin") || "0px 0px",
                h = h.split(" ").map(la).map(ia.asFloat),
                f;
            if (e && "none" !== e && (e = e.match(sa))) switch (e[1]) {
            case "matrix":
                f = e[2].split(",").map(ia.trimText).map(ia.asFloat)
            }
            return {
                origin: h,
                matrix: f
            }
        }

        function U(a, b, e, c) {
            var l = h(b ? e.width : Math.max(Math.max(ga.body.scrollWidth, ga.documentElement.scrollWidth), Math.max(ga.body.offsetWidth, ga.documentElement.offsetWidth), Math.max(ga.body.clientWidth, ga.documentElement.clientWidth)), b ? e.height : Math.max(Math.max(ga.body.scrollHeight, ga.documentElement.scrollHeight), Math.max(ga.body.offsetHeight, ga.documentElement.offsetHeight), Math.max(ga.body.clientHeight, ga.documentElement.clientHeight)));
            c = {
                ctx: l,
                opacity: l.setVariable("globalAlpha", $(a,
                    "opacity") * (b ? b.opacity : 1)),
                cssPosition: $(a, "position"),
                borders: C(a),
                transform: c,
                clip: b && b.clip ? ia.Extend({}, b.clip) : null
            };
            var d = "static" !== c.cssPosition,
                m = d ? $(a, "zIndex") : "auto",
                g = $(a, "opacity"),
                q = "none" !== $(a, "cssFloat");
            c.zIndex = l = {
                zindex: m,
                children: []
            };
            l.isPositioned = d;
            l.isFloated = q;
            l.opacity = g;
            l.ownStacking = "auto" !== m || 1 > g;
            b && b.zIndex.children.push(c);
            !0 === f.useOverflow && (!0 === /(hidden|scroll|auto)/.test($(a, "overflow")) && !1 === /(BODY)/i.test(a.nodeName)) && (c.clip = c.clip ? x(c.clip, e) : e);
            return c
        }

        function ja(a, b, e) {
            a = {
                left: b.left + a[3].width,
                top: b.top + a[0].width,
                width: b.width - (a[1].width + a[3].width),
                height: b.height - (a[0].width + a[2].width)
            };
            e && (a = x(a, e));
            return a
        }

        function ma(a, b) {
            var e = b.matrix ? ia.OffsetBounds(a) : ia.Bounds(a);
            b.origin[0] += e.left;
            b.origin[1] += e.top;
            return e
        }

        function pa(a, b, e, h) {
            var f = V(a, b),
                c = ma(a, f),
                d;
            b = U(a, b, c, f);
            var f = b.borders,
                k = b.ctx,
                m = ja(f, c, b.clip),
                g = z(a, c, f),
                q = Ia.test(a.nodeName) ? "#efefef" : $(a, "backgroundColor");
            J(k, g.clip);
            k.save();
            k.clip();
            0 < m.height && 0 < m.width && !h ?
                (l(k, c.left, c.top, c.width, c.height, q), X(a, m, k)) : h && (b.backgroundColor = q);
            k.restore();
            g.borders.forEach(function (a) {
                var b = a.args;
                a = a.color;
                "transparent" !== a && (k.setVariable("fillStyle", a), J(k, b), k.fill())
            });
            e || E(a, b);
            switch (a.nodeName) {
            case "IMG":
                (d = v(a.getAttribute("src"))) ? A(k, a, d, c, f) : ia.log("html2canvas: Error loading <img>:" + a.getAttribute("src"));
                break;
            case "INPUT":
                /^(text|url|email|submit|button|reset)$/.test(a.type) && 0 < (a.value || a.placeholder || "").length && O(a, c, b);
                break;
            case "TEXTAREA":
                0 < (a.value ||
                    a.placeholder || "").length && O(a, c, b);
                break;
            case "SELECT":
                0 < (a.options || a.placeholder || "").length && O(a, c, b);
                break;
            case "LI":
                w(a, b, m);
                break;
            case "CANVAS":
                A(k, a, a, c, f)
            }
            return b
        }

        function ra(a, b, e) {
            "none" === $(a, "display") || ("hidden" === $(a, "visibility") || a.hasAttribute("data-html2canvas-ignore")) || (b = pa(a, b, e, !1) || b, Ia.test(a.nodeName) || T(a, b, e))
        }

        function T(a, b, e) {
            ia.Children(a).forEach(function (h) {
                h.nodeType === h.ELEMENT_NODE ? ra(h, b, e) : h.nodeType === h.TEXT_NODE && y(a, h, b)
            })
        }
        a.scroll(0, 0);
        var P = f.elements ===
            d ? g.body : f.elements[0],
            ga = P.ownerDocument,
            ia = e.Util,
            Ga = ia.Support(f, ga),
            Ia = RegExp("(" + f.ignoreElements + ")"),
            Ha = ga.body,
            $ = ia.getCSS,
            Aa = "___html2canvas___pseudoelement",
            na = ga.createElement("style");
        na.innerHTML = "." + Aa + '-before:before { content: "" !important; display: none !important; }.' + Aa + '-after:after { content: "" !important; display: none !important; }';
        Ha.appendChild(na);
        b = b || {};
        var va = function (a) {
            return function (b, e, h, f) {
                var c = h * a,
                    l = f * a;
                h = b + h;
                f = e + f;
                return {
                    topLeft: B({
                        x: b,
                        y: f
                    }, {
                        x: b,
                        y: f - l
                    }, {
                        x: h -
                            c,
                        y: e
                    }, {
                        x: h,
                        y: e
                    }),
                    topRight: B({
                        x: b,
                        y: e
                    }, {
                        x: b + c,
                        y: e
                    }, {
                        x: h,
                        y: f - l
                    }, {
                        x: h,
                        y: f
                    }),
                    bottomRight: B({
                        x: h,
                        y: e
                    }, {
                        x: h,
                        y: e + l
                    }, {
                        x: b + c,
                        y: f
                    }, {
                        x: b,
                        y: f
                    }),
                    bottomLeft: B({
                        x: h,
                        y: f
                    }, {
                        x: h - c,
                        y: f
                    }, {
                        x: b,
                        y: e + l
                    }, {
                        x: b,
                        y: e
                    })
                }
            }
        }(4 * ((Math.sqrt(2) - 1) / 3)),
            sa = /(matrix)\((.+)\)/;
        return function () {
            var a = $(g.documentElement, "backgroundColor"),
                b = ia.isTransparent(a) && P === g.body,
                e = pa(P, null, !1, b);
            T(P, e);
            b && (a = e.backgroundColor);
            Ha.removeChild(na);
            return {
                backgroundColor: a,
                stack: e
            }
        }()
    };
    e.Preload = function (b) {
        function h() {
            v.log("html2canvas: start: images: " +
                y.numLoaded + " / " + y.numTotal + " (failed: " + y.numFailed + ")");
            !y.firstRun && y.numLoaded >= y.numTotal && (v.log("Finished loading images: # " + y.numTotal + " (failed: " + y.numFailed + ")"), "function" === typeof b.complete && b.complete(y))
        }

        function f(e, c, l) {
            var g, q = b.proxy,
                p;
            G.href = e;
            e = G.href;
            g = "html2canvas_" + C++;
            l.callbackname = g;
            q = -1 < q.indexOf("?") ? q + "&" : q + "?";
            q += "url=" + encodeURIComponent(e) + "&callback=" + g;
            p = D.createElement("script");
            a[g] = function (b) {
                "error:" === b.substring(0, 6) ? (l.succeeded = !1, y.numLoaded++, y.numFailed++,
                    h()) : (u(c, l), c.src = b);
                a[g] = d;
                try {
                    delete a[g]
                } catch (e) {}
                p.parentNode.removeChild(p);
                p = null;
                delete l.script;
                delete l.callbackname
            };
            p.setAttribute("type", "text/javascript");
            p.setAttribute("src", q);
            l.script = p;
            a.document.body.appendChild(p)
        }

        function c(b, h) {
            var f = a.getComputedStyle(b, h),
                l = f.content;
            "url" === l.substr(0, 3) && x.loadImage(e.Util.parseBackgroundImage(l)[0].args[0]);
            t(f.backgroundImage, b)
        }

        function l(a) {
            return a && a.method && a.args && 0 < a.args.length
        }

        function t(a, b) {
            var f;
            e.Util.parseBackgroundImage(a).filter(l).forEach(function (a) {
                if ("url" ===
                    a.method) x.loadImage(a.args[0]);
                else if (a.method.match(/\-?gradient$/)) {
                    f === d && (f = e.Util.Bounds(b));
                    a = a.value;
                    var c = e.Generate.Gradient(a, f);
                    c !== d && (y[a] = {
                        img: c,
                        succeeded: !0
                    }, y.numTotal++, y.numLoaded++, h())
                }
            })
        }

        function s(a) {
            var b = !1;
            try {
                v.Children(a).forEach(s)
            } catch (e) {}
            try {
                b = a.nodeType
            } catch (h) {
                b = !1, v.log("html2canvas: failed to access some element's nodeType - Exception: " + h.message)
            }
            if (1 === b || b === d) {
                c(a, ":before");
                c(a, ":after");
                try {
                    t(v.getCSS(a, "backgroundImage"), a)
                } catch (f) {
                    v.log("html2canvas: failed to get background-image - Exception: " +
                        f.message)
                }
                t(a)
            }
        }

        function u(e, c) {
            e.onload = function () {
                c.timer !== d && a.clearTimeout(c.timer);
                y.numLoaded++;
                c.succeeded = !0;
                e.onerror = e.onload = null;
                h()
            };
            e.onerror = function () {
                if ("anonymous" === e.crossOrigin && (a.clearTimeout(c.timer), b.proxy)) {
                    var l = e.src;
                    e = new Image;
                    c.img = e;
                    e.src = l;
                    f(e.src, e, c);
                    return
                }
                y.numLoaded++;
                y.numFailed++;
                c.succeeded = !1;
                e.onerror = e.onload = null;
                h()
            }
        }
        var y = {
            numLoaded: 0,
            numFailed: 0,
            numTotal: 0,
            cleanupDone: !1
        }, w, v = e.Util,
            x, A, C = 0;
        A = b.elements[0] || g.body;
        var D = A.ownerDocument,
            B = A.getElementsByTagName("img"),
            F = B.length,
            G = D.createElement("a"),
            z = function (a) {
                return a.crossOrigin !== d
            }(new Image),
            J;
        G.href = a.location.href;
        w = G.protocol + G.host;
        x = {
            loadImage: function (a) {
                var e, h;
                a && y[a] === d && (e = new Image, a.match(/data:image\/.*;base64,/i) ? (e.src = a.replace(/url\(['"]{0,}|['"]{0,}\)$/ig, ""), h = y[a] = {
                    img: e
                }, y.numTotal++, u(e, h)) : (G.href = a, G.href = G.href, G.protocol + G.host === w || !0 === b.allowTaint ? (h = y[a] = {
                    img: e
                }, y.numTotal++, u(e, h), e.src = a) : z && !b.allowTaint && b.useCORS ? (e.crossOrigin = "anonymous", h = y[a] = {
                        img: e
                    }, y.numTotal++,
                    u(e, h), e.src = a) : b.proxy && (h = y[a] = {
                    img: e
                }, y.numTotal++, f(a, e, h))))
            },
            cleanupDOM: function (e) {
                var f, c;
                if (!y.cleanupDone) {
                    e && "string" === typeof e ? v.log("html2canvas: Cleanup because: " + e) : v.log("html2canvas: Cleanup after timeout: " + b.timeout + " ms.");
                    for (c in y)
                        if (y.hasOwnProperty(c) && (f = y[c], "object" === typeof f && f.callbackname && f.succeeded === d)) {
                            a[f.callbackname] = d;
                            try {
                                delete a[f.callbackname]
                            } catch (l) {}
                            f.script && f.script.parentNode && (f.script.setAttribute("src", "about:blank"), f.script.parentNode.removeChild(f.script));
                            y.numLoaded++;
                            y.numFailed++;
                            v.log("html2canvas: Cleaned up failed img: '" + c + "' Steps: " + y.numLoaded + " / " + y.numTotal)
                        }
                    a.stop !== d ? a.stop() : g.execCommand !== d && g.execCommand("Stop", !1);
                    g.close !== d && g.close();
                    y.cleanupDone = !0;
                    e && "string" === typeof e || h()
                }
            },
            renderingDone: function () {
                J && a.clearTimeout(J)
            }
        };
        0 < b.timeout && (J = a.setTimeout(x.cleanupDOM, b.timeout));
        v.log("html2canvas: Preload starts: finding background-images");
        y.firstRun = !0;
        s(A);
        v.log("html2canvas: Preload: Finding images");
        for (A = 0; A < F; A += 1) x.loadImage(B[A].getAttribute("src"));
        y.firstRun = !1;
        v.log("html2canvas: Preload: Done.");
        y.numTotal === y.numLoaded && h();
        return x
    };
    e.Renderer = function (a, b) {
        return function (a) {
            if ("string" === typeof b.renderer && e.Renderer[a] !== d) a = e.Renderer[a](b);
            else if ("function" === typeof a) a = a(b);
            else throw Error("Unknown renderer"); if ("function" !== typeof a) throw Error("Invalid renderer defined");
            return a
        }(b.renderer)(a, b, g, function (a) {
            function b(a) {
                Object.keys(a).sort().forEach(function (h) {
                    var f = [],
                        c = [],
                        l = [],
                        d = [];
                    a[h].forEach(function (a) {
                        a.node.zIndex.isPositioned ||
                            1 > a.node.zIndex.opacity ? l.push(a) : a.node.zIndex.isFloated ? c.push(a) : f.push(a)
                    });
                    (function A(a) {
                        a.forEach(function (a) {
                            d.push(a);
                            a.children && A(a.children)
                        })
                    })(f.concat(c, l));
                    d.forEach(function (a) {
                        a.context ? b(a.context) : e.push(a.node)
                    })
                })
            }
            var e = [];
            a = function (a) {
                function b(a, e, h) {
                    var f = "auto" === e.zIndex.zindex ? 0 : Number(e.zIndex.zindex),
                        c = a,
                        l = e.zIndex.isPositioned,
                        k = e.zIndex.isFloated,
                        m = {
                            node: e
                        }, g = h;
                    if (e.zIndex.ownStacking) c = m.context = {
                        "!": [{
                            node: e,
                            children: []
                        }]
                    }, g = d;
                    else if (l || k) g = m.children = [];
                    0 === f &&
                        h ? h.push(m) : (a[f] || (a[f] = []), a[f].push(m));
                    e.zIndex.children.forEach(function (a) {
                        b(c, a, g)
                    })
                }
                var e = {};
                b(e, a);
                return e
            }(a);
            b(a);
            return e
        }(a.stack), e)
    };
    e.Util.Support = function (a, b) {
        function h() {
            var a = new Image,
                f = b.createElement("canvas"),
                c = f.getContext === d ? !1 : f.getContext("2d");
            if (!1 === c) return !1;
            f.width = f.height = 10;
            a.src = "data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' width='10' height='10'><foreignObject width='10' height='10'><div xmlns='http://www.w3.org/1999/xhtml' style='width:10;height:10;'>sup</div></foreignObject></svg>";
            try {
                c.drawImage(a, 0, 0), f.toDataURL()
            } catch (l) {
                return !1
            }
            e.Util.log("html2canvas: Parse: SVG powered rendering available");
            return !0
        }
        return {
            rangeBounds: function () {
                var a, e, h = !1;
                b.createRange && (a = b.createRange(), a.getBoundingClientRect && (e = b.createElement("boundtest"), e.style.height = "123px", e.style.display = "block", b.body.appendChild(e), a.selectNode(e), a = a.getBoundingClientRect(), a = a.height, 123 === a && (h = !0), b.body.removeChild(e)));
                return h
            }(),
            svgRendering: a.svgRendering && h()
        }
    };
    a.html2canvas = function (b, h) {
        b =
            b.length ? b : [b];
        var f, c, l = {
                logging: !1,
                elements: b,
                background: "#fff",
                proxy: null,
                timeout: 0,
                useCORS: !1,
                allowTaint: !1,
                svgRendering: !1,
                ignoreElements: "IFRAME|OBJECT|PARAM",
                useOverflow: !0,
                letterRendering: !1,
                chinese: !1,
                width: null,
                height: null,
                taintTest: !0,
                renderer: "Canvas"
            }, l = e.Util.Extend(h, l);
        e.logging = l.logging;
        l.complete = function (a) {
            if ("function" !== typeof l.onpreloaded || !1 !== l.onpreloaded(a))
                if (f = e.Parse(a, l), "function" !== typeof l.onparsed || !1 !== l.onparsed(f))
                    if (c = e.Renderer(f, l), "function" === typeof l.onrendered) l.onrendered(c)
        };
        a.setTimeout(function () {
            e.Preload(l)
        }, 0);
        return {
            render: function (a, b) {
                return e.Renderer(a, e.Util.Extend(b, l))
            },
            parse: function (a, b) {
                return e.Parse(a, e.Util.Extend(b, l))
            },
            preload: function (a) {
                return e.Preload(e.Util.Extend(a, l))
            },
            log: e.Util.log
        }
    };
    a.html2canvas.log = e.Util.log;
    a.html2canvas.Renderer = {
        Canvas: d
    };
    e.Renderer.Canvas = function (a) {
        function b(a, e) {
            a.beginPath();
            e.forEach(function (b) {
                a[b.name].apply(a, b.arguments)
            });
            a.closePath()
        }
        a = a || {};
        var h = g,
            f = [],
            c = g.createElement("canvas"),
            l = c.getContext("2d"),
            s = e.Util,
            u = a.canvas || h.createElement("canvas");
        return function (e, g, v, x, A) {
            var C = u.getContext("2d"),
                D, B = e.stack;
            u.width = u.style.width = g.width || B.ctx.width;
            u.height = u.style.height = g.height || B.ctx.height;
            D = C.fillStyle;
            C.fillStyle = s.isTransparent(B.backgroundColor) && g.background !== d ? g.background : e.backgroundColor;
            C.fillRect(0, 0, u.width, u.height);
            C.fillStyle = D;
            x.forEach(function (e) {
                C.textBaseline = "bottom";
                C.save();
                e.transform.matrix && (C.translate(e.transform.origin[0], e.transform.origin[1]), C.transform.apply(C,
                    e.transform.matrix), C.translate(-e.transform.origin[0], -e.transform.origin[1]));
                e.clip && (C.beginPath(), C.rect(e.clip.left, e.clip.top, e.clip.width, e.clip.height), C.clip());
                e.ctx.storage && e.ctx.storage.forEach(function (e) {
                    var d = C;
                    switch (e.type) {
                    case "variable":
                        d[e.name] = e.arguments;
                        break;
                    case "function":
                        switch (e.name) {
                        case "createPattern":
                            if (0 < e.arguments[0].width && 0 < e.arguments[0].height) try {
                                d.fillStyle = d.createPattern(e.arguments[0], "repeat")
                            } catch (g) {
                                s.log("html2canvas: Renderer: Error creating pattern",
                                    g.message)
                            }
                            break;
                        case "drawShape":
                            b(d, e.arguments);
                            break;
                        case "drawImage":
                            if (0 < e.arguments[8] && 0 < e.arguments[7]) {
                                var u;
                                if (!(u = !a.taintTest) && (u = a.taintTest)) a: {
                                    if (-1 === f.indexOf(e.arguments[0].src)) {
                                        l.drawImage(e.arguments[0], 0, 0);
                                        try {
                                            l.getImageData(0, 0, 1, 1)
                                        } catch (y) {
                                            c = h.createElement("canvas");
                                            l = c.getContext("2d");
                                            u = !1;
                                            break a
                                        }
                                        f.push(e.arguments[0].src)
                                    }
                                    u = !0
                                }
                                u && d.drawImage.apply(d, e.arguments)
                            }
                            break;
                        default:
                            d[e.name].apply(d, e.arguments)
                        }
                    }
                });
                C.restore()
            });
            s.log("html2canvas: Renderer: Canvas renderer done - returning canvas obj");
            return 1 === g.elements.length && "object" === typeof g.elements[0] && "BODY" !== g.elements[0].nodeName ? (e = A.Util.Bounds(g.elements[0]), v = v.createElement("canvas"), v.width = Math.ceil(e.width), v.height = Math.ceil(e.height), C = v.getContext("2d"), C.drawImage(u, e.left, e.top, e.width, e.height, 0, 0, e.width, e.height), u = null, v) : u
        }
    }
})(window, document);
var detectZoom = function () {
    var a = function () {
        return {
            zoom: 1,
            devicePxPerCssPx: 1
        }
    }, g = function () {
            var a = Math.round(100 * (screen.deviceXDPI / screen.logicalXDPI)) / 100;
            return {
                zoom: a,
                devicePxPerCssPx: a * (window.devicePixelRatio || 1)
            }
        }, d = function () {
            var a = Math.round(100 * (document.documentElement.offsetHeight / window.innerHeight)) / 100;
            return {
                zoom: a,
                devicePxPerCssPx: a * (window.devicePixelRatio || 1)
            }
        }, c = function () {
            var a = (90 == Math.abs(window.orientation) ? screen.height : screen.width) / window.innerWidth;
            return {
                zoom: a,
                devicePxPerCssPx: a *
                    (window.devicePixelRatio || 1)
            }
        }, b = function () {
            var a = window.outerWidth / window.innerWidth,
                a = Math.round(100 * a) / 100;
            return {
                zoom: a,
                devicePxPerCssPx: a * (window.devicePixelRatio || 1)
            }
        }, f = function () {
            var a = l("min--moz-device-pixel-ratio", "", 0, 10, 20, 1E-4),
                a = Math.round(100 * a) / 100;
            return {
                zoom: a,
                devicePxPerCssPx: a
            }
        }, h = function () {
            return {
                zoom: f().zoom,
                devicePxPerCssPx: window.devicePixelRatio || 1
            }
        }, e = function () {
            var a = window.top.outerWidth / window.top.innerWidth,
                a = Math.round(100 * a) / 100;
            return {
                zoom: a,
                devicePxPerCssPx: a *
                    (window.devicePixelRatio || 1)
            }
        }, l = function (a, b, e, h, f, c) {
            function l(e, h, f) {
                var m = (e + h) / 2;
                return 0 >= f || h - e < c ? m : d("(" + a + ":" + m + b + ")").matches ? l(m, h, f - 1) : l(e, m, f - 1)
            }
            var d, m, g, x;
            window.matchMedia ? d = window.matchMedia : (m = document.getElementsByTagName("head")[0], g = document.createElement("style"), m.appendChild(g), x = document.createElement("div"), x.className = "mediaQueryBinarySearch", x.style.display = "none", document.body.appendChild(x), d = function (a) {
                g.sheet.insertRule("@media " + a + "{.mediaQueryBinarySearch {text-decoration: underline} }",
                    0);
                a = "underline" == getComputedStyle(x, null).textDecoration;
                g.sheet.deleteRule(0);
                return {
                    matches: a
                }
            });
            e = l(e, h, f);
            x && (m.removeChild(g), document.body.removeChild(x));
            return e
        }, m = function () {
            var l = a;
            isNaN(screen.logicalXDPI) || isNaN(screen.systemXDPI) ? window.navigator.msMaxTouchPoints ? l = d : "orientation" in window && "string" === typeof document.body.style.webkitMarquee ? l = c : "string" === typeof document.body.style.webkitMarquee ? l = b : 0 <= navigator.userAgent.indexOf("Opera") ? l = e : window.devicePixelRatio ? l = h : 0.0010 < f().zoom &&
                (l = f) : l = g;
            return l
        }();
    return {
        zoom: function () {
            return m().zoom
        },
        device: function () {
            return m().devicePxPerCssPx
        }
    }
};
"undefined" === typeof Modernizr && (Modernizr = {});
Modernizr.upgrade = function (a) {
    "string" === typeof a && (a = {
        message: a
    });
    var g = {
        Chrome: {
            description: "Runs websites and applications with lightning speed.",
            stable: {
                ver: "29",
                url: "http://www.google.com/chrome"
            }
        },
        Firefox: {
            description: "Firefox is free and made to help you get the most out of the web.",
            stable: {
                ver: "24",
                url: "http://www.mozilla.com/firefox/"
            }
        },
        Safari: {
            description: "Browse the web in smarter, more powerful ways.",
            stable: {
                ver: "6",
                url: "http://www.apple.com/safari/download/"
            }
        },
        Opera: {
            description: "Secure, powerful and easy to use, with excellent privacy protection.",
            stable: {
                ver: "12",
                url: "http://www.opera.com/download/"
            }
        },
        IE: {
            description: "Designed to help you take control of your privacy and browse with confidence.",
            stable: {
                ver: "10",
                url: "http://www.microsoft.com/windows/internet-explorer/default.aspx"
            }
        }
    }, d = document.getElementsByTagName("head")[0],
        c = document.createElement("link");
    c.rel = "stylesheet";
    c.type = "text/css";
    c.media = "screen";
    c.href = "./inc/BrowseHappier/upgrade.css";
    d.appendChild(c);
    d = document.createElement("div");
    d.id = "browser-upgrade";
    var c = document.createElement("ul"),
        b = a.browsers;
    if ("string" === typeof b)
        for (var f = b.split(","), b = {}, h = 0; h < f.length; h++) {
            var e = f[h];
            b[e.substr(0, 1)] = e.substr(1)
        }
    var f = 0,
        l;
    for (l in g)
        if (b[l[0]]) {
            h = g[l];
            e = document.createElement("li");
            e.id = "sprite-" + l.toLowerCase();
            var m = document.createElement("a");
            m.href = h.stable.url;
            m.target = "_blank";
            m.title = l;
            var k = document.createElement("div");
            k.className = "icon";
            m.appendChild(k);
            var q = document.createElement("h2");
            q.innerHTML = l;
            k.appendChild(q);
            k = document.createElement("p");
            k.className = "version";
            k.innerHTML =
                "Version: <strong>" + h.stable.ver + "</strong>";
            m.appendChild(k);
            k = document.createElement("p");
            k.className = "info";
            k.innerHTML = "&ldquo;" + h.description + "&rdquo;";
            m.appendChild(k);
            e.appendChild(m);
            c.appendChild(e);
            f++
        }
    c.style.width = 191 * f + "px";
    q = document.createElement("h2");
    q.className = "header";
    q.innerHTML = a.message || "Please upgrade your browser to view this website";
    d.appendChild(q);
    d.appendChild(c);
    document.body.appendChild(d)
};
var Gradient = function (a) {
    a.getColorStops = function (a) {
        var d = new Random(a.seed || 1),
            c = a.dna,
            b = a.resolution,
            f = a.length,
            h = !1,
            e = a.blend || "Normal",
            l;
        "undefined" !== typeof Color.Blend ? (h = Color.Blend.isAlphaRequired[e], l = Color.Blend[e]) : l = function (a, b) {
            return a * b / 255
        };
        var m = a.H || 0,
            k = a.S || 0,
            q = a.L || 0;
        "string" === typeof a.dna && (c = c.split(","));
        a = [];
        for (var p = 0; p < c.length; p += 2) a.push({
            hex: c[p + 1],
            stop: parseFloat(c[p], 10)
        });
        for (var c = 0, r = a[c].hex, p = "string" === typeof r ? "W3>HEX32>RGBA" : "HEX32>RGBA", r = Color.Space(r,
                p), t = a[c].stop, s = Color.Space(a[c + 1].hex, p), u = a[c + 1].stop, y = [], w = 0; w <= f; w += b) {
            var v;
            v = w / f;
            v > u && (c++, a[c] && (r = s, t = u, a[c + 1] && (s = Color.Space(a[c + 1].hex, p), u = a[c + 1].stop)));
            v = (v - t) / (u - t);
            Infinity === v && (v = 0);
            if ("Normal" === e && 0 === m && 0 === k && 0 === q) v = Color.Space.RGB_W3({
                R: r.R * (1 - v) + s.R * v,
                G: r.G * (1 - v) + s.G * v,
                B: r.B * (1 - v) + s.B * v
            });
            else {
                var x = Color.Space.RGB_HSL({
                    R: r.R * (1 - v) + s.R * v,
                    G: r.G * (1 - v) + s.G * v,
                    B: r.B * (1 - v) + s.B * v
                });
                v = Color.Space.HSLA_RGBA({
                    H: (x.H + d.toDouble() * m + 360) % 360,
                    S: Math.min(100, Math.max(0, x.S - d.toDouble() *
                        k)),
                    L: Math.min(100, Math.max(0, x.L - d.toDouble() * q)),
                    A: 255
                });
                x = Color.Space.HSLA_RGBA({
                    H: (x.H + d.toDouble() * m + 360) % 360,
                    S: Math.min(100, Math.max(0, x.S + d.toDouble() * k)),
                    L: Math.min(100, Math.max(0, x.L + d.toDouble() * q)),
                    A: 255
                });
                h ? (v = l(v, x), v = Color.Space(v, "HEX32>RGBA>W3")) : v = Color.Space.RGBA_W3({
                    R: l(v.R, x.R),
                    G: l(v.G, x.G),
                    B: l(v.B, x.B),
                    A: l(v.A, x.A)
                })
            }
            y.push(w / f);
            y.push(v)
        }
        return y
    };
    return a
}({});
if ("undefined" === typeof Color) var Color = {};
if ("undefined" === typeof ColorSpace) var ColorSpace = {};
"undefined" === typeof Color.Space && (Color.Space = {});
(function () {
    var a = {}, g = {
            "HEX24>HSL": "HEX24>RGB>HSL",
            "HEX32>HSLA": "HEX32>RGBA>HSLA",
            "HEX24>CMYK": "HEX24>RGB>CMY>CMYK",
            "RGB>CMYK": "RGB>CMY>CMYK"
        }, d = Color.Space = function (b, f) {
            g[f] && (f = g[f]);
            var h = f.split(">");
            if ("object" === typeof b && 0 <= b[0]) {
                for (var e = h[0], c = {}, m = 0; m < e.length; m++) {
                    var k = e.substr(m, 1);
                    c[k] = b[m]
                }
                b = c
            }
            if (a[f]) return a[f](b);
            e = 1;
            for (c = h[0]; e < h.length; e++) 1 < e && (c = c.substr(c.indexOf("_") + 1)), c += (0 === e ? "" : "_") + h[e], b = d[c](b);
            return b
        }, c = ColorSpace = Color.SpaceX = function (a, f) {
            a = a.replace(/ /g,
                "");
            a = a.toLowerCase();
            var h = {
                "#": function (a, b) {
                    a.hex = d.W3_HEX24(b);
                    a.type = "hex";
                    var e = d.HEX24_RGB(a.hex);
                    a.r = e.R;
                    a.g = e.G;
                    a.b = e.B;
                    a.a = e.A
                },
                rgba: function (a, b) {
                    var e = d.W3_RGBA(b);
                    a.r = e.R;
                    a.g = e.G;
                    a.b = e.B;
                    a.a = e.A;
                    a.type = "rgba"
                },
                rgb: function (a, b) {
                    var e = d.W3_RGB(b);
                    a.r = e.R;
                    a.g = e.G;
                    a.b = e.B;
                    a.type = "rgb"
                },
                hsla: function (a, b) {
                    var e = d.W3_HSLA(b);
                    a.h = e.H;
                    a.s = e.S;
                    a.l = e.L;
                    a.a = e.A;
                    a.type = "hsla"
                },
                hsl: function (a, b) {
                    var e = d.W3_HSL(b);
                    a.h = e.H;
                    a.s = e.S;
                    a.l = e.L;
                    a.type = "hsl"
                }
            }, e;
            for (e in h)
                if (0 === a.indexOf(e)) return h[e](this,
                    a), this;
            if (Color.WebColors[a]) h["#"](this, Color.WebColors[a]);
            return this
        };
    c.prototype.toRGB = function () {};
    c.prototype.toRGBA = function () {};
    c.prototype.toHSL = function () {
        switch (this.type) {
        case "hex":
            return d.RGB_HSL(d.HEX24_RGB(this.hex));
        case "rgb":
            return this.R = this.r, this.G = this.g, this.B = this.b, d.RGB_HSL(this);
        case "rgba":
            return this.R = this.r, this.G = this.g, this.B = this.b, this.A = this.a, d.RGBA_HSLA(this)
        }
    };
    c.prototype.toHSLA = function () {};
    c.prototype.toHEX = function () {
        switch (this.type) {
        case "hex":
            return d.HEX24_W3(this.hex);
        case "rgb":
        case "rgba":
            return this.R = this.r, this.G = this.g, this.B = this.b, this.A = this.a, d.HEX24_W3(d.RGB_HEX24(this));
        case "hsl":
        case "hsla":
            return this.H = this.h, this.S = this.s, this.L = this.l, this.A = this.a, d.HEX24_W3(d.RGB_HEX24(d.HSL_RGB(this)))
        }
    };
    c.prototype.isW3Contrast = function (a, f) {
        a = a || this;
        f = f || {
            r: 0,
            g: 0,
            b: 0
        };
        var h = 125 >= this.isW3Brightness(a, f),
            e = 500 >= this.isW3Difference(a, f);
        return !(h && e)
    };
    c.prototype.isW3Brightness = function (a, f) {
        return Math.abs((299 * a.r + 587 * a.g + 114 * a.b) / 1E3 - (299 * f.r + 587 * f.g + 114 *
            f.b) / 1E3)
    };
    c.prototype.isW3Difference = function (a, f) {
        var h = Math.max(a.r, f.r) - Math.min(a.r, f.r),
            e = Math.max(a.g, f.g) - Math.min(a.g, f.g);
        f = Math.max(a.b, f.b) - Math.min(a.b, f.b);
        return h + e + f
    };
    d.W3Brightness = function (a, f) {
        return Math.abs((299 * a.R + 587 * a.G + 114 * a.B) / 1E3 - (299 * f.R + 587 * f.G + 114 * f.B) / 1E3)
    };
    d.W3Difference = function (a, f) {
        var h = Math.max(a.R, f.R) - Math.min(a.R, f.R),
            e = Math.max(a.G, f.G) - Math.min(a.G, f.G);
        f = Math.max(a.B, f.B) - Math.min(a.B, f.B);
        return h + e + f
    };
    d.isW3Contrast = function (a, f) {
        f = f || {
            R: 255,
            G: 255,
            B: 255
        };
        var h = 125 >= d.W3Brightness(a, f),
            e = 500 >= d.W3Difference(a, f);
        return !(h && e)
    };
    d.RGB_W3 = function (a) {
        return "rgb(" + (a.R >> 0) + "," + (a.G >> 0) + "," + (a.B >> 0) + ")"
    };
    d.RGBA_W3 = function (a) {
        return "rgba(" + (a.R >> 0) + "," + (a.G >> 0) + "," + (a.B >> 0) + "," + ("number" === typeof a.A ? a.A / 255 : 1) + ")"
    };
    d.W3_RGB = function (a) {
        a = a.substr(4, a.length - 5).split(",");
        return {
            R: parseInt(a[0], 10),
            G: parseInt(a[1], 10),
            B: parseInt(a[2], 10)
        }
    };
    d.W3_RGBA = function (a) {
        a = a.substr(5, a.length - 6).split(",");
        return {
            R: parseInt(a[0], 10),
            G: parseInt(a[1], 10),
            B: parseInt(a[2],
                10),
            A: 255 * parseFloat(a[3] || 1)
        }
    };
    d.HSL_W3 = function (a) {
        return "hsl(" + (a.H + 0.5 >> 0) + "," + (a.S + 0.5 >> 0) + "%," + (a.L + 0.5 >> 0) + "%)"
    };
    d.HSLA_W3 = function (a) {
        return "hsla(" + (a.H + 0.5 >> 0) + "," + (a.S + 0.5 >> 0) + "%," + (a.L + 0.5 >> 0) + "%," + ("number" === typeof a.A ? a.A / 255 : 1) + ")"
    };
    d.W3_HSL = function (a) {
        var f = a.indexOf("(") + 1,
            h = a.indexOf(")");
        a = a.substr(f, h - f).split(",");
        return {
            H: parseInt(a[0], 10),
            S: parseInt(a[1], 10),
            L: parseInt(a[2], 10)
        }
    };
    d.W3_HSLA = function (a) {
        var f = a.indexOf("(") + 1,
            h = a.indexOf(")");
        a = a.substr(f, h - f).split(",");
        return {
            H: parseInt(a[0],
                10),
            S: parseInt(a[1], 10),
            L: parseInt(a[2], 10),
            A: 255 * parseFloat(a[3], 10)
        }
    };
    d.W3_HEX = d.W3_HEX24 = function (a) {
        "#" === a.substr(0, 1) && (a = a.substr(1));
        3 === a.length && (a = a[0] + a[0] + a[1] + a[1] + a[2] + a[2]);
        return parseInt("0x" + a, 16)
    };
    d.W3_HEX32 = function (a) {
        "#" === a.substr(0, 1) && (a = a.substr(1));
        3 === a.length && (a = a[0] + a[0] + a[1] + a[1] + a[2] + a[2]);
        return 6 === a.length ? parseInt("0xFF" + a, 16) : parseInt("0x" + a, 16)
    };
    d.HEX_W3 = d.HEX24_W3 = function (a, f) {
        f || (f = 6);
        a || (a = 0);
        var h, e = a.toString(16);
        for (h = e.length; h < f;) e = "0" + e, h++;
        for (h =
            e.length; h > f;) e = e.substr(1), h--;
        return "#" + e
    };
    d.HEX32_W3 = function (a) {
        return d.HEX_W3(a, 8)
    };
    d.HEX_RGB = d.HEX24_RGB = function (a) {
        return {
            R: a >> 16,
            G: a >> 8 & 255,
            B: a & 255
        }
    };
    d.HEX32_RGBA = function (a) {
        return {
            R: a >>> 16 & 255,
            G: a >>> 8 & 255,
            B: a & 255,
            A: a >>> 24
        }
    };
    d.RGBA_HEX32 = function (a) {
        return (a.A << 24 | a.R << 16 | a.G << 8 | a.B) >>> 0
    };
    d.RGB_HEX24 = d.RGB_HEX = function (a) {
        0 > a.R && (a.R = 0);
        0 > a.G && (a.G = 0);
        0 > a.B && (a.B = 0);
        255 < a.R && (a.R = 255);
        255 < a.G && (a.G = 255);
        255 < a.B && (a.B = 255);
        return a.R << 16 | a.G << 8 | a.B
    };
    d.RGB_CMY = function (a) {
        return {
            C: 1 - a.R /
                255,
            M: 1 - a.G / 255,
            Y: 1 - a.B / 255
        }
    };
    d.RGBA_HSLA = d.RGB_HSL = function (a) {
        var f = a.R / 255,
            h = a.G / 255,
            e = a.B / 255,
            c = Math.min(f, h, e),
            d = Math.max(f, h, e),
            k = d - c,
            g, p = (d + c) / 2;
        if (0 === k) c = g = 0;
        else {
            var c = 0.5 > p ? k / (d + c) : k / (2 - d - c),
                r = ((d - f) / 6 + k / 2) / k,
                t = ((d - h) / 6 + k / 2) / k,
                k = ((d - e) / 6 + k / 2) / k;
            f === d ? g = k - t : h === d ? g = 1 / 3 + r - k : e === d && (g = 2 / 3 + t - r);
            0 > g && (g += 1);
            1 < g && (g -= 1)
        }
        return {
            H: 360 * g,
            S: 100 * c,
            L: 100 * p,
            A: a.A
        }
    };
    d.RGBA_HSVA = d.RGB_HSV = function (a) {
        var f = a.R / 255,
            h = a.G / 255,
            e = a.B / 255,
            c = Math.min(f, h, e),
            d = Math.max(f, h, e),
            k = d - c,
            g;
        if (0 === k) c = g = 0;
        else {
            var c =
                k / d,
                p = ((d - f) / 6 + k / 2) / k,
                r = ((d - h) / 6 + k / 2) / k,
                k = ((d - e) / 6 + k / 2) / k;
            f === d ? g = k - r : h === d ? g = 1 / 3 + p - k : e === d && (g = 2 / 3 + r - p);
            0 > g && (g += 1);
            1 < g && (g -= 1)
        }
        return {
            H: 360 * g,
            S: 100 * c,
            V: 100 * d,
            A: a.A
        }
    };
    d.CMY_RGB = function (a) {
        return {
            R: Math.max(0, 255 * (1 - a.C)),
            G: Math.max(0, 255 * (1 - a.M)),
            B: Math.max(0, 255 * (1 - a.Y))
        }
    };
    d.CMY_CMYK = function (a) {
        var f = a.C,
            h = a.M;
        a = a.Y;
        var e = Math.min(a, Math.min(h, Math.min(f, 1))),
            f = Math.round(100 * ((f - e) / (1 - e))),
            h = Math.round(100 * ((h - e) / (1 - e)));
        a = Math.round(100 * ((a - e) / (1 - e)));
        e = Math.round(100 * e);
        return {
            C: f,
            M: h,
            Y: a,
            K: e
        }
    };
    d.CMYK_CMY = function (a) {
        return {
            C: a.C * (1 - a.K) + a.K,
            M: a.M * (1 - a.K) + a.K,
            Y: a.Y * (1 - a.K) + a.K
        }
    };
    d.HSLA_RGBA = d.HSL_RGB = function (a) {
        var f = a.H / 360,
            h = a.S / 100,
            e = a.L / 100,
            c, d, k;
        0 === h ? e = h = f = e : (d = 0.5 > e ? e * (1 + h) : e + h - h * e, c = 2 * e - d, k = f + 1 / 3, 0 > k && (k += 1), 1 < k && (k -= 1), e = 1 > 6 * k ? c + 6 * (d - c) * k : 1 > 2 * k ? d : 2 > 3 * k ? c + 6 * (d - c) * (2 / 3 - k) : c, k = f, 0 > k && (k += 1), 1 < k && (k -= 1), h = 1 > 6 * k ? c + 6 * (d - c) * k : 1 > 2 * k ? d : 2 > 3 * k ? c + 6 * (d - c) * (2 / 3 - k) : c, k = f - 1 / 3, 0 > k && (k += 1), 1 < k && (k -= 1), f = 1 > 6 * k ? c + 6 * (d - c) * k : 1 > 2 * k ? d : 2 > 3 * k ? c + 6 * (d - c) * (2 / 3 - k) : c);
        return {
            R: 255 * e,
            G: 255 * h,
            B: 255 * f,
            A: a.A
        }
    };
    d.HSVA_RGBA = d.HSV_RGB = function (a) {
        var f = a.H / 360,
            h = a.S / 100,
            e = a.V / 100,
            c, d, k, g, p;
        if (0 === h) c = d = k = Math.round(255 * e);
        else switch (1 <= f && (f = 0), f *= 6, g = f - Math.floor(f), p = Math.round(255 * e * (1 - h)), k = Math.round(255 * e * (1 - h * g)), h = Math.round(255 * e * (1 - h * (1 - g))), e = Math.round(255 * e), Math.floor(f)) {
        case 0:
            c = e;
            d = h;
            k = p;
            break;
        case 1:
            c = k;
            d = e;
            k = p;
            break;
        case 2:
            c = p;
            d = e;
            k = h;
            break;
        case 3:
            c = p;
            d = k;
            k = e;
            break;
        case 4:
            c = h;
            d = p;
            k = e;
            break;
        case 5:
            c = e, d = p
        }
        return {
            R: c,
            G: d,
            B: k,
            A: a.A
        }
    }
})();
"undefined" === typeof Color && (Color = {});
"undefined" === typeof Color.Space && (Color.Space = {});
(function (a) {
    var g = Math.PI / 180,
        d = 1 / g;
    a.RGB_HSI = function (a) {
        var b = a.R,
            f = a.G;
        a = a.B;
        var h = 0.5 * (2 * b - f - a),
            e = Math.sqrt(3) * (f - a);
        I = (b + f + a) / 3;
        0 < I ? (S = 1 - Math.min(b, f, a) / I, H = Math.atan2(e, h) * d, 0 > H && (H += 360)) : H = S = 0;
        return {
            H: H,
            S: 100 * S,
            I: I
        }
    };
    a.HSI_RGB = function (a) {
        var b = a.H,
            f = a.S / 100;
        a = a.I;
        var h, e, l, b = b - 360 * Math.floor(b / 360);
        120 > b ? (l = a * (1 - f), h = a * (1 + f * Math.cos(b * g) / Math.cos((60 - b) * g)), e = 3 * a - h - l) : 240 > b ? (b -= 120, h = a * (1 - f), e = a * (1 + f * Math.cos(b * g) / Math.cos((60 - b) * g)), l = 3 * a - h - e) : (b -= 240, e = a * (1 - f), l = a * (1 + f * Math.cos(b * g) /
            Math.cos((60 - b) * g)), h = 3 * a - e - l);
        return {
            R: h,
            G: e,
            B: l
        }
    }
})(Color.Space);
"undefined" === typeof Color && (Color = {});
(function () {
    Color.WebColors = {
        aliceblue: "f0f8ff",
        antiquewhite: "faebd7",
        aqua: "00ffff",
        aquamarine: "7fffd4",
        azure: "f0ffff",
        beige: "f5f5dc",
        bisque: "ffe4c4",
        black: "000000",
        blanchedalmond: "ffebcd",
        blue: "0000ff",
        blueviolet: "8a2be2",
        brown: "a52a2a",
        burlywood: "deb887",
        cadetblue: "5f9ea0",
        chartreuse: "7fff00",
        chocolate: "d2691e",
        coral: "ff7f50",
        cornflowerblue: "6495ed",
        cornsilk: "fff8dc",
        crimson: "dc143c",
        cyan: "00ffff",
        darkblue: "00008b",
        darkcyan: "008b8b",
        darkgoldenrod: "b8860b",
        darkgray: "a9a9a9",
        darkgreen: "006400",
        darkgrey: "a9a9a9",
        darkkhaki: "bdb76b",
        darkmagenta: "8b008b",
        darkolivegreen: "556b2f",
        darkorange: "ff8c00",
        darkorchid: "9932cc",
        darkred: "8b0000",
        darksalmon: "e9967a",
        darkseagreen: "8fbc8f",
        darkslateblue: "483d8b",
        darkslategray: "2f4f4f",
        darkslategrey: "2f4f4f",
        darkturquoise: "00ced1",
        darkviolet: "9400d3",
        deeppink: "ff1493",
        deepskyblue: "00bfff",
        dimgray: "696969",
        dimgrey: "696969",
        dodgerblue: "1e90ff",
        firebrick: "b22222",
        floralwhite: "fffaf0",
        forestgreen: "228b22",
        fuchsia: "ff00ff",
        fuscia: "ff00ff",
        gainsboro: "dcdcdc",
        ghostwhite: "f8f8ff",
        gold: "ffd700",
        goldenrod: "daa520",
        gray: "808080",
        green: "008000",
        greenyellow: "adff2f",
        grey: "808080",
        honeydew: "f0fff0",
        hotpink: "ff69b4",
        indianred: "cd5c5c",
        indigo: "4b0082",
        ivory: "fffff0",
        khaki: "f0e68c",
        lavender: "e6e6fa",
        lavenderblush: "fff0f5",
        lawngreen: "7cfc00",
        lemonchiffon: "fffacd",
        lightblue: "add8e6",
        lightcoral: "f08080",
        lightcyan: "e0ffff",
        lightgoldenrodyellow: "fafad2",
        lightgray: "d3d3d3",
        lightgreen: "90ee90",
        lightgrey: "d3d3d3",
        lightpink: "ffb6c1",
        lightsalmon: "ffa07a",
        lightseagreen: "20b2aa",
        lightskyblue: "87cefa",
        lightslategray: "778899",
        lightslategrey: "778899",
        lightsteelblue: "b0c4de",
        lightyellow: "ffffe0",
        lime: "00ff00",
        limegreen: "32cd32",
        linen: "faf0e6",
        magenta: "ff00ff",
        maroon: "800000",
        mediumaquamarine: "66cdaa",
        mediumblue: "0000cd",
        mediumorchid: "ba55d3",
        mediumpurple: "9370db",
        mediumseagreen: "3cb371",
        mediumslateblue: "7b68ee",
        mediumspringgreen: "00fa9a",
        mediumturquoise: "48d1cc",
        mediumvioletred: "c71585",
        midnightblue: "191970",
        mintcream: "f5fffa",
        mistyrose: "ffe4e1",
        moccasin: "ffe4b5",
        navajowhite: "ffdead",
        navy: "000080",
        oldlace: "fdf5e6",
        olive: "808000",
        olivedrab: "6b8e23",
        orange: "ffa500",
        orangered: "ff4500",
        orchid: "da70d6",
        palegoldenrod: "eee8aa",
        palegreen: "98fb98",
        paleturquoise: "afeeee",
        palevioletred: "db7093",
        papayawhip: "ffefd5",
        peachpuff: "ffdab9",
        peru: "cd853f",
        pink: "ffc0cb",
        plum: "dda0dd",
        powderblue: "b0e0e6",
        purple: "800080",
        red: "ff0000",
        rosybrown: "bc8f8f",
        royalblue: "4169e1",
        saddlebrown: "8b4513",
        salmon: "fa8072",
        sandybrown: "f4a460",
        seagreen: "2e8b57",
        seashell: "fff5ee",
        sienna: "a0522d",
        silver: "c0c0c0",
        skyblue: "87ceeb",
        slateblue: "6a5acd",
        slategray: "708090",
        slategrey: "708090",
        snow: "fffafa",
        springgreen: "00ff7f",
        steelblue: "4682b4",
        tan: "d2b48c",
        teal: "008080",
        thistle: "d8bfd8",
        tomato: "ff6347",
        turquoise: "40e0d0",
        violet: "ee82ee",
        wheat: "f5deb3",
        white: "ffffff",
        whitesmoke: "f5f5f5",
        yellow: "ffff00",
        yellowgreen: "9acd32"
    }
})();
window.Color || (Color = {});
window.Color.open || (Color.open = {});
(function (a) {
    a.GPL = function (a) {
        var c = [];
        a = a.split("\n");
        for (var b = 0; b < a.length; b++) isNaN(parseInt(a[b].substr(0, 3))) || c.push(Color.Space({
            R: parseInt(a[b].substr(0, 3)),
            G: parseInt(a[b].substr(4, 3)),
            B: parseInt(a[b].substr(8, 3))
        }, "RGB>HEX24>W3").substr(1));
        return c
    };
    a.GGR = function (a, c) {
        function b(a, b) {
            var h = Math.round(255 * b[a[2]]),
                l = Math.round(255 * b[a[3]]),
                d = Math.round(255 * b[a[4]]),
                h = (Math.round(255 * b[a[5]]) << 24 | h << 16 | l << 8 | d) >>> 0,
                h = Color.Space.HEX24_W3(h, c || 8),
                l = b[a[1]] - f;
            f += l;
            d = (b[a[0]] - (f - l)) / l;
            e.push(h);
            e.push(Math.round(1E6 * l) / 1E6);
            e.push(Math.round(1E6 * d) / 1E6)
        }
        for (var f = 0, h = a.split("\n"), e = [], l = [], m = 3; m < h.length - 1; m++) {
            var k = h[m].split(" ");
            k[3] == l[0] && k[4] == l[1] && k[5] == l[2] || b([0, 1, 3, 4, 5, 6], k);
            b([2, 2, 7, 8, 9, 10], k);
            l = [k[7], k[8], k[9]]
        }
        return g(e)
    };
    var g = function (a) {
        "string" === typeof a && (a = a.split(","));
        for (var c = [], b = 0, f = "", h = 0; h < a.length; h += 3) {
            var e = Color.Space(a[h], 6 === a[h].length ? "HEX>W3" : "HEX32>W3"),
                l = parseFloat(a[h + 1]),
                m = parseFloat(a[h + 2]) * l + b;
            if (f) {
                var k = Color.Space(e, "W3>HEX32>RGBA"),
                    f = Color.Space(f,
                        "W3>HEX32>RGBA"),
                    k = Color.Space({
                        R: 0.5 * k.R + 0.5 * f.R,
                        G: 0.5 * k.G + 0.5 * f.G,
                        B: 0.5 * k.B + 0.5 * f.B,
                        A: 0.5 * k.A + 0.5 * f.A
                    }, "RGBA>HEX32>W3");
                c.push(b);
                c.push(k.substr(1))
            }
            c.push(m);
            c.push(e.substr(1));
            b += l;
            f = e
        }
        return c
    }
})(Color.open);
"undefined" === typeof Color && (Color = {});
Color.Sort = function (a) {
    a.sortHexList = function (a, d) {
        for (var c = [], b = 0; b < a.length; b++) {
            var f = a[b];
            c.push({
                id: f,
                hilbert: Color.HilbertRGB(parseInt("0x" + f))
            })
        }
        a = [];
        c = Color.Sort.Hilbert(c);
        for (b = 0; b < c.length; b++) a.push(c[b].id);
        return a
    };
    a.Alpha_Num = function (g, d) {
        return a.f(g, d, function (a, b) {
            return a.name === b.name ? 0 : a.name < b.name ? -1 : 1
        })
    };
    a.Delta = function (g, d, c) {
        c = c && c.L ? c : Color.XYZ_Lab(Color.RGB_XYZ({
            R: 255,
            G: 0,
            B: 0
        }));
        for (var b in g) g[b].delta = Color.Delta.E(c, g[b].Lab);
        return a.f(g, d, function (a, b) {
            return a.delta -
                b.delta
        })
    };
    a.LCH = function (g, d, c) {
        c || (c = "H");
        return a.f(g, d, function (a, f) {
            if (a.LCH && f.LCH) return a.LCH[c] - f.LCH[c]
        })
    };
    a.RGB = function (g, d, c) {
        c || (c = "R");
        return a.f(g, d, function (a, f) {
            return a.RGB[c] - f.RGB[c]
        })
    };
    a.Hilbert = function (g, d) {
        return a.f(g, d, function (a, b) {
            return a.hilbert - b.hilbert
        })
    };
    a.f = function (a, d, c) {
        a.sort(c ? c : function (a, b) {
            return a.n - b.n
        });
        d && a.reverse();
        d = [];
        c = 0;
        for (var b in a) d[c++] = a[b];
        return d
    };
    return a
}(Color.Sort || {});
"undefined" === typeof Color && (Color = {});
Color.HilbertRGB = function () {
    var a = function (a, c) {
        for (;;) switch (a) {
        case 0:
        case -1:
            return 0 + c;
        case 1:
        case -2:
            return 1 + c;
        case 2:
        case 3:
        case -3:
        case -4:
            return 2 + c;
        case 4:
        case 5:
        case 6:
        case 7:
        case -5:
        case -6:
        case -7:
        case -8:
            return 3 + c;
        default:
            a >>= 4, c = 4 + c
        }
    }, g = function (a) {
            return a ? g(a >> 8) << 8 | 255 & a ^ (255 & a) >> 1 : 0
        };
    return function (d) {
        var c;
        d = g(d);
        for (var b = 0, f = 0; !(8 <= b);) c = 1 + b, f = f << 3 | (1 << 16 + b & d ? 4 : 0) | (1 << 8 + b & d ? 2 : 0) | (1 << 0 + b & d ? 1 : 0), b = c;
        c = f;
        d = 7;
        var b = c >> 3,
            f = (-1 + a(c & 7 & -(c & 7), 0) + 2) % 3,
            h = 1;
        for (c &= 7;;)
            if (d) {
                var e, h = h ^
                        b & 7;
                e = -f;
                e = (e + 3) % 3;
                var l = 7 & h >> 0;
                e = (7 & l << e | l >> 3 - e) << 0 | -8 & h;
                l = (-1 + a(e & -e, 0) + 2 + f) % 3;
                d = -1 + d;
                b >>= 3;
                h = 1 << f;
                c = 4 ^ e | c << 3;
                f = l
            } else {
                f = c;
                d = a(f, 0);
                b = 1;
                for (f ^= f >> 1; !(2 * b >= d);) c = 2 * b, f ^= f >> 2 * b, b = c;
                return f
            }
    }
}();
if ("undefined" === typeof sketch) var sketch = {};
sketch = function (a) {
    a.configure || (a.configure = {
        tools: {}
    });
    a.convert || (a.convert = {});
    a.feature || (a.feature = {});
    a.vector || (a.vector = {});
    a.ui || (a.ui = {});
    a.util || (a.util = {});
    a.location || (a.location = {});
    a.language || (a.language = {
        data: {}
    });
    a.display || (a.display = {
        mode: "sketchpad"
    });
    a.generate || (a.generate = {});
    a.setup || (a.setup = {});
    a.media || (a.media = {});
    a.supports || (a.supports = {});
    a.tool || (a.tool = {});
    a.toolkit || (a.toolkit = {
        __init: {},
        __icons: {}
    });
    a.__editing = !1;
    a.__enabled = !1;
    a.__modified = !1;
    a.__modifiedOnline = !1;
    a.__rendering = !1;
    a.__state = "";
    a.__version = "3.3";
    "{{" == a.__version.substr(0, 2) && (a.__version = "3.3dev");
    window.location && (a.__debug = "?debug" === window.location.search);
    a.configure.fileName = "Drawing";
    a.configure.fileDescription = "made with https://sketch.io/";
    a.configure.defaultFileName = a.configure.fileName;
    a.configure.defaultFileDescription = a.configure.fileDescription;
    a.configure.fileFormat = "json";
    a.configure.lang = "en";
    a.configure.theme = "light";
    a.configure.prefix = "sketch";
    a.configure.defaultSketch =
        "new";
    a.configure.background = void 0;
    a.configure.defaultFill = {
        type: "gradient"
    };
    a.configure.defaultStroke = {
        type: "gradient"
    };
    a.configure.image = {
        mime: "image/png",
        quality: 1
    };
    a.feature.debug = !1;
    a.feature.debugCache = !1;
    a.feature.debugMouse = !1;
    a.feature.debugRender = !1;
    a.feature.log = !1;
    a.feature.bruteForce = !0;
    a.feature.cacheSVG = !0;
    a.feature.tools = {};
    a.feature.tools.drawBoundingBox = !0;
    a.feature.tools.controls = {};
    a.feature.tools.controls.ne = !0;
    a.feature.tools.controls.nw = !0;
    a.feature.tools.controls.se = !0;
    a.feature.tools.controls.sw = !0;
    a.feature.tools.usePointInPath = !1;
    a.feature.tools.usePointInBoundingBox = !0;
    a.feature.tools.usePointInImageData = !0;
    a.feature.tools.movable = !0;
    a.feature.canvas = {};
    a.feature.canvas.infinite = !1;
    a.feature.canvas.scaleContainer = !1;
    a.feature.canvas.clearWithBackground = !1;
    a.feature.canvas.drawClippingBox = !1;
    a.feature.canvas.zoom = !0;
    a.feature.canvas.editable = !0;
    a.feature.canvas.cache = !0;
    a.feature.canvas.cache257 = !1;
    a.feature.social = {};
    a.feature.social.directTransfer = !1;
    a.feature.social.setCookie = !0;
    a.feature.social.autoLogout = !1;
    a.feature.social.autoLogoutTimeout = !1;
    a.feature.openImageAsSketch = !1;
    a.feature.beforeUnloadPrompt = !1;
    a.feature.customCursor = !1;
    a.feature.windows = !0;
    a.feature.preventScroll = !1;
    a.feature.requireAuth = !1;
    a.feature.exportDrop = !1;
    a.feature.ui = {};
    a.feature.ui.mediaSelect = !1;
    a.feature.palette = {};
    a.feature.palette.closeButton = !1;
    a.feature.palette.eyeDropper = !1;
    a.feature.palette.grid = !1;
    a.feature.palette.color = !1;
    a.feature.palette.gradient = !1;
    a.feature.palette.pattern = !1;
    a.feature.palette.blendmode = !1;
    a.feature.placement = {};
    a.feature.placement.drag = !0;
    a.feature.placement.click = !0;
    a.feature.placement.mediaClick = !0;
    a.feature.placement.mediaDrag = !0;
    a.feature.placement.maxWidth = INFINITY;
    a.feature.placement.minWidth = 1;
    a.feature.placement.maxHeight = INFINITY;
    a.feature.placement.minHeight = 1;
    a.feature.history = {};
    a.feature.history.autoSelect = !0;
    a.feature.history.bitmap = !1;
    a.feature.history.vector = !1;
    a.feature.history.limit = !1;
    a.feature.sync = {};
    a.feature.sync.json = !1;
    a.feature.sync.thumb = !1;
    a.feature.sync.image = !1;
    a.feature.sync.svg = !1;
    a.feature.sync.zip = !1;
    a.feature.sync.maxFileSize = 0;
    a.feature.sync.maxAssetSize = 0;
    a.feature.sync.localRefs = !0;
    a.feature.sync.useDefaultFormat = !1;
    a.feature.sync.hash = !1;
    a.feature.stream = {};
    a.feature.stream.audio = !1;
    a.feature.stream.maxFileSize = 0;
    a.feature.stream.video = !1;
    a.feature.stream.videoAtop = !1;
    a.feature.stream.sketch = !1;
    a.feature.stream.sketchLive = !1;
    a.feature.stream.spectrumAnalysis = !1;
    a.feature.stream.tech = "RTCDataChannel";
    a.feature.stream.text = !1;
    a.version = function (a, b) {
        function f(a, b) {
            b =
                b || 4;
            a = a.split(".").map(function (a) {
                var b = parseInt(a);
                return (a = a.replace(b, "")) ? b + a[0].charCodeAt() / 255 : b
            });
            for (var f = 0, c = 0; c < a.length && b !== c; ++c) f += a[c] / 255 * Math.pow(255, b - c + 1);
            return f
        }
        this.value = a;
        this.hash = f(a, b);
        this.isGreaterThan = function (b, e) {
            return f(a, e) > f(b, e)
        };
        this.isLessThan = function (b, e) {
            return f(a, e) < f(b, e)
        };
        return this
    };
    a.canvas2d = {
        pixelRatio: window.devicePixelRatio || 1,
        scale: 1,
        top: 0,
        left: 0,
        clip: {
            x1: 0,
            y1: 0,
            x2: Infinity,
            y2: Infinity
        },
        bounds: {
            x1: 0,
            y1: 0,
            x2: Infinity,
            y2: Infinity
        },
        layers: {
            cache: "display: none",
            bitmap: "display: none",
            layer0: "z-index: 0;",
            draw: "z-index: 1;",
            active: "z-index: 2;"
        }
    };
    a.project = new function () {
        this.autoResize = !0;
        this.scrollTop = this.scrollLeft = this.height = this.width = 0;
        this.fileFormat = "json";
        this.fileName = a.configure.defaultFileName;
        this.fileDescription = a.configure.defaultFileDescription;
        this.setSize = function (c, b, f) {
            c || b ? f ? (this.width = c, this.height = b, this.autoResize = !0) : (this.width = c, this.height = b, this.autoResize = !1) : (this.height = this.width = 1, this.autoResize = !0);
            a.setSize()
        }
    };
    (function () {
        var c = {};
        a.enable = function () {
            a.__enabled = !0;
            c.tool = !0;
            for (var b in c) {
                var f = a[b];
                f && f.enable && f.enable()
            }
        };
        a.disable = function () {
            a.__enabled = !1;
            for (var b in a) {
                var f = a[b];
                f.disable && f.enabled && !f.skipGlobalDisable ? (c[b] = !0, f.disable()) : delete c[b]
            }
        }
    })();
    a.hide = function () {
        a.canvas2d.container.style.display = "none"
    };
    a.show = function () {
        a.canvas2d.container.style.display = "block"
    };
    a.construct = function (c) {
        if (!c) return console.log("construct requires configuration");
        if (!a.__state) {
            a.__state = "building";
            for (var b = ["prefix", "lang", "background", "defaultSketch"], f = 0; f < b.length; f++) {
                var h = b[f];
                c[h] && (a.configure[h] = c[h], delete c[h])
            }
            var e = c.onready || c.onReady;
            a.onSketchReady = function () {
                a.__state = "ready";
                a.onSketchReady = function () {};
                a.feature.history.bitmap && a.history.storeBitmap();
                e && setTimeout(function () {
                    e("sketch")
                }, 1)
            };
            mergeObject(c.icons || {}, a.toolkit.__icons);
            mergeObject(c.configure || {}, a.configure);
            mergeObject(c.feature || {}, a.feature);
            a.location.setHost(a.configure.hosts || c.hosts);
            a.setContainer(c);
            b = a.canvas2d;
            a.setBackground(a.configure.background || "none");
            a.setLanguage(a.configure.lang || "en");
            a.project.autoResize = a.feature.canvas.infinite;
            a.setSize(c.width, c.height);
            a.scale2d(c.scale || b.scale);
            c = b.layers;
            a.active = c.active.ctx;
            a.cache = c.cache.ctx;
            a.ctx = c.layer0.ctx;
            a.style.colors = [0, "rgba(255,139,225,1)"];
            a.style.stroke = new a.style;
            a.style.fill = new a.style;
            !1 === a.feature.palette.gradient && (a.style.stroke.type = "color", a.style.fill.type = "color");
            a.setup.toolkits();
            a.supports.detect(function () {
                a.construct.loadModules();
                a.feature.debug && (document.body.style.overflow = "auto");
                a.setup.events();
                a.getItem("sync", function (b) {
                    a.configure.sync = b;
                    a.openFile()
                })
            })
        }
    };
    a.construct.loadModules = function () {
        globalExists("detectZoom") && (a.util.detectZoom = detectZoom());
        globalExists("FiniteMath.getScreenMetrics") && (a.convert.metrics = FiniteMath.getScreenMetrics());
        globalExists("DOMLoader.image") && (DOMLoader.image.proxyUrl = a.location.host + "getImage.php?url=");
        globalExists("EnableContextMenu") && (a.ui.contextMenu = EnableContextMenu(document,
            window));
        globalExists("Vector") && (a.vector.text = Vector.Text);
        globalExists("Vector.Polygon") && (a.vector.polygon = new Vector.Polygon);
        globalExists("Vector.Shapes") && (a.vector.VOBPath = Vector.Shapes.VOBPath);
        globalExists("sketch.save") && (a.save = new a.save(a));
        if (globalExists("sketch.actions")) {
            var c = a.actions = new a.actions(a);
            c.loadTransferModule && c.loadTransferModule()
        }
        globalExists("sketch.history") && (a.history = new a.history(a));
        globalExists("sketch.camera") && (a.camera = new a.camera(a));
        globalExists("sketch.rtc") &&
            (a.rtc = new a.rtc(a));
        globalExists("sketch.area") && (c = a.area.buttons, c = "touch" === Event.pointerType ? c.touch : c.mouse, a.area.buttonSize = c.buttonSize, a.area.padding = c.padding);
        globalExists("widget.Thumbnailer") && !a.thumbnailer && (a.thumbnailer = new widget.Thumbnailer);
        globalExists("widget.Loader") && !a.loader && (a.loader = new widget.Loader);
        globalExists("widget.Growl") && !a.growl && (a.growl = new widget.Growl);
        globalExists("widget.Vortex") && (a.vortex = widget.Vortex(document.body));
        a.assets && (a.assets = new a.assets);
        a.palette && (a.palette = new a.palette);
        a.setup.colorPicker && a.setup.colorPicker();
        a.setup.uploader && a.setup.uploader();
        a.setup.contextMenu && a.setup.contextMenu();
        globalExists("sketch.keyboard.setup") && a.keyboard.setup();
        globalExists("sketch.render.cache2d") && (a.render.cache = new a.render.cache2d, a.render.cache.enabled = a.feature.canvas.cache)
    };
    a.setContainer = function (c) {
        var b = "string" === typeof c ? c : c.container || document.body;
        "string" === typeof b && (b = document.querySelector(b));
        c = c.scrollElement || b.parentNode ||
            b;
        a.canvas2d.container = b;
        a.canvas2d.scrollElement = c;
        return b
    };
    a.location.getHash = function (c) {
        var b = "?" + window.location.hash.substr(1),
            b = parseUri(b).queryKey;
        a.location.hash = b;
        a.configure.fileName = b.sketch || a.configure.fileName;
        return c ? b[c] : b
    };
    a.location.getSearch = function () {
        var c = parseUri(window.location.search).queryKey;
        return a.location.search = c
    };
    a.location.update = function () {
        a.location.search = a.location.getSearch();
        a.location.hash = a.location.getHash()
    };
    a.location.setHost = function (c) {
        var b = a.fileSystem &&
            a.fileSystem.getRootPath() || "",
            f = function (a) {
                return -1 === a.indexOf("://") ? d + a : a
            }, h = function (e, h, c) {
                for (var l in e) e[l].replace && (e[l] = e[l].replace(h, c));
                a.location.host = e.pathWeb;
                a.location.hostIO = e.hostIO;
                a.location.hostRTC = e.hostRTC;
                a.location.pathWeb = f(e.pathWeb);
                a.location.pathJS = f(e.pathJS);
                a.location.pathGet = f(e.pathGet || b);
                a.location.pathSave = f(e.pathSave || b)
            }, e = function (e) {
                a.location.host = e.pathWeb;
                a.location.hostIO = e.hostIO;
                a.location.hostRTC = e.hostRTC;
                a.location.pathWeb = f(e.pathWeb);
                a.location.pathJS =
                    f(e.pathJS);
                a.location.pathGet = f(e.pathGet || b);
                a.location.pathSave = f(e.pathSave || b)
            };
        c = c || a.location.hosts || {};
        a.location.hosts = c;
        a.location.update();
        var l = window.location,
            d = l.protocol + "//",
            k = l.hostname;
        if (c[k]) return e(c[k]);
        for (var g in c)
            if (e = c[g], e.alias && -1 !== e.alias.indexOf(k)) return h(clone(e), g, k);
        return function () {
            a.feature.debug && console.log("WARNING: Host is not set.");
            var e = l.href.split("#")[0].split("?")[0].split("/");
            e.pop();
            e = e.join("/") + "/";
            a.location.host = e;
            a.location.pathWeb = e;
            a.location.pathJS =
                e + "js/";
            a.location.pathGet = b;
            a.location.pathSave = b
        }()
    };
    a.location.setHash = function (c, b) {
        if ("string" === typeof c) {
            var f = a.location.getHash();
            f[c] = b;
            a.location.setHash(f)
        } else if (b) {
            var f = a.location.getHash(),
                h;
            for (h in c) f[h] = c[h];
            a.location.setHash(f)
        } else {
            f = [];
            c = c || a.location.getHash();
            for (h in c) {
                var e = c[h];
                void 0 !== e && (e ? f.push(h + "=" + e) : f.push(h))
            }
            f = "#" + f.join("&");
            window.location.hash !== f && (window.location.hash = f)
        }
    };
    a.setLanguage = function (c) {
        if (a.language[c]) {
            a.configure.lang = c;
            a.language.data = {};
            c = a.language[c];
            for (var b in c) a.language.data[b] = c[b]
        } else console.log("root.setLanguage", "Language: '" + c + "' not available.")
    };
    a.getTranslation = function (c) {
        var b = a.configure.lang,
            f = a.language.data[c];
        f || "en" === b || a.feature.debug && console.log("root.getTranslation", "missing translation", c);
        return f || c
    };
    a.setBackground = function (c) {
        if (c) {
            var b = a.canvas2d.container.style,
                f = a.generate.interlace,
                h = a.configure,
                e = function (e, f, l) {
                    h.theme = l;
                    e(f, function (a) {
                        b.background = a.css;
                        h.backgroundRaw = a
                    });
                    a.setItem("backdrop",
                        c)
                };
            a.project.background = c;
            switch (c) {
            case "blank":
                h.theme = "dark";
                b.background = "#fff";
                h.backgroundRaw = "#fff";
                a.setItem("backdrop", "light");
                return;
            case "white":
                h.theme = "light";
                b.background = "#fff";
                h.backgroundRaw = "#fff";
                a.setItem("backdrop", "light");
                return;
            case "black":
                h.theme = "dark";
                b.background = "#000";
                h.backgroundRaw = "#000";
                a.setItem("backdrop", "dark");
                return;
            case "grid":
                return e(a.generate.grid, "grid", "light");
            case "graphPaper":
                return e(a.generate.grid, "graphPaper", "light");
            case "bluePrint":
                return e(a.generate.grid,
                    "bluePrint", "light");
            case "notebook":
                return e(a.generate.paper, "notebook", "light");
            case "looseLeaf":
                return e(a.generate.paper, "looseLeaf", "light");
            case "lined":
                return e(a.generate.paper, "lined", "dark");
            case "transparent":
                b.background = "url(" + f(12, "#fff", "#d9d9d9").data + ")";
                h.theme = c;
                break;
            case "transparentDark":
                b.background = "url(" + f(12, "#000", "#1f1f1f").data + ")";
                h.theme = c;
                break;
            default:
                f = c.trim(), -1 !== f.indexOf("://") && "url" !== f.substr(0, 3) && (f = "url(" + f + ")"), b.background = f
            }
            if (c.indexOf && -1 !== c.indexOf("url(")) {
                var l =
                    document.createElement("img"),
                    f = c.substr(4, c.length - 5).split("'").join("").split('"').join(""),
                    d = document.createElement("canvas").getContext("2d");
                l.onload = function () {
                    var a = d.createPattern(l, "repeat");
                    h.backgroundRaw = a
                };
                l.src = f
            } else h.backgroundRaw = c;
            a.actions && (a.actions.hasSelection && a.actions.hasSelection()) && a.actions.render("root.setBackground");
            a.setItem("backdrop", c)
        } else a.getItem("backdrop", function (b) {
            a.setBackground(b || "light")
        })
    };
    a.setSize = function (c, b, f) {
        var h = !a.feature.canvas.editable &&
            a.cache && !f,
            e = a.canvas2d,
            l = e.layers,
            d = e.container,
            k = d.parentNode;
        k.style.overflow = "auto";
        if (a.project.autoResize) {
            var g = k;
            d.style.width = g.style.width = "inherit";
            d.style.height = g.style.height = "inherit";
            k.scrollTop = 0
        } else g = d;
        var p = e.scale,
            r = window.innerWidth - e.bounds.x1,
            t = window.innerHeight - e.bounds.y1;
        isFinite(e.bounds.x2) && (r = Math.min(r, e.bounds.x2 - e.bounds.x1));
        isFinite(e.bounds.y2) && (t = Math.min(t, e.bounds.y2 - e.bounds.y1));
        if (c && b) var s = c * p,
        u = b * p;
        else a.project.autoResize ? (s = (a.project.width || 1) *
            r * p, u = (a.project.height || 1) * t * p) : (s = a.project.width * p, u = a.project.height * p);
        s && u || (c = Event.proxy.getBoundingBox(g), s = c.width - e.bounds.x1, u = c.height - e.bounds.y1);
        d.style.width = s + "px";
        d.style.height = u + "px";
        a.project.autoResize ? k.style.overflow = "hidden" : (k.style.overflowX = s <= r ? "hidden" : "auto", k.style.overflowY = u <= t ? "hidden" : "auto", s <= r && u <= t && a.reset.scroll());
        a.feature.canvas.scaleContainer && !a.render.forOutput ? (c = Math.min(s, r), b = Math.min(u, t)) : (c = s, b = u, k.style.overflow = "visible", k.scrollTop = 0);
        f ? (e.width =
            s, e.height = u) : (e.width = c / p, e.height = b / p);
        k && "sketchpad" === k.id && (k.style.width = c + "px", k.style.height = b + "px");
        h && (a.cache.canvas.width = c, a.cache.canvas.height = b, a.cache.drawImage(a.ctx.canvas, 0, 0));
        for (var y in l) h && "cache" === y || (f = a.Canvas(null, null, y), e.container.appendChild(f), l[y].indexOf && (f.style.cssText = e.layers[y]), f.style.width = e.width * p + "px", f.style.height = e.height * p + "px", l[y] = f);
        h && (a.ctx.canvas.width = c, a.ctx.canvas.height = b, a.ctx.drawImage(a.cache.canvas, 0, 0), a.cache.canvas.width = c, a.cache.canvas.height =
            b);
        if (a.actions && a.actions.data) {
            h = a.actions.selection;
            for (y in h)
                if (h = a.actions.data[y]) h.dirtyControl = !0;
            a.actions.detectVisible();
            widget.windows.restore()
        }
    };
    a.Canvas = function (c, b, f) {
        var h;
        f && (h = document.getElementById(f));
        h || (h = document.createElement("canvas"));
        a.supports.png || (h.onload = a.supports.detect);
        h.id = f || "";
        h.ctx = h.getContext("2d");
        c && b ? (h.width = c || 1, h.height = b || 1) : (c = a.canvas2d, h.width = c.width * c.pixelRatio, h.height = c.height * c.pixelRatio);
        return h
    };
    a.scale2d = function (c) {
        var b = a.canvas2d;
        c && (b.scale = c);
        c = 1 * b.scale / b.pixelRatio;
        var b = b.layers,
            f;
        for (f in b) {
            var h = b[f],
                e = h.height * c;
            h.style.width = h.width * c + "px";
            h.style.height = e + "px";
            h.style.left = 0;
            h.style.top = 0;
            h.parentNode.scrollLeft = 0;
            h.parentNode.scrollTop = 0
        }
    };
    a.supports.detect = function (c) {
        var b = 0,
            f = function () {
                !--b && c && c()
            }, h = document.createElement("canvas"),
            e = function (e, c) {
                ++b;
                var d = h.toDataURL(c).split(";")[0].substr(5);
                a.supports[e] = d === c;
                setTimeout(f, 1)
            };
        a.configure.image.mime = "image/png";
        a.configure.image.quality = 1;
        e("jpeg", "image/jpeg");
        e("png", "image/png");
        e("webp", "image/webp");
        e("bmp", "image/bmp");
        (function (e, c) {
            try {
                ++b, h.toBlob(function (b) {
                    var e = new Image;
                    e.onload = function () {
                        a.supports.blob = !(0 === this.width && 0 === this.height);
                        f()
                    };
                    e.onerror = function () {
                        a.supports.blob = !1;
                        f()
                    };
                    e.src = URL.createObjectURL(b)
                })
            } catch (d) {
                a.supports.blob = !1, setTimeout(f, 1)
            }
        })();
        a.style && (e = function (b, e) {
            a.supports[b] = {};
            for (var h = a.style[e], f = 1; f < h.length; f++) {
                var c = h[f],
                    d = document.createElement("canvas").getContext("2d");
                d.globalCompositeOperation = c;
                a.supports[b][c] = d.globalCompositeOperation === c
            }
        }, e("blendmode", "blendmodes"), e("compositemode", "compositemodes"));
        e = navigator.userAgent || navigator.vendor || window.opera;
        a.supports.mobile = /Android|Blackberry|iPhone|iPad|iPod|Opera Mini|IEMobile|Symbian|WebOS/.test(e);
        a.supports.mac = /Mac/.test(e);
        a.supports.windows = /Windows/.test(e);
        a.supports.linux = /Linux/.test(e)
    };
    a.antizoom = function () {};
    var g = function () {
        var c = a.canvas2d.container.parentNode;
        a.setSizeAndUpdate = function (b, f) {
            a.setSize(b, f);
            a.actions.render("root.resize")
        };
        Event.add(window, "resize", function () {
            window.clearTimeout(window.resizeTimeout);
            window.resizeTimeout = window.setTimeout(function () {
                a.antizoom();
                a.setSizeAndUpdate()
            }, 100)
        });
        Event.add(c, "scroll", function (b) {
            b = c.scrollTop;
            var f = c.scrollLeft;
            a.project.scrollTop = c.scrollTop;
            a.project.scrollLeft = c.scrollLeft;
            var h = a.canvas2d.layers,
                e;
            for (e in h) {
                var l = h[e];
                l.style.left = f + "px";
                l.style.top = b + "px"
            }
            if (a.actions) {
                for (e in a.actions.data) b = a.actions.data[e], b.dirtyTransform = !0, delete b.visible;
                (b = a.actions.data[a.actions.idx]) &&
                    ("text" === b.type && a.toolkit.text) && a.toolkit.text.updateCSS();
                a.actions.render("container.onscroll")
            }
        });
        a.antizoom()
    }, d = function () {
            var c = function () {
                a.dataChannel ? (a.openFile(), a.dataChannel.send(["session.change", b])) : a.openFile()
            }, b = a.getRoomID();
            Event.add(window, "hashchange", function (f) {
                f = a.getRoomID();
                if (b !== f) {
                    var h = b;
                    b = f;
                    "ready" === a.__state && a.actions.data.length ? a.confirm({
                        message: "open-confirm",
                        callback: function (b) {
                            b ? (a.run("save"), a.location.setHash("sketch", h)) : c()
                        },
                        labels: {
                            ok: "Save sketch",
                            cancel: "No thanks"
                        }
                    }) : c()
                }
            })
        };
    a.setup.events = function () {
        var c = a.canvas2d.container;
        g();
        d();
        var b = function (b, e) {
            var f = document.querySelector(b);
            f && (Event.add(f, "contextmenu", function (b) {
                var h = a.toolkit.select.getCoord(b);
                contextmenu.show(a.ui[e], h.x - 15, 45, !0);
                Event.cancel(b)
            }), Event.proxy.longpress({
                target: f,
                timeout: 250,
                listener: function (b, h) {
                    if ("start" === h.state) {
                        var f = a.toolkit.select.getCoord(b);
                        contextmenu.show(a.ui[e], f.x - 15, 45, !0)
                    }
                }
            }))
        };
        a.ui.contextMenu && (b(".sketch-brush-menu", "menuBrushTools"),
            b(".sketch-shape-menu", "menuShapeTools"));
        (b = document.querySelector(".tab-print")) && globalExists("chrome.storage.local") && (b.style.display = "none");
        each(document.querySelectorAll(".foxywindow"), a.setup.foxyWindowEvent);
        each(document.querySelectorAll(".sketch-tools img"), function (a) {
            Event.add(a, "mousedown", function () {
                return !1
            })
        });
        document.querySelector(".sketch-tools .right") && each(document.querySelectorAll(".sketch-tools .right button"), function (b) {
            Event.add(b, "dbltap", function (b) {
                a.run("configure-blink")
            })
        });
        var f = {
            menu: !0,
            "menu-download": !0,
            "menu-export": !0,
            "menu-about": !0,
            configure: !0,
            palette: !0
        };
        each(document.querySelectorAll(".sketch-tools button"), function (b) {
            b.id && 0 === b.id.indexOf("tool-") && (Event.add(b, "contextmenu mousedown", function (a, b) {
                Event.cancel(a)
            }), Event.add(b, "click", function (b, h) {
                var c = h.target.id.substr(5);
                if (f[c]) return a.run(c);
                "camera" === c && globalExists("chrome.permissions.request") ? chrome.permissions.request({
                    permissions: ["videoCapture"]
                }, function (b) {
                    b ? (widget.windows.open("sketch-configure"),
                        a.run(c)) : alertify.log("Access to camera was denied.")
                }) : (widget.windows.open("sketch-configure"), a.run(c))
            }))
        });
        Event.add(a.active.canvas, "contextmenu", Event.prevent);
        widget.windows && Event.add(a.active.canvas, "mouseup", widget.windows.clearFocus);
        Event.add(a.active.canvas, "click", function () {
            document.activeElement !== document.body && document.activeElement && document.activeElement.blur()
        });
        a.feature.preventScroll && !a.feature.debugCache && (Event.proxy.wheelPreventElasticBounce(".open-project-listing"), Event.add(window,
            "wheel", Event.cancel), Event.add(c, "wheel", Event.stop));
        a.feature.beforeUnloadPrompt && Event.add(window, "beforeunload", function (b) {
            var e = a.feature.beforeUnloadPrompt;
            return (b || window.event).returnValue = e
        });
        Event.add(window, "scroll", function () {
            widget.windows.restore()
        });
        "touch" === Event.pointerType && Event.add(document, ["touchstart", "touchmove", "dragstart"], Event.prevent);
        a.ui && a.ui.setupStartWindow && a.ui.setupStartWindow();
        Event.add(window, "focus load", function () {
            Event.proxy.metaTrackerReset()
        });
        Event.add(window,
            "blur", function () {
                Event.proxy.metaTrackerReset()
            })
    };
    a.setup.foxyWindowEvent = function (a) {
        var b, f = a.id;
        Event.add(a, "contextmenu", function (a) {
            b && b.remove && b.remove()
        });
        Event.add(a, "mousedown", function (a) {
            b = widget.windows.drag(this, a)
        });
        "sketchpad" === f && Event.add(a, "dbltap", function (b) {
            a.className = ""
        });
        "sketch-tools" !== f && ((f = a.querySelector("span.close")) && Event.add(f, "click", function (a, b) {
            setTimeout(function () {
                widget.windows.close(b.target.parentNode.parentNode.id)
            }, 1);
            Event.cancel(a)
        }), each(a.querySelectorAll(".tree"),
            function (a) {
                Event.add(a, "click", function (a, b) {
                    widget.windows.setCurrentTab("sketch-open", ".start")
                })
            }))
    };
    a.setup.defaultSketch = function () {
        a.feature.stream.sketch = !1;
        a.feature.stream.sketchLive = !1;
        a.openFile()
    };
    a.run = function (c, b, f) {
        if (c === a.tool.type) "function" === typeof b && b();
        else {
            var h = "root.run(" + Array.prototype.slice.call(arguments).join(",") + ")";
            switch (c) {
            case "layer-to-stamp":
                a.assets.addStampFromSelection();
                return;
            case "layer-merge":
                a.assets.addCloneFromSelection();
                return;
            case "layer-forwards":
                if (!a.actions.sendForwards) return;
                a.actions.sendForwards({
                    record: !0
                });
                a.actions.render(h);
                return;
            case "layer-to-front":
                if (!a.actions.sendForwards) return;
                a.actions.sendForwards({
                    record: !0,
                    toFront: !0
                });
                a.actions.render(h);
                return;
            case "layer-backwards":
                if (!a.actions.sendBackwards) return;
                a.actions.sendBackwards({
                    record: !0
                });
                a.actions.render(h);
                return;
            case "layer-to-back":
                if (!a.actions.sendBackwards) return;
                a.actions.sendBackwards({
                    record: !0,
                    toBack: !0
                });
                a.actions.render(h);
                return;
            case "layer-delete":
                a.active.canvas.width = a.active.canvas.width;
                a.actions.removeSelection(!0);
                a.actions.render(h);
                return;
            case "layer-copy":
                if (!a.actions.copy) return;
                a.actions.copy();
                a.actions.runSelection("dirtyControl", !0);
                a.actions.render(h);
                return;
            case "layer-cut":
                if (!a.actions.cut) return;
                a.active.canvas.width = a.active.canvas.width;
                a.actions.cut();
                a.actions.render(h);
                return;
            case "layer-paste":
                if (!a.actions.paste) return;
                a.actions.paste(function () {
                    b && a.actions.deselectAll();
                    a.actions.render(h);
                    a.run("select")
                });
                return;
            case "layer-move-left":
                var e = a.keyboard.pressed,
                    e = e[37] ? "" : "cache";
                a.actions.move(-(b || 1), 0, e);
                return;
            case "layer-move-up":
                e = a.keyboard.pressed;
                e = e[38] ? "" : "cache";
                a.actions.move(0, -(b || 1), e);
                return;
            case "layer-move-right":
                e = a.keyboard.pressed;
                e = e[39] ? "" : "cache";
                a.actions.move(b || 1, 0, e);
                return;
            case "layer-move-down":
                e = a.keyboard.pressed;
                e = e[40] ? "" : "cache";
                a.actions.move(0, b || 1, e);
                return;
            case "select-all":
                a.run("select");
                a.actions.selectAll();
                a.actions.render(h);
                return;
            case "select-inverse":
                a.run("select");
                a.actions.selectAll(!0);
                a.actions.render(h);
                return;
            case "deselect-all":
                a.actions.deselectAll();
                a.actions.render(h);
                return;
            case "undo":
                if (!a.history) return;
                a.actions.deselectAll();
                a.history.undo();
                return;
            case "redo":
                if (!a.history) return;
                a.actions.deselectAll();
                a.history.redo();
                return;
            case "take-snapshot":
            case "camera":
                if (!a.camera.capture || a.camera.capturing) return;
                a.display.sketchpad && a.display.sketchpad();
                a.rtc.videos.you ? a.camera.capture(null, null, rtc && rtc._me.id, null, function () {
                    a.run("select")
                }) : a.setup.webRTC(function () {
                    a.run("take-snapshot");
                    a.rtc.pause()
                });
                return;
            case "clear":
                a.ctx.canvas.width = a.ctx.canvas.width;
                a.actions.removeAll(!0);
                return;
            case "new":
                a.ctx.canvas.width = a.ctx.canvas.width;
                a.actions.reset();
                a.history.reset();
                a.reset.scroll();
                a.reset.scale();
                a.display.sketchpad && a.display.sketchpad();
                return;
            case "new-project":
            case "new-prompt":
                if ((!a.actions || a.actions && 0 === a.actions.data.length) && (!a.history || a.history && 0 === a.history.history.vector.data.length)) {
                    a.run("new");
                    b && b();
                    window.alertify && alertify.log("New Project Created!");
                    return
                }
                return a.confirm({
                    message: "clear-confirm",
                    callback: function (e) {
                        e ? (a.run("new"), b && b(), window.alertify && alertify.log("New Project Created!")) : f && f()
                    },
                    labels: {
                        ok: "New Project",
                        cancel: "Cancel"
                    }
                });
            case "print":
                return a.print();
            case "configure":
            case "configure-blink":
                e = -1 === c.indexOf("blink") ? "toggle" : "blink";
                widget.windows[e]("sketch-configure", function (b) {
                    if (b) {
                        b = a.tool.type;
                        if ("select" === b) {
                            var e = a.actions.data[a.actions.idx];
                            e && (b = e.type)
                        }
                        a.ui.buildConfigure(b, !0)
                    }
                });
                return;
            case "save-sketch":
                widget.windows.write(c);
                e = document.querySelector("#sketch-sync");
                e.innerHTML = a.configure.sync || "";
                e.href = a.createURL("share");
                e = document.querySelector("#avgrund-html .filename");
                e = document.querySelector("#avgrund-html .description");
                return;
            case "open-sketch":
                widget.windows.write(c);
                window.API && API.Sketchpad.list();
                return;
            case "open-drive":
                widget.windows.write(c);
                window.API && API.GoogleDrive.list();
                return;
            case "save-drive":
                widget.windows.write(c);
                window.API && API.GoogleDrive.enable();
                document.querySelector("#sketch-file .filename").value =
                    a.fileName || "";
                return;
            case "save":
            case "save-image":
                return a.download.image();
            case "save-gif":
            case "save-jpeg":
            case "save-png":
            case "save-webp":
                return a.download.image(c.substr(5));
            case "save-json":
                return a.download.json();
            case "save-pdf":
                return a.download.pdf();
            case "save-zip":
                return a.download.zip();
            case "login":
                a.loader.stop();
            case "open-computer":
            case "save-computer":
            case "file":
            case "open":
                return widget.windows.write(c);
            case "help":
                return widget.windows.getWindowById("sketch-help") ? widget.windows.toggle("sketch-help") :
                    widget.windows.write(c);
            case "about":
                return widget.windows.getWindowById("sketch-about") ? widget.windows.toggle("sketch-about") : widget.windows.write(c);
            case "colorPalette":
                a.colorPalette.enabled ? a.colorPalette.disable() : a.colorPalette.enable();
                return;
            case "menu":
                contextmenu.show(a.ui.menuMain, 12, 45, !0);
                return;
            case "menu-export":
                contextmenu.show(a.ui.menuMainExport, 100, 45, !0);
                return;
            case "menu-download":
                contextmenu.show(a.ui.menuMainDownload, 55, 45, !0);
                return;
            case "menu-about":
                contextmenu.show(a.ui.menuMainAbout,
                    145, 45, !0);
                return;
            case "palette":
            case "color-picker":
                widget.windows.toggle("sketch-palette");
                return;
            case "select":
                break;
            case "snapshot":
                a.actions.deselectAll();
                a.growl && a.growl.message("Click & drag to create your screenshot.");
                break;
            case "brush":
                a.actions.deselectAll();
                break;
            case "shape":
                a.actions.deselectAll();
                break;
            default:
                a.actions.deselectAll()
            }
            a.ui && a.ui.setToolMenu && (a.ui.setToolMenu(c), a.ui.buildConfigure(c));
            a.setTool(c, b);
            a.feature.canvas.editable && ("select" === c && a.actions.runSelection("dirtyControl", !0), a.actions.render("root.run('" + c + "');"))
        }
    };
    a.requestFullscreen = function (c) {
        c = c || a.canvas2d.container;
        c.requestFullscreen ? c.requestFullscreen() : c.mozRequestFullScreen ? c.mozRequestFullScreen() : c.webkitRequestFullscreen && c.webkitRequestFullscreen()
    };
    a.getItem = function (c, b) {
        b = b || function (a) {
            console.log(a)
        };
        if (globalExists("chrome.storage.local")) chrome.storage.local.get(c, function (a) {
            b(a[c])
        });
        else {
            var f = a.configure.prefix;
            "dev" === f ? (console.log("dev mode"), b("")) : (f = localStorage.getItem(f + "/" + c) ||
                "", b(f))
        }
    };
    a.setItem = function (c, b) {
        if (globalExists("chrome.storage.local")) {
            var f = {};
            f[c] = b;
            chrome.storage.local.set(f)
        } else localStorage.setItem(a.configure.prefix + "/" + c, b)
    };
    a.perf = function () {
        var a = (new Date).getTime();
        return function () {
            return (new Date).getTime() - a
        }
    };
    a.createURL = function (c) {
        switch (c) {
        case "share":
            return "http://sketchpad.io/sketch/#sketch=" + a.configure.sync
        }
    };
    a.confirm = function (c) {
        if (a.actions && "remove-confirm" !== c.message && (a.actions.deselectAll(), !1 === a.__modified)) return c.callback(!0);
        var b = a.getTranslation(c.message);
        c.labels && alertify.set({
            labels: c.labels
        });
        alertify.confirm('<h3 class="confirm-message">' + b + "</h3>", c.callback)
    };
    a.getRoomID = function () {
        if (a.server && a.server.enabled()) {
            var c = a.location.getHash("sketch");
            if (c) return c;
            if (c = window.location.pathname.substr(1)) return c.replace("()", "")
        }
    };
    a.getRandomID = function (a) {
        a || (a = 8);
        for (var b = ["a", "e", "i", "o", "u"], f = "bcdfghjklmnpqrstvwxyz".split(""), h = "", e = 0; e < a; e++) h = 0 == e % 2 ? h + b[4 * Math.random() >> 0] : h + f[20 * Math.random() >> 0];
        return h
    };
    a.isEditing = function () {
        var a = document.activeElement;
        if (!a) return !1;
        var b = document.activeElement.nodeName;
        return "INPUT" === b || "TEXTAREA" === b || "true" === a.contentEditable ? !0 : !1
    };
    a.param = function (a, b, f) {
        b = b.replace(")", "").split("(");
        this.param = a;
        this.format = b[0];
        this.range = b[1];
        this.value = f;
        return this
    };
    a.vars = {};
    a.vars.clamp = function (a, b, f, h) {
        "object" === typeof a ? (this.min = a[0], this.max = a[1], this.getValue = function () {
            return [this.min, this.max]
        }) : (this.value = a, this.getValue = function () {
            return this.value
        });
        this.clamp = {};
        this.clamp.min = b;
        this.clamp.max = f;
        this.type = "clamp";
        this.format = h || "float";
        return this
    };
    a.vars.select = function (a) {
        this.type = "select"
    };
    a.vars.color = function (a) {
        this.type = "color"
    };
    a.vars.filePicker = function (a) {
        this.type = "filePicker"
    };
    a.openFile = function () {
        var c = a.location.pathGet;
        if (c && 0 === c.indexOf("filesystem:")) a.fileSystem.openFile({
            onerror: function (b) {
                if (b && 1 === b.code) a.setBackground("notebook"), a.place([{
                    type: "text",
                    content: "Welcome to Sketchpad!",
                    fillStyle: "#001D54",
                    fontStyle: "italic",
                    fontSize: 48,
                    fontWeight: "bold",
                    fontFamily: "Mystery Quest",
                    textDecoration: "underline",
                    textTransform: "none",
                    letterSpacing: 0,
                    bbox: {
                        y: 100,
                        rotate: -15
                    }
                }, {
                    zIndex: 1,
                    bbox: {
                        x: 322,
                        y: 218,
                        width: 125,
                        height: 134,
                        padding: -10,
                        units: "objectBoundingBox",
                        viewBox: [0, 0, 125, 134],
                        scale: {
                            x: 1,
                            y: 1
                        },
                        rotate: 0
                    },
                    finger: "0:A",
                    type: "streamer",
                    data: [{
                        cmd: "M",
                        beginPath: !0,
                        interval: 76,
                        x: 1,
                        y: 28
                    }, {
                        cmd: "L",
                        x: 0,
                        y: 29
                    }, {
                        cmd: "L",
                        x: 0,
                        y: 34
                    }, {
                        cmd: "L",
                        x: 0,
                        y: 41
                    }, {
                        cmd: "L",
                        x: 2,
                        y: 51
                    }, {
                        cmd: "L",
                        x: 5,
                        y: 58
                    }, {
                        cmd: "L",
                        x: 10,
                        y: 70
                    }, {
                        cmd: "L",
                        x: 17,
                        y: 80
                    }, {
                        cmd: "L",
                        x: 25,
                        y: 91
                    }, {
                        cmd: "L",
                        x: 30,
                        y: 96
                    }, {
                        cmd: "L",
                        x: 37,
                        y: 102
                    }, {
                        cmd: "L",
                        x: 43,
                        y: 105
                    }, {
                        cmd: "L",
                        x: 47,
                        y: 107
                    }, {
                        cmd: "L",
                        x: 53,
                        y: 110
                    }, {
                        cmd: "L",
                        x: 59,
                        y: 111
                    }, {
                        cmd: "L",
                        x: 66,
                        y: 113
                    }, {
                        cmd: "L",
                        x: 72,
                        y: 114
                    }, {
                        cmd: "L",
                        x: 77,
                        y: 114
                    }, {
                        cmd: "L",
                        x: 82,
                        y: 113
                    }, {
                        cmd: "L",
                        x: 86,
                        y: 107
                    }, {
                        cmd: "L",
                        x: 90,
                        y: 97
                    }, {
                        cmd: "L",
                        x: 92,
                        y: 91
                    }, {
                        cmd: "L",
                        x: 96,
                        y: 79
                    }, {
                        cmd: "L",
                        x: 98,
                        y: 71
                    }, {
                        cmd: "L",
                        x: 100,
                        y: 61
                    }, {
                        cmd: "L",
                        x: 102,
                        y: 54
                    }, {
                        cmd: "L",
                        x: 104,
                        y: 41
                    }, {
                        cmd: "L",
                        x: 105,
                        y: 33
                    }, {
                        cmd: "L",
                        x: 105,
                        y: 23
                    }, {
                        cmd: "L",
                        x: 105,
                        y: 16
                    }, {
                        cmd: "L",
                        x: 105,
                        y: 12
                    }, {
                        cmd: "L",
                        x: 105,
                        y: 10
                    }, {
                        cmd: "L",
                        x: 105,
                        y: 8
                    }, {
                        cmd: "L",
                        x: 105,
                        y: 7
                    }, {
                        cmd: "L",
                        x: 105,
                        y: 6
                    }, {
                        cmd: "L",
                        x: 105,
                        y: 5
                    }, {
                        cmd: "L",
                        x: 105,
                        y: 3
                    }, {
                        cmd: "L",
                        x: 105,
                        y: 1
                    }, {
                        cmd: "L",
                        x: 105,
                        y: 0
                    }, {
                        cmd: "z",
                        x: 105,
                        y: 0
                    }],
                    interval: 76,
                    seed: 477099919,
                    composite: "paint",
                    opacity: 100,
                    spacing: {
                        min: 1,
                        max: 50
                    },
                    fill: {
                        type: "color",
                        color: "#e53939",
                        noise: !1,
                        mode: "linear",
                        gradient: "0.06567889822065,ff0c0126,0.1176747,ff19022a,0.22994306504649997,ff27032e,0.37598319999999996,ff43013a,0.43984393878431993,ff5f0046,0.544758,ff7e003a,0.6070303324195799,ff9e002f,0.7105123,ffce1129,0.77393466551848,fffe2323,0.8197397,fff6441a,0.8692658678592999,ffee6611,0.930715,fff68617,0.9802042847244999,ffffa61e"
                    },
                    offsetCache: 0,
                    dataHash: -13677187454
                }, {
                    zIndex: 2,
                    bbox: {
                        x: 357,
                        y: 196,
                        width: 20,
                        height: 73,
                        padding: -10,
                        units: "objectBoundingBox",
                        viewBox: [0, 0, 20, 73],
                        scale: {
                            x: 1,
                            y: 1
                        },
                        rotate: 0
                    },
                    finger: "0:A",
                    type: "streamer",
                    data: [{
                        cmd: "M",
                        beginPath: !0,
                        interval: 116,
                        x: 0,
                        y: 0
                    }, {
                        cmd: "L",
                        x: 0,
                        y: 1
                    }, {
                        cmd: "L",
                        x: 0,
                        y: 11
                    }, {
                        cmd: "L",
                        x: 0,
                        y: 26
                    }, {
                        cmd: "L",
                        x: 0,
                        y: 38
                    }, {
                        cmd: "L",
                        x: 0,
                        y: 42
                    }, {
                        cmd: "L",
                        x: 0,
                        y: 47
                    }, {
                        cmd: "L",
                        x: 0,
                        y: 53
                    }, {
                        cmd: "L",
                        x: 0,
                        y: 52
                    }, {
                        cmd: "z",
                        x: 0,
                        y: 52
                    }],
                    interval: 116,
                    seed: 781402420,
                    composite: "paint",
                    opacity: 100,
                    spacing: {
                        min: 1,
                        max: 50
                    },
                    fill: {
                        type: "color",
                        color: "#e53939",
                        noise: !1,
                        mode: "linear",
                        gradient: "0.06567889822065,ff0c0126,0.1176747,ff19022a,0.22994306504649997,ff27032e,0.37598319999999996,ff43013a,0.43984393878431993,ff5f0046,0.544758,ff7e003a,0.6070303324195799,ff9e002f,0.7105123,ffce1129,0.77393466551848,fffe2323,0.8197397,fff6441a,0.8692658678592999,ffee6611,0.930715,fff68617,0.9802042847244999,ffffa61e"
                    },
                    offsetCache: 0,
                    dataHash: -18402486422
                }, {
                    zIndex: 3,
                    bbox: {
                        x: 387,
                        y: 196,
                        width: 20,
                        height: 74,
                        padding: -10,
                        units: "objectBoundingBox",
                        viewBox: [0, 0,
                            20, 74
                        ],
                        scale: {
                            x: 1,
                            y: 1
                        },
                        rotate: 0
                    },
                    finger: "0:A",
                    type: "streamer",
                    data: [{
                        cmd: "M",
                        beginPath: !0,
                        interval: 125,
                        x: 0,
                        y: 0
                    }, {
                        cmd: "L",
                        x: 0,
                        y: 1
                    }, {
                        cmd: "L",
                        x: 0,
                        y: 8
                    }, {
                        cmd: "L",
                        x: 0,
                        y: 19
                    }, {
                        cmd: "L",
                        x: 0,
                        y: 30
                    }, {
                        cmd: "L",
                        x: 0,
                        y: 39
                    }, {
                        cmd: "L",
                        x: 0,
                        y: 47
                    }, {
                        cmd: "L",
                        x: 0,
                        y: 52
                    }, {
                        cmd: "L",
                        x: 0,
                        y: 54
                    }, {
                        cmd: "z",
                        x: 0,
                        y: 54
                    }],
                    interval: 125,
                    seed: 170050474,
                    composite: "paint",
                    opacity: 100,
                    spacing: {
                        min: 1,
                        max: 50
                    },
                    fill: {
                        type: "color",
                        color: "#e53939",
                        noise: !1,
                        mode: "linear",
                        gradient: "0.06567889822065,ff0c0126,0.1176747,ff19022a,0.22994306504649997,ff27032e,0.37598319999999996,ff43013a,0.43984393878431993,ff5f0046,0.544758,ff7e003a,0.6070303324195799,ff9e002f,0.7105123,ffce1129,0.77393466551848,fffe2323,0.8197397,fff6441a,0.8692658678592999,ffee6611,0.930715,fff68617,0.9802042847244999,ffffa61e"
                    },
                    offsetCache: 0,
                    dataHash: -3065061597
                }], function (b) {
                    a.fileSystem.save(function (b) {
                        a.onSketchReady()
                    });
                    a.setTool("select");
                    a.actions.select(b.zIndex, !0)
                });
                else a.onSketchReady()
            }
        });
        else if (a.server) a.server.getFile();
        else a.onSketchReady()
    };
    a.saveFile = function (c, b) {
        var f = a.location.pathGet;
        f && 0 === f.indexOf("filesystem:") ? a.fileSystem.save() : a.server.save(c, b)
    };
    a.reset = function () {
        a.reset.scale();
        a.reset.scroll();
        a.actions && a.actions.reset();
        a.history && a.history.reset(!0)
    };
    a.reset.configure = null;
    a.reset.scale =
        function () {
            a.canvas2d.scale = 1
    };
    a.reset.scroll = function () {
        var c = a.canvas2d.scrollElement;
        c.scrollTop = 0;
        c.scrollLeft = 0;
        a.project.scrollTop = 0;
        a.project.scrollLeft = 0
    };
    a.getCenterPoint = function () {
        var c = a.canvas2d,
            b = a.canvas2d.scale;
        return {
            x: c.width * b / 2 + a.project.scrollLeft - 1,
            y: c.height * b / 2 + a.project.scrollTop - 1
        }
    };
    a.$ = document.querySelector.bind(document);
    a.$$ = document.querySelectorAll.bind(document);
    a.fromId = document.getElementById.bind(document);
    a.fromClass = document.getElementsByClassName.bind(document);
    a.fromTag = document.getElementsByTagName.bind(document);
    return a
}(sketch);
"undefined" === typeof sketch && (sketch = {});
sketch.actions = function (a) {
    var g = this;
    this.data = [];
    this.copies = [];
    this.controls = [];
    this.hovered = {};
    this.selection = {};
    this.selectionCount = 0;
    a.render && (this.preload = a.render.preload, this.render = a.render.actions);
    a.area && (this.renderControls = a.area.renderControls);
    this.reset = function (b) {
        this.deselectAll();
        this.data = [];
        a.history && a.history.resetActionHistory();
        a.render && a.render.actions("root.actions.reset");
        b || a.fromServer || a.dataChannel && a.feature.stream.sketch && a.dataChannel.send(["actions.reset"])
    };
    this.add = function (b, e, h) {
        b = mergeObject(b, {
            id: this.createId(null, h),
            zIndex: this.data.length,
            bbox: {
                rotate: 0,
                scale: {
                    x: 1,
                    y: 1
                }
            }
        });
        "undefined" === typeof b.bbox.viewBox && (b.bbox.viewBox = [0, 0, b.bbox.width, b.bbox.height]);
        e || (e = {});
        e.src && (b.src = e.src, a.assets.add({
            src: e.src,
            onload: function (e) {
                b.src = e;
                if (a.peer && a.peer.sendFile) {
                    var h = a.assets.getAsBlob(e);
                    a.peer.sendFile(h, e)
                }
            }
        }));
        e.hideClose && (b.hideClose = e.hideClose);
        e.hideMove && (b.hideMove = e.hideMove);
        e.hideRotate && (b.hideRotate = e.hideRotate);
        e.hideScale &&
            (b.hideScale = e.hideScale);
        e.constrain && (b.constrain = e.constrain);
        e.constrainX && (b.constrainX = e.constrainX);
        e.constrainY && (b.constrainY = e.constrainY);
        e.stickToX && (b.stickToX = e.stickToX);
        e.stickToY && (b.stickToY = e.stickToY);
        e.minWidth && (b.bbox.minWidth = e.minWidth);
        e.minHeight && (b.bbox.minHeight = e.minHeight);
        e.maxWidth && (b.bbox.maxWidth = e.maxWidth);
        e.maxHeight && (b.bbox.maxHeight = e.maxHeight);
        e.canvasCtx && (b.canvasCtx = e.canvasCtx);
        e.canvas && (b.canvas = e.canvas);
        this.data.push(b);
        this.reindex();
        this.updateToolkit(b);
        e = this.getById(b.id).zIndex;
        this.id = b.id;
        this.idx = e;
        this.selection[e] = !0;
        this.selectionCount++;
        this.updateInfo();
        return b
    };
    this.updateInfo = function () {
        var a = document.querySelector(".select-count");
        a && (a.textContent = g.selectionCount + " selected")
    };
    this.remove = function (b, e) {
        switch (typeof b) {
        case "undefined":
            return;
        case "number":
            var h = {};
            h[b] = !0;
            b = h
        }
        for (var h = [], f = [], c = this.selection, d = this.data.length, g = 0; g < d; g++) {
            var s = this.data[g];
            b[g] ? (f.push(this.clone(s)), a.render.cache.clean(s)) : h.push(s);
            c[s.zIndex] &&
                (delete c[s.zIndex], this.selectionCount--)
        }
        e && a.history && a.history.store(f, "remove");
        this.data = h;
        this.reindex();
        this.updateInfo()
    };
    this.removeAll = function (a) {
        this.selectAll();
        this.remove(this.selection, a);
        this.deselectAll()
    };
    this.removeSelection = function (a) {
        this.remove(this.selection, a);
        this.deselectAll()
    };
    this.removeByName = function (b) {
        for (var e = this.data, h = [], f = e.length; f--;) {
            var c = e[f];
            c.name === b && (h.push(c), e.splice(f, 1), a.render.cache.clean(c))
        }
        this.reindex();
        h.length && a.history && (b = this.clone(h),
            a.history.store(b, "remove"))
    };
    this.deselect = function (a) {
        "undefined" === typeof a && (a = this.idx);
        if ("object" === typeof a)
            for (var b = 0; b < a.length; b++) this.deselect(a[b]);
        else this.selection[a] && (delete this.selection[a], this.selectionCount--, this.updateInfo()), a === this.idx && 1 !== this.selectionCount && (this.idx = this.id = void 0, this.controls = [])
    };
    this.deselectAll = function () {
        a.area && a.area.hide();
        this.idx = this.id = void 0;
        this.controls = [];
        this.selection = {};
        this.selectionCount = 0;
        this.fireOnDeselect()
    };
    this.select =
        function (b, e) {
            if (a.feature.canvas.editable)
                if ("object" === typeof b)
                    if (e && this.deselectAll(), b.length)
                        for (var h = 0; h < b.length; h++) this.select(b[h]);
                    else
                        for (h in b) this.select(h);
                    else if (this.data[b])
                if (h = this.data[b], h.dirtyControl = !0, e) {
                    var f = h.toolkit;
                    a.tool.type !== h.type && (this.toolkit && (this.toolkit.disable(), delete this.toolkit), "text" === h.type && f && (this.toolkit = f, this.toolkit.enable()));
                    if (1 === this.getLength() && this.selection[b]) this.id = h.id, this.idx = b, this.selectionCount = 1;
                    else {
                        this.deselectAll();
                        this.id = h.id;
                        this.idx = b;
                        this.selection[b] = !0;
                        this.selectionCount = 1;
                        this.toConfigure(h);
                        if (a.style && h.fill) {
                            var f = h.fill,
                                c = f.type;
                            a.setColor(c, f[c])
                        }
                        if (a.ui.onSelect) a.ui.onSelect(g.getSelection());
                        a.ui.setToolMenu && a.ui.setToolMenu(h.type, !0)
                    }
                } else this.selection[b] || (this.selection[b] = !0, this.selectionCount++, this.updateInfo(), 1 !== this.selectionCount && (this.idx = this.id = void 0, this.controls = []))
    };
    this.selectInverse = function () {
        return this.selectAll(!0)
    };
    this.selectAll = function (b) {
        if (a.feature.canvas.editable) {
            var e =
                this.selection,
                h = 0,
                f = this.data.length;
            this.idx = this.id = void 0;
            this.controls = [];
            for (var c = 0; c < f; c++) b && e[c] ? delete e[c] : (e[c] = !0, h++);
            this.checkForSingleSelection();
            this.selectionCount = h;
            this.fireOnSelect();
            this.updateInfo();
            return e
        }
    };
    this.fireOnHover = function (b) {
        a.ui.onHover && g.hoverID !== b.id && (g.hoverID = b.id, a.ui.onHover(b))
    };
    this.fireOnSelect = function () {
        if (a.ui.onSelect) a.ui.onSelect(this.getSelection())
    };
    this.fireOnDeselect = function () {
        if (a.ui.onDeselect) a.ui.onDeselect()
    };
    this.getLength = function () {
        var a =
            0,
            b = this.selection,
            e;
        for (e in b) a++;
        return a
    };
    this.hasSelection = function (a, b) {
        var e = "undefined" !== typeof a,
            h = 0,
            f = this.selection,
            c;
        for (c in f)
            if (e) {
                if (++h === a + 1) return !1
            } else return !0;
        return isFinite(b) && !f[b] ? !1 : h === a
    };
    this.checkForSingleSelection = function () {
        if (a.feature.canvas.editable) {
            var b = 0,
                e = g.selection,
                h;
            for (h in e) b++;
            if (0 === b) a.ui.buildConfigure && a.ui.buildConfigure();
            else if (1 < b) g.id = void 0, g.idx = void 0, g.controls = [];
            else {
                g.select(parseInt(h), "reset");
                if (b = g.data[g.idx]) return a.ui.buildConfigure &&
                    a.ui.buildConfigure(b.type), "text" === b.type && (a.toolkit.text.textarea.innerHTML = b.content, a.toolkit.text.textarea.style.color = b.fillStyle, b.toolkit.updateActionSize()), b;
                a.feature.debug && console.log(g.idx, e, g.data)
            }
        }
    };
    this.runSelection = function (a, b) {
        if ("string" === typeof a) this.runSelection(function (e) {
            e[a] = b
        });
        else
            for (var e = this.selection, h = this.data, f = h.length, c = 0; c < f; c++) e[c] && a(h[c])
    };
    this.setDirtyCache = function (a) {
        a = a || this.selection;
        for (var b in a)
            if (a = this.data[b]) a.dirtyCacheForce = !0
    };
    this.setDirtyControl =
        function () {
            selection = selection || this.selection;
            for (var a in selection) {
                var b = this.data[a];
                b && (b.dirtyControl = !0)
            }
    };
    this.setDirtyTransform = function () {
        selection = selection || this.selection;
        for (var a in selection) {
            var b = this.data[a];
            b && (b.dirtyTransform = !0)
        }
    };
    this.move = function (b, e, h) {
        var f = this.selection,
            c = this.getLength(),
            d = this.data,
            g = [],
            s = [],
            u = d.length,
            y = 0,
            w = a.canvas2d,
            w = w.scale / w.pixelRatio;
        b /= w;
        e /= w;
        for (w = 0; w < u; w++)
            if (f[w]) {
                var v = d[w],
                    x = v.bbox;
                if ((a.feature[v.type] || a.feature.tools).movable) {
                    if (a.detect.refreshPixelData[v.type]) switch (h) {
                    case "record":
                        g.push({
                            id: v.id,
                            data: v.__data
                        });
                        s.push({
                            id: v.id,
                            data: v.data
                        });
                        v.dirtyCacheForce = !0;
                        v.dirtyControl = !0;
                        delete v.__data;
                        break;
                    case "cache":
                        v.__data = clone(v.data);
                    default:
                        1 === c && (v.dirtyCacheForce = !0), v.dirtyControl = !0, v.data[0].x += b, v.data[0].y += e, v.data[1].x += b, v.data[1].y += e
                    } else switch (h) {
                    case "record":
                        g.push({
                            id: v.id,
                            bbox: {
                                x: x.ox,
                                y: x.oy
                            }
                        });
                        s.push({
                            id: v.id,
                            bbox: {
                                x: x.x,
                                y: x.y
                            }
                        });
                        v.dirtyTransform = !0;
                        v.dirtyControl = !0;
                        delete v.visible;
                        delete x.ox;
                        delete x.oy;
                        break;
                    case "cache":
                        x.ox = x.x, x.oy = x.y;
                    default:
                        x.x += b, x.y += e,
                        delete v.visible, v.dirtyTransform = !0, v.dirtyControl = !0, this.updateTransform(v), this.constrain(v)
                    }
                    y++
                }
            }
        0 !== y && ("record" === h && a.history && a.history.store(g, s), a.dataChannel && a.feature.stream.sketchLive && a.dataChannel.send(["actions.update", s]), a.area && a.area.updateBBox())
    };
    this.updateTransform = function (b) {
        var e = b.bbox;
        b.data && !b.dataHash && (b.dataHash = g.createHash(b.data));
        var h = a.canvas2d,
            f = h.pixelRatio;
        if (b.stretchToFit) {
            var c = h.width * f,
                d = h.height * f;
            if (e.width !== c || e.height !== d) e.viewBox[2] = e.width =
                c, e.viewBox[3] = e.height = d, b.dirty = !0
        }
        if (b.dirtyTransform || b.dirty || !b.placement) {
            b.dirtyControl = !0;
            b.dirtyTransform = !1;
            var d = h.scale / h.pixelRatio,
                t = a.project.scrollLeft,
                c = a.project.scrollTop,
                h = a.area.padding / 2,
                s = e.x - h - t,
                u = e.y - h - c,
                h = e.scale.x,
                f = e.scale.y,
                y = e.rotate * DEG_RAD;
            b.placement = a.area.placement({
                trx: b.placement,
                bbox: e,
                pt0: {
                    x: s,
                    y: u
                },
                pt1: {
                    x: s + e.width,
                    y: u
                },
                rotate: e.rotate * DEG_RAD,
                scale: e.scale,
                doRotate: !0,
                doScale: !0,
                doLockRatio: !0
            });
            d = 1;
            s = b.trx || new Vector.Transform;
            e = b.bbox;
            h = e.scale.x;
            f = e.scale.y;
            y = e.rotate * DEG_RAD;
            t = e.x - t;
            u = e.y - c;
            c = e.width * d * h;
            d = e.height * d * f;
            e = c / 2;
            c = d / 2;
            s.reset();
            s.translate(t, u);
            s.translate(e, c);
            y && s.rotate(y);
            s.translate(-e, -c);
            s.scale(h, f);
            b.trx = s
        }
    };
    this.constrain = function (b) {
        var e = a.canvas2d,
            h = e.width,
            e = e.height,
            f = b.bbox,
            c = f.height,
            d = f.width;
        if ((b.constrain || b.constrainX || b.constrainY) && b.trx) {
            var g = b.trx,
                s = f.width,
                u = f.height;
            if ("objectBoundingBox" === b.bbox.units) var y = g.point2d(0, 0),
            w = g.point2d(s, 0), v = g.point2d(s, u), x = g.point2d(0, u), u = Math.min(y.x, w.x, v.x, x.x), g = Math.min(y.y,
                w.y, v.y, x.y), s = Math.max(y.x, w.x, v.x, x.x), w = Math.max(y.y, w.y, v.y, x.y);
            else y = f, s = y.x, w = y.y, u = y.x, g = y.y;
            var y = f.x,
                v = f.y,
                x = y - u,
                A = v - g,
                u = h - Math.max(0, s - u) + x,
                g = e - Math.max(0, w - g) + A;
            b.constrain ? (f.x = Math.max(x, Math.min(u, y)), f.y = Math.max(A, Math.min(g, v)), b.dirtyTransform = !0) : b.constrainX ? (f.x = Math.max(x, Math.min(u, y)), f.y = v, b.dirtyTransform = !0) : b.constrainY && (f.x = y, f.y = Math.max(A, Math.min(g, v)), b.dirtyTransform = !0)
        }
        b.stickToX ? (f.x = Math.max(h - d, Math.min(0, f.x)), b.dirtyTransform = !0) : b.stickToY && (f.y = Math.max(e -
            c, Math.min(0, f.y)), b.dirtyTransform = !0);
        b.dirtyTransform && this.updateTransform(b)
    };
    var d = /[^a-zA-Z]/g,
        c = /[^0-9]/g,
        b = function (a, b) {
            return a.zIndex > b.zIndex ? 1 : -1
        }, f = function (a, b) {
            return a.id > b.id ? 1 : -1
        }, h = function (a, b) {
            var e = a.name || "",
                h = b.name || "",
                f = e.replace(d, ""),
                g = h.replace(d, "");
            return f === g ? (f = parseInt(e.replace(c, ""), 10), g = parseInt(h.replace(c, ""), 10), f === g ? 0 : f > g ? 1 : -1) : f > g ? 1 : -1
        };
    this.sort = function (a) {
        switch (a) {
        case "name":
            this.data.sort(h);
            break;
        case "id":
            this.data.sort(f);
            break;
        default:
            this.data.sort(b)
        }
    };
    this.reindex = function () {
        for (var a = this.data, b = this.selection, e = [], h = 0, f; h < a.length; h++)
            if (f = a[h]) b[f.zIndex] && (delete b[f.zIndex], e.push(h), this.selectionCount--), f.zIndex = h;
        for (h = 0; h < e.length; h++) b[e[h]] = !0, this.selectionCount++;
        this.updateInfo()
    };
    this.updateToolkit = function (b) {
        var e = b.type;
        if (a.detect.shape[e]) return b.toolkit = a.toolkit.shape;
        if (a.detect.brush[e]) return b.toolkit = a.toolkit.brush;
        if (a.detect.media[e]) return b.toolkit = a.toolkit.media;
        if (a.toolkit[e]) return b.toolkit = a.toolkit[e];
        console.log("missing toolkit:", e)
    };
    this.getToolkit = function (b) {
        if (a.detect.shape[b]) return a.toolkit.shape;
        if (a.detect.brush[b]) return a.toolkit.brush;
        if (a.detect.media[b]) return a.toolkit.media;
        if (a.toolkit[b]) return a.toolkit[b];
        console.log("missing toolkit:", b)
    };
    this.getFocused = function () {
        return this.data[this.idx]
    };
    this.getLast = function () {
        return this.data[this.data.length - 1]
    };
    this.getById = function (a) {
        for (var b = this.data, e = 0; e < b.length; e++)
            if (b[e].id === a) return b[e]
    };
    this.getByName = function (a) {
        for (var b =
            this.data, e = 0; e < b.length; e++)
            if (b[e].name === a) return b[e]
    };
    this.getData = function (a) {
        return a ? this.clone(this.data) : this.data
    };
    this.getFromSelection = function (a, b) {
        a = a || this.selection;
        var e = [],
            h;
        for (h in a) e.push(this.data[h]);
        return b ? this.clone(e) : e
    };
    this.getSelected = function () {
        return this.data[this.idx]
    };
    this.getHovered = function () {
        return this.getById(this.hoverID)
    };
    this.getSelection = function (a) {
        var b = [],
            e = this.selection,
            h;
        for (h in e) b.push(this.data[h]);
        return a ? this.clone(b) : b
    };
    this.getSelectionData =
        function () {
            var a = [],
                b = this.selection,
                e;
            for (e in b) a.push(this.data[e].data);
            return a
    };
    this.getAction = function () {
        var a = this.selection,
            b;
        for (b in a) return this.data[b]
    };
    this.createId = function (a, b) {
        var e = this.data;
        if (b) {
            for (var h = INFINITY_255, f = 0; f < e.length; f++) {
                var c = e[f].id;
                c > h && (h = e[f].id)
            }
            return h + 1
        }
        if (a && (h = typeof a, ("string" === h || "number" === h) && !this.getById(a))) return a;
        for (f = h = 0; f < e.length; f++) c = e[f].id, !(c > INFINITY_255) && c > h && (h = e[f].id);
        return h + 1
    };
    this.createHash = function (a, b) {
        for (var h = "",
                f = [a]; f.length;) {
            a = f.shift();
            for (var c in a) {
                var d = a[c];
                null === d || (e[c] || "id" === c || "zIndex" === c || "clamp" === c || "data" === c || "scale" === c && !a.type) || ("src" === c ? h += d.substr(0, 256) : "bbox" === c ? (h += "width:" + a.bbox.width, h += "height:" + a.bbox.height, a.bbox.scale && (d = a.bbox.scale, h += "scale:" + d.x + "," + d.y)) : "string" === typeof d ? h += c + ":" + d.substr(0, 256) : "object" !== typeof d ? h += c + ":" + d : d.childNodes || d.getImageData || d && f.push(d))
            }
        }
        f = 5381;
        c = 0;
        for (d = h.length; c < d; c++) f = (f << 5) + f + h.charCodeAt(c);
        return f
    };
    this.getBoundingBox =
        function (b, e) {
            for (var h = Infinity, f = -Infinity, c = Infinity, d = -Infinity, g = 0; g < this.data.length; g++) {
                var s = this.data[g],
                    u = s.zIndex;
                if (!e || this.selection[u]) {
                    var y = s.trx,
                        s = s.bbox,
                        w = s.width,
                        v = s.height,
                        s = y.point2d(0, 0),
                        u = y.point2d(w, 0),
                        w = y.point2d(w, v),
                        x = y.point2d(0, v),
                        y = Math.min(s.x, u.x, w.x, x.x) - 1,
                        v = Math.min(s.y, u.y, w.y, x.y) - 1,
                        A = Math.max(s.x, u.x, w.x, x.x) + 2,
                        s = Math.max(s.y, u.y, w.y, x.y) + 2;
                    y < h && (h = y);
                    v < c && (c = v);
                    A > f && (f = A);
                    s > d && (d = s)
                }
            }
            b ? (h = Math.max(0, h), c = Math.max(0, c), g = a.canvas2d.layers.layer0, w = Math.min(g.width -
                h, f - h), v = Math.min(g.height - c, d - c)) : (w = f - h, v = d - c);
            return {
                x: h || 0,
                y: c || 0,
                width: w || 0,
                height: v || 0
            }
    };
    this.getBoundingBoxOrigin = function (a) {
        return "objectBoundingBox" === a.units ? {
            x: a.x + a.width / 2 * a.scale.x,
            y: a.y + a.height / 2 * a.scale.y
        } : {
            x: a.x,
            y: a.y
        }
    };
    this.getPointInCanvas = function (b) {
        var e = a.canvas2d,
            h = e.container,
            e = e.scale / e.pixelRatio;
        return {
            x: (b.x - a.project.scrollLeft + h.scrollLeft) / e,
            y: (b.y - a.project.scrollTop + h.scrollTop) / e
        }
    };
    this.getPointInAction = function (b, e) {
        var h = a.area.padding,
            f = b.bbox,
            c = f.width,
            d = f.height,
            g = f.x,
            s = f.y,
            u = 0,
            y = 0,
            w = 1 / f.scale.x,
            v = 1 / f.scale.y;
        b.placement && b.placement.clone && (s = b.placement.point2d(0, 0), g = s.x, s = s.y);
        "button" !== b.type && (u = h * w, y = h * v);
        var c = c + 2 * u,
            d = d + 2 * y,
            h = f.rotate * DEG_RAD,
            x = Vector.Transform.__default;
        x.reset();
        x.translate(g + u, s + y);
        h && x.rotate(-h);
        x.translate(-g * w, -s * v);
        x.scale(w, v);
        u = x.point2d(e.x, e.y);
        u.x -= f.left || 0;
        u.y -= f.top || 0;
        u.bbox_x = g;
        u.bbox_y = s;
        u.bbox_width = c;
        u.bbox_height = d;
        return u
    };
    this.fromConfigure = function (a) {
        if (a && a.constructor && !a.childNodes && !a.getImageData) {
            var b =
                new a.constructor;
            if ("undefined" !== typeof a.value) return a.value;
            for (var e in a)
                if ("opacity" !== e && "clamp" !== e) {
                    var h = a[e];
                    b[e] = "object" !== typeof h ? h : "undefined" !== typeof h.value ? h.value : this.fromConfigure(h)
                }
            return b
        }
    };
    this.toConfigure = function (b) {
        var e = a.configure.tools[b.type],
            h;
        for (h in b) {
            var f = e[h];
            if (f) {
                var c = b[h];
                if ("fill" === h) e[h] = clone(b[h]);
                else if ("string" === typeof c) e[h] = b[h];
                else switch (f.type) {
                case "clamp":
                    "number" === typeof c ? f.value = c : c && "undefined" !== typeof c.min && (f.min = c.min, f.max =
                        c.max)
                }
            }
        }
    };
    this.detectVisible = function () {
        for (var a = this.data, b = a.length, e = 0; e < b; e++) this.isVisible(a[e])
    };
    this.isVisible = function (b) {
        b.dirtyTransform && this.updateTransform(b);
        var e = b.bbox,
            h = e.width,
            f = e.height,
            c = b.trx;
        if (!c || !c.point2d) return !0;
        var e = c.point2d(0, 0),
            d = c.point2d(h, 0),
            g = c.point2d(h, f),
            s = c.point2d(0, f),
            h = Math.min(e.x, d.x, g.x, s.x),
            f = Math.min(e.y, d.y, g.y, s.y),
            c = Math.max(e.x, d.x, g.x, s.x),
            e = Math.max(e.y, d.y, g.y, s.y),
            d = a.area.padding,
            g = a.canvas2d.height * a.canvas2d.pixelRatio + 2 * d;
        b.visible =
            h < a.canvas2d.width * a.canvas2d.pixelRatio + 2 * d && c > 2 * -d && f < g && e > 2 * -d;
        return b.visible
    };
    this.stringify = function () {
        return JSON.stringify(g.clone(g.data))
    };
    this.clone = function (a, b) {
        if (!a || !a.constructor || "object" !== typeof a) return a;
        if (!a.childNodes && !a.getImageData) {
            var h = new a.constructor,
                f;
            for (f in a) "colors" !== f && (e[f] || (h[f] = a[f] && "object" === typeof a[f] ? this.clone(a[f]) : a[f]));
            return b ? JSON.stringify(h) : h
        }
    };
    var e = function (a, b) {
        b = b.split(",");
        b.map(function (b) {
            a[b.trim()] = !0
        });
        return a
    }({}, "callback,hash,render,renderCache,scaleCache,breaks,brush,element,canvas,canvasCtx,\tdirty,dirtyCache,dirtyTransform,dirtyControl,dirtyResource,selected,hovered,visible,\tplacement,placementRelative,_gradient,_color,ctx,trx,svg,toolkit");
    return this
};
"undefined" !== typeof module && module.exports && (module.exports = sketch.actions);
"undefined" === typeof sketch && (sketch = {});
"undefined" === typeof sketch.actions && (sketch.actions = function () {});
sketch.actions = function (a) {
    var g = a.actions;
    g.prototype.hasOrganizeModule = !0;
    g.prototype.sendForwards = function (d) {
        d = d || {};
        var c = a.detect.refreshPixelData,
            b = d.toFront || !1,
            f = d.selection || this.selection;
        d = d.record || !1;
        var h = this.data,
            e = h.length,
            l;
        for (l in f)
            if (parseInt(l) === e - 1) return;
        l = [];
        var m = [];
        if (b) {
            for (var b = [], k = [], g = 0; g < e; g++) f[g] ? b.push(h[g]) : k.push(h[g]);
            g = 0;
            for (e = b.length; g < e; g++) k.push(b[g]);
            f = this.clone(b);
            this.data = k;
            this.reindex();
            g = 0;
            for (e = b.length; g < e; g++) k = b[g], c[k.type] && (k.dirtyCacheForce = !0), d && (l.push({
                id: k.id,
                zIndex: f[g].zIndex
            }), m.push({
                id: k.id,
                zIndex: k.zIndex
            }))
        } else {
            for (g = e; g--;) f[g] && g !== e - 1 && (k = h[g], c[k.type] && (k.dirtyCacheForce = !0), h.splice(g, 0, h.splice(g + 1, 1)[0]), d && (l.push({
                id: h[g].id,
                zIndex: g
            }), m.push({
                id: h[g].id,
                zIndex: g + 1
            })));
            this.reindex()
        }
        this.checkForSingleSelection();
        a.history && d && a.history.store(l, m)
    };
    g.prototype.sendBackwards = function (d) {
        d = d || {};
        var c = a.detect.refreshPixelData,
            b = d.toBack || !1,
            f = d.selection || this.selection;
        d = d.record || !1;
        for (var h = this.data, e = h.length,
                l = 0, g = 0; g < e && h[g].stickToBack; g++) l++;
        for (var k in f)
            if (parseInt(k) === l) return;
        k = [];
        l = [];
        if (b) {
            for (var b = [], q = [], g = 0; g < e; g++) f[g] || h[g].stickToBack ? b.push(h[g]) : q.push(h[g]);
            f = this.clone(b);
            g = 0;
            for (e = q.length; g < e; g++) b.push(q[g]);
            this.data = b;
            this.reindex();
            g = 0;
            for (e = f.length; g < e; g++) q = b[g], c[q.type] && (q.dirtyCacheForce = !0), d && (k.push({
                id: q.id,
                zIndex: f[g].zIndex
            }), l.push({
                id: q.id,
                zIndex: q.zIndex
            }))
        } else {
            for (g = 0; g < e; g++) f[g] && 0 !== g && (q = h[g], c[q.type] && (q.dirtyCacheForce = !0), h.splice(g, 0, h.splice(g -
                1, 1)[0]), d && (k.push({
                id: h[g].id,
                zIndex: g
            }), l.push({
                id: h[g].id,
                zIndex: g - 1
            })));
            this.reindex()
        }
        this.checkForSingleSelection();
        a.history && d && a.history.store(k, l)
    };
    return g
}(sketch);
"undefined" === typeof sketch && (sketch = {});
"undefined" === typeof sketch.actions && (sketch.actions = function () {});
sketch.actions = function (a) {
    var g = a.actions,
        d = 0,
        c = {};
    g.prototype.hasTransferModule = !0;
    g.prototype.loadTransferModule = function () {
        Event.add(window, "focus load", function () {
            a.getItem("copies", function (b) {
                b && (a.actions.copies = JSON.parse(b))
            });
            a.getItem("copies-paths", function (a) {
                try {
                    c = JSON.parse(a)
                } catch (f) {}
            })
        })
    };
    g.prototype.storeCopies = function () {
        var b = a.actions.clone(this.copies);
        c = {};
        a.setItem("copies", JSON.stringify(b));
        a.setItem("copies-paths", JSON.stringify({}));
        a.save.assets({
            toBlobURL: !0,
            actions: b,
            callback: function (b) {
                a.setItem("copies-paths", JSON.stringify(b));
                a.feature.debug && console.log(b)
            }
        })
    };
    g.prototype.cut = function () {
        a.setItem("useNativePaste", !1);
        for (var b = this.selection, f = this.data, h = [], e = f.length; e--;)
            if (b[e]) {
                var c = f[e];
                h.push(c);
                f.splice(e, 1);
                a.render.cache.clean(c)
            }
        h.length && (this.reindex(), this.copies = this.clone(h), this.storeCopies(), this.deselectAll(), b = this.clone(h).reverse(), a.history && a.history.store(b, "remove"));
        if (a.ui.onCut) a.ui.onCut(this.copies)
    };
    g.prototype.copy = function () {
        a.setItem("useNativePaste", !1);
        for (var b = this.selection, f = this.data, h = [], e = f.length; e--;) b[e] && h.push(f[e]);
        if (h.length && (this.copies = this.clone(h), this.storeCopies(), a.ui.onCopy)) a.ui.onCopy(this.copies)
    };
    g.prototype.paste = function (b) {
        var f = this;
        if (!a.__rendering && this.copies && this.copies.length) {
            this.deselectAll();
            for (var h = this.data, e = this.copies, d = e.length, g = function () {
                        --d || (f.reindex(), f.checkForSingleSelection(), b && b())
                    }, k = function (a) {
                        h.push(a);
                        f.select(h.length - 1);
                        f.updateToolkit(a);
                        a.toolkit.loadResource(a, g, !1)
                    }, q =
                    d; q--;) {
                var p = this.clone(e[q]);
                this.getById(p.id) && (e[q].id = p.id = this.createId());
                "string" === typeof p.src && 0 === p.src.indexOf("#") && !a.assets.dataIDtoURL[p.src] && c[p.src] ? a.assets.add({
                    data: c[p.src],
                    onerror: g,
                    onload: function (a, b) {
                        console.log(a, b.toBlobURL(function (a) {
                            console.log(a)
                        }), p.src);
                        p.src = a;
                        k(p)
                    }
                }) : k(p)
            }
            a.history && (e = this.clone(e), a.history.store("add", e));
            if (a.ui.onPaste) a.ui.onPaste(this.copies)
        }
    };
    g.prototype.onPasteNative = function (b) {
        if (!a.isEditing()) {
            Event.cancel(b);
            b = b.clipboardData.items;
            var f = [],
                h = 0,
                e = 0;
            if (b)
                for (var c = function () {
                    --e || (h !== d && (a.setItem("useNativePaste", !0), d = h), a.getItem("useNativePaste", function (b) {
                        if ("true" === b) {
                            if (h)
                                for (b = 0; b < f.length; b++) a.addMedia(f[b], null, function () {
                                    a.run("select")
                                })
                        } else a.run("layer-paste")
                    }))
                }, g = 0; g < b.length; g++) {
                    ++e;
                    var k = b[g];
                    switch (k.type) {
                    case "text/html":
                        k.getAsString(function (b) {
                            a.feature.debug && console.log(b);
                            0 === b.indexOf("blob:") ? setTimeout(c, 1) : -1 !== b.indexOf("blob:http%3A//") ? setTimeout(c, 1) : a.convert.htmlToCanvas({
                                html: b,
                                onerror: c,
                                onload: function (a) {
                                    h += b.length;
                                    f.push(a);
                                    c()
                                }
                            })
                        });
                        break;
                    default:
                        if (-1 === k.type.indexOf("image")) {
                            setTimeout(c, 1);
                            break
                        }
                        k = k.getAsFile();
                        f.push(k);
                        h += k.size;
                        setTimeout(c, 1)
                    }
                }
        }
    };
    return g
}(sketch);
"undefined" === typeof sketch && (sketch = {});
(function (a) {
    var g = null,
        d = function (a, b) {
            g = window.open(a, b || "", "width=780,height=410,toolbar=0,scrollbars=0,status=0,resizable=0,location=0,menuBar=0,left=" + (screen.width / 2 - 390) + ",top=" + (screen.height / 2 - 205))
        };
    a.api = new function () {
        var h = this;
        this.alertify = {};
        this.test = function (b, f, c, k) {
            var g = h.alertify[b];
            g && g.close && g.close(g.lastItem);
            sketch && sketch.loader || new widget.Loader;
            var p = a.api[b],
                r = STRING.ucwords(b).replace("Gdrive", "Google Drive"),
                t = 0;
            p.init(function () {
                p.uploading ? alertify.log("Still uploading to " +
                    r + "...") : g = h.alertify[b] = alertify.log("<img src='./media/ux/loader.gif' style='border-radius: 5px'> Uploading to " + r + "...", null, 0);
                p.post({
                    title: c,
                    description: k,
                    canvas: f,
                    onupload: function (a) {
                        g && g.close && g.close(g.lastItem);
                        alertify.log(r + " upload complete!");
                        p.shareProxy || d(a, "")
                    },
                    onprogress: function (a) {
                        a = 100 * (a.loaded / a.total) >> 0;
                        a + 5 > t && (console.log("Uploading...", a + "%"), t = a + 5)
                    },
                    onerror: function () {
                        g && g.close && g.close(g.lastItem);
                        alertify.log(r + " upload failed :(")
                    }
                })
            }, function () {
                alertify.log(r + " could not authorize :(")
            })
        };
        this.construct = function (a, b, h, f) {
            window[b] ? h && h() : DOMLoader.script.add({
                url: a,
                verify: b,
                error: f,
                callback: function () {
                    setTimeout(function () {
                        h && h()
                    }, 100)
                }
            })
        };
        this.verify = function (a, b, h) {
            if (a.verified) return a.verified;
            a.init(function () {
                b(h[0], h[1], h[2], h[3], h[4], h[5], h[6], h[7])
            })
        };
        this.sites = {
            digg: function (a) {
                return "http://digg.com/submit?url=" + encodeURIComponent(a.mediaUrl)
            },
            stumbleupon: function (a) {
                return "https://www.stumbleupon.com/submit?url=" + encodeURIComponent(a.mediaUrl)
            },
            reddit: function (a) {
                return "http://www.reddit.com/submit?url=" +
                    encodeURIComponent(a.mediaUrl)
            },
            gmail: function (a) {
                return "http://mail.google.com/mail/" + ("?view=cm&fs=1&su=" + encodeURIComponent(a.title) + "&body=" + encodeURIComponent(a.mediaUrl))
            },
            delicious: function (a) {
                return "http://del.icio.us/post" + ("?url1=" + encodeURIComponent(a.mediaUrl) + "&title=" + encodeURIComponent(a.title))
            },
            myspace: function (a) {
                return "http://www.myspace.com/Modules/PostTo/Pages/" + ("?u=" + encodeURIComponent(a.mediaUrl) + "&t=" + encodeURIComponent(a.title))
            },
            slashdot: function (a) {
                return "http://slashdot.org/slashdot-it.pl?op=basic&url=" +
                    encodeURIComponent(a.mediaUrl)
            },
            yahoo: function (a) {
                return "http://buzz.yahoo.com/submit/?url=" + encodeURIComponent(a.mediaUrl)
            },
            technorati: function (a) {
                return "http://www.technorati.com/faves?add=" + encodeURIComponent(a.mediaUrl)
            },
            linkedin: function (a) {
                return "http://www.linkedin.com/shareArticle" + ("?mini=true&url=" + encodeURIComponent(a.mediaUrl) + "&title=" + encodeURIComponent(a.title) + "&summary=" + encodeURIComponent(a.description) + "&source=" + encodeURIComponent(a.shareUrl))
            },
            tumblr: function (a) {
                return "http://www.tumblr.com/share/link" +
                    ("?url=" + encodeURIComponent(a.mediaUrl) + "&name=" + encodeURIComponent(a.title) + "&description=" + encodeURIComponent(a.description))
            },
            twitter: function (a) {
                return "http://twitter.com/share" + ("?text=" + encodeURIComponent(a.title) + " " + encodeURIComponent(a.description) + "&url=" + encodeURIComponent(a.shareUrl))
            },
            facebook: function (a) {
                return "https://www.facebook.com/sharer/sharer.php" + ("?s=100&p[title]=" + encodeURIComponent(a.title) + "&p[summary]=" + encodeURIComponent(a.description) + "&p[url]=" + encodeURIComponent(a.shareUrl) +
                    "&p[images][0]=" + encodeURIComponent(a.mediaUrl))
            },
            pinterest: function (a) {
                return "https://pinterest.com/pin/create/button" + ("?url=" + encodeURIComponent(a.shareUrl) + "&media=" + encodeURIComponent(a.mediaUrl) + "&description=" + encodeURIComponent(a.title) + " " + encodeURIComponent(a.description))
            }
        };
        this.share = function (a) {
            var b = a.target,
                f = h.sites[b];
            f && d(f(a), b)
        };
        this.shareProxy = function (e) {
            var h = this;
            this.shareProxy = !0;
            this.init = function (a, b) {
                h.verified = !0;
                a && a()
            };
            this.post = function (f) {
                if (a.api.verify(h, h.post,
                    arguments)) {
                    var d = f.title,
                        g = f.description,
                        p = f.onupload;
                    a.api.local.post({
                        canvas: f.canvas,
                        onprogress: f.onprogress || b,
                        onerror: f.onerror || c,
                        onupload: function (b) {
                            p && p(b);
                            a.api.share({
                                target: e,
                                title: d,
                                description: g,
                                shareUrl: b,
                                mediaUrl: b
                            })
                        }
                    })
                }
            }
        }
    };
    (function () {
        for (var b = ["twitter", "pinterest", "tumblr", "stumbleupon", "gmail"], e = 0; e < b.length; e++) {
            var f = b[e];
            a.api[f] = new a.api.shareProxy(f)
        }
    })();
    a.api.facebook = a.feature.social.directTransfer ? new function () {
        var h = this;
        this.appId = "626202050746136";
        this.expiresIn =
            this.signedRequest = this.userId = this.accessToken = null;
        this.timestamp = (new Date).getTime();
        this.timeout = null;
        this.autoLogoutTimeout = function () {
            var b = a.feature.social.autoLogoutTimeout;
            b && (h.timeout = setTimeout(function () {
                h.logout();
                h.timeout = null;
                g && g.close && g.close()
            }, b))
        };
        this.logout = function (a) {
            FB.logout(function (b) {
                a && a(b)
            })
        };
        this.init = function (b, f) {
            a.api.construct("//connect.facebook.net/en_US/all.js", "FB", function () {
                FB.init({
                    appId: h.appId,
                    status: !0,
                    cookie: a.feature.social.setCookie,
                    xbfml: !0
                });
                FB.login(function (a) {
                    a.authResponse ? (a = a.authResponse, h.accessToken = a.accessToken, h.userId = a.userID, h.signedRequest = a.signedRequest, h.expiresIn = a.expiresIn, h.verified = !0, b && b(h)) : f && f()
                }, {
                    scope: "publish_stream,user_photos"
                })
            }, f)
        };
        this.post = function (e) {
            if (a.api.verify(h, h.post, arguments)) {
                var f = e.canvas,
                    d = e.onpost,
                    k = e.onupload,
                    g = e.onprogress || b,
                    p = function (a) {
                        (e.onerror || c)(a);
                        h.autoLogoutTimeout()
                    }, r = function (a) {
                        try {
                            var b = "https://www.facebook.com/photo.php?fbid=" + JSON.parse(a.responseText).id;
                            d &&
                                d(b);
                            k && k(b);
                            h.src = b;
                            h.timestamp = sketch.__modifiedOnline;
                            h.autoLogoutTimeout()
                        } catch (e) {
                            p && p()
                        }
                    };
                h.timestamp === sketch.__modifiedOnline ? (k && k(h.src), d && d(h.src)) : f.toBlob(function (a) {
                    var b = new FormData;
                    b.append("access_token", h.accessToken);
                    b.append("source", a);
                    b.append("message", "test");
                    DOMLoader.sendRequest({
                        url: "https://graph.facebook.com/" + h.userId + "/photos?access_token=" + h.accessToken,
                        body: b,
                        headers: {},
                        onprogress: g,
                        onerror: p,
                        onload: r
                    })
                })
            }
        }
    } : new a.api.shareProxy("facebook");
    a.api.imgur = new function () {
        var a =
            this;
        this.uploading = !1;
        this.timestamp = (new Date).getTime();
        this.src = "";
        this.appId = "31b22b64cad2f65";
        this.init = function (a, b) {
            a && a()
        };
        this.post = function (e) {
            if (!a.uploading) {
                var f = e.canvas,
                    d = e.onpost,
                    k = e.onupload,
                    g = e.onprogress || b,
                    p = e.onerror || c;
                a.timestamp === sketch.__modifiedOnline ? (k && k(a.src), d && d(a.src)) : (a.uploading = !0, f.toBlob(function (b) {
                    var e = new FormData;
                    e.append("image", b);
                    DOMLoader.sendRequest({
                        url: "https://api.imgur.com/3/image.json",
                        body: e,
                        headers: {
                            Authorization: "Client-ID " + a.appId
                        },
                        onprogress: g,
                        onerror: function (b) {
                            a.uploading = !1;
                            p && p(b)
                        },
                        onload: function (b) {
                            a.uploading = !1;
                            try {
                                var e = JSON.parse(b.responseText).data.link;
                                k && k(e);
                                d && d(e);
                                a.src = e;
                                a.timestamp = sketch.__modifiedOnline
                            } catch (f) {}
                        }
                    })
                }))
            }
        }
    };
    a.api.filepicker = new function () {
        var b = this;
        this.appId = "AmXVSjplaSwalHIqs9E6Qz";
        this.init = function (e, f) {
            a.api.construct("//api.filepicker.io/v1/filepicker.js", "filepicker", function () {
                b.verified = !0;
                filepicker.setKey(b.appId);
                e && e()
            }, f)
        };
        this.store = function (e, f) {
            if (a.api.verify(b, b.store, arguments)) {
                var c =
                    e.toDataURL("image/png").split(",")[1];
                filepicker.store(c, {
                    mimetype: "image/png",
                    base64decode: !0
                }, function (a) {
                    f && f(a.url)
                })
            }
        };
        this.post = function (e) {
            if (a.api.verify(b, b.post, arguments)) {
                var f = e.onpost,
                    c = e.onupload;
                a.api.local.post({
                    canvas: e.canvas,
                    onprogress: e.onprogress,
                    onerror: e.onerror,
                    onupload: function (a) {
                        c && c(a);
                        filepicker.exportFile(a, function (a) {
                            f && f(a.url)
                        })
                    }
                })
            }
        }
    };
    a.api.local = new function (h) {
        var e = this;
        this.src = "";
        this.timestamp = (new Date).getTime();
        this.uploading = this.useFilePicker = !1;
        this.host =
            window.location.host;
        this.init = function (a, b) {
            a && a()
        };
        this.post = function (h) {
            if (!e.uploading) {
                var d = h.canvas,
                    k = h.onpost,
                    g = h.onupload,
                    p = h.onprogress || b,
                    r = h.onerror || c;
                e.timestamp === sketch.__modifiedOnline ? (g && g(e.src), k && k(e.src)) : (e.uploading = !0, e.useFilePicker || "mud.local" === e.host ? a.api.filepicker.store(d, function (a) {
                    g && g(a);
                    k && k(a);
                    e.src = a;
                    e.uploading = !1;
                    e.timestamp = sketch.__modifiedOnline
                }) : DOMLoader.sendRequest({
                    url: "./upload.php",
                    body: "canvasData=" + d.toDataURL("image/png"),
                    headers: {
                        "Content-Type": "canvas/upload"
                    },
                    onprogress: p,
                    onerror: function (a) {
                        r && r(a);
                        e.uploading = !1
                    },
                    onload: function (a) {
                        a = f[e.host] + a.response;
                        g && g(a);
                        k && k(a);
                        e.src = a;
                        e.uploading = !1;
                        e.timestamp = sketch.__modifiedOnline
                    }
                }))
            }
        }
    };
    var c = function (a) {
        console.log(a)
    }, b = function (a) {
            console.log(100 * (a.loaded / a.total) >> 0)
        }, f = {
            "mud.local": "http://localhost/sketch.io/sketch-src/public/render/",
            localhost: "http://localhost/sketch.io/sketch-src/public/render/",
            "sketch.io": "https://sketch.io/sketchpad/render/"
        }
})(sketch);
if ("undefined" === typeof API) var API = {};
(function (a) {
    a.AddThis = function (a) {
        a = a || document.body;
        var d = document.createElement("div");
        d.innerHTML = '\t\t\t<div class="addthis_toolbox addthis_peekaboo_style addthis_default_style addthis_label_style addthis_32x32_style">\t\t\t\t<a class="addthis_button_more">Share</a>\t\t\t\t<ul>\t\t\t\t\t<li><a class="addthis_button_facebook"></a></li>\t\t\t\t\t<li><a class="addthis_button_twitter"></a></li>\t\t\t\t\t<li><a class="addthis_button_google_plusone_share"></a></li>\t\t\t\t</ul>\t\t\t</div>\t\t';
        a.appendChild(d);
        Event.add([".addthis_button_more", ".addthis_button_facebook", ".addthis_button_twitter", ".addthis_button_google_plusone_share"], "click", function (a, b) {
            if (b && "Print" === b.target.textContent) return sketch.print("skip-window.print()");
            addthis.update("share", "title", "I made this drawing in Sketchpad; a free multi-touch, multi-user, non-destructive drawing app: " + sketch.createURL("share"));
            addthis.update("share", "url", sketch.createURL("share"))
        });
        DOMLoader.script.add({
            url: window.location.protocol + "//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-4ee80bce25dc375d",
            verify: "addthis",
            callback: function () {
                var a = document.querySelector(".addthis_toolbox");
                a && (a.style.display = "block");
                addthis.update("share", "title", "I made this drawing in Sketchpad; a free multi-touch, multi-user, non-destructive drawing app: ");
                addthis.update("share", "url", sketch.createURL("share"))
            }
        })
    }
})(API);
"undefined" === typeof sketch && (sketch = {});
"undefined" === typeof sketch.api && (sketch.api = {});
(function (a) {
    var g = function (a) {
        try {
            return JSON.parse(a)
        } catch (b) {
            return ""
        }
    };
    a.api.sketchio = {
        list: function (b) {
            b || (b = {});
            var e = b.mime || d;
            DOMLoader.sendRequest({
                url: sketch.location.host + "my-files.html?format=json",
                onload: function (b) {
                    b = g(b.responseText);
                    a.api.sketchio.html_files(b, e)
                }
            })
        },
        html_files: function (a, b) {
            for (var f = document.querySelector("#sketch-files"), c = [], d = document.createElement("div"), g = function () {
                    var b = this.querySelector("img").getAttribute("data-nid"),
                        b = a[b],
                        b = sketch.location.host + "/getFile.php?src=" +
                            b.username + "/" + b.file_id;
                    sketch.setupTool("select");
                    sketchui.setToolMenu("select");
                    sketch.ui.buildConfigure("image");
                    sketch.addMedia({
                        src: b,
                        name: ".json",
                        callback: sketch.loader.stop
                    })
                }, p = 0; p < a.length; p++) {
                var r = a[p],
                    t = document.createElement("div"),
                    s = new Image,
                    u = document.createTextNode(r.message);
                s.height = 64;
                s.src = sketch.location.host + r.thumb_50x50;
                s.setAttribute("data-nid", p);
                var y = document.createElement("div");
                y.style.cssText = "display: inline-block; width: 64px; height: 64px; overflow: hidden; margin-right: 15px;";
                y.appendChild(s);
                t.onclick = g;
                t.title = 'open "' + r.title + '"';
                t.style.cssText = "clear: both; margin-bottom: 10px; cursor: pointer;";
                t.appendChild(y);
                t.appendChild(u);
                d.appendChild(t);
                c.push(r)
            }
            c.length ? (f.innerHTML = "", f.appendChild(d)) : f.innerHTML = "<h3>You have no images stored in Sketch.IO</h3>"
        }
    };
    var d = {
        "image/png": !0,
        "image/jpeg": !0,
        "image/gif": !0
    }, c, b;
    a.api.gdrive = new function () {
        var h = this;
        this.init = function (b, f) {
            a.api.gdrive.html_profile();
            b = b || a.api.gdrive.auth;
            "undefined" === typeof gapi ? DOMLoader.script.add({
                url: "https://apis.google.com/js/client.js",
                verify: ["gapi", "gapi.auth"],
                error: f,
                callback: function () {
                    sketch.loader.stop();
                    setTimeout(function () {
                        a.api.gdrive.auth(b, f)
                    }, 1)
                }
            }) : gapi.auth.getToken() ? b && b() : a.api.gdrive.auth(b, f)
        };
        this.getToken = function (a) {
            sketch.getItem("google-drive", function (b) {
                b && (b = g(b));
                b && b.access_token || (b = "");
                a(b)
            })
        };
        this.getUserInfo = function () {
            a.api.gdrive.getToken(function (b) {
                b && DOMLoader.sendRequest({
                    url: "https://www.googleapis.com/oauth2/v1/userinfo?access_token=" + b.access_token,
                    onload: function (b) {
                        b && b.responseText &&
                            (c = g(b.responseText).email, a.api.gdrive.html_profile())
                    }
                })
            })
        };
        this.html_profile = function () {
            c && setTimeout(function () {
                var a = document.querySelector("#avgrund-html .drive-profile");
                a && (a.style.display = "inline-block", a.firstChild.innerHTML = c)
            }, 1)
        };
        this.html_files = function (b, f) {
            a.api.gdrive.getToken(function (a) {
                if (a) {
                    for (var h = document.querySelector(".drive-files"), c = [], d = document.createElement("div"), g = function () {
                            var b = this.querySelector("img").getAttribute("data-src"),
                                e = "&access_token=" + a.access_token;
                            sketch.addMedia({
                                src: b + e,
                                name: b + e,
                                callback: sketch.loader.stop
                            })
                        }, t = 0; t < b.length; t++) {
                        var s = b[t];
                        if (f[s.mimeType]) {
                            var u = document.createElement("div"),
                                y = new Image,
                                w = document.createTextNode(s.title);
                            y.height = 64;
                            y.src = s.thumbnailLink;
                            y.setAttribute("data-src", s.downloadUrl);
                            var v = document.createElement("div");
                            v.style.cssText = "display: inline-block; width: 64px; height: 64px; overflow: hidden; margin-right: 15px;";
                            v.appendChild(y);
                            u.onclick = g;
                            u.title = 'open "' + s.title + '"';
                            u.style.cssText = "clear: both; margin-bottom: 10px; cursor: pointer;";
                            u.appendChild(v);
                            u.appendChild(w);
                            d.appendChild(u);
                            c.push(s)
                        }
                    }
                    c.length ? (h.innerHTML = "", h.appendChild(d)) : h.innerHTML = "<h3>You have no images stored in Google Drive</h3>"
                }
            })
        };
        this.revoke = function () {
            a.api.gdrive.getToken(function (a) {
                a && DOMLoader.sendRequest({
                    url: "../?revoke-google=" + a.access_token,
                    onload: function () {
                        sketch.setItem("google-drive", "");
                        b = c = void 0
                    }
                })
            })
        };
        this.auth = function (b, h, c) {
            a.api.gdrive.getToken(function (h) {
                var d = (new Date).getTime();
                if (h && 1 > (d - h.timestamp) / 1E3 / 60 / 60) gapi.auth.setToken(h),
                a.api.gdrive.getUserInfo(), b && b();
                else {
                    var l = {
                        client_id: f[window.location.host],
                        scope: ["https://www.googleapis.com/auth/drive", "https://www.googleapis.com/auth/userinfo.email"]
                    };
                    !c && h && (l.immediate = !0);
                    gapi.auth.authorize(l, function () {
                        var f = gapi.auth.getToken();
                        if (f) {
                            var h = {};
                            h.timestamp = d;
                            h.access_token = f.access_token;
                            sketch.setItem("google-drive", JSON.stringify(h));
                            a.api.gdrive.getUserInfo();
                            b && b()
                        } else a.api.gdrive.revoke(), a.api.gdrive.auth(b, null, !0)
                    })
                }
            })
        };
        this.list = function (e) {
            e || (e = {});
            var h =
                e.mime || d,
                f = e.callback;
            a.api.gdrive.init(function () {
                sketch.loader.message("updating listing...");
                gapi.client.request({
                    path: "/drive/v2/files",
                    method: "GET",
                    params: {
                        maxResults: "100"
                    }
                }).execute(function (c) {
                    c.error ? (a.api.gdrive.revoke(), a.api.gdrive.auth(function () {
                        a.api.gdrive.list(e)
                    }, null, !0)) : ((b = c) && a.api.gdrive.html_files(b.items, h), f && f(ret))
                });
                setTimeout(function () {
                    b && a.api.gdrive.html_files(b.items, h)
                }, 1)
            })
        };
        this.open = function () {};
        this.uploading = !1;
        this.timestamp = (new Date).getTime();
        this.src =
            "";
        this.post = function (b) {
            var f = b.title,
                c = b.canvas,
                d = b.onpost,
                g = b.onupload,
                p = b.onerror || onErrorHandler;
            h.timestamp === sketch.__modifiedOnline ? (g && g(h.src), d && d(h.src)) : a.api.gdrive.init(function () {
                a.api.gdrive.getToken(function (a) {
                    if (!a) p && p();
                    else if (!h.uploading) {
                        h.uploading = !0;
                        var b = c.toDataURL("image/png");
                        a = {
                            title: f,
                            mimeType: "image/png"
                        };
                        b = b.replace(/^data:image\/(gif|png|jpg|jpeg);base64,/, "");
                        a = "\r\n---------314159265358979323846\r\nContent-Type: application/json\r\n\r\n" + JSON.stringify(a) + "\r\n---------314159265358979323846\r\nContent-Type: image/png\r\nContent-Transfer-Encoding: base64\r\n\r\n" +
                            b + "\r\n---------314159265358979323846--";
                        gapi.client.request({
                            path: "/upload/drive/v2/files/",
                            method: "POST",
                            params: {
                                uploadType: "multipart"
                            },
                            headers: {
                                "X-Upload-Content-Type": "image/png",
                                "X-Upload-Content-Length": b.length,
                                "Content-Range": "*/*",
                                "Content-Type": 'multipart/mixed; boundary="-------314159265358979323846"'
                            },
                            body: a
                        }).execute(function (a, b) {
                            h.uploading = !1;
                            var e = document.querySelector(".request-url");
                            if (e) {
                                var f = new Image,
                                    c = document.createElement("a");
                                f.src = a.webContentLink;
                                f.width = 64;
                                c.href = a.webContentLink;
                                c.appendChild(f);
                                e.appendChild(c)
                            }
                            if (e = a.webContentLink) e = e.replace("&export=download", ""), g && g(e), d && d(e), h.src = e, h.timestamp = sketch.__modifiedOnline
                        })
                    }
                })
            })
        }
    };
    var f = {
        "sketchpad.io": "442790713590.apps.googleusercontent.com",
        "sketch.io": "1084993334678-k63b3uvj7175ndpgai2q1l5p1nda4f13.apps.googleusercontent.com",
        "dev.sketchpad.io": "442790713590-10eks3nibtlfjb61o20b2ata55hn1ob8.apps.googleusercontent.com",
        "mudcu.be": "1084993334678-blm2o4tokd6sffahgqglmirir33imvoj.apps.googleusercontent.com",
        localhost: "442790713590-21sjq506elknq795rcd5a050689qs07n.apps.googleusercontent.com",
        "mud.local": "442790713590-21sjq506elknq795rcd5a050689qs07n.apps.googleusercontent.com"
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
sketch = function (a) {
    a.area = function (b) {
        this.construct = function () {
            this.ctx = b.layer0.ctx;
            this.active = b.active.ctx;
            this.cache = b.cache.ctx;
            return this
        };
        this.enable = function () {
            var b = a.toolkit.select;
            a.tool !== b && b && b.enable({
                cursor: !0,
                cancelSelection: !0,
                search: this.type
            })
        };
        this.disable = function () {
            var b = a.toolkit.select;
            a.tool !== b && b && b.disable({
                cursor: !0
            })
        };
        this.construct();
        a.toolkit.__init[b.type](b, this);
        return a.initToolkit(this)
    };
    a.area.deleteEvent = function (b) {
        var f = b.target,
            h = function () {
                Event.remove(f,
                    "mouseup", h);
                if ("delete" === a.area.hover) {
                    a.area.hide();
                    a.actions.remove(a.actions.idx, !a.area.inGenesis);
                    a.actions.deselectAll();
                    var b = 0,
                        c = setInterval(function () {
                            a.active.save();
                            a.active.globalAlpha = 0.25;
                            a.active.globalCompositeOperation = "destination-out";
                            a.active.fillRect(0, 0, a.active.canvas.width, a.active.canvas.width);
                            a.active.restore();
                            10 < b++ && (clearInterval(c), a.render.actions("root.deleteAction"))
                        }, 25)
                }
            };
        Event.add(f, "mouseup", h);
        Event.cancel(b)
    };
    a.area.moveEvent = function (b) {
        "undefined" !== typeof a.actions.data[a.actions.idx] &&
            Event.proxy.drag({
                position: "absolute",
                event: b,
                target: a.active.canvas,
                listener: function (b, h) {
                    switch (h.state) {
                    case "down":
                        a.actions.move(0, 0, "cache");
                        break;
                    case "move":
                        a.actions.move(h.x - (h.px || 0), h.y - (h.py || 0));
                        break;
                    case "up":
                        a.actions.move(0, 0, "record")
                    }
                    h.px = h.x;
                    h.py = h.y;
                    a.area.updateBBox();
                    a.active.canvas.width = a.active.canvas.width;
                    a.render.actions("root.area.moveEvent");
                    Event.cancel(b)
                }
            })
    };
    a.area.rotateScaleEvent = function (b) {
        var f = a.actions.data[a.actions.idx];
        if ("undefined" !== typeof f) {
            var h =
                function (b) {
                    f.dirty = !0;
                    delete c.scaleCache;
                    u = clone(y);
                    a.area.updateBBox();
                    a.render.actions("root.area.rotateScaleEvent.1");
                    v || (d && g(k), a.dataChannel && a.feature.stream.sketch && a.dataChannel.send(["actions.update", [{
                        id: f.id,
                        dirtyCache: !0,
                        bbox: c
                    }]]))
            }, e = "text" === f.type,
                c = f.bbox,
                d = "objectBoundingBox" === c.units,
                k = a.actions.getBoundingBoxOrigin(c),
                q = c.scale.x || 1,
                p = c.scale.y || 1,
                r = clone(c),
                t = null,
                s = {}, u = clone(c.scale),
                y = {}, w, v, x = !1,
                A;
            e && (f.breaks = a.vector.text.drawLineBreaks({
                fillStyle: f.fillStyle,
                fontVariant: f.fontVariant,
                fontStyle: f.fontStyle,
                fontWeight: f.fontWeight,
                fontSize: f.fontSize,
                fontFamily: f.fontFamily,
                content: f.content,
                bbox: c
            }));
            Event.proxy.drag({
                position: "relative",
                event: b,
                target: a.active.canvas,
                listener: function (b, c) {
                    var l, F;
                    a.active.canvas.width = a.active.canvas.width;
                    Event.cancel(b);
                    w = "down" === c.state;
                    v = "up" === c.state;
                    w ? (a.area.active = a.area.hover, a.area.editing = !0) : v && (a.area.active = "", a.area.editing = !1);
                    var G = a.canvas2d,
                        G = G.scale / G.pixelRatio,
                        z = (G - 1) / G;
                    l = a.project.scrollLeft * z;
                    c.y = c.y / G + a.project.scrollTop *
                        z;
                    c.x = c.x / G + l;
                    if (0 !== k.x - c.x || 0 !== k.y - c.y) {
                        G = v && (c.start.x !== c.x || c.start.y !== c.y);
                        z = f.bbox;
                        Event.proxy.shiftKey ? z.rotate = r.rotate : (l = -Math.atan2(k.x - c.x, k.y - c.y) * RAD_DEG, null === t && (t = l), z.rotate = (r.rotate - (t - l) + 360) % 360);
                        !e || c.fontSize && x || (c.width = z.width, c.height = z.height, c.viewBox = clone(z.viewBox), c.breaks = clone(f.breaks), c.fontSize = parseFloat(f.fontSize), "move" === c.state && (k = a.actions.getBoundingBoxOrigin(z), x = !0));
                        F = c.x - k.x;
                        l = c.y - k.y;
                        var J = c.width || z.width,
                            O = c.height || z.height;
                        y.x = Math.sqrt(F *
                            F + l * l);
                        isFinite(s.x) || (s.x = y.x);
                        y.x = y.x / s.x * r.scale.x;
                        y.y = Math.sqrt(F * F + l * l);
                        isFinite(s.y) || (s.y = y.y);
                        y.y = y.y / s.y * r.scale.y;
                        y.x * z.width < z.minWidth && (y.x = z.minWidth / z.width, y.y = y.x);
                        y.y * z.height < z.minHeight && (y.y = z.minHeight / z.height, y.x = y.y);
                        y.x * z.width > z.maxWidth && (y.x = z.maxWidth / z.width, y.y = y.x);
                        y.y * z.height > z.maxHeight && (y.y = z.maxHeight / z.height, y.x = y.y);
                        d && (z.x = r.x + (J * q - J * y.x) / 2, z.y = r.y + (O * p - O * y.y) / 2);
                        if (e) z.width = y.x * c.width, z.height = y.y * c.height, z.owidth = z.width, z.oheight = z.height, z.viewBox[2] =
                            y.x * c.viewBox[2], z.viewBox[3] = y.y * c.viewBox[3], f.fontSize = y.x * c.fontSize, c.breaks && (f.breaks.lineHeight = y.x * c.breaks.lineHeight), f.dirty = !0, f.toolkit.updateActionSize(f), G && a.history && a.history.store([{
                                id: f.id,
                                fontSize: c.fontSize,
                                bbox: {
                                    x: r.x,
                                    y: r.y,
                                    width: c.width,
                                    height: c.height,
                                    rotate: r.rotate,
                                    viewBox: c.viewBox
                                }
                            }], [{
                                id: f.id,
                                fontSize: f.fontSize,
                                bbox: {
                                    x: r.x,
                                    y: r.y,
                                    width: z.width,
                                    height: z.height,
                                    rotate: z.rotate,
                                    viewBox: z.viewBox
                                }
                            }]), a.render.actions("root.area.rotateScaleEvent.3"), d && !v && g(k);
                        else {
                            z.scale = {
                                x: y.x,
                                y: y.y
                            };
                            G && a.history && a.history.store([{
                                id: f.id,
                                bbox: {
                                    x: r.x,
                                    y: r.y,
                                    rotate: r.rotate,
                                    scale: {
                                        x: r.scale.x,
                                        y: r.scale.y
                                    }
                                }
                            }], [{
                                id: f.id,
                                bbox: {
                                    x: z.x,
                                    y: z.y,
                                    rotate: z.rotate,
                                    scale: z.scale
                                }
                            }]);
                            z.scaleCache || (z.scaleCache = {
                                x: 1,
                                y: 1
                            });
                            if (v || 0.5 > z.scaleCache.x || 2 < z.scaleCache.x) return clearTimeout(A), h(c.state);
                            f.dirtyTransform = !0;
                            z.scaleCache.x = 1 + 1 * (y.x - u.x) / u.x;
                            z.scaleCache.y = 1 + 1 * (y.y - u.y) / u.y;
                            clearTimeout(A);
                            A = setTimeout(h, 250);
                            a.area.updateBBox();
                            a.render.actions("root.area.rotateScaleEvent.4");
                            d && !v && g(k);
                            a.dataChannel && a.feature.stream.sketch && a.dataChannel.send(["actions.update", [{
                                id: f.id,
                                dirty: !0,
                                bbox: {
                                    x: z.x,
                                    y: z.y,
                                    ox: z.ox,
                                    oy: z.oy,
                                    scale: z.scale,
                                    rotate: z.rotate
                                }
                            }]])
                        }
                    }
                }
            })
        }
    };
    var g = function (b) {
        var f = a.area.padding / 2,
            h = 2.5 * a.canvas2d.pixelRatio / a.canvas2d.scale;
        a.active.save();
        a.active.beginPath();
        a.active.globalAlpha = 0.5;
        a.active.arc(b.x - f, b.y - f, h, 0, 2 * Math.PI);
        a.active.strokeStyle = "#fff";
        a.active.stroke();
        a.active.fill();
        a.active.restore()
    };
    a.area.deleteEvent.id = "delete";
    a.area.moveEvent.id = "move";
    a.area.rotateScaleEvent.id =
        "rotate-scale";
    a.area.updateBBox = function () {
        var b = a.actions.data[a.actions.idx];
        "undefined" !== typeof b && (a.actions.constrain(b), "text" === b.type ? a.toolkit.text.updateCSS(b) : b.brush && (b.brush.bbox = b.bbox))
    };
    a.area.renderControls = function (b, f) {
        b = b || {};
        if (isFinite(b)) {
            var h = {};
            h[b] = !0;
            b = h
        }
        f && (a.active.canvas.width = a.active.canvas.width);
        var h = a.actions.selection,
            e = JSON.stringify(h),
            h = f || h !== e,
            c;
        for (c in a.actions.data) c = parseInt(c), e = a.actions.data[c], h && (e.dirtyControl = !0), a.actions.idx === c ? a.area.drawControls(a.active,
            e) : b[c] && a.area.drawControls(a.active, e, !0)
    };
    a.area.drawControls = function (b, f, h) {
        if (f && f.dirtyControl && f.placement && f.placement.apply) {
            delete f.dirtyControl;
            var e = f.brush,
                c = a.actions.idx === f.zIndex;
            if (e && e.drawControl) b = e.drawControl(f), c && (a.actions.controls = b);
            else {
                c = f.placement;
                e = f.bbox;
                if ("text" === f.type) var g = 1,
                k = e.width, q = e.height;
                else g = e.viewBox[2] / e.width, k = e.viewBox[2], q = g * e.height;
                var p = a.canvas2d.pixelRatio,
                    g = a.canvas2d.scale,
                    r = 1 * a.area.buttonSize * p / g,
                    t = a.area.padding,
                    s = a.feature[f.type] ||
                        a.feature.tools;
                if (s.drawBoundingBox) {
                    var u = t / (e.scale.x * g),
                        y = t / e.scale.y * g;
                    b.save();
                    c.apply(b);
                    b.beginPath();
                    b.rect(-u, -y, k + 2 * u, q + 2 * y);
                    b.restore();
                    b.save();
                    b.shadowOffsetX = 1;
                    b.shadowOffsetY = 1;
                    b.shadowBlur = 1;
                    "light" === a.configure.theme ? (b.shadowColor = "#fff", b.strokeStyle = "rgba(0,0,0,1)") : (b.shadowColor = "#000", b.strokeStyle = "rgba(255,255,255,1)");
                    b.lineWidth = 0.5 * p / g;
                    b.stroke();
                    b.restore()
                }
                if (!h) {
                    if (!f.placement) return console.log("action.placement not available");
                    c = f.placement.clone();
                    u = 0.5 / e.scale.x;
                    p = 0.5 / e.scale.y;
                    h = c.point2d(-u, -p);
                    g = c.point2d(k, q);
                    q = c.point2d(-u, q);
                    k = c.point2d(k, -p);
                    a.actions.controls = [];
                    a.actions.controls.push({
                        id: "boundingBox",
                        type: "button",
                        cursor: "move",
                        event: a.area.moveEvent,
                        bbox: {
                            units: e.units,
                            x: h.x,
                            y: h.y,
                            left: -t - t / 2,
                            top: -t - t / 2,
                            width: e.scale.x * e.width + r,
                            height: e.scale.y * e.height + r,
                            rotate: e.rotate,
                            scale: {
                                x: 1,
                                y: 1
                            }
                        }
                    });
                    !f.hideClose && s.controls.nw && d(b, c, e, {
                        x: h.x,
                        y: h.y,
                        left: -r / 2 - t,
                        top: -r / 2 - t,
                        dir: "nw",
                        defaultId: "delete",
                        defaultEvent: a.area.deleteEvent,
                        bbox: {
                            units: e.units,
                            x: h.x,
                            y: h.y,
                            left: -r / 2 - t,
                            top: -r / 2 - t,
                            width: r,
                            height: r,
                            rotate: e.rotate,
                            scale: {
                                x: 1,
                                y: 1
                            }
                        }
                    });
                    !f.hideMove && s.controls.sw && d(b, c, e, {
                        x: q.x,
                        y: q.y,
                        left: -r / 2 - t,
                        top: -r / 2 + t,
                        dir: "sw",
                        defaultId: "move",
                        defaultEvent: a.area.moveEvent,
                        bbox: {
                            units: e.units,
                            x: q.x,
                            y: q.y,
                            left: -r / 2 - t,
                            top: -r / 2 + t,
                            width: r,
                            height: r,
                            rotate: e.rotate,
                            scale: {
                                x: 1,
                                y: 1
                            }
                        }
                    });
                    !f.hideScale && s.controls.se && d(b, c, e, {
                        x: g.x,
                        y: g.y,
                        left: -r / 2 + t,
                        top: -r / 2 + t,
                        dir: "se",
                        defaultId: "scale",
                        defaultEvent: a.area.rotateScaleEvent,
                        bbox: {
                            units: e.units,
                            x: g.x,
                            y: g.y,
                            left: -r / 2 + t,
                            top: -r /
                                2 + t,
                            width: r,
                            height: r,
                            rotate: e.rotate,
                            scale: {
                                x: 1,
                                y: 1
                            }
                        }
                    });
                    !f.hideRotate && s.controls.ne && d(b, c, e, {
                        x: k.x,
                        y: k.y,
                        left: -r / 2 + t,
                        top: -r / 2 - t,
                        dir: "ne",
                        defaultId: "rotate",
                        defaultEvent: a.area.rotateScaleEvent,
                        bbox: {
                            units: e.units,
                            x: k.x,
                            y: k.y,
                            left: -r / 2 + t,
                            top: -r / 2 - t,
                            width: r,
                            height: r,
                            rotate: e.rotate,
                            scale: {
                                x: 1,
                                y: 1
                            }
                        }
                    })
                }
            }
        }
    };
    a.area.buttonSize = 16;
    a.area.padding = 10;
    var d = function (b, f, h, e) {
        var c = a.area.buttons,
            d = "touch" === Event.pointerType ? c.touch : c.mouse;
        a.area.buttonSize = d.buttonSize;
        a.area.padding = d.padding;
        var c = d[e.dir +
            "-normal"],
            c = c.event && c.event.id ? c.event.id : e.defaultId,
            d = d[e.dir + "-" + (a.area.hover === c || a.area.active === c ? "hover" : "normal")],
            k = d.event || {};
        a.actions.controls.push({
            id: k.id || c,
            type: "button",
            cursor: "pointer",
            event: k || e.defaultEvent,
            bbox: e.bbox
        });
        c = d.width / d.viewBox[2];
        b.save();
        b.beginPath();
        f.reset();
        f.translate(e.x, e.y);
        f.rotate(h.rotate * DEG_RAD);
        f.translate(e.left || 0, e.top || 0);
        f.apply(b);
        d.render({
            ctx: b,
            matrix: {
                a: c,
                b: 0,
                c: 0,
                d: c,
                x: 0,
                y: 0
            }
        });
        a.feature.debugMouse && (b.fillStyle = "rgba(255,255,0,1)", b.fillRect(0,
            0, e.bbox.width, e.bbox.height));
        b.restore()
    }, c = {};
    a.area.exitGenesis = function () {
        if (a.area.inGenesis) {
            a.area.inGenesis = !1;
            var b = a.actions.data[a.actions.idx];
            if (b) {
                if ("text" !== b.type || b.content) {
                    var f = b.svg,
                        h = a.actions.clone(b);
                    h.id = a.actions.createId();
                    h.dirty = !0;
                    h.render = b.render;
                    a.actions.remove(b.zIndex);
                    b = a.actions.add(h);
                    f && (b.svg = f);
                    a.render.actions("root.area.hide");
                    a.history && !a.area.inGenesisChannel && (h = a.actions.clone(b), a.history.store("add", [h]));
                    a.area.inGenesisChannel = !1;
                    return b
                }
                a.actions.remove(a.actions.idx);
                a.actions.deselectAll();
                c = {}
            }
        }
    };
    a.area.hide = function () {
        var b = a.actions.data[a.actions.idx];
        a.__editing = !1;
        a.area.hidden = !0;
        var f = a.toolkit.text;
        if (f && (f.textarea || f.createTextarea(), f.textarea.innerHTML = "", f.textarea.blur(), f.container.style.opacity = 0, f.container.style.display = "none", b && "text" === b.type))
            if (b.content.trim()) b.dirty = !0;
            else if (a.area.inGenesis) {
            a.actions.remove(a.actions.idx);
            a.actions.deselectAll();
            a.area.inGenesis = !1;
            c = {};
            return
        }
        if (a.area.inGenesis) {
            if (a.area.inGenesis = !1, b) {
                f = a.actions.clone(b);
                f.id = a.actions.createId();
                f.dirty = !0;
                f.render = b.render;
                a.actions.remove(b.zIndex);
                a.actions.add(f);
                a.actions.deselectAll();
                a.render.actions("root.area.hide");
                if (a.history && !a.area.inGenesisChannel) {
                    var h = [a.actions.clone(f)];
                    a.history.store("add", h)
                }
                a.area.inGenesisChannel = !1
            }
        } else "undefined" !== typeof c.id && ("text" === c.type && f) && ((h = a.actions.getById(c.id)) && (c.content !== h.content && a.history) && (b = [{
                id: h.id,
                content: c.content
            }], h = [{
                id: h.id,
                content: h.content
            }], a.history.store(b, h)), f.createTextarea(),
            c = {})
    };
    a.area.show = function (b) {
        var f = a.toolkit.text;
        f && (f.blur = b.blur || 0);
        c = a.actions.clone(b);
        a.area.updateColor(b.fillStyle);
        "text" === b.type && f ? (a.__editing = !0, a.area.hidden = !1, f.textarea.innerHTML = b.content || " ", f.textarea.blur(), f.updateCSS(), b.dirtyControl = !0, a.render.actions("root.area.show"), f.container.style.opacity = 1, f.container.style.display = "block") : (a.__editing = !1, a.area.hidden = !0, f.textarea.innerHTML = "", f.container.style.opacity = 0, f.container.style.display = "none")
    };
    a.area.updateColor =
        function (b) {
            b = a.toolkit.text;
            var f = a.actions.data[a.actions.idx];
            if (b && b.textarea && f) {
                var h = b.textarea,
                    e = f.fill.type,
                    c = "webkitFilter" in h.style,
                    d = "textShadow" in h.style;
                if ("webkitBackgroundClip" in h.style && c) {
                    switch (e) {
                    case "gradient":
                        var k = a.style.cssGradient(f.fill.gradient, "left");
                        break;
                    case "color":
                        k = "background: " + f.fill.color
                    }
                    b.styleCode.innerHTML = "\t\t\tdiv.textareaWrapper div.textarea { " + k + " }\t\t";
                    h.setAttribute("data-content", h.innerHTML);
                    h.style.webkitBackgroundClip = "text";
                    h.style.webkitTextFillColor =
                        "transparent";
                    h.style.webkitFilter = "blur(" + f.blur / 3 + "px)";
                    h.style.textShadow = "none"
                } else {
                    switch (e) {
                    case "gradient":
                        k = "#000";
                        break;
                    case "color":
                        k = f.fill.color
                    }
                    d ? (h.style.color = k, h.style.textShadow = "none") : h.style.color = k
                }
            }
    };
    return a
}(sketch);
"undefined" === typeof sketch && (sketch = {});
"undefined" === typeof sketch.area && (sketch.area = {});
"undefined" === typeof sketch.toolkit && (sketch.toolkit = {});
(function (a) {
    a.toolkit.changeMedia = function (b) {
        var e = b.type;
        a.feature.canvas.editable || "text" === a.tool.type || a.actions.deselectAll();
        var f = a.actions.selection,
            c = a.actions.selectionCount,
            d = "select" === a.tool.type,
            g = a.actions.data[a.actions.idx],
            g = a.configure.tools,
            p = [],
            r = [];
        if ("text" === e) {
            b = b.fontFamily;
            a.toolkit.text.style.fontFamily = b;
            g[e].fontFamily = b;
            for (var t in f)(g = a.actions.data[t]) && "text" === g.type && (p.push({
                id: g.id,
                fontFamily: g.fontFamily
            }), r.push({
                id: g.id,
                fontFamily: b
            }), g.fontFamily = b, g.dirtyResource = !0)
        } else {
            b = b.src;
            if ("stamp" === e) b = b.replace("thumb", "live");
            else {
                b = b.replace(".png", ".svg").replace("-preview", "");
                var s = a.toolkit.media;
                s.style.src = b;
                s.style.render = void 0
            }
            g[e].src = b;
            for (t in f) g = a.actions.data[t], "image" === g.type && "clipart" === e ? g.type = "clipart" : "clipart" === g.type && "image" === e && (g.type = "image"), g && g.type === e && (p.push({
                id: g.id,
                src: g.src
            }), r.push({
                id: g.id,
                src: b
            }), g.dirtyResource = !0, g.dirty = !0, g.src = b)
        }
        p.length && r.length ? (a.history && a.history.store(p, r), a.render.preload()) : (a.active.canvas.width =
            a.active.canvas.width, a.setTool(e, function () {
                d && c ? a.setTool("select") : (a.ui.setToolMenu && a.ui.setToolMenu(a.tool.type), a.active.canvas.width = a.active.canvas.width)
            }))
    };
    a.area.changeMedia = function (b) {
        var e = b.src,
            f = b.name,
            c = b.type,
            d = b.record,
            g = b.onload,
            p = "select" === a.tool.type;
        b = a.actions.selection;
        var r = a.actions.data[a.actions.idx],
            r = a.configure.tools,
            t = [],
            s = [];
        if ("text" === c) {
            if (e = a.toolkit.text, e.style.fontFamily = f, r[c].fontFamily = f, d)
                for (var u in b)(r = a.actions.data[u]) && "text" === r.type && (t.push({
                    id: r.id,
                    fontFamily: r.fontFamily
                }), s.push({
                    id: r.id,
                    fontFamily: f
                }), r.fontFamily = f, r.dirtyResource = !0)
        } else if ("stamp" === c ? f = e.replace("thumb", "live") : (f = e.replace(".png", ".svg").replace("-preview", ""), e = a.toolkit.media, e.style.src = f, e.style.render = void 0), r[c].src = f, d)
            for (u in b) r = a.actions.data[u], "image" === r.type && "clipart" === c ? r.type = "clipart" : "clipart" === r.type && "image" === c && (r.type = "image"), r && r.type === c && (t.push({
                id: r.id,
                src: r.src
            }), s.push({
                id: r.id,
                src: f
            }), r.dirtyResource = !0, r.dirty = !0, r.src = f);
        t.length &&
            s.length ? (a.history && a.history.store(t, s), a.render.preload({
                onload: g
            })) : (a.active.canvas.width = a.active.canvas.width, a.setTool(c, function () {
                p ? a.setTool("select") : (a.ui.setToolMenu && a.ui.setToolMenu(a.tool.type), a.active.canvas.width = a.active.canvas.width);
                g && g()
            }))
    };
    a.addMedia = function (c, e, l) {
        e = e || a.getCenterPoint();
        if (c.toDataURL) return c.toBlob(function (b) {
            a.addMedia(b, e, l)
        });
        var m = {
            data: {},
            add: function (a) {
                m.data[a] = !0
            },
            run: function (b) {
                delete a.loader.files;
                delete a.loader.decode;
                a.loader.stop();
                var e = m.data;
                e.clipart && e.stamp && delete e.clipart;
                for (var c in m.data) m.callbacks[c]();
                m.callbacks.callback(b)
            },
            callbacks: {
                callback: function (a) {
                    c.callback && c.callback();
                    l && l(a)
                },
                text: function () {
                    a.ui.setToolMenu && (a.ui.setToolMenu("text"), a.ui.buildConfigure("text", !0));
                    a.setTool("text")
                },
                stamp: function () {
                    a.ui.setToolMenu && (a.ui.setToolMenu("stamp"), a.ui.buildConfigure("stamp", !0));
                    a.setTool("stamp")
                },
                clipart: function () {
                    a.configure.tools.clipart.opacity.value = 100;
                    a.ui.setToolMenu && (a.ui.setToolMenu("clipart"),
                        a.ui.buildConfigure("clipart", !0));
                    a.run("select")
                },
                color: function () {
                    a.palette.update("color", !0);
                    widget.windows.open("sketch-palette")
                },
                gradient: function () {
                    a.palette.update("gradient", !0);
                    widget.windows.open("sketch-palette")
                },
                pattern: function () {
                    a.palette.update("pattern", !0);
                    widget.windows.open("sketch-palette")
                }
            }
        }, k, q;
        c.slice && "string" === typeof c.type && (c.lastModifiedDate ? q = STRING.extension(c.name) : (k = URL.createObjectURL(c), q = (c.type || "image/png").split("/").pop()));
        switch (q) {
        case "zip":
            return d(c,
                m);
        case "json":
            return a.open.json(c, a.onSketchReady, a.onSketchReady);
        case "sketch":
            return a.open.zip(c);
        case "woff":
            return console.log("woff", c), m.run();
        case "pat":
            return console.log("pat", c), m.run();
        case "abr":
            return m.add("stamp"), g("ABR", c, m.run);
        case "gbr":
            return m.add("stamp"), g("GBR", c, m.run);
        case "ggr":
            return m.add("gradient"), a.style.addFromBlob(c, m.run);
        case "gpl":
            return m.add("color"), a.style.addFromBlob(c, m.run);
        case "pdf":
            return b(c, e, m.run, !0);
        case "psd":
            return f(c, e, m.run, !0)
        }
        k = k || c.src ||
            c;
        if ("string" !== typeof k) return console.log("unrecognized", c);
        q = q || STRING.extension(k);
        if ("{" === k.substr(0, 1)) a.open.json(k, a.onSketchReady, a.onSketchReady);
        else {
            var p = "function" === typeof a.toolkit.__init.media,
                r = function (b) {
                    (a.feature.openImageAsSketch || Event.proxy.altKey) && "image" === q ? a.run("new-prompt", function () {
                        a.open.image({
                            src: b,
                            openAsNew: !0,
                            callback: function () {
                                m.run()
                            }
                        })
                    }) : (a.feature.openSVGAsSketch || Event.proxy.altKey) && "clipart" === q ? a.run("new-prompt", function () {
                        a.open.svg({
                            src: b,
                            openAsNew: !0,
                            callback: function () {
                                m.run()
                            }
                        })
                    }) : a.place({
                        type: q,
                        src: b,
                        width: c.width,
                        height: c.height,
                        points: [e]
                    }, function (a) {
                        m.run(a)
                    })
                };
            0 === k.indexOf("<svg") && (k = '<?xml version="1.0" encoding="UTF-8"?>' + k);
            0 === k.indexOf("<?xml") && (k = "data:image/svg+xml;base64," + btoa(k), q = "svg");
            "svg" === q ? p ? (m.add("clipart"), q = "clipart", l ? a.assets.addClipart(k, r) : r(k)) : a.open.svg(k) : p && (m.add("clipart"), q = "image", l ? a.assets.addImage(k, r) : r(k))
        }
    };
    a.area.addBackground = function (b, e) {
        "string" === typeof b && (b = {
            src: b,
            name: b,
            type: b
        });
        var c =
            function (e, c, f, l) {
                e = {
                    type: c,
                    src: e,
                    name: "background",
                    zIndex: -1,
                    stickToBack: !0,
                    hideMove: !0,
                    hideClose: !0,
                    hideRotate: !0,
                    hideScale: !0
                };
                f / l < d / g ? (e.constrainX = !0, e.stickToY = !0, e.bbox = {}, e.bbox.width = d, e.bbox.height = l / f * d) : (e.constrainY = !0, e.stickToX = !0, e.bbox = {}, e.bbox.width = f / l * g, e.bbox.height = g);
                e.bbox.owidth = e.bbox.width;
                e.bbox.oheight = e.bbox.height;
                e.bbox.x = (d - e.bbox.width) / 2;
                e.bbox.y = (g - e.bbox.height) / 2;
                e.fill = {
                    gradient: "",
                    color: b.color || "rgba(0,0,0,1)",
                    type: "color"
                };
                a.actions.removeByName("background");
                f = a.actions.add(e);
                a.feature.canvas.editable && a.history && (l = [a.actions.clone(f)], a.history.store("add", l));
                return f
        }, f = a.tool.type,
            d = a.canvas2d.width,
            g = a.canvas2d.height;
        b.type && -1 !== b.type.indexOf("svg") ? (a.setTool("clipart"), a.tool.style.src = "#" + b.name, a.tool.loadResource(a.tool.style, function () {
            c(a.tool.style.src, "clipart", a.tool.style.bbox.width, a.tool.style.bbox.height);
            e && e(action)
        })) : a.convert.fileToCanvas(b, null, function (b, h) {
            var d = "blob:" === h.src.substr(0, 5) ? b.toDataURL() : h.src,
                k = b.width,
                g = b.height,
                d = "#" + h.name;
            a.configure.tools.image.src = d;
            a.setTool("image");
            var q = c(d, "image", k, g);
            q.toolkit.loadResource(q, function () {
                a.setTool(f);
                a.render.actions("root.area.addBackground");
                e && e(q)
            })
        })
    };
    a.area.addBackgroundColor = function (b) {
        var e = a.tool.type;
        a.style && (a.style.fill.color = b);
        a.setTool("rectangle");
        b = a.canvas2d.container;
        a.tool.place({
            type: "rectangle",
            points: [{
                x: b.offsetWidth / 2,
                y: b.offsetHeight / 2
            }, {
                x: b.offsetWidth / 2,
                y: 0
            }]
        });
        b = a.actions.data[a.actions.data.length - 1];
        b.zIndex = -1;
        b.constrain = !0;
        b.stickToBack = !0;
        b.stretchToFit = !0;
        a.setTool(e);
        a.actions.sort();
        a.render.actions("root.area.addBackgroundColor")
    };
    a.area.addFromDrag = function (b) {
        -1 !== String(b).indexOf("Event") && (b = {
            target: this,
            src: this.src
        });
        var e = b.target,
            c = b.event,
            f = b.src || e.src || e.getAttribute("data-src"),
            d = b.type || e.getAttribute("data-type") || "clipart",
            g = e.cloneNode(!0);
        "[object HTMLCanvasElement]" === g.toString() && g.getContext("2d").drawImage(e, 0, 0);
        var p = (e.offsetWidth - parseInt(e.width)) / 2;
        g.id = "addFromDrag";
        g.style.position =
            "absolute";
        g.style.opacity = 0.75;
        g.style.zIndex = 1E6;
        g.style.display = "block";
        g.style.border = "1px solid transparent";
        g.style.margin = p + "px";
        document.body.appendChild(g);
        var p = dom.getMetrics(e),
            r = p.padding,
            t = r[0] + r[1],
            s = r[2] + r[3],
            u = p.border,
            y = r[0] + u[0],
            w = r[2] + u[2];
        g.style.width = p.width - t + "px";
        g.style.height = p.height - s + "px";
        return Event.proxy.drag({
            position: "move",
            target: e,
            event: c,
            listener: function (c, l) {
                var p;
                if (!a.toolkit.media) return console.log("Missing 'sketch.toolkit.media'");
                if ("down" === l.state) {
                    var r =
                        Event.proxy.getCoord(c),
                        u = Event.proxy.getBoundingBox(l.target);
                    l.offset = {};
                    l.offset.x = u.width / 2 - (r.x - l.x);
                    l.offset.y = u.height / 2 - (r.y - l.y);
                    Event.prevent(c)
                }
                var B = l.bbox.scrollBodyTop,
                    F = l.bbox.scrollBodyLeft;
                g.style.left = l.x + F + y - 1 + "px";
                g.style.top = l.y + B + w - 1 + "px";
                if ("up" === l.state) {
                    var r = Event.proxy.getCoord(c),
                        G = r.x - F;
                    p = r.y - B;
                    g.style.display = "none";
                    var z = document.elementFromPoint(G, p);
                    if (z && "active" === z.id) {
                        a.actions.deselectAll();
                        a.render.actions("root.area.addFromDrag");
                        z = a.toolkit.media;
                        z.style.hideRotate = !1;
                        z.style.hideScale = !1;
                        z.style.hideClose = !1;
                        z.style.bbox.minWidth = 1;
                        z.style.bbox.maxWidth = 2E3;
                        u = Event.proxy.getBoundingBox(a.canvas2d.container);
                        G = r.x - u.x1 + l.offset.x + F;
                        p = r.y - u.y1 + l.offset.y + B;
                        var J = a.tool.type,
                            u = Event.proxy.getBoundingBox(e),
                            r = G,
                            B = p,
                            G = G + (u.width - t) / 2;
                        p += (u.height - s) / 2;
                        console.log(B);
                        p = [{
                            x: r,
                            y: B
                        }, {
                            x: G,
                            y: p
                        }];
                        z.place({
                            type: d,
                            src: f,
                            points: p,
                            callback: function (c) {
                                a.ui.changeMediaFromElement && a.ui.changeMediaFromElement(e);
                                a.tool.type !== J && a.setTool(J);
                                if (b.ondrop) b.ondrop(c);
                                if (a.ui.onSelect) a.ui.onSelect(c)
                            }
                        })
                    } else a.area.exportDrop(f,
                        G, p);
                    document.body.removeChild(g)
                }
            }
        })
    };
    a.area.exportDrop = function (b, e, c) {
        !1 !== a.feature.exportDrop && (0 < e && 0 < c && e < window.innerWidth && c < window.innerHeight || a.assets.add({
            src: b,
            onload: function (e, c) {
                var f = (STRING.basename(b) || "").split(".").shift();
                c.vob ? a.download.blob(new Blob([c.stringify()], {
                    type: "image/svg+xml"
                }), f + ".svg") : c.toBlob && c.toBlob(function (b) {
                    a.download.blob(b, f + ".png")
                })
            }
        }))
    };
    var g = function (b, e, c) {
        var f = a.convert["blobTo" + b];
        if (f) {
            var d = "decoding ." + b;
            a.loader.decode = a.loader.decode ||
                a.loader.add(d);
            a.loader.files = a.loader.files || a.loader.add("...");
            f(e, function (b, e, f, h) {
                a.loader.update(a.loader.decode, d, Math.max(0, f - 1) >> 0);
                a.loader.update(a.loader.files, e.name || "untitled");
                a.assets.addStamp(b, function (b, e) {
                    100 === f ? (a.loader.update(a.loader.decode, d, 99), c && c()) : h && h()
                })
            })
        } else a.feature.debug && console.log("missing .abr support"), c && c()
    }, d = function (b, e) {
            var c = a.loader.add("opening zip..."),
                f = a.loader.add("...");
            a.io.zip.decode({
                blob: b,
                oncomplete: function () {
                    a.loader.stop();
                    e.run()
                },
                onchange: function (b) {
                    var h = b.blob,
                        d = b.filename,
                        r = b.next,
                        t = STRING.extension(d),
                        t = "undefined" === h.type ? t : h.type;
                    a.loader.update(c, "opening zip...", b.percent);
                    a.loader.update(f, STRING.basename(d));
                    switch (t) {
                    case "image/jpeg":
                    case "image/gif":
                    case "image/png":
                    case "jpeg":
                    case "png":
                    case "gif":
                        e.add("clipart");
                        a.assets.addImage(h, r);
                        break;
                    case "image/svg+xml":
                    case "svg":
                        e.add("clipart");
                        a.assets.addClipart(h, r);
                        break;
                    case "abr":
                        e.add("stamp");
                        g("ABR", h, r);
                        break;
                    case "gbr":
                        e.add("stamp");
                        g("GBR", h, r);
                        break;
                    case "ggr":
                        e.add("gradient");
                        a.style.addFromBlob(h, r);
                        break;
                    case "gpl":
                        e.add("color");
                        a.style.addFromBlob(h, r);
                        break;
                    default:
                        r()
                    }
                },
                onprogress: function (b, e, h) {
                    a.loader.update(c, "opening zip...", b);
                    a.loader.update(f, STRING.basename(h))
                }
            })
        }, c = function (b, e, c, f) {
            a.confirm({
                message: "clear-confirm",
                callback: function (a) {
                    a && b(e, c, f)
                },
                labels: {
                    ok: "Open Project",
                    cancel: "Cancel"
                }
            })
        }, b = function (f, e, d, g) {
            if (g && a.feature.openImageAsSketch) return c(b, f, e, d);
            var k = a.loader.add("opening pdf...");
            f = URL.createObjectURL(f);
            PDFJS.getDocument(f).then(function (b) {
                var c = [],
                    f = 0,
                    h = 0,
                    g = new Queue({
                        range: {
                            from: 1,
                            to: b.numPages
                        },
                        oncomplete: function () {
                            a.loader.update(k, null, 100);
                            if (a.feature.openImageAsSketch) {
                                a.run("new");
                                var b = a.area.padding / 2;
                                a.project.setSize(h, f);
                                for (var g = 0, m = 0; m < c.length; m++) {
                                    var q = c[m];
                                    a.place({
                                        type: "image",
                                        src: q.src,
                                        width: q.width,
                                        height: q.height,
                                        points: [{
                                            x: q.width / 2 + b,
                                            y: g + (q.height / 2 + b)
                                        }]
                                    }, function () {
                                        a.run("select");
                                        a.actions.deselectAll()
                                    });
                                    g += q.height
                                }
                            } else {
                                b = c.length - 1;
                                e = e || a.getCenterPoint();
                                e.x -=
                                    10 * b;
                                e.y -= 10 * b;
                                var s = {}, A = new Queue({
                                        items: c,
                                        flatten: !0,
                                        oncomplete: function () {
                                            a.run("select");
                                            a.actions.select(s);
                                            a.actions.render();
                                            d && d()
                                        },
                                        next: function (b, c, f) {
                                            a.place({
                                                type: "image",
                                                src: b.src,
                                                points: [{
                                                    x: e.x + 10 * c,
                                                    y: e.y + 10 * c
                                                }]
                                            }, function (a) {
                                                s[a.zIndex] = !0;
                                                A.next()
                                            })
                                        }
                                    })
                            }
                        },
                        next: function (e) {
                            b.getPage(e).then(function (d) {
                                var l = d.getViewport(2),
                                    m = a.Canvas(l.width, l.height);
                                d.render({
                                    canvasContext: m.ctx,
                                    viewport: l
                                }).then(function () {
                                    h = Math.max(m.width, h);
                                    f += m.height;
                                    m.toBlobURL(function (f) {
                                        a.loader.update(k,
                                            null, 100 * (e / b.numPages) >> 0);
                                        c.push({
                                            src: f,
                                            width: m.width,
                                            height: m.height
                                        });
                                        g.next()
                                    })
                                })
                            })
                        }
                    })
            })
        }, f = function (b, e, c, f) {
            c = new FileReader;
            c.onload = function (b) {
                b = new Uint8Array(b.target.result);
                b = new PSD.Parser(b);
                b.parse();
                a.addMedia(b.imageData.createCanvas(b.header, b.colorModeData), e)
            };
            c.readAsArrayBuffer(b)
        }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
sketch = function (a) {
    a.area.placement = function (a) {
        var d = a.trx && a.trx.reset ? a.trx.reset() : new Vector.Transform,
            c = a.bbox,
            b = a.pt0,
            f = a.pt1,
            h = f.x,
            e = f.y,
            f = b.x,
            b = b.y,
            l = h - f || 0.0010,
            m = e - b || 0.0010,
            k = !a.doRotate && 0 > l,
            q = !a.doRotate && 0 > m,
            p = 0 > l ? 1 : -1,
            r = 0 > m ? 1 : -1,
            t = k ? -1 : 1,
            s = q ? -1 : 1,
            u = "undefined" === typeof a.rotate ? -Math.atan2(f - h, b - e) : a.rotate,
            y = c.viewBox[2],
            e = c.viewBox[3],
            w = l / y || 0,
            h = m / e || 0;
        a.doLockRatio && (w = Math.max(Math.abs(h), Math.abs(w)), h = w * r, w *= p);
        0 < m && (h *= -1);
        0 < l && (w *= -1);
        a.doRotate && (l = c.width / 2 * c.scale.x, m = c.height /
            2 * c.scale.y, "objectBoundingBox" === c.units ? (d.translate(f + l, b + m), d.rotate(u), d.translate(-f - l, -b - m)) : (d.translate(f, b), d.rotate(u), d.translate(-f, -b)), k && (f += -y * w), q && (b += -e * h));
        a.doScale && (a.doCenter ? (c = t * w * y / 2, k = s * h * e / 2) : k = c = 0, d.translate(f - c, b - k), d.scale(w * t, h * s));
        a.scale && d.scale(a.scale.x, a.scale.y);
        return d
    };
    return a
}(sketch);
"undefined" === typeof sketch && (sketch = {});
"undefined" === typeof sketch.area && (sketch.area = {});
sketch = function (a) {
    var g = function (b, c, e, d) {
        if (c.src) try {
            var g = new Image;
            g.src = c.src
        } catch (k) {
            return
        }
        return {
            type: b,
            width: e,
            height: d,
            event: c.event || a.area.rotateScaleEvent,
            viewBox: [0, 0, e, d],
            render: function (b) {
                b = b.ctx;
                b.save();
                if ("undefined" !== typeof g) b.drawImage(g, 0, 0);
                else {
                    b.strokeStyle = "rgba(255,255,255,0.5)";
                    b.fillStyle = "rgba(30,30,30,1)";
                    b.beginPath();
                    b.lineWidth = 1;
                    var c = 1 * e * a.canvas2d.pixelRatio / a.canvas2d.scale;
                    b.rect(0.5, 0.5, c, c);
                    b.fill();
                    b.stroke()
                }
                b.restore()
            }
        }
    };
    a.area.buttons = {};
    a.area.buttons.touch = {};
    a.area.buttons.mouse = {};
    var d = {
        "nw-hover": {},
        "nw-normal": {},
        "ne-hover": {},
        "ne-normal": {},
        "se-hover": {},
        "se-normal": {},
        "sw-hover": {},
        "sw-normal": {}
    }, c = a.area.buttons.mouse.buttonSize = 13;
    a.area.buttons.mouse.padding = 0;
    for (var b in d) a.area.buttons.mouse[b] = g(b.substr(3), d[b], c, c);
    d = {
        "nw-hover": {},
        "nw-normal": {},
        "ne-hover": {},
        "ne-normal": {},
        "se-hover": {},
        "se-normal": {},
        "sw-hover": {},
        "sw-normal": {}
    };
    c = a.area.buttons.touch.buttonSize = 38;
    a.area.buttons.touch.padding = 5;
    for (b in d) a.area.buttons.touch[b] =
        g(b.substr(3), d[b], c, c);
    return a
}(sketch);
(function (a) {
    a.assets = function () {
        var a = d();
        this.data = {};
        this.dataURLtoID = {};
        this.dataIDtoURL = {};
        this.remove = function (a) {
            delete this.data[a];
            return a
        };
        this.getData = function (a) {
            if (this.dataURLtoID[a]) return this.getById(this.dataURLtoID[a]);
            if (this.data[a]) return this.data[a]
        };
        this.getAsBlob = function (a) {
            return this.getById(a).blob
        };
        this.getById = function (b) {
            return this.data[b] ? this.data[b] : a
        }
    };
    var g = a.assets.prototype;
    g.addClipart = function (c, b, f, h) {
        a.assets.add({
            data: c,
            onload: function (e, c) {
                var f = a.media.clipart;
                if (!f) return b(e, c);
                var h = f.tree.yourFiles;
                if (!h) return b(e, c);
                h[e] ? b && b(e, c) : (h[e] = "loading", a.generate.preview({
                    type: "clipart",
                    resource: c,
                    width: 52,
                    height: 52,
                    oncomplete: function (a) {
                        f.paths.splice(0, 0, h[e] = {
                            type: "clipart",
                            filename: e,
                            thumbnail: a.toDataURL(),
                            path: e
                        });
                        b && b(e, c)
                    }
                }))
            },
            onerror: f,
            targetId: h
        })
    };
    g.addImage = function (c, b, f, h) {
        a.assets.add({
            data: c,
            onload: function (e, c) {
                var f = a.media.clipart;
                if (!f) return b(e, c);
                var h = f.tree.yourFiles;
                if (!h) return b(e, c);
                h[e] ? b && b(e, c) : (h[e] = "loading", a.thumbnailer.generate({
                    src: c,
                    width: 52,
                    height: 52,
                    onload: function (a) {
                        f.paths.splice(0, 0, h[e] = {
                            type: "image",
                            filename: e,
                            thumbnail: a.toDataURL(),
                            path: e
                        });
                        b && b(e, c)
                    }
                }))
            },
            onerror: f,
            targetId: h
        })
    };
    g.addFromActions = function (c) {
        for (var b = 0; b < c.length; b++) {
            var f = c[b];
            switch (f.type) {
            case "clipart":
                if ("#" !== f.src[0]) break;
                a.assets.addClipart(f.src);
                break;
            case "image":
                if ("#" !== f.src[0]) break;
                a.assets.addImage(f.src);
                break;
            case "stamp":
                if ("#" !== f.src[0]) break;
                a.assets.addStamp(f.src)
            }
        }
    };
    g.addCloneFromSelection = function () {
        a.save.canvas({
            background: "none",
            fromSelection: !0,
            callback: function (c) {
                c.toBlob(function (b) {
                    a.place({
                        type: "image",
                        src: URL.createObjectURL(b)
                    })
                })
            }
        })
    };
    g.addStampFromSelection = function () {
        a.save.canvas({
            background: "none",
            fromSelection: !0,
            callback: function (c) {
                a.actions.deselectAll();
                a.assets.addStamp(c, function () {
                    a.ui.setToolMenu("stamp");
                    a.ui.buildConfigure("stamp", !0);
                    a.setTool("stamp", function () {
                        var b = a.tool.device.brush,
                            c = b.fill;
                        c[c.type] = "none";
                        delete b.colors
                    })
                })
            }
        })
    };
    g.addStamp = function (c, b, f, h) {
        a.assets.add({
            data: c,
            onload: function (e,
                c) {
                var f = a.media.stamp;
                if (!f) return b(e, c);
                var h = f.tree.yourFiles;
                if (!h) return b(e, c);
                h[e] ? b && b() : (h[e] = "loading", a.thumbnailer.generate({
                    src: c,
                    width: 52,
                    height: 52,
                    onload: function (a) {
                        sketch.configure.tools.stamp.src = e;
                        f.paths.splice(0, 0, h[e] = {
                            type: "stamp",
                            filename: e,
                            thumbnail: a.toDataURL(),
                            path: e
                        });
                        b && b(e, c)
                    }
                }))
            },
            onerror: f,
            targetId: h
        })
    };
    g.addPattern = function (a, b) {};
    g.addFont = function (a, b) {};
    g.add = function (c, b, f) {
        "string" === typeof c && (c = {
            src: c
        });
        var h = c.src || c.blob || c.data,
            e;
        if (!(e = c.type)) a: {
            if ("string" ===
                typeof h) switch (STRING.basename(h).toLowerCase().split(".").pop()) {
            case "jpeg":
            case "png":
            case "gif":
            case "webp":
                e = "image";
                break a;
            case "svg":
                e = "clipart";
                break a
            }
            e = void 0
        }
        b = c.onload || b;
        f = c.onerror || f;
        var l = c.targetId,
            g = this;
        c = String(h);
        if ("[object Blob]" === c || "[object File]" === c) {
            if ("image/svg+xml" === h.type) return a.convert.blobToText(h, function (a) {
                g.add({
                    data: a,
                    onload: b,
                    onerror: f,
                    targetId: l
                })
            });
            h = URL.createObjectURL(h)
        }
        "string" !== typeof h ? this.createId(h, function (a) {
            g.data[a] = h;
            b && b.call(h, a, h)
        }) :
            "#" === h.substr(0, 1) ? (this.data[h] || (this.data[h] = d()), c = h, h = this.getById(h), b && b.call(h, c, h)) : this.dataURLtoID[h] ? (c = this.dataURLtoID[h], h = this.getById(h), b && b.call(h, c, h)) : (0 === h.indexOf("<svg") && (h = '<?xml version="1.0" encoding="UTF-8"?>' + h), 0 === h.indexOf("<?xml") && (h = "data:image/svg+xml;base64," + btoa(STRING.encode_utf8(h))), 0 === h.indexOf("data:image/svg") || "clipart" === e ? this.createId(h, function (e) {
                var c = a.feature.cacheSVG;
                c && g.data[e] ? (c = g.data[e], b && b.call(c, e, c)) : new Vector.SVG({
                    ctx: a.canvas2d.layers.cache.ctx,
                    src: h,
                    useCache: c,
                    onerror: f,
                    onload: function (a) {
                        g.data[e] = a;
                        b && b.call(a, e, a)
                    }
                })
            }) : "svg" === h.split(".").pop() ? DOMLoader.sendRequest({
                url: h,
                onerror: f,
                onload: function (a) {
                    g.add({
                        data: a.responseText,
                        onload: b,
                        onerror: f,
                        targetId: l
                    })
                }
            }) : this.loadImage(h, b, f, l))
    };
    g.loadImage = function (c, b, f, h) {
        var e = this,
            d = a.convert.fileToCanvas,
            g = function (f, h) {
                e.data[k] = f;
                f.src = c;
                f.image = h;
                f.assetID = f.title = k;
                a.feature.stream.maxFileSize ? f.toBlob(function (a) {
                    f.blob = a;
                    b && b.call(f, k, f)
                }) : b && b.call(f, k, f)
            }, k;
        h && "string" === typeof c ?
            (this.dataURLtoID[c] = k = h, this.dataIDtoURL[k] = c, d(c, this.data[k], function (a, b) {
            g(a, b)
        }, f)) : d(c, this.data[k], function (a, b) {
            e.createId(a, function (f) {
                e.dataURLtoID[c] = k = f;
                g(a, b)
            })
        }, f)
    };
    g.createIdFromCanvas = function (a, b) {
        var f = a.width,
            h = a.height;
        if (64 > f && 64 > h) return b.assetID = "#asset-" + SparkMD5.hash(a.toDataURL()), b.assetID;
        this.thumbnail || (this.thumbnail = document.createElement("canvas"), this.thumbnail.ctx = this.thumbnail.getContext("2d"));
        var e = Math.min(f, 64),
            d = Math.min(h, 64),
            g = this.thumbnail;
        g.width =
            e;
        g.height = d;
        g.ctx.drawImage(a, 0, 0, f, h, 0, 0, e, d);
        b.assetID = "#asset-" + SparkMD5.hash(g.toDataURL());
        return b.assetID
    };
    g.createId = function (c, b) {
        "string" === typeof c ? 25E4 < c.length ? b("#asset-" + SparkMD5.hash(c.substr(0, 25E4))) : b("#asset-" + SparkMD5.hash(c)) : c.assetID ? b(c.assetID) : c.toDataURL ? b(this.createIdFromCanvas(c, c)) : a.convert.fileToCanvas(c, null, function (a, h) {
            b(this.createIdFromCanvas(a, c))
        })
    };
    var d = function () {
        var a = document.createElement("canvas"),
            b = a.getContext("2d");
        a.width = 1;
        a.height = 1;
        a.className =
            "default";
        b.fillStyle = "rgba(127,127,127,0.5)";
        b.fillRect(0, 0, 1, 1);
        return a
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
"undefined" === typeof sketch.server && (sketch.server = {});
sketch = function (a) {
    a.fileSystem = new function () {
        var c = this;
        this.fs = null;
        this.type = window.PERSISTENT;
        this.sketchFolder = "sketchpad";
        this.fileFolder = "sketch";
        this.init = function (b, f) {
            a.getItem("fileSystem.failRestore", function (b) {
                "true" !== b && a.getItem("fileSystem.folder", function (a) {
                    c.fileFolder = a || c.fileFolder
                })
            });
            f = f || d;
            if (navigator.webkitPersistentStorage) navigator.webkitPersistentStorage.requestQuota(1073741824, function (a) {
                window.webkitRequestFileSystem(c.type, a, function (a) {
                    c.fs = a;
                    b && b(a)
                }, f)
            }, f);
            else if (window.requestFileSystem) window.requestFileSystem(c.type, 1073741824, function (a) {
                c.fs = a;
                b && b(a)
            }, f);
            else a.onSketchReady()
        };
        this.getFileSystem = function (a, f) {
            if (c.fs) return c.fs;
            c.init(function () {
                a(f[0], f[1], f[2], f[3], f[4], f[5], f[6], f[7])
            })
        };
        this.getRootPath = function () {
            var a = window.location;
            return "filesystem:" + a.protocol + "//" + a.host + "/" + (0 === c.type ? "temporary" : "persistent") + "/" + c.sketchFolder + "/"
        };
        this.open = function (b, f, h, e) {
            f = f || function () {};
            e = e || d;
            b = g(b || c.sketchFolder + "/" + c.fileFolder + "/thumb.png");
            a.setItem("fileSystem.failRestore", "true");
            h = STRING.basename(b);
            c.getDirectory(b.replace("/" + h, ""), function (b) {
                var c = 0,
                    h = [];
                b.createReader().readEntries(function (b) {
                    if (!b.length) return f(b);
                    for (var e = 0; e < b.length; e++) {
                        var d = b[e];
                        d.isDirectory ? e + 1 !== b.length || c || f(h) : d.isFile && (++c, d.file(function (b) {
                            setTimeout(function () {
                                h.push(b);
                                --c || (a.setItem("fileSystem.failRestore", "false"), f(h))
                            }, 0)
                        }))
                    }
                }, e)
            }, e)
        };
        this.openFile = function (b) {
            if (c.getFileSystem(c.openFile, arguments)) {
                var f = b.src,
                    h = b.onerror,
                    e = b.onload ||
                        function (b) {
                            a.open.folder(b, a.onSketchReady)
                    };
                a.confirm({
                    message: "clear-confirm",
                    callback: function (a) {
                        a && c.open(f, e, null, h)
                    },
                    labels: {
                        ok: "Open Project",
                        cancel: "Cancel"
                    }
                })
            }
        };
        this.updateRecentProjects = function (b, f) {
            var h = function (b, f) {
                var h = document.createElement("div");
                e.appendChild(h);
                var d = a.thumbnailer.generate({
                    src: b,
                    width: 65,
                    height: 65,
                    useCache: !1,
                    onload: function () {}
                });
                d.title = f;
                h.appendChild(d);
                h.className = f === c.fileFolder ? "fileEntry fileEntrySelected dir-" + f : "fileEntry dir-" + f;
                Event.add(h, "mousedown",
                    function (a) {
                        Event.cancel(a)
                    });
                Event.add(h, "click", function (b, e) {
                    var d = c.sketchFolder + "/" + f + "/thumb.png";
                    dom.setClassName({
                        target: e.target,
                        className: "fileEntrySelected",
                        list: "div.fileEntry"
                    });
                    c.openFile({
                        src: d,
                        onload: function (b) {
                            c.fileFolder = f;
                            a.setItem("fileSystem.folder", c.fileFolder);
                            dom.setClassName({
                                target: h,
                                list: "div",
                                className: "fileEntrySelected"
                            });
                            a.open.folder(b, a.onSketchReady)
                        }
                    })
                })
            }, e = document.querySelector(".open-project-listing");
            e && c.getListing({
                filter: {
                    name: "thumb.png"
                },
                onload: function (b) {
                    removeChildNodes(e);
                    for (var c in b) {
                        var d = b[c],
                            g = d.toURL(),
                            d = d.fullPath.split("/").slice(0, -1).pop(),
                            p = document.querySelector(".fileEntry.dir-" + d);
                        p ? a.thumbnailer.generate({
                            src: g,
                            canvas: p.querySelector("canvas"),
                            width: 65,
                            height: 65
                        }) : h(g, d)
                    }
                    f && f()
                }
            })
        };
        this.getListing = function (a) {
            var f = c.getFileSystem(c.getListing, arguments);
            if (f) {
                a = a || {};
                var h = a.onload || function () {}, e = a.levels || 2,
                    d = a.filter || {}, g = function () {
                        --p || h(q)
                    }, k = function (a) {
                        if (a.fullPath.substr(1).split("/").length > e) return g(++p);
                        ++p;
                        a.createReader().readEntries(function (a) {
                            for (var b =
                                0; b < a.length; b++) {
                                var e = a[b];
                                e.isDirectory ? (d.name && e.name !== d.name || d.isFile || (q[e.fullPath] = e), k(e)) : d.name && e.name !== d.name || d.isDirectory || (q[e.fullPath] = e)
                            }
                            g()
                        })
                    }, q = {}, p = 0;
                f.root.getDirectory(c.sketchFolder, {
                    create: !0,
                    exclusive: !1
                }, function (a) {
                    k(a)
                })
            }
        };
        this.getDirectory = function (a, f, h) {
            var e = c.getFileSystem(c.getDirectory, arguments);
            e && (f = f || d, h = h || d, e.root.getDirectory(a, {
                exclusive: !1
            }, function (a) {
                f(a)
            }, function (a) {
                h(a)
            }))
        };
        this.addDirectory = function (a, f, h, e) {
            var d = c.getFileSystem(c.addDirectory,
                arguments);
            if (d) {
                "string" === typeof a && (a = a.split("/"));
                e = e || "/" + a.join("/");
                var g = function (h) {
                    h.fullPath === e ? f(h) : h.getDirectory(a.shift(), {
                        create: !0,
                        exclusive: !1
                    }, function (h) {
                        a.length ? c.addDirectory(a, f, h, e) : f && f(h)
                    }, function (e) {
                        console.log(e, a, h.fullPath)
                    })
                };
                h ? g(h) : g(d.root)
            }
        };
        this.remove = function (a, f, h) {
            var e = c.getFileSystem(c.remove, arguments);
            e && (a = a || "/" + c.sketchFolder + "/" + c.fileFolder + "/", a = g(a), "/sketchpad/" !== a && (-1 !== a.indexOf(".") ? e.root.getFile(a, {
                create: !1
            }, function (a) {
                a.remove(function () {
                    f &&
                        f("File successfully removed.")
                }, f)
            }, f) : h ? e.root.getDirectory(a, {}, function (a) {
                a.removeRecursively(function () {
                    f && f("Directory successfully removed.")
                }, f)
            }, f) : e.root.getDirectory(a, {}, function (a) {
                a.remove(function () {
                    f && f("Directory successfully removed.")
                }, f)
            }, f)))
        };
        this.removeFile = function () {
            a.confirm({
                message: "remove-confirm",
                callback: function (a) {
                    a && (c.remove(null, null, !0), c.updateRecentProjects(!0))
                },
                labels: {
                    ok: "Remove Project",
                    cancel: "Cancel"
                }
            })
        };
        this.saving = !1;
        this.saveFile = this.save = function (b) {
            if (!this.saving) {
                this.saving = !0;
                a.loader.thread = a.loader.message("saving...");
                var f = 0,
                    h = function (e) {
                        ++f;
                        var h = c.sketchFolder + "/" + c.fileFolder + "/" + e.filename;
                        c.remove(h, function () {
                            c.write({
                                blob: e.blob,
                                dir: c.fileFolder,
                                filename: e.filename,
                                callback: function () {
                                    --f || (a.loader.update(a.loader.thread, null, 100), c.updateRecentProjects(!0), c.saving = !1, a.__modified = !1, b && b(h))
                                }
                            })
                        })
                    };
                a.save.syncData({
                    onload: function (a) {
                        for (var b in a) {
                            var c = a[b];
                            if ("folder" === b)
                                for (var f = 0; f < c.length; f++) h(c[f]);
                            else h({
                                filename: b,
                                blob: c
                            })
                        }
                    },
                    onprogress: function (b) {
                        a.loader.update(a.loader.thread,
                            null, Math.max(0, b - 1))
                    }
                })
            }
        };
        this.createFile = function (a) {
            c.getFileSystem(c.createFile, arguments) && this.getUniqueName({
                name: a || this.fileFolder,
                callback: function (a) {
                    c.fileFolder = a;
                    c.saveFile()
                }
            })
        };
        this.getUniqueName = function (a) {
            var f = c.getFileSystem(c.getUniqueName, arguments);
            f && (a = a || {}, a.callback = a.callback || function (a) {
                console.log(a)
            }, a.name = a.name || this.fileFolder, f.root.getDirectory(c.sketchFolder + "/" + a.name, {}, function (f) {
                var e = a.name.trim(),
                    d = e;
                for (f = ""; d;) {
                    var g = parseInt(d.slice(-1)),
                        d = d.slice(0, -1);
                    if (isNaN(g)) break;
                    f = g + f
                }
                e = e.replace(f, "");
                f = parseInt(f);
                f = isNaN(f) ? 1 : ++f;
                a.name = e + f;
                c.getUniqueName(a)
            }, function () {
                a.callback(a.name)
            }))
        };
        this.download = function () {
            var b = 0,
                f = [],
                h = function (e, c) {
                    ++b;
                    e.file(function (e) {
                        f.push({
                            filename: c,
                            blob: e
                        });
                        --b || a.io.zip.encode(f, function (b) {
                            a.download.blob(b, "filesystem.zip")
                        }, function (a) {
                            console.log(a)
                        })
                    })
                };
            c.getListing({
                filter: {
                    isFile: !0
                },
                onload: function (a) {
                    var b = 0,
                        c;
                    for (c in a) - 1 !== c.indexOf("thumb.png") && ++b, 40 <= b && 60 >= b && h(a[c], c)
                }
            })
        };
        this.read = function (a,
            f) {
            if (f = c.getFileSystem(c.read, arguments)) {
                var h = a.callback || d;
                f.root.getFile(a.path, {}, function (a) {
                    a.file(function (a) {
                        h(a)
                    }, d)
                }, d)
            }
        };
        this.write = function (b, f) {
            if (f = c.getFileSystem(c.write, arguments)) {
                var h = b.blob,
                    e = b.callback || d;
                c.addDirectory(b.path || c.sketchFolder + "/" + b.dir, function (c) {
                    c.getFile(b.filename, {
                        create: !0,
                        exclusive: !1
                    }, function (b) {
                        b.createWriter(function (c) {
                            c.onwriteend = function (c) {
                                e && e(b);
                                a.feature.debug && console.log(b.toURL())
                            };
                            c.onerror = d;
                            c.write(h)
                        }, d)
                    }, d)
                })
            }
        }
    };
    var g = function (a) {
        a =
            a.replace(location.protocol + "//" + location.host, "");
        return a = a.replace("filesystem:", "")
    }, d = function (a) {
            console.log(a)
        };
    return a
}(sketch);
"undefined" === typeof sketch && (sketch = {});
"undefined" === typeof sketch.keyboard && (sketch.keyboard = {});
sketch = function (a) {
    a.keyboard.pressed = {};
    a.keydown = function (b) {
        var f = Event.proxy.metaKey,
            h = Event.proxy.shiftKey,
            e = Event.proxy.altKey,
            l = a.isEditing();
        Event.proxy.metaTracker(b);
        switch (b.keyCode) {
        case 219:
            if (f) return e ? a.run("layer-to-back") : a.run("layer-backwards"), g(b);
            break;
        case 221:
            if (f) return e ? a.run("layer-to-front") : a.run("layer-forwards"), g(b);
            break;
        case 80:
            if (f) return a.print(), g(b);
            break;
        case 83:
            if (f) return e ? a.download.image() : h && a.toolkit.snapshot ? a.run("snapshot") : a.server && a.server.enabled() ?
                a.saveFile() : a.download.image(), g(b);
            break;
        case 27:
            if (c("onEscapeKey")) return;
            widget.windows.hasFocus() ? widget.windows.closeFocused() : "sketchpad" === a.display.mode ? a.actions.deselectAll() : a.display.sketchpad();
            d("onEscapeKey");
            return g(b)
        }
        if (!(l || a.colorPicker && "eyeDropper" === a.colorPicker.state)) {
            switch (b.keyCode) {
            case 48:
                if (h && a.feature.canvas.zoom) {
                    if (l && !f) break;
                    a.canvas2d.scale = 1;
                    a.setSize();
                    a.toolkit.text && a.toolkit.text.updateCSS();
                    return g(b)
                }
                break;
            case 173:
            case 189:
                if (h && a.feature.canvas.zoom) {
                    if (l && !f) break;
                    f = Math.max(0.5, a.canvas2d.scale / 1.25);
                    a.canvas2d.scale = f;
                    a.setSize();
                    a.toolkit.text && a.toolkit.text.updateCSS();
                    return g(b)
                }
                break;
            case 61:
            case 187:
                if (h && a.feature.canvas.zoom) {
                    if (l && !f) break;
                    f = Math.min(5, 1.25 * a.canvas2d.scale);
                    a.canvas2d.scale = f;
                    a.setSize();
                    a.toolkit.text && a.toolkit.text.updateCSS();
                    return g(b)
                }
                break;
            case 83:
                if (h && a.fileSystem) return a.ui.openProjectWindow(".export-project", !0), g(b);
                break;
            case 78:
                if (h && a.fileSystem) return a.ui.openProjectWindow(".new-project", !0), g(b);
                break;
            case 79:
                if (h && a.fileSystem) return a.ui.openProjectWindow(".open-project", !0), g(b);
                break;
            case 32:
                if (a.toolkit.move) {
                    if (a.tool === a.toolkit.move) return;
                    a.ptool = a.tool.type;
                    a.actions.deselectAll();
                    a.render.actions("root.select.keydown.move");
                    a.setTool("move")
                } else a.util.toggleVideo && a.util.toggleVideo();
                return;
            case 49:
            case 50:
            case 51:
            case 52:
            case 53:
            case 54:
            case 55:
            case 56:
            case 57:
                switch (b = a.feature.hotkeys[b.keyCode - 49], b) {
                case "brush":
                case "shape":
                    if ((f = document.querySelector(".sketch-select-" + b)) &&
                        f.id) return a.run(f.id.replace("tool-", ""));
                default:
                    return a.run(b)
                }
            case 191:
                if (h) return a.run("help");
                return;
            case 46:
            case 8:
                Event.cancel(b);
                if (c("onDeleteKey")) return;
                a.run("layer-delete");
                d("onDeleteKey");
                return;
            case 13:
                if (c("onEnterKey")) return;
                document.activeElement === document.body && Event.cancel(b);
                document.querySelector("#alertify-ok") && document.querySelector("#alertify-ok").click();
                d("onEnterKey");
                return;
            case 18:
                if (a.toolkit.select) {
                    if (f) break;
                    if (!a.feature.canvas.editable || a.tool === a.toolkit.select) return;
                    a.ptool = a.tool.type;
                    a.setTool("select")
                }
                return;
            case 65:
                f && (Event.cancel(b), h ? a.run("select-inverse") : a.run("select-all"));
                return;
            case 67:
                h ? a.run("color-picker") : f && (Event.cancel(b), a.run("layer-copy"));
                return;
            case 73:
                if (isFinite(a.actions.idx)) {
                    var m = a.actions.data[a.actions.idx];
                    a.feature.debug && console.log(m);
                    if (b = document.querySelector("#sketch-configure")) b.style.display = "none";
                    a.ui.buildConfigure && window.setTimeout(function () {
                        a.ui.buildConfigure(m.type, !0)
                    }, 1)
                }
                return;
            case 86:
                if (f && !(window.Clipboard &&
                    a.actions && a.addMedia)) {
                    if (a.__rendering) return;
                    a.tool.reset && a.tool.reset();
                    a.run("layer-paste", "select" !== a.tool.type)
                }
                return;
            case 88:
                f && (Event.cancel(b), a.run("layer-cut"));
                return;
            case 90:
                if (f) {
                    Event.cancel(b);
                    if (a.__rendering) return;
                    if (h) {
                        if (c("onRedo")) break;
                        a.run("redo");
                        d("onRedo")
                    } else {
                        if (c("onUndo")) break;
                        a.run("undo");
                        d("onUndo")
                    }
                }
                return;
            case 37:
                if (f && a.display.toggle) {
                    a.display.toggle();
                    break
                } else if (a.actions.hasSelection() && "sketchpad" === a.display.mode) {
                    a.run("layer-move-left", h ? 10 : 1);
                    Event.cancel(b);
                    break
                } else if (a.util.changeVideoFilter && a.rtc.videos.you) {
                    a.util.changeVideoFilter(-1);
                    break
                } else {
                    if (a.tool.device && a.tool.device.brush && a.tool.device.brush.isGhost) {
                        b = a.tool.device.brush;
                        b.seed++;
                        a.tool.ghost(b.event);
                        return
                    }
                    d("onLeftKey")
                }
                break;
            case 39:
                if (f && a.display.toggle) {
                    a.display.toggle();
                    break
                } else if (a.actions.hasSelection() && "sketchpad" === a.display.mode) {
                    a.run("layer-move-right", h ? 10 : 1);
                    Event.cancel(b);
                    break
                } else if (a.util.changeVideoFilter && a.rtc.videos.you) {
                    a.util.changeVideoFilter(1);
                    break
                } else {
                    if (a.tool.device && a.tool.device.brush && a.tool.device.brush.isGhost) {
                        b = a.tool.device.brush;
                        b.seed--;
                        a.tool.ghost(b.event);
                        return
                    }
                    d("onRightKey")
                }
                break;
            case 38:
                a.actions.hasSelection() && "sketchpad" === a.display.mode ? (a.run("layer-move-up", h ? 10 : 1), Event.cancel(b)) : d("onUpKey");
                break;
            case 40:
                a.actions.hasSelection() && "sketchpad" === a.display.mode ? (a.run("layer-move-down", h ? 10 : 1), Event.cancel(b)) : d("onDownKey");
                break;
            default:
                return
            }
            g(b, !1)
        }
    };
    a.keyup = function (b) {
        Event.proxy.metaTracker(b);
        var c =
            Event.proxy.metaKey;
        if (!a.isEditing()) switch (a.keyboard.pressed[b.keyCode] = !1, c && a.ptool && (a.actions.deselectAll(), a.setTool(a.ptool), delete a.ptool), b.keyCode) {
        case 18:
            if (a.toolkit.select) {
                if (!a.ptool || !a.feature.canvas.editable) break;
                a.setTool(a.ptool);
                delete a.ptool
            }
            break;
        case 32:
            if (a.toolkit.move) {
                if (a.tool.type === a.ptool) break;
                a.actions.deselectAll();
                a.setTool(a.ptool);
                delete a.ptool
            }
            break;
        case 37:
        case 38:
        case 39:
        case 40:
            a.actions.move(0, 0, "record")
        }
    };
    var g = function (b, c) {
        a.active.canvas.width =
            a.active.canvas.width;
        a.actions.runSelection("dirtyControl", !0);
        a.render.actions("root.select.keydown");
        a.keyboard.pressed[b.keyCode] = !0;
        !1 !== c && Event.cancel(b)
    };
    (function () {
        var b;
        a.keyboard.enable = function () {
            window.Clipboard && (a.actions && a.addMedia) && (b = Event.add(window, "paste", a.actions.onPasteNative))
        };
        a.keyboard.disable = function () {
            b && b.remove()
        }
    })();
    a.keyboard.setup = function () {
        if (!a.supports.mobile) {
            var b = function (a) {
                return '<img class="lazy" src="./media/ux/transparent.png" data-src="./media/ux/tools/' +
                    a + '" width="18" style="margin: 2px 2px 2px 0;"/> '
            }, c = function (a) {
                    return '<div class="fontawesome">&#' + a + ";</div> "
                }, h = {};
            a.keyboard.enable();
            a.save && (h["break-file-mode"] = "File", a.toolkit.snapshot ? (h[c("xF019") + "Save"] = "cmd.s", h[c("xF019") + "Download PNG"] = "cmd.alt.s", h[c("xF125") + "Take Snapshot"] = "cmd.shift.s") : h[c("xF019") + "Save"] = "cmd.s", h[c("xF02F") + "Print"] = "cmd.p");
            a.history && (h["break-history-mode"] = "History", h[c("xF0E2") + "Undo history"] = "cmd.z", h[c("xF01E") + "Redo history"] = "cmd.shift.z");
            h["break-quick-tools-mode"] =
                "Shortcuts";
            h.Move = "space";
            h[b("Select.png") + "Quick Selection"] = "alt";
            var e = a.feature.hotkeys;
            if (e)
                for (var d = 0; d < e.length; d++) {
                    var g = e[d],
                        k = STRING.ucwords(g);
                    h[b("palette" === g ? "ColorPicker.png" : a.detect.shape[g] ? "Shape" === k ? "Shape_Rectangle.png" : "Shape_" + k + ".png" : a.detect.brush[g] ? "Brush" === k ? "Brush_Pencil.png" : "Brush_" + k + ".png" : k + ".png") + k + " tool"] = d + 1 + ""
                }
            a.feature.canvas.editable && (h["break-select-mode"] = '<img src="./media/ux/tools/Select.png" width="18"/> Select tool', h.Select = "click|drag", h["Add to Selection"] =
                "shift.click|drag", h["Remove from Selection"] = "cmd.click|drag", h["Select all"] = "cmd.a", h["Select inverse"] = "cmd.shift.a", h.Unselect = "escape", h.Remove = "delete", a.actions.hasTransferModule && (h.Copy = "cmd.c", h.Cut = "cmd.x", h.Paste = "cmd.v"), a.actions.hasOrganizeModule && (h["Send Backwards"] = "cmd.[", h["Send Forwards"] = "cmd.]", h["Send to Back"] = "cmd.alt.[", h["Send to Front"] = "cmd.alt.]"), a.feature.tools.movable && (h["Move Left"] = "left", h["Move Left Fast"] = "shift.left", h["Move Right"] = "right", h["Move Right Fast"] =
                    "shift.right", h["Move Up"] = "up", h["Move Up Fast"] = "shift.up", h["Move Down"] = "down", h["Move Down Fast"] = "shift.down"));
            a.feature.windows && (h["break-window-mode"] = "Windows", h["Close window"] = "escape", a.fileSystem && (h[c("xF15B") + "New Project"] = "shift.n"), a.fileSystem && (h[c("xF07C") + "My Projects"] = "shift.o"), a.fileSystem && (h[c("xF019") + "Export"] = "shift.s"), a.colorPicker && (h[b("ColorPicker.png") + "Color Picker"] = "shift.c"), h[c("xF059") + "Help <i>(you are here)</i>"] = "shift.?");
            a.feature.canvas.zoom && (h["break-zoom-mode"] =
                "Zoom", h["Zoom in"] = "shift.+", h["Zoom out"] = "shift.-", h["Zoom to actual size"] = "shift.0");
            if (c = document.getElementById("shortcuts")) {
                c.innerHTML = '<h1><img class="lazy" src="./media/ux/transparent.png" data-src="./media/ux/keyboard-shortcuts.png" height="36" />Keyboard Shortcuts</h1>';
                b = document.createElement("div");
                b.style.cssText = "margin: 0 10px";
                c.appendChild(b);
                c.appendChild(document.createElement("br"));
                var q = function (a, b, e) {
                    var c = [];
                    a = a.replace("cmd", p);
                    a = a.replace("alt", r);
                    a = a.split(b);
                    for (b =
                        0; b < a.length; b++) {
                        var f = a[b]; - 1 !== f.indexOf("|") ? c.push(q(f, "|", " | ")) : c.push("<span>" + f + "</span>")
                    }
                    return c.join(e)
                }, e = c = "",
                    p = a.supports.mac ? "cmd" : "ctrl",
                    r = a.supports.mac ? "opt" : "alt";
                for (g in h) "break" === g.substr(0, 5) ? (e = -1 !== g.indexOf("-mode") ? "background:#8CD450; color: #000" : "", c += '<div class="header-break" style="' + e + '">' + h[g] + "</div>") : (e = q(h[g], ".", " & "), c += '<div class="cmd">' + e + '</div><font color="#666">&nbsp;: &nbsp;</font>' + g + "<br>");
                b.innerHTML = c
            }
        }
    };
    var d = function (b) {
        if (a.ui[b]) a.ui[b]()
    },
        c = function (b) {
            if (a.tool && a.tool[b]) return a.tool[b](), !0;
            var c = a.tool && a.tool.device,
                c = c && c.brush;
            if (!(c && (c.event && c.self) && c[b])) return !1;
            c[b]();
            return !0
        };
    return a
}(sketch);
"undefined" === typeof sketch && (sketch = {});
"undefined" === typeof sketch.setup && (sketch.setup = {});
"undefined" === typeof sketch.toolkit && (sketch.toolkit = {});
sketch = function (a) {
    a.register = function (d, c) {
        if ("object" === typeof d && d.length)
            for (; d.length;) a.register(d.shift(), c);
        else a.toolkit.__init[d] || (a.toolkit.__init[d] = c), a.configure.tools[d] || (a.configure.tools[d] = {
            toolkit: d,
            type: d
        })
    };
    a.setTool = function (d, c) {
        c = c || {};
        "function" === typeof c && (c = {
            callback: c
        });
        var b = a.configure.tools[d];
        if (b) {
            var f = a.toolkit[b.toolkit];
            if (f) {
                for (var h in c) b[h] = c[h];
                a.tool.reset && a.tool.reset();
                a.tool.disable && a.tool.disable();
                h = a.tool.type;
                f.type = d;
                f.lastType = h || d;
                a[c.tid ||
                    "tool"] = f;
                a.ui.setCursor && a.ui.setCursor();
                a.render.prepareBlendmode();
                h = function () {
                    var b = a.configure.tools[d];
                    a.style && a.style.fill && (b.fill = clone(a.style.fill));
                    f.changeDevice ? f.changeDevice(b, d, function () {
                        f.enable()
                    }) : f.enable();
                    a.style && a.style.update();
                    c.callback && c.callback()
                };
                f.style ? (b.src && (f.style.src = b.src), f.style.type = b.type, f.loadResource(f.style, h)) : f.loadResource ? f.loadResource(f.type, h) : h()
            } else a.feature.debug && console.log("missing root.toolkit['" + d + "']")
        } else a.feature.debug && console.log("missing root.configuration.tools['" +
            d + "']")
    };
    a.getMouseId = function (d, c) {
        var b = "",
            f = "";
        d && (b = window.rtc && rtc._me && rtc._me.index, f = a.socket && a.socket.user && a.socket.user.id, b = (isFinite(b) ? b : f || 0) + ":");
        f = c.identifier;
        f = Infinity === f ? "A" : f;
        return b + ("Infinity" === f ? "A" : f)
    };
    a.setup.toolkit = function (d) {
        if (void 0 === a.toolkit[d]) {
            var c = {};
            c.active = a.canvas2d.layers.active;
            c.draw = a.canvas2d.layers.draw;
            c.cache = a.canvas2d.layers.cache;
            c.layer0 = a.canvas2d.layers.layer0;
            c.type = d;
            a.toolkit[d] = a.detect.area[d] ? new a.area(c) : new a.toolkit.__init[d](c)
        }
    };
    a.setup.toolkits = function () {
        var d = a.configure.tools,
            c;
        for (c in d) {
            var b = d[c].toolkit;
            a.detect.add(b, c);
            void 0 === a.toolkit[b] && globalExists("sketch.toolkit.__init." + b) && a.setup.toolkit(b)
        }
    };
    a.detect = function (d, c) {
        var b = a.detect[d];
        return b && b[c] || !1
    };
    a.detect.add = function (d, c) {
        var b = a.detect[d] || (a.detect[d] = {});
        if ("string" === typeof c) b[c] = !0;
        else
            for (; c.length;) b[c.pop()] = !0
    };
    a.detect.add("brush", []);
    a.detect.add("shape", []);
    a.detect.add("refreshPixelData", ["floodfill"]);
    a.detect.add("area", ["svg",
        "clipart", "media", "image", "text"
    ]);
    a.detect.add("shapeConstrain", "triangle circle square regularPolygon gear star burst radialBurst spiral supershape".split(" "));
    a.detect.add("noConfigure", ["move", "snapshot", "select"]);
    a.detect.add("localAlpha", "oil pastel stamp chrome fur hair shader sketchy web spirograph spraypaint".split(" "));
    a.detect.add("generativeColor", "spraypaint calligraphy crayon streamer chrome fur hair shader sketchy web spirograph".split(" "));
    a.detect.add("catmullRomSpline", ["eraser",
        "paintbrush", "pencil"
    ]);
    a.detect.add("stampResource", ["stamp", "spraypaint"]);
    a.detect.add("srcRequired", ["stamp", "spraypaint", "image", "clipart"]);
    a.setConfigure = function (d, c) {
        var b = function (a, b) {
            "number" === typeof b ? "undefined" !== typeof a.max ? (a.min = b, a.max = b) : a.value = b : (a.min = b.min, a.max = b.max);
            return a
        }, f = a.tool.type,
            h = [],
            e = [],
            l = a.actions,
            g = l.selection,
            k;
        for (k in g) {
            var q = l.data[k];
            if (q && q.type === f) {
                var p = {}, r = {}, t;
                for (t in d) {
                    var g = q[t],
                        s = d[t];
                    p[t] = g;
                    r[t] = b(g, s);
                    q.toolkit && (q.dirty = !0)
                }
                q.dirty &&
                    q.toolkit.updateActionSize(q);
                p.id = q.id;
                r.id = q.id;
                h.push(p);
                e.push(r)
            }
        }
        if (c)
            if (h.length && e.length) a.history && a.history.store(h, e), a.render.actions("root.setConfigure");
            else {
                h = a.configure.tools[f];
                e = a.actions.hasSelection();
                for (t in d) g = e ? clone(h[t]) : h[t], s = d[t], b(g, s);
                a.setTool(f)
            }
    };
    a.toolkit.getCatelog = function (d) {
        if (d) {
            d = d.replace("_", " ");
            var c = a.toolkit.__icons,
                b;
            for (b in c) {
                var f = c[b];
                if (f.length) {
                    for (var h = c, e = b, l = {}, g = 0; g < f.length; g++) l[f[g]] = !0;
                    h[e] = l
                }
                if (c[b][d]) return b
            }
        }
    };
    a.initToolkit =
        function (d) {
            d.construct = function () {};
            d.destruct = function () {};
            d.setColor = function (c) {
                a.setColor.call(d, "color", c)
            };
            d.setGradient = function (c) {
                a.setColor.call(d, "gradient", c)
            };
            d.setStyle = function (c) {
                if (c.color || c.gradient) {
                    var b = c.color ? "color" : "gradient";
                    a.setColor.call(d, b, c[b]);
                    delete c.color;
                    delete c.gradient
                }
                var b = d.device,
                    f;
                for (f in c) {
                    var h = typeof b[f],
                        e = typeof c[f];
                    "undefined" !== h && h === e && (b[f] = c[f])
                }
            };
            d.place = a.place = function (c, b) {
                if (c.length)
                    for (var f = 0, h = 0; h < c.length; h++) f++, d.place(c[h],
                        function (a) {
                            setTimeout(function () {
                                --f || b && b(a)
                            }, 1)
                        });
                else {
                    b = b || c.callback;
                    var e = a.configure.tools[c.type];
                    if ("media" === e.toolkit && e.src !== c.src && c.src) return a.assets ? a.assets.add({
                        src: c.src,
                        onload: function (f) {
                            e.src = c.src = f;
                            a.place(c, b)
                        }
                    }) : console.log("missing 'sketch.assets'");
                    if ("text" === e.toolkit && e.fontFamily !== c.fontFamily && c.fontFamily) return a.toolkit.text.loadFont({
                        fontFamily: c.fontFamily,
                        onload: function () {
                            e.fontFamily = c.fontFamily;
                            a.place(c, b)
                        }
                    });
                    if (c.type && c.type !== d.type) {
                        var l = c.fromSocket ?
                            "tool-socket" : "tool";
                        return a.setTool(c.type, {
                            tid: l,
                            callback: function () {
                                a[l].place(c, b)
                            }
                        })
                    }
                    var g = a.detect.shape[d.type] ? new d.record : d.record,
                        k;
                    for (k in c) switch (k) {
                    case "style":
                        d.setStyle(c.style);
                        break;
                    case "color":
                        d.setColor(c.color);
                        break;
                    case "gradient":
                        d.setGradient(c.gradient)
                    }
                    if (c.bbox) {
                        if (k = c.bbox.scale) isFinite(k) && (k = {
                            x: k,
                            y: k
                        }), c.bbox.scale = k;
                        isFinite(c.bbox.rotate) && (c.bbox.rotate = c.bbox.rotate)
                    } else c.bbox = {}, c.bbox.scale = {
                        x: 1,
                        y: 1
                    }, c.bbox.rotate = 0;
                    c.bbox.scale || (c.bbox.scale = {
                        x: 1,
                        y: 1
                    });
                    if (c.points || c.data) k = c.points || c.data;
                    else {
                        var q = a.getCenterPoint();
                        k = [q]
                    }
                    q = k[0];
                    q.cmd = "M";
                    if (1 === k.length) {
                        var h = c.width,
                            p = c.height;
                        if (h && p) r = a.canvas2d.scale, k.push({
                            cmd: "L",
                            x: q.x + h * r / 2,
                            y: q.y + p * r / 2
                        });
                        else if (d.style.bbox.viewBox) {
                            var r = a.canvas2d.layers.layer0,
                                h = r.width,
                                p = r.height,
                                r = d.style.bbox.viewBox,
                                t = r[2],
                                s = r[3],
                                r = (t - r[0]) / (s - r[1]);
                            t > s ? (h /= 2.5, p = 0, t = c.bbox.scale.x || 1, 1 !== t && (t = h / 2 * (t - 1), q.x -= t, q.y -= 1 / r * t)) : (h = 0, p /= 2.5, t = c.bbox.scale.y || 1, 1 !== t && (t = p / 2 * (t - 1), q.x -= r * t, q.y -= t));
                            var r = a.canvas2d.scale;
                            k.push({
                                cmd: "L",
                                x: q.x + h * r / 2,
                                y: q.y + p * r / 2
                            })
                        } else if ("text" === d.type) {
                            p = a.actions.fromConfigure(a.configure.tools.text);
                            p.fontStyle = c.fontStyle || p.fontStyle;
                            p.fontVariant = c.fontVariant || p.fontVariant;
                            p.fontSize = c.fontSize || p.fontSize;
                            p.fontWeight = c.fontWeight || p.fontWeight;
                            p.letterSpacing = c.letterSpacing || p.letterSpacing;
                            p.lineHeight = c.lineHeight || p.lineHeight;
                            p.textAlign = c.textAlign || p.textAlign;
                            p.textDecoration = c.textDecoration || p.textDecoration;
                            p.textTransform = c.textTransform || p.textTransform;
                            r = a.vector.text.getFontStyle(p);
                            p = a.vector.text.getTextTransform(c.content, p.textTransform).split("\n");
                            t = h || 0;
                            for (h = s = 0; h < p.length; h++) {
                                var u = a.vector.text.measureText(p[h], r);
                                u.width > t && (t = u.width);
                                s += u.height
                            }
                            h = clone(q);
                            q.x -= t / 2 + 5;
                            q.y -= s / 2;
                            h.x += t / 2 + 5;
                            h.y += s / 2;
                            h.cmd = "L";
                            k.push(h)
                        } else return b && b(), console.log("missing viewbox")
                    }
                    2 === k.length && k.push({
                        cmd: "z",
                        x: k[1].x,
                        y: k[1].y
                    });
                    d.device && (q = a.toolkit[d.device.toolkit], q.deviceProxy.place = q.getDevice(c.type));
                    c.fillStyle && (a.configure.tools[c.type].fill.color = c.fillStyle);
                    for (h =
                        0; h < k.length; h++) switch (q = k[h], q.cmd || q.state) {
                    case "down":
                    case "M":
                        g(null, {
                            identifier: "place",
                            x: q.x,
                            y: q.y,
                            bbox: c.bbox,
                            start: k[0],
                            content: c.content,
                            fillStyle: c.fillStyle,
                            fontFamily: c.fontFamily,
                            fontWeight: c.fontWeight,
                            fontStyle: c.fontStyle,
                            fontVariant: c.fontVariant,
                            fontSize: c.fontSize,
                            textAlign: c.textAlign,
                            textDecoration: c.textDecoration,
                            textTransform: c.textTransform,
                            lineHeight: c.lineHeight,
                            letterSpacing: c.letterSpacing,
                            state: "down"
                        });
                        break;
                    case "move":
                    case "L":
                        g(null, {
                            identifier: "place",
                            x: q.x,
                            y: q.y,
                            bbox: c.bbox,
                            start: k[0],
                            state: "move"
                        });
                        break;
                    case "up":
                    case "z":
                        g(null, {
                            identifier: "place",
                            x: q.x,
                            y: q.y,
                            bbox: c.bbox,
                            start: k[0],
                            state: "up"
                        }, function () {
                            var e = a.actions.data[a.actions.idx];
                            e && "text" === e.type && a.actions.deselectAll();
                            e = a.area.exitGenesis() || e;
                            a.dataChannel && (a.feature.stream.sketch && e && "image" === e.type) && a.dataChannel.send(["actions.update", [{
                                id: e.id,
                                bbox: e.bbox
                            }]]);
                            b && b(e)
                        })
                    }
                }
            };
            d.construct();
            return d
    };
    var g = function (a, c) {
        switch (a) {
        case "int":
            return Math.round(c);
        default:
            return c
        }
    };
    a.toolkit.setToolConfigure =
        function (d, c, b) {
            var f = d[c];
            if (f) {
                if ("string" === typeof f) d[c] = b;
                else if (d = f.format, c = "undefined" !== typeof f.max, "undefined" !== typeof f.min && c)
                    if (b.length) {
                        c = b[0] && isFinite(b[0].value) ? b[0].value : 0;
                        var h = b[1] && isFinite(b[1].value) ? b[1].value : 0;
                        1 === b.length ? f.min = f.max = g(d, c) : 2 === b.length && (f.min = g(d, c), f.max = g(d, h))
                    } else f.min = g(d, b.min), f.max = g(d, b.max);
                    else b.length ? (b = isFinite(b[0].value) ? b[0].value : 0, f.value = g(d, b)) : f.value = g(d, b.value);
                return f
            }
            a.feature.debug && console.log("missing tool: " + c)
    };
    a.toolkit.setActionData = function (d) {
        var c = d.tool,
            b = a.configure.tools[c],
            f = d.param,
            h = d.selection || a.actions && a.actions.selection,
            e = d.cacheObject || {}, l = !e.state || "start" === e.state,
            g = !e.state || "end" === e.state;
        if (d.thumbs) {
            if (d = a.toolkit.setToolConfigure(b, f, d.thumbs), !d) return
        } else d = d.data, "object" === typeof d && d.length && (d = {
            min: d[0],
            max: d[1]
        }), "number" === typeof d && (d = {
            value: d
        }), a.toolkit.setToolConfigure(b, f, d);
        var k = [],
            q = [],
            p = a.detect.localAlpha[c],
            b = 0;
        if ("gl_" === c.substr(0, 3) && window.glfx) {
            var r =
                c.substr(3),
                r = glfx.filters[r],
                t = r.paramIndex[f],
                s = a.video.shader2;
            if (s && s.activeFilter) {
                var u = d.value,
                    y = s.activeFilter.data,
                    u = "int" === r.param[t].format.substr(0, 3) ? Math.round(u) : u;
                y[t] !== u && (s.activeFilter.data[t] = u, glfx.animationId || glfx.render());
                a.histogram && a.histogram.enabled && a.histogram.createAnalyze()
            }
            if (!a.actions || !a.actions.data) return
        }
        for (var w in h) {
            var v = a.actions.data[w];
            v && (r = "image" === v.type ? "clipart" : v.type, r === c && (l && (e["data" + v.id] = clone(v[f])), v[f] = "undefined" !== typeof d.max ?
                clone(d) : d.value || d, v.toolkit && (v.dirty = !0, v.toolkit.updateActionSize(v)), g && (h = {
                    id: v.id
                }, r = {
                    id: v.id
                }, h[f] = e["data" + v.id], r[f] = v[f], k.push(h), q.push(r)), b++))
        }
        k.length && q.length && a.history && a.history.store(k, q);
        if (g && "undefined" === typeof v) {
            if (c = a.actions.getToolkit(c)) "undefined" !== typeof d.max ? c.device && (c.device[f] = clone(d)) : c.device && (c.device[f] = d.value);
            a.setTool(a.tool.type, {
                useLoader: !1
            })
        }
        a.feature.bruteForce ? (a.active.canvas.width = a.active.canvas.width, a.render.actions("root.toolkit.realtime")) :
            (1 < b && (p = !0), window.clearTimeout(e.interval), e.interval = window.setTimeout(function () {
            (!p || p && g) && a.render.actions("root.toolkit.end")
        }, 75))
    };
    return a
}(sketch);
(function (a) {
    a.register("brush", function (g) {
        function d() {
            if (!1 === b.dragging) b.rendering = !1;
            else {
                var c = b.deviceLastRecord,
                    c = c && c.brush;
                if ("undefined" === typeof c) requestAnimationFrame(d), console.log("brush missing:", b.device, b.device.brush);
                else if (c && (c.dirty || c.speed)) {
                    var e = b.draw;
                    c.render ? (e.canvas.width = e.canvas.width, "paint" !== c.composite && c.ctx && e.drawImage(c.ctx.canvas, 0, 0)) : "paint" !== c.composite && c.ctx && (e.canvas.width = e.canvas.width, e.drawImage(c.ctx.canvas, 0, 0));
                    var l = b.batches;
                    f(e, l);
                    c.postprocess &&
                        c.postprocess();
                    b.rendering = !0;
                    requestAnimationFrame(d);
                    if (c.speed)
                        for (var g in b.intervals)
                            if (e = l[g]) {
                                var k = b.intervals[g];
                                if (!(0 < e.length)) {
                                    var q = {
                                        cmd: "L",
                                        x: k.x,
                                        y: k.y
                                    };
                                    a.dataChannel && a.dataChannel.send(["brush", c.type, "move," + k.x + "," + k.y + "," + g]);
                                    e.push(q);
                                    e.path.push(q)
                                }
                            }
                } else requestAnimationFrame(d)
            }
        }

        function c(a, e, c) {
            var d = this.brush;
            if ("undefined" === typeof d) console.log("brush missing:", d, this);
            else {
                this.dirty && b.cloneAttributes(this, d);
                var g = d.interval || this.interval;
                d.ctx = a;
                d.active = b.draw;
                d.cache = b.cache;
                d.isGhost = !1;
                d.isRecording = !1;
                d.interval = g;
                var q = {};
                q[this.finger] = this.data;
                q[this.finger].interval = g;
                !1 !== c && (c = this.bbox, e.matrix.x = c.viewBox[0] * c.scale.x, e.matrix.y = c.viewBox[1] * c.scale.y, e.apply(a, !0));
                f(a, q, d, this);
                d.interval = g;
                d.postprocess && d.postprocess()
            }
        }
        var b = this;
        this.type = g.type || "brush";
        this.draw = g.draw.ctx;
        this.active = g.active.ctx;
        this.cache = g.cache.ctx;
        this.ctx = g.layer0.ctx;
        this.rendering = !1;
        this.deviceLastRecord = this.device = null;
        this.deviceProxy = {};
        this.interval =
            this.gestures = 0;
        this.timeSent = null;
        this.batches = {};
        this.position = {};
        this.intervals = {};
        this.enabled = !1;
        this.enable = function () {
            var c = this.device && this.device.brush;
            c && c.enable && c.enable();
            !0 !== this.enabled && (this.enabled = !0, this.enableGhost(), this.onDrag = Event.proxy.drag({
                target: b.active.canvas,
                listener: this.record
            }), a.toolkit.select && a.tool !== a.toolkit.select && a.toolkit.select.enable({
                mouse: !1
            }))
        };
        this.disable = function () {
            var b = this.device && this.device.brush;
            b && b.disable && b.disable();
            !1 !== this.enabled &&
                (this.enabled = !1, this.disableGhost(), this.onDrag && this.onDrag.remove(), a.toolkit.select && a.tool !== a.toolkit.select && a.toolkit.select.disable({
                mouse: !1
            }))
        };
        this.ghostEnabled = !1;
        this.enableGhost = function () {
            Event.supports.mouse && !this.ghostEnabled && (this.ghostEnabled = !0, Event.add(b.active.canvas, "mouseout", this.ghost), Event.add(b.active.canvas, "mousemove", this.ghost))
        };
        this.disableGhost = function () {
            Event.supports.mouse && this.ghostEnabled && (this.ghostEnabled = !1, Event.remove(b.active.canvas, "mouseout",
                this.ghost), Event.remove(b.active.canvas, "mousemove", this.ghost))
        };
        this.loadResource = function (f, e) {
            if (f) {
                "string" === typeof f && (f = {
                    type: f
                });
                var d = a.configure.tools[f.type];
                if (d) {
                    f.dirty = !0;
                    f.render = c;
                    var g = b.cloneAttributes(f, clone(d));
                    a.style.getColors(g);
                    g.ctx = b.ctx;
                    g.callback = function (a, c) {
                        a.type = g.type;
                        var d = f.brush = a;
                        d.action = f;
                        d.seed = d.seed || 2147483648 * Math.random() >> 0;
                        d.colors = g.colors;
                        d.fill = g.fill;
                        d.offsetCache = b.getOffset(d) / 2 % 1;
                        c && (c = "&ldquo;" + name + "&rdquo; " + a.type + " unavailable.");
                        e &&
                            e(f, c)
                    };
                    if (a.toolkit.__init["brush." + g.type]) return new a.toolkit.__init["brush." + g.type](g);
                    d = g.type + " unavailable.";
                    e && e(f, d)
                } else e && e(f)
            }
        };
        this.changeDevice = function (c, e, f) {
            e = e || b.type;
            c = c || a.configure.tools[e];
            this.device = clone(c);
            this.loadResource(this.device, f)
        };
        this.changeColor = function (a) {
            this.device && this.device.brush && (this.device.brush.fill.color = a, this.device.brush.fill.type = "color", this.device.brush.colors = [0, a])
        };
        this.getDevice = function (b, e) {
            var c = clone(a.configure.tools[b]);
            this.loadResource(c,
                e);
            return c
        };
        this.attributes = {
            seed: "number",
            stretchToFit: "boolean",
            composite: "string",
            movement: "string",
            spread: "number",
            lineWidth: "number",
            diameter: "number",
            increment: "number",
            outerRadius: "number",
            innerRadius: "number",
            distance: "number",
            tolerance: "number",
            blur: "number",
            src: "string",
            opacity: "number",
            bbox: "object",
            spacing: "object",
            rotate: "object",
            translate: "object",
            scale: "object",
            fill: "style"
        };
        this.cloneAttributes = function (b, e) {
            if (b && e) {
                var c = this.attributes,
                    f;
                for (f in c) {
                    var d = c[f],
                        g = b[f],
                        p = e[f];
                    "undefined" !==
                        typeof b[f] && ("style" === d ? p && p.color === g.color && p.gradient === g.gradient && p.type === g.type || (e[f] = clone(g)) : "object" === c[f] ? p && p.min === g.min && p.max === g.max || (e[f] = clone(g)) : p !== g && (e[f] = "undefined" === typeof g.value ? g : g.value))
                }
                return e
            }
            a.feature.debug && console.log("brush.cloneAttributes", b, e)
        };
        this.getOffset = function (b, e) {
            var c = sketch.configure.tools[b.type],
                f = c.diameter && b.diameter || 0,
                f = c.diameter && b.diameter ? isFinite(b.diameter) ? b.diameter : b.diameter.value : 0;
            if ("spirograph" === b.type) var d = b.distance ||
                0,
            f = f + 2 * (Math.abs((b.outerRadius || 0) - (b.innerRadius || 0)) + d);
            else "streamer" === b.type && (f = 20);
            var d = c.scale && b.scale && b.scale.max || 1,
                g = c.translate && b.translate && b.translate.max || 0,
                g = 2 * Math.sqrt(g * g + g * g);
            return (2 * (c.blur && b.blur || 0) + f + (c.lineWidth && b.lineWidth || 0)) * d + g + (a.area && a.area.padding || 0)
        };
        this.updateActionSize = function (c) {
            if (!c.brush || c.type !== c.brush.type) return b.loadResource(c, b.updateActionSize);
            var e = !! c.bbox && c.bbox.scale.x || 1,
                f = b.getOffset(c, c.bbox);
            c.offsetCache = f / 2 % 1;
            if (a.detect.refreshPixelData[c.type]) var f = -a.area.padding,
            d = {
                x1: -a.area.padding,
                y1: -a.area.padding,
                x2: a.canvas2d.width,
                y2: a.canvas2d.height
            };
            else d = a.detect.catmullRomSpline[c.type] ? new Vector.BBox(a.vector.catmullRomSplineData({
                path: c.data,
                tension: 0
            })) : new Vector.BBox(c.data); if (c.bbox) var g = -f / 2,
            q = c.bbox.x - g * e, p = c.bbox.y - g * e;
            else g = -f / 2, q = d.x1, p = d.y1;
            var r = d.x2 - d.x1 + f,
                f = d.y2 - d.y1 + f,
                e = {
                    x: q + g * e,
                    y: p + g * e,
                    width: r,
                    height: f,
                    padding: g,
                    units: "objectBoundingBox",
                    viewBox: [0, 0, r, f]
                };
            if (c.firstRecord) {
                delete c.firstRecord;
                for (g = 0; g < c.data.length; g++) q =
                    c.data[g], q.x -= d.x1, q.y -= d.y1;
                return e
            }
            e.scale = c.bbox.scale;
            e.rotate = c.bbox.rotate;
            e.translate = c.bbox.translate;
            c.bbox = e
        };
        this.ghost = function (c) {
            if (c && b.device && b.device.brush) {
                var e = b.active,
                    f = b.active.canvas;
                f.width = f.width;
                var d = b.device.brush;
                "paint" !== d.composite && e.drawImage(b.ctx.canvas, 0, 0);
                if ("mouseout" === c.type) delete f.bbox, delete d.px, delete d.py, delete d.event;
                else {
                    d.event = c;
                    var f = Event.proxy.getCoord(c),
                        g = Event.proxy.getBoundingBox(a.canvas2d.container);
                    c = a.canvas2d;
                    var q = c.scale / c.pixelRatio;
                    c = (f.x - g.x1 - g.scrollLeft) / q;
                    f = (f.y - g.y1 - g.scrollBodyTop - a.project.scrollTop) / q;
                    if (d.ghostDistance && isFinite(d.px)) {
                        var q = d.px - c,
                            p = d.py - f,
                            r = Math.sqrt(q * q + p * p),
                            g = d.ghostDistance;
                        r > g && (q = Math.atan2(p, q), d.x = c, d.y = f, d.px = c + Math.cos(q) * g, d.py = f + Math.sin(q) * g)
                    } else d.x = c, d.y = f, d.px = c, d.py = f;
                    d.finger = d.finger || "0:A";
                    d.interval = d.interval || 0;
                    d.seed = d.seed || 1234567;
                    d.ctx = b.ctx;
                    d.active = b.active;
                    d.cache = b.cache;
                    d.isGhost = !0;
                    d.isRecording = !0;
                    d.path = [{
                        cmd: "M",
                        x: d.px,
                        y: d.py
                    }, {
                        cmd: "L",
                        x: d.x,
                        y: d.y
                    }];
                    d.render ? d.render() :
                        (e.save(), e.globalAlpha = d.opacity / 100, e.globalCompositeOperation = a.style.getComposite(d.composite), d.drawStart && d.drawStart(), d.draw && d.draw(null), e.restore())
                }
            }
        };
        this.record = function (f, e, l) {
            if (!a.colorPicker || "eyeDropper" !== a.colorPicker.state) {
                var g = a.getMouseId(f, e),
                    k = f ? b.device : b.deviceProxy[g];
                if (k && k.brush) {
                    b.deviceLastRecordId = g;
                    b.deviceLastRecord = k;
                    var q = k.type,
                        p = e.state,
                        r = "down" === p,
                        t = "up" === p,
                        s = "move" === p,
                        u = b.batches[g],
                        p = k.brush,
                        y = a.canvas2d,
                        w = y.scale / y.pixelRatio,
                        y = a.project.scrollLeft,
                        v = a.project.scrollTop,
                        x = (e.x - y) / w,
                        w = (e.y - v) / w;
                    p.px -= y;
                    if (r || t) {
                        if (p.onDoubleTap && t && !p.cancelListener && u) {
                            if (2 < u.length && p.current) {
                                var A = u[u.length - 1],
                                    C = p.current,
                                    D = Math.abs(C.x - A.x),
                                    A = Math.abs(C.y - A.y),
                                    D = Math.sqrt(D * D + A * A);
                                if (500 > (new Date).getTime() - p.timestamp && 25 > D) return p.onDoubleTap()
                            }
                            p.timestamp = (new Date).getTime();
                            p.current = u[u.length - 1]
                        }
                        if (p.addLineSegment && (u || (p.clickCount = 0), r && p.clickCount++, u)) {
                            var D = Math.abs(x - u[0].x),
                                A = Math.abs(w - u[0].y),
                                C = new Vector.BBox(u),
                                B = C.x2 - C.x1,
                                C = C.y2 -
                                    C.y1,
                                C = Math.sqrt(B * B + C * C),
                                D = Math.sqrt(D * D + A * A);
                            10 < C && 1 < u.length && (r = !1, s = !0);
                            if (10 < D || 10 > C && 1 === p.clickCount) r = !1, t = p.cancelListener || !1, s = !0
                        }
                    }!u || r ? (u = b.batches[g] = [], u.path = [], u.interval = e.interval || b.interval || 0, p.seed = e.seed || p.seed, p.event = f, p.self = e, f && Event.prevent(f)) : f && Event.cancel(f);
                    r ? (b.disableGhost(), b.dragging = !0, a.style.getColors(p), 1 === e.fingers && (b.active.canvas.width = b.active.canvas.width, "paint" !== p.composite && p.ctx && b.draw.drawImage(b.ctx.canvas, 0, 0)), f && isFinite(p.px) && isFinite(p.py) ?
                        (s = {
                            cmd: "M",
                            beginPath: !0,
                            interval: u.interval,
                            x: p.px + y,
                            y: p.py
                        }, delete p.px, delete p.py) : s = {
                            cmd: "M",
                            beginPath: !0,
                            interval: u.interval,
                            x: x,
                            y: w
                        }, f && (a.dataChannel && a.feature.stream.sketchLive) && (D = e.state + "," + s.x + "," + s.y + "," + g, a.dataChannel.send(["brush", q, D, k.brush.fill, p.seed, p.interval || b.interval || 0]), a.feature.debug && console.log(D)), !0 === p.click ? u[0] = s : (u.push(s), u.path.push(s)), p.ghostDistance && (s = {}, s.x = x, s.y = w, s.cmd = "L", u.push(s), u.path.push(s), f && (a.dataChannel && a.feature.stream.sketchLive) &&
                            (D = "move," + s.x + "," + s.y + "," + g, a.dataChannel.send(["brush", q, D]), a.feature.debug && console.log(D)))) : (s = s ? {
                        cmd: "L",
                        x: x,
                        y: w
                    } : {
                        cmd: "z",
                        x: x,
                        y: w
                    }, f && (a.dataChannel && a.feature.stream.sketchLive) && (D = e.state + "," + s.x + "," + s.y + "," + g, a.dataChannel.send(["brush", q, D]), a.feature.debug && console.log(D)), p.lineRecord ? (x = t ? Math.min(u.length, 2) : 1, u[x] = s, u.path[x] = s) : !0 === p.click ? "z" !== s.cmd && (u[0] = s) : (u.push(s), u.path.push(s)));
                    p.dirty = !0;
                    p.isGhost = !1;
                    p.isRecording = !0;
                    if (t) {
                        if (p.cancelPointerUp) return b.reset(g);
                        if (p.onPointerUp) return b.reset(g),
                        p.onPointerUp();
                        var r = 0,
                            F;
                        for (F in b.batches) r++;
                        1 === r && (b.dragging = !1);
                        f && (b.gestures--, b.interval = p.interval || 0, 1 === e.fingers && b.enableGhost());
                        if (f || l) {
                            var u = b.batches[g],
                                G = a.detect.refreshPixelData[p.type] || "paint" !== k.composite,
                                k = b.cloneAttributes(p, a.actions.fromConfigure(a.configure.tools[q]));
                            k.data = a.vector.clean && "stamp" !== p.type ? a.vector.clean(new Vector.Polygon, u.path) : clone(u.path);
                            k.brush = p;
                            k.firstRecord = !0;
                            e.bbox && !e.bbox.border ? C = mergeObject(e.bbox, {}) : (C = b.updateActionSize(k), e = a.area.padding /
                                2, C.x += e + y, C.y += e + v);
                            var z = a.actions.add(b.cloneAttributes(p, {
                                finger: g,
                                type: q,
                                data: k.data,
                                interval: k.data[0].interval,
                                bbox: C
                            }));
                            !1 === a.feature.canvas.editable && !1 === G && (z.render = c, z.dirty = !1);
                            p.seed = 2147483648 * Math.random() >> 0
                        }
                        b.reset(g);
                        if (f || l) a.feature.canvas.editable || G ? (a.actions.deselectAll(), a.render.preload({
                            onload: function () {
                                a.history && a.history.store("add", [a.actions.clone(z)]);
                                l && l()
                            }
                        })) : (a.ctx.globalAlpha = 1, a.ctx.globalCompositeOperation = "source-over", a.ctx.drawImage(a.canvas2d.layers.draw,
                            0, 0), a.actions.deselectAll(), a.history && a.history.store("add", [a.actions.clone(z)]), l && l());
                        b.draw.canvas.width = b.draw.canvas.width
                    } else !1 === b.rendering && r && (b.rendering = !0, d())
                }
            }
        };
        this.reset = function (a) {
            a || (b.draw.canvas.width = b.draw.canvas.width);
            var e = b.deviceLastRecord,
                c = b.deviceLastRecordId;
            (a = a || c) && e && (e = e.brush, delete b.batches[a], delete b.intervals[a], delete b.position[a + "x"], delete b.position[a + "y"], delete e.cancelListener, delete e.cancelPointerUp, delete e.timestamp, delete e.current, delete e.event,
                    delete e.self)
        };
        var f = function (c, e, f, d) {
            for (var g in e) {
                d || (f = (b.deviceProxy[g] || b.device).brush);
                var q = f.opacity / 100,
                    p = a.style.getComposite(f.composite),
                    r = f.isRecording,
                    t = f.isGhost,
                    s = "disco" === f.composite,
                    u = a.detect.localAlpha[f.type],
                    y = "undefined" !== typeof f.draw,
                    w = b.getOffset(f) / 2;
                f.dirty = !1;
                r && (f.ctx = b.ctx, f.active = b.draw, f.cache = b.cache);
                var v = e[g];
                if (0 !== v.length) {
                    v.interval = v.interval || 0;
                    f.path = v.path || v;
                    f.finger = g;
                    var x = void 0;
                    if (r && u && "z" !== v[0].cmd) c = b.draw, c.save(), x = f.ctx, f.ctx.save(),
                    f.ctx.translate(-0.5, -0.5);
                    else if (r) c = f.ctx, c.save(), "streamer" !== f.type && (x = b.draw, b.draw.save(), b.draw.translate(-0.5, -0.5));
                    else {
                        c = f.ctx;
                        if (!c) continue;
                        c.save()
                    } if (!r)
                        if (d && d.bbox) {
                            var A = Math.round(d.bbox.x) - d.bbox.x,
                                C = Math.round(d.bbox.y) - d.bbox.y;
                            c.translate(w - A, w - C)
                        } else c.translate(w, w);
                    if (f.render) f.render(d || f);
                    else
                        for (c.globalAlpha = u ? q : 1, c.globalCompositeOperation = p, q = 0, p = v.length; q < p; q++) {
                            if (r || t) var u = v.shift(),
                            w = u.x - f.offsetCache, D = u.y - f.offsetCache;
                            else u = v[q], w = u.x, D = u.y;
                            f.x = w;
                            f.y =
                                D;
                            if ("M" === u.cmd) {
                                var B = b.position[g + "x"] = w,
                                    F = b.position[g + "y"] = D,
                                    G = B,
                                    z = F;
                                v.increment = 0;
                                f.cmd = u.cmd;
                                f.px = G;
                                f.py = z;
                                r && b.gestures++;
                                f.drawStart && (f.interval = ++v.interval, f.drawStart())
                            } else {
                                if ("z" === u.cmd) {
                                    f.drawEnd && (f.cmd = u.cmd, f.interval = ++v.interval, f.drawEnd());
                                    break
                                }
                                B = b.position[g + "x"];
                                F = b.position[g + "y"];
                                G = B;
                                z = F;
                                f.px = G;
                                f.py = z
                            }
                            f.speed && (b.intervals[g] = u);
                            if (y) {
                                var J = f.spacing.min,
                                    O = f.spacing.max,
                                    A = w - B,
                                    C = D - F,
                                    K = Math.sqrt(A * A + C * C) + 1;
                                if (!(K < J && "M" !== u.cmd)) {
                                    A = A / K || 0;
                                    C = C / K || 0;
                                    J = O || 1;
                                    for (O = O < K - 1 ? O :
                                        K - 1; O < K; O += J) w = B + A * O, D = F + C * O, s && (c.globalCompositeOperation = 0 === v.interval % 2 ? "lighter" : "source-over"), f.x = w, f.y = D, f.px = G, f.py = z, f.cmd = u.cmd, f.interval = ++v.interval, f.draw(v.increment), G = w, z = D;
                                    b.position[g + "x"] = w;
                                    b.position[g + "y"] = D;
                                    v.increment++
                                }
                            }
                        }
                    c.restore();
                    x && x.restore()
                }
            }
        };
        return a.initToolkit(this)
    });
    "undefined" === typeof a.vector && (a.vector = {});
    a.vector.catmullRomSplineData = function (a) {
        var d = clone(a.path),
            c = 1 - (a.tension || 0),
            b = d.length - 2;
        d.splice(0, 0, d[0]);
        d.push(d[d.length - 1]);
        d.push(d[d.length -
            1]);
        if (0 >= b) return a.path;
        a = [];
        for (var f = 0; f < b; f++) {
            var h = d[f],
                e = d[f + 1],
                l = d[f + 2],
                m = d[f + 3];
            0 === f && a.push({
                beginPath: !0,
                interval: e.interval,
                cmd: "M",
                x: e.x,
                y: e.y
            });
            a.push({
                cmd: "C",
                x1: e.x + (c * l.x - c * h.x) / 6,
                y1: e.y + (c * l.y - c * h.y) / 6,
                x2: l.x + (c * e.x - c * m.x) / 6,
                y2: l.y + (c * e.y - c * m.y) / 6,
                x: l.x,
                y: l.y
            })
        }
        return a
    };
    a.vector.catmullRomSpline = function (a) {
        var d = clone(a.path),
            c = 1 - (a.tension || 0),
            b = a.ctx,
            f = d.length - 2;
        d.splice(0, 0, d[0]);
        d.push(d[d.length - 1]);
        d.push(d[d.length - 1]);
        if (0 >= f) {
            var h = d[0],
                e = d[1];
            b.moveTo(h.x, h.y);
            b.lineTo(e.x +
                0.1, e.y + 0.1)
        } else {
            for (var l = 0; l < f; l++) {
                var h = d[l],
                    e = d[l + 1],
                    m = d[l + 2],
                    k = d[l + 3];
                0 === l && (b.beginPath(), b.moveTo(e.x, e.y));
                b.bezierCurveTo(e.x + (c * m.x - c * h.x) / 6, e.y + (c * m.y - c * h.y) / 6, m.x + (c * e.x - c * k.x) / 6, m.y + (c * e.y - c * k.y) / 6, m.x, m.y)
            }
            if (a.offsetPath) {
                a = 17 * Math.cos(0.5);
                for (var q = 17 * Math.sin(0.5), l = f; 0 < l; l--) h = d[l], e = d[l + 1], m = d[l + 2], k = d[l + 3], 0 === l && (b.beginPath(), b.moveTo(e.x + a, e.y + a)), b.bezierCurveTo(e.x + (c * m.x - c * h.x) / 6 + a, e.y + (c * m.y - c * h.y) / 6 + q, m.x + (c * e.x - c * k.x) / 6 + a, m.y + (c * e.y - c * k.y) / 6 + q, m.x + a, m.y + q)
            }
        }
    }
})(sketch);
(function (a) {
    a.register("brush.arrow", function (g) {
        this.construct = function (d) {
            this.composite = d.composite || "paint";
            this.colors = d.colors || a.style.colors;
            this.opacity = isFinite(d.opacity) ? d.opacity : 100;
            this.diameter = isFinite(d.diameter) ? d.diameter : 30;
            this.ghostDistance = isFinite(d.ghostDistance) ? d.ghostDistance : 10;
            this.lineRecord = !0;
            d.callback(this);
            return this
        };
        this.render = function (d) {
            var c = this.path.length;
            d = this.isRecording ? this.active : this.ctx;
            var b = this.colors[1 % this.colors.length],
                f = this.diameter;
            d.save();
            d.beginPath();
            if (this.isRecording) {
                var h = 1;
                d.globalAlpha = this.opacity / 100;
                d.globalCompositeOperation = a.style.getComposite(this.composite)
            } else h = this.bbox.scale.x, d.globalAlpha = 1;
            d.lineCap = "miter";
            d.miterLimit = 20;
            d.lineWidth = f / 4;
            d.strokeStyle = b;
            d.fillStyle = b;
            var e = this.path[0],
                c = this.path[c - 1],
                b = e.x,
                e = e.y,
                l = c.x,
                g = c.y,
                k = Math.PI / 8;
            d.beginPath();
            d.moveTo(b, e);
            d.lineTo(b + (l - b), e + (g - e));
            d.stroke();
            var q = Math.atan2(g - e, l - b),
                c = f,
                p = l + Math.cos(q) * f / 2,
                r = g + Math.sin(q) * f / 2,
                t = q + Math.PI + k,
                s = p + Math.cos(t) *
                    c,
                t = r + Math.sin(t) * c,
                q = q + Math.PI - k,
                k = p + Math.cos(q) * c,
                c = r + Math.sin(q) * c;
            d.save();
            d.beginPath();
            d.moveTo(s, t);
            d.lineTo(p, r);
            d.lineTo(k, c);
            d.quadraticCurveTo((s + p + k) / 3, (t + r + c) / 3, s, t);
            d.closePath();
            d.fill();
            d.restore();
            a.vector.trackGradientBBox(this, 0, h, {
                x1: Math.min(b, l) - f / 2,
                y1: Math.min(e, g) - f / 2,
                x2: Math.max(b, l) + f / 2 + a.area.padding,
                y2: Math.max(e, g) + f / 2 + a.area.padding
            });
            d.restore()
        };
        return this.construct(g)
    })
})(sketch);
(function (a) {
    a.register("brush.floodfill", function (g) {
        var d = this,
            c = a.style.createGradient;
        this.construct = function (b) {
            this.type = "floodfill";
            this.lineRecord = this.stretchToFit = !0;
            this.opacity = b.opacity || 100;
            this.colors = b.colors || a.style.colors;
            this.fill = b.fill || a.style.fill;
            this.composite = b.composite || "paint";
            this.tolerance = b.tolerance || 25;
            this.antialias = b.antialias || !1;
            this.contiguous = b.contiguous || !1;
            b.callback(this)
        };
        this.render = function () {
            this.isGhost || a.render.actions("floodfill", function () {
                var b =
                    d.bbox || {
                        x: 0,
                        y: 0,
                        scale: {
                            x: 1,
                            y: 1
                        }
                }, f = a.canvas2d.layers.bitmap.ctx,
                    h = b.scale.x || 1,
                    e = d.path || action.data || [];
                if ("gradient" === d.fill.type) var l = e[0],
                e = e[1] || l;
                else e = l = e[1] || e[0];
                var g = Math.round(b.x + l.x * h),
                    b = Math.round(b.y + l.y * h),
                    h = a.ctx.canvas.width,
                    k = a.ctx.canvas.height;
                f.canvas.width = h;
                f.canvas.height = k;
                if (100 === d.tolerance) d.ctx.save(), d.ctx.globalAlpha = d.opacity / 100, d.ctx.fillStyle = c(d.ctx, 0, 0, h, k, d), d.ctx.fillRect(0, 0, h, k), d.ctx.restore();
                else {
                    d.__rendering = !0;
                    f.clearRect(0, 0, h, k);
                    var q = d.isRecording ?
                        0 : Math.ceil(a.area.padding);
                    (new QueueLinearFloodFill({
                        src: a.ctx,
                        srcRect: {
                            x: 0,
                            y: 0,
                            width: h,
                            height: k
                        },
                        dst: f,
                        dstRect: {
                            x: 0,
                            y: 0
                        },
                        tolerance: d.tolerance / 100,
                        contiguous: d.contiguous
                    })).render({
                            x: g - q,
                            y: b - q
                        });
                    d.antialias && (f.drawImage(f.canvas, 0, 0, h, k, 0.5, 0.5, h, k), f.drawImage(f.canvas, 0, 0, h, k, -0.5, -0.5, h, k));
                    "erase" !== d.composite && (f.save(), f.globalCompositeOperation = "source-in", f.fillStyle = l.x === e.x && l.y === e.y ? c(d.ctx, 0, 0, h, k, d) : c(d.ctx, l.x - (e.x - l.x) - q, l.y - (e.y - l.y) - q, e.x - q, e.y - q, d), f.fillRect(0, 0, h, k), f.restore());
                    l = d.isRecording ? 0 : d.offsetCache;
                    d.ctx.save();
                    d.ctx.globalAlpha = d.opacity / 100;
                    d.ctx.drawImage(f.canvas, l, l);
                    d.ctx.restore();
                    d.drawControl()
                }
            })
        };
        this.drawControl = function (b) {
            b = b || d;
            var c = a.canvas2d,
                h = c.pixelRatio,
                c = c.scale / h,
                e = a.project.scrollLeft,
                l = a.project.scrollTop;
            a.active.canvas.width = a.active.canvas.width;
            var g = a.active,
                k = a.area.padding,
                k = b.bbox || {
                    x: k,
                    y: k,
                    scale: {
                        x: 1,
                        y: 1
                    }
                }, q = k.scale.x || 1,
                p = d.path || b.data || [];
            if (b = "gradient" === d.fill.type) var r = p[0],
            t = p[1] || r;
            else t = r = p[1] || p[0];
            var s = a.area.padding,
                p = Math.round(k.x + r.x * q) - s - e,
                r = Math.round(k.y + r.y * q) - s - l,
                e = Math.round(k.x + t.x * q) - s - e,
                l = Math.round(k.y + t.y * q) - s - l;
            if ("select" === a.tool.type && a.tool.coord) {
                var u = a.tool.coord,
                    y = u.x / c,
                    w = u.y / c;
                d.last = void 0;
                d.control = void 0;
                a.tool.coord = void 0
            }
            b && (g.beginPath(), g.strokeStyle = "rgba(255,255,255,0.7)", g.moveTo(p, r), g.lineTo(e, l), g.stroke());
            g.beginPath();
            g.fillStyle = "#000";
            g.arc(p, r, 6 * h, 0, 2 * Math.PI);
            u && g.isPointInPath(y, w) && (g.fillStyle = "#f00", d.control = 0);
            g.fill();
            g.stroke();
            b && (g.beginPath(), g.fillStyle =
                "#000", g.arc(e, l, 4 * h, 0, 2 * Math.PI), u && g.isPointInPath(y, w) && (g.fillStyle = "#f00", d.control = 1), g.fill(), g.stroke());
            return [{
                id: "area",
                type: "button",
                bbox: {
                    units: "objectBoundingBox",
                    x: 0,
                    y: 0,
                    width: window.innerWidth,
                    height: window.innerHeight,
                    rotate: 0,
                    scale: {
                        x: 1,
                        y: 1
                    }
                }
            }]
        };
        this.move = function (b) {
            var c = a.canvas2d,
                h = c.scale / c.pixelRatio,
                e = d.control,
                c = d.action,
                l = c.data,
                g = a.area.padding,
                k = b.x / h + g,
                h = b.y / h + g,
                g = {
                    x: k,
                    y: h
                };
            "undefined" === typeof e ? (e = d.last || g, l[0].x -= e.x - k, l[0].y -= e.y - h, l[1].x -= e.x - k, l[1].y -= e.y - h) : (l[e].x =
                k, l[e].y = h);
            c.dirtyCacheForce = !0;
            c.dirtyRender = !0;
            a.render.actions("root.select.moveActions");
            d.last = "up" === b.state ? void 0 : g
        };
        this.construct(g)
    })
})(sketch);
(function (a) {
    a.register("brush.chrome", function (g) {
        this.construct = function (d) {
            this.type = "chrome";
            this.opacity = d.opacity || 100;
            this.colors = d.colors || a.style.colors;
            this.composite = d.composite || "paint";
            this.lineWidth = d.lineWidth || 1;
            this.spread = d.spread || 30;
            this.spacing = d.spacing || [0, 0];
            d.callback(this)
        };
        this.draw = function (a) {
            var c = this.ctx,
                b = this.path,
                f = this.colors,
                h = 100 * this.spread;
            a = null === a ? b.length : a;
            if (0 !== a) {
                var e = b[a - 1],
                    l = b[a - 2] || e;
                if (l) {
                    var g;
                    c.beginPath();
                    c.globalAlpha = this.opacity / 100;
                    c.lineCap =
                        "round";
                    c.lineWidth = this.lineWidth;
                    c.moveTo(l.x, l.y);
                    c.lineTo(e.x, e.y);
                    c.strokeStyle = f[(2 * this.interval + 1) % f.length];
                    c.stroke();
                    for (var k = Math.max(0, a - 100); k < a; k++) e = b[k].x - b[a - 1].x, l = b[k].y - b[a - 1].y, g = e * e + l * l, g < h && (c.beginPath(), c.moveTo(b[a - 1].x + 0.2 * e, b[a - 1].y + 0.2 * l), c.lineTo(b[k].x - 0.2 * e, b[k].y - 0.2 * l), c.strokeStyle = f[(2 * this.interval + 1) % f.length], c.stroke())
                }
            }
        };
        this.construct(g)
    });
    a.register("brush.shader", function (g) {
        this.construct = function (d) {
            this.type = "shader";
            this.opacity = d.opacity || 100;
            this.colors =
                d.colors || a.style.colors;
            this.composite = d.composite || "paint";
            this.lineWidth = d.lineWidth || 1;
            this.spread = d.spread || 30;
            this.spacing = d.spacing || [0, 0];
            d.callback(this)
        };
        this.draw = function (a) {
            var c = this.ctx,
                b = this.path,
                f = this.colors,
                h = 100 * this.spread;
            a = null === a ? b.length : a;
            var e, l;
            c.lineCap = "round";
            c.lineWidth = this.lineWidth;
            for (var g = 0; g < a; g++) e = b[g].x - b[a - 1].x, l = b[g].y - b[a - 1].y, e = e * e + l * l, e < h && (c.beginPath(), c.globalAlpha = 0.1 * (1 - e / h) * this.opacity / 100, c.moveTo(b[a - 1].x, b[a - 1].y), c.lineTo(b[g].x, b[g].y),
                c.strokeStyle = f[(2 * this.interval + 1) % f.length], c.stroke())
        };
        this.construct(g)
    });
    a.register("brush.sketchy", function (g) {
        this.construct = function (d) {
            this.type = "sketchy";
            this.opacity = d.opacity || 100;
            this.colors = d.colors || a.style.colors;
            this.composite = d.composite || "paint";
            this.lineWidth = d.lineWidth || 1;
            this.spread = d.spread || 30;
            this.spacing = d.spacing || [0, 0];
            d.callback(this)
        };
        this.drawStart = function () {
            this.rand = new Random(this.seed || 1)
        };
        this.draw = function (a) {
            if (this.rand) {
                var c = this.ctx,
                    b = this.path,
                    f = this.colors,
                    h = 100 * this.spread;
                a = null === a ? b.length : a;
                if (0 !== a) {
                    var e = b[a - 1],
                        l = b[a - 2] || e;
                    if (l) {
                        var g;
                        c.beginPath();
                        c.lineCap = "round";
                        c.lineWidth = this.lineWidth;
                        c.globalAlpha = this.opacity / 100;
                        c.moveTo(l.x, l.y);
                        c.lineTo(e.x, e.y);
                        c.strokeStyle = f[(2 * this.interval + 1) % f.length];
                        c.stroke();
                        for (var k = 0; k < a; k++) e = b[k].x - b[a - 1].x, l = b[k].y - b[a - 1].y, g = e * e + l * l, g < h && this.rand.toDouble() > g / h / 2 && (c.beginPath(), c.moveTo(b[a - 1].x + 0.3 * e, b[a - 1].y + 0.3 * l), c.lineTo(b[k].x - 0.3 * e, b[k].y - 0.3 * l), c.strokeStyle = f[(2 * this.interval + 1) % f.length],
                            c.stroke())
                    }
                }
            }
        };
        this.construct(g)
    });
    a.register("brush.web", function (g) {
        this.construct = function (d) {
            this.type = "web";
            this.opacity = d.opacity || 100;
            this.colors = d.colors || a.style.colors;
            this.composite = d.composite || "paint";
            this.lineWidth = d.lineWidth || 1;
            this.spread = d.spread || 30;
            this.spacing = d.spacing || [0, 0];
            d.callback(this)
        };
        this.drawStart = function () {
            this.rand = new Random(this.seed || 1)
        };
        this.draw = function (a) {
            if (this.rand) {
                var c = this.ctx,
                    b = this.path,
                    f = this.colors,
                    h = 100 * this.spread;
                a = null === a ? b.length : a;
                if (0 !==
                    a) {
                    var e = b[a - 1],
                        l = b[a - 2] || e;
                    if (l) {
                        var g;
                        c.beginPath();
                        c.globalAlpha = this.opacity / 100;
                        c.lineCap = "round";
                        c.lineWidth = this.lineWidth;
                        c.moveTo(l.x, l.y);
                        c.lineTo(e.x, e.y);
                        c.strokeStyle = f[(2 * this.interval + 1) % f.length];
                        c.stroke();
                        for (e = 0; e < a; e++) l = b[e].x - b[a - 1].x, g = b[e].y - b[a - 1].y, l = l * l + g * g, l < h && 0.15 > this.rand.toDouble() && (c.beginPath(), c.moveTo(b[a - 1].x, b[a - 1].y), c.lineTo(b[e].x, b[e].y), c.strokeStyle = f[(2 * this.interval + 1) % f.length], c.stroke())
                    }
                }
            }
        };
        this.construct(g)
    });
    a.register("brush.fur", function (g) {
        this.construct =
            function (d) {
                this.type = "fur";
                this.opacity = d.opacity || 100;
                this.colors = d.colors || a.style.colors;
                this.composite = d.composite || "paint";
                this.lineWidth = d.lineWidth || 1;
                this.diameter = d.diameter || 30;
                this.spacing = d.spacing || [0, 0];
                d.callback(this)
        };
        this.drawStart = function () {
            this.rand = new Random(this.seed || 1)
        };
        this.draw = function (a) {
            if (this.rand) {
                var c = this.ctx,
                    b = this.path,
                    f = this.colors,
                    h = this.diameter / 100;
                a = null === a ? b.length : a;
                if (0 !== a) {
                    var e = b[a - 1],
                        l = b[a - 2] || e;
                    if (l) {
                        var g, k;
                        c.beginPath();
                        c.globalAlpha = this.opacity /
                            100;
                        c.moveTo(l.x, l.y);
                        c.lineTo(e.x, e.y);
                        c.lineCap = "round";
                        c.lineWidth = this.lineWidth;
                        c.strokeStyle = f[(2 * this.interval + 1) % f.length];
                        c.stroke();
                        for (var q = 0; q < a; q++) l = b[q].x - b[a - 1].x, g = b[q].y - b[a - 1].y, k = l * l + g * g, 2E3 > k && 0.15 > this.rand.toDouble() && (c.beginPath(), c.moveTo(e.x + l * h, e.y + g * h), c.lineTo(e.x - l * h, e.y - g * h), c.strokeStyle = f[(2 * this.interval + 1) % f.length], c.stroke())
                    }
                }
            }
        };
        this.construct(g)
    });
    a.register("brush.hair", function (g) {
        this.construct = function (d) {
            this.type = "hair";
            this.opacity = d.opacity || 100;
            this.colors =
                d.colors || a.style.colors;
            this.composite = d.composite || "paint";
            this.lineWidth = d.lineWidth || 1;
            this.diameter = d.diameter || 30;
            this.spacing = d.spacing || [0, 10];
            this.lookback = d.lookback || 10;
            d.callback(this)
        };
        this.drawStart = function () {
            this.rand = new Random(this.seed || 1)
        };
        this.draw = function () {
            if (this.rand) {
                var a = this.ctx,
                    c = this.path,
                    b = this.colors,
                    f = this.diameter / 2,
                    h = this.diameter,
                    e = c.length,
                    l = c[e - 1];
                if (c[e - 2] || l)
                    for (a.lineCap = "round", a.lineWidth = this.lineWidth, l = 1; l < e; l++)
                        if (!(c.length - this.lookback > l)) {
                            var g =
                                c[l];
                            a.beginPath();
                            a.moveTo(this.px, this.py);
                            a.bezierCurveTo(g.x - that.rand.doubleRange(0, h), g.y - that.rand.doubleRange(0, h), g.x, g.y, g.x, g.y);
                            a.bezierCurveTo(g.x + that.rand.doubleRange(0, f), g.y, g.x, g.y - that.rand.doubleRange(0, f), g.x + that.rand.doubleRange(-h, h), g.y + that.rand.doubleRange(-f, f));
                            a.strokeStyle = b[(2 * this.interval + 1) % b.length];
                            a.stroke()
                        }
            }
        };
        this.construct(g)
    })
})(sketch);
(function (a) {
    a.register(["brush.oil", "brush.pastel"], function (d) {
        var c = this,
            b, f, h, e, l = {};
        this.construct = function (b) {
            this.opacity = b.opacity || 100;
            this.colors = b.colors || a.style.colors;
            this.rotate = b.rotate || {
                min: 0,
                max: 0
            };
            this.diameter = b.diameter || 30;
            this.bristles = b.bristles || 30;
            var e = this.diameter / 3;
            this.spacing = b.spacing || {
                min: e,
                max: e
            };
            this.blend = b.blend || 0.97;
            this.fill = b.fill || a.style.fill;
            b.callback(this)
        };
        this.drawStart = function () {
            var c = this.ctx;
            this.interval = this.interval || 0;
            this.rand = new Random(this.seed ||
                1);
            l[this.finger] = g(this);
            var d = c.canvas,
                q = this.bbox || {
                    x: 0,
                    y: 0
                };
            b = c.getImageData(0, 0, d.width, d.height);
            f = a.ctx.getImageData(q.x, q.y, d.width, d.height);
            h = b.data;
            e = f.data
        };
        this.drawEnd = function () {
            delete l[this.finger]
        };
        this.draw = function () {
            if (l[this.finger])
                for (var b = this.blend, f = 1 - b, d = l[this.finger], g = d.length, r = this.ctx.canvas.width, t = this.ctx.canvas.height, s = this.rotate.min, u = this.rotate.max, s = 0 === s && 0 === u ? 0 : (u - s) * this.rand.toDouble() + s, u = this.px >> 0, y = this.py >> 0, w = 0; w < g; w++) {
                    var v = d[w],
                        x = v.color;
                    if (s) var A = Math.cos(s) * v.x - Math.sin(s) * v.y >> 0,
                    C = Math.sin(s) * v.x + Math.cos(s) * v.y >> 0;
                    else A = v.x, C = v.y;
                    this.isRecording || (A += this.diameter / 2 + 2 * a.area.padding, C += this.diameter / 2 + 2 * a.area.padding);
                    v = 4 * ((y + C) * r + (u + A));
                    if (!(0 > u + A || u + A > r - 1 || 0 > y + C || y + C > t - 1))
                        if (h[v + 3]) {
                            var A = e[v + 0],
                                C = e[v + 1],
                                D = e[v + 2],
                                B = e[v + 3];
                            isFinite(A) || (A = h[v + 0]);
                            isFinite(C) || (C = h[v + 1]);
                            isFinite(D) || (D = h[v + 2]);
                            B < h[v + 3] && (B = h[v + 3]);
                            var F = x.r = x.r * b + A * f,
                                G = x.g = x.g * b + C * f,
                                z = x.b = x.b * b + D * f,
                                x = x.a * c.opacity / 100;
                            h[v + 0] = e[v + 0] = (F * x + A * (255 - x)) / 255;
                            h[v +
                                1] = e[v + 1] = (G * x + C * (255 - x)) / 255;
                            h[v + 2] = e[v + 2] = (z * x + D * (255 - x)) / 255;
                            x = x / 255 * B + x;
                            x > B && (h[v + 3] = x)
                        } else h[v + 0] = x.r, h[v + 1] = x.g, h[v + 2] = x.b, h[v + 3] = x.a
                }
        };
        this.postprocess = function (a) {
            this.ctx.putImageData(b, 0, 0)
        };
        this.construct(d)
    });
    var g = function (a) {
        var c = [],
            b = {}, f = a.diameter * a.bristles,
            h = a.diameter / 2 >> 0,
            e = a.colors[(2 * ++a.interval + 1) % a.colors.length];
        a.brushColor = e.substr(5, e.length - 6).split(",").map(function (a) {
            return parseInt(a)
        });
        a.brushColor[3] *= 255;
        for (var l = 0; l < f; l++) {
            a.fill.noise && (e = a.colors[(2 * ++a.interval +
                1) % a.colors.length], a.brushColor = e.substr(5, e.length - 6).split(",").map(function (a) {
                return parseInt(a)
            }), a.brushColor[3] *= 255);
            var g = a.rand.toDouble() * h,
                e = 1.5 - g / h,
                k = 2 * a.rand.toDouble() * Math.PI,
                q = Math.sin(k) * g + h + 0.5 >> 0,
                g = Math.cos(k) * g + h + 0.5 >> 0,
                k = q + "" + g;
            "undefined" === typeof b[k] && (b[k] = !0, c.push({
                x: q - h,
                y: g - h,
                color: {
                    r: a.brushColor[0],
                    g: a.brushColor[1],
                    b: a.brushColor[2],
                    a: 255 * e
                }
            }))
        }
        return c
    }
})(sketch);
(function (a) {
    a.register(["brush.crayon", "brush.stamp"], function (g) {
        var d = this;
        this.bitmap = {};
        this.getStampResource = function (c, b, f) {
            a.assets.getData(c) ? b(a.assets.getData(c)) : a.assets.add({
                src: c,
                onload: function (a, e) {
                    b(e)
                },
                onerror: f
            })
        };
        this.construct = function () {
            this.rand = new Random(this.seed || 1);
            this.diameter = g.diameter || 20;
            this.opacity = g.opacity || 100;
            this.colors = g.colors || a.style.colors;
            this.fill = g.fill || a.style.fill;
            this.composite = g.composite;
            this.speed = g.speed || void 0;
            this.rotate = g.rotate || {
                min: 0,
                max: 0
            };
            this.scale = g.scale || {
                min: 1,
                max: 1
            };
            this.translate = g.translate || {
                min: 0,
                max: 0
            };
            this.spacing = g.spacing || {
                min: this.diameter / 3,
                max: this.diameter / 3
            };
            this.pollock = g.pollock || !1;
            this.src = g.src || void 0;
            this.image = new Image;
            this.src ? this.getStampResource(this.src, function (c) {
                a.removeColorFromCanvas && a.removeColorFromCanvas(c);
                d.image = c;
                d.image.loaded = !0;
                d.image.error = !1;
                g.callback(d)
            }, function () {
                d.image.loaded = !0;
                d.image.error = !0;
                g.callback(d, "404")
            }) : g.callback(d);
            return this
        };
        this.drawStart = function () {
            this.scaleX =
                d.bbox && d.bbox.scale.x || 1;
            "crayon" === this.type && (this.fill.mode = "cycle", this.spacing = {
                min: this.diameter / 3,
                max: this.diameter / 3
            });
            var c = !a.detect.localAlpha.stamp,
                b = this.finger;
            this.rand = new Random(this.seed || 1);
            this.rr = this.rand.toDouble();
            this.sr = this.rand.toDouble();
            this.bitmap[b] = this.create();
            this.isRecording && c && (c = this.cache, c.canvas.width = this.ctx.canvas.width, c.canvas.height = this.ctx.canvas.height)
        };
        this.draw = function () {
            var c = !a.detect.localAlpha.stamp,
                b = this.isRecording && c && !this.isGhost ?
                    this.cache : this.isGhost || this.isRecording ? this.active : this.ctx,
                f = this.ratio,
                h = this.finger;
            if (this.bitmap[h]) {
                var h = this.bitmap[h],
                    e = h.canvas.width,
                    d = h.canvas.height,
                    g = e / 2,
                    k = d / 2;
                if (g && k) {
                    var q = this.translate.min || 1E-5,
                        p = this.translate.max || 1E-5;
                    if (0 === q && 0 === p) var r = 0,
                    q = 0;
                    else r = (p - q) * this.rand.toDouble() + q, q = (p - q) * this.rand.toDouble() + q;
                    var p = this.scale.min,
                        t = this.scale.max,
                        f = 1 === p && 1 === t ? f || 1E-5 : ((t - p) * this.rand.toDouble() + p) * f || 1E-5,
                        p = 0,
                        s = this.rotate.min,
                        t = this.rotate.max;
                    0 !== s && 0 !== t && (s <= t ? p =
                        (t - s) * this.rand.toDouble() + s : (p = s - t, s = (360 - p) * this.rand.toDouble(), p = s > t ? s + p : s));
                    this.pollock || b.save();
                    "cycle" === this.fill.mode && (t = this.colors.length, t = this.colors[Math.abs((2 * this.interval + 1) % (2 * t) - t)], t !== h.fillStyle && (h.fillStyle = t, h.fillRect(0, 0, e, d)));
                    b.translate(this.x - g * f, this.y - k * f);
                    1 !== f && b.scale(f, f);
                    0 !== p && (b.translate(g, k), b.rotate(p * DEG_RAD), b.translate(-g, -k));
                    c || (b.globalAlpha = this.opacity / 100);
                    b.translate(1 * r / f, 1 * q / f);
                    b.drawImage(h.canvas, 0, 0);
                    this.decorate && (b.beginPath(), b.fillStyle =
                        h.fillStyle, Vector.Shapes.star(b, 0, 0, 10, 5, 2), b.fill());
                    this.pollock || b.restore();
                    this.isRecording && c && (this.active.save(), this.active.globalAlpha = this.opacity / 100, this.active.globalCompositeOperation = "copy", this.active.drawImage(b.canvas, 0, 0), this.active.restore())
                }
            }
        };
        this.drawEnd = function () {
            delete this.bitmap[this.finger]
        };
        this.create = function () {
            var c = this.finger,
                b = Math.round(this.scale.max * this.diameter);
            if (!c || !b) return console.log("stamp error", c, b);
            if (this.bitmap[c]) var f = this.bitmap[c],
            h = f.canvas;
            else h = document.createElement("canvas"), f = h.getContext("2d"); if (this.src) {
                if (this.image.error) return f;
                var e = this.image.width,
                    d = this.image.height;
                e > b && (d *= b / e, e = b);
                d > b && (e *= b / d, d = b);
                var g = Math.sqrt(e * e + d * d);
                g > b && (b /= g, e *= b, d *= b);
                h.width = e;
                h.height = d;
                f.drawImage(this.image, 0, 0, e, d)
            } else {
                for (var e = h.width = b, d = h.height = b, h = f.getImageData(0, 0, e, d), b = h.data, g = 25 * this.diameter, k = this.diameter / 2, q = 0; q < g; q++) {
                    var p = this.rand.toDouble() * k,
                        r = 1.5 - p / k,
                        t = 2 * this.rand.toDouble() * Math.PI,
                        s = Math.sin(t) * p + k + 0.5 >> 0,
                        p = Math.cos(t) * p + k + 0.5 >> 0;
                    s >= e || 0 >= s || p >= d || 0 >= p || (b[4 * (p * e + s) + 3] = 255 * r)
                }
                f.putImageData(h, 0, 0)
            }
            f.globalCompositeOperation = "none" === this.fill[this.fill.type] ? "source-atop" : "source-in";
            f.fillStyle = a.style.createGradient(f, 0, 0, e, d, this);
            f.fillRect(0, 0, e, d);
            g = Math.sqrt(e * e + d * d);
            this.ratio = 1 / (g / this.diameter);
            return this.bitmap[c] = f
        };
        return this.construct()
    });
    a.removeColorFromCanvas = function (a) {
        var d, c, b;
        if (a.colorRemoved) {
            a.colorRemoved = !0;
            var f = a.getContext("2d");
            a = f.getImageData(0, 0, a.width, a.height);
            for (var h = a.data, e = h.length, l = 0; l < e; l += 4) {
                var m = h[l],
                    k = h[l + 1],
                    q = h[l + 2],
                    p = h[l + 3];
                b = Math.max(0, 0 < m ? 0 : m);
                c = Math.max(0, 0 < k ? 0 : k);
                d = Math.max(0, 0 < q ? 0 : q);
                h[l] = 0;
                h[l + 1] = 0;
                h[l + 2] = 0;
                c -= k;
                d -= q;
                b = 0.33 * Math.abs(b - m) + 0.33 * Math.abs(c) + 0.33 * Math.abs(d);
                h[l + 3] = p - b
            }
            f.putImageData(a, 0, 0)
        }
    }
})(sketch);
(function (a) {
    a.register("brush.streamer", function (g) {
        var d = {}, c = function (a, c, h, e) {
                var g = 0.2 * d[c].thickness,
                    m = d[c].cos,
                    k = d[c].sin,
                    q = d[c].color;
                a.beginPath();
                a.fillStyle = q;
                a.strokeStyle = q;
                a.arc(h, e, g, 0, 2 * Math.PI, !0);
                a.moveTo(d[c].x + m, d[c].y + k);
                a.lineTo(h + 0.2 * m, e + 0.2 * k);
                a.lineTo(h - 0.2 * m, e - 0.2 * k);
                a.lineTo(d[c].x - m, d[c].y - k);
                a.lineTo(d[c].x + m, d[c].y + k);
                a.fill();
                a.stroke()
            };
        this.construct = function (b) {
            this.opacity = b.opacity || 100;
            this.colors = b.colors || a.style.colors;
            this.composite = b.composite || "paint";
            this.spacing =
                b.spacing || [0, 0];
            b.callback(this)
        };
        this.drawStart = function () {
            var a = this.finger,
                c = this.isRecording;
            100 === this.opacity && (c = !1);
            this.isGhost && (c = !0);
            c && (c = this.cache, c.canvas.width = this.ctx.canvas.width, c.canvas.height = this.ctx.canvas.height);
            d[a] = {};
            d[a].x = this.x;
            d[a].y = this.y;
            d[a].px = this.x;
            d[a].py = this.y;
            d[a].time = (new Date).getTime();
            d[a].vectorx = 0;
            d[a].vectory = 0;
            d[a].thickness = 0;
            d[a].rotation = Math.PI / 2
        };
        this.draw = function () {
            var a = this.finger;
            if ("undefined" !== typeof d[a]) {
                var f = this.isRecording;
                100 === this.opacity && (f = !1);
                this.isGhost && (f = !0);
                var h = this.colors.length,
                    h = this.colors[Math.abs((2 * this.interval + 1) % (2 * h) - h)],
                    e = f ? this.cache : this.ctx,
                    g = this.x - d[a].px,
                    m = this.y - d[a].py,
                    k = (new Date).getTime();
                if (5 < Math.abs(g) || 5 < Math.abs(m)) {
                    0 > g * d[a].vectorx + m * d[a].vectory && (c(e, a, this.px, this.py), d[a].x = d[a].px = this.px, d[a].y = d[a].py = this.py, d[a].rotation += Math.PI, d[a].thickness *= 0.2);
                    d[a].x += 0.42 * (this.x - d[a].x);
                    d[a].y += 0.42 * (this.y - d[a].y);
                    var q = d[a].x - d[a].px,
                        p = d[a].y - d[a].py,
                        r = Math.sqrt(q * q + p *
                            p),
                        q = 0 !== r ? Math.PI / 2 + Math.atan2(p, q) : 0,
                        p = d[a].thickness + 0.42 * (0.25 + 0.12 * r - d[a].thickness),
                        t = Math.sin(d[a].rotation),
                        s = Math.cos(d[a].rotation),
                        u = Math.sin(q),
                        y = Math.cos(q),
                        w = d[a].thickness * t,
                        v = d[a].thickness * s,
                        u = p * u,
                        y = p * y,
                        t = 0.33 * r * t,
                        x = -0.33 * r * s,
                        r = d[a].px + v + t,
                        s = d[a].py + w + x,
                        t = d[a].px - v + t,
                        x = d[a].py - w + x;
                    e.beginPath();
                    e.fillStyle = h;
                    e.strokeStyle = h;
                    e.moveTo(d[a].px + v, d[a].py + w);
                    e.quadraticCurveTo(r, s, d[a].x + y, d[a].y + u);
                    e.lineTo(d[a].x - y, d[a].y - u);
                    e.quadraticCurveTo(t, x, d[a].px - v, d[a].py - w);
                    e.lineTo(d[a].px +
                        v, d[a].py + w);
                    e.fill();
                    e.stroke();
                    d[a].color = h;
                    d[a].px = d[a].x;
                    d[a].py = d[a].y;
                    d[a].rotation = q;
                    d[a].thickness = p;
                    d[a].vectorx = g;
                    d[a].vectory = m;
                    d[a].cos = y;
                    d[a].sin = u;
                    d[a].time = k;
                    f && (this.active.save(), this.active.globalAlpha = this.opacity / 100, this.active.globalCompositeOperation = "copy", this.active.drawImage(e.canvas, 0, 0), this.active.restore())
                }
            }
        };
        this.drawEnd = function () {
            var a = this.finger;
            "undefined" !== typeof d[a] && (c(this.ctx, a, this.x, this.y), delete d[a])
        };
        this.construct(g)
    })
})(sketch);
(function (a) {
    a.register("brush.spirograph", function (g) {
        var d = !0,
            c = 0,
            b = 1,
            f, h, e = 0;
        this.construct = function (b) {
            this.opacity = b.opacity || 100;
            this.colors = b.colors || a.style.colors;
            this.composite = b.composite || "paint";
            this.lineWidth = b.lineWidth || 1;
            this.distance = b.distance || 30;
            this.spacing = b.spacing || [0, 10];
            this.contract = b.contract || 0;
            this.increment = b.increment || 1;
            this.outerRadius = b.outerRadius || 10.2;
            this.innerRadius = b.innerRadius || 3.2;
            this.speed = Math.round(b.speed || 100);
            b.callback(this)
        };
        this.drawStart = function () {
            c =
                e = 0;
            b = this.increment;
            h = f = void 0
        };
        this.draw = function () {
            var a = this.isRecording ? this.active : this.ctx,
                g = this.innerRadius,
                k = this.outerRadius;
            0 === this.contract && (e = this.distance);
            a.globalAlpha = this.opacity / 100;
            a.lineWidth = this.lineWidth;
            for (var q = this.speed; q--;) {
                if (e > this.distance || 0 > e) d = !d;
                d ? (c -= b, e -= this.contract) : (c += b, e += this.contract);
                var p = (k - g) / g * c,
                    r = (k - g) * Math.cos(c) + e * Math.cos(p),
                    p = (k - g) * Math.sin(c) - e * Math.sin(p),
                    r = r + this.x,
                    p = p + this.y;
                if (f) {
                    a.beginPath();
                    a.moveTo(f, h);
                    a.lineTo(r, p);
                    var t = this.colors.length,
                        t = this.colors[Math.abs((2 * this.interval + 1) % (2 * t) - t)];
                    a.strokeStyle = t;
                    a.stroke()
                }
                f = r;
                h = p
            }
        };
        this.construct(g)
    })
})(sketch);
(function (a) {
    var g = {}, d;
    a.register("brush.spraypaint", function (c) {
        var b = this,
            f = 2 * Math.PI,
            h = 0.5 * Math.PI,
            e = [],
            l = 0,
            m = 2,
            k = {}, q = void 0;
        this.create = function (a, b) {
            var c = a.diameter,
                e = document.createElement("canvas"),
                f = e.getContext("2d");
            e.width = a.image.width = c;
            e.height = a.image.height = c;
            f.drawImage(a.image, 0, 0, c, c);
            return f
        };
        this.bitmap = {};
        this.onerror = function () {
            b.image.loaded = !0;
            b.image.error = !0;
            c.callback(b, "404")
        };
        this.onload = function () {
            b.image.loaded = !0;
            c.callback(b)
        };
        this.construct = function (c) {
            this.rand =
                new Random(this.seed || 1);
            this.opacity = c.opacity || 100;
            this.colors = c.colors || a.style.colors;
            this.fill = c.fill || a.style.fill;
            this.composite = c.composite;
            this.spacing = c.spacing || [0, 0];
            this.diameter = c.diameter || 50;
            this.dripDistance = c.drip_distance || 30;
            this.speed = Math.round( !! c.speed && c.speed.value || 20);
            this.src = c.src || "./media/stamp/Basic/1-live.png", g[this.src] ? g[this.src].loaded ? (this.image = g[this.src], c.callback(b)) : (this.image = g[this.src], Event.add(this.image, "error", this.onerror), Event.add(this.image,
                "load", this.onload)) : (this.src.split("/"), this.src.split("/"), this.image = new Image, Event.add(this.image, "error", this.onerror), Event.add(this.image, "load", this.onload), this.image.src = this.src, g[this.src] = this.image);
            this.enable()
        };
        this.disable = function () {
            b.active = !1;
            d && d.remove()
        };
        this.enable = function () {
            b.active = !0;
            d || (d = Event.add(window, "deviceorientation", b.deviceOrientation, !1))
        };
        this.dripInterval = function () {
            if (a.feature.canvas.editable) a.feature.debug && console.log("drip disabled");
            else {
                for (var c =
                    0; c < e.length; c++) {
                    var f = e[c];
                    f.update();
                    f.gamma < f.threshold && f.beta < f.threshold || (e.splice(c, 1), --c)
                }
                b.active && b.animating && requestAnimationFrame(b.dripInterval)
            }
        };
        this.deviceOrientation = function (a) {
            if ("undefined" !== typeof window.orientation) {
                var b = window.orientation / 180;
                0.5 === b ? (b = -(a.gamma / 90), a = a.beta / 90) : -0.5 === b ? (b = a.gamma / 90, a = -(a.beta / 90)) : 1 === b ? (b = -(a.beta / 90), a = -(a.gamma / 90)) : (b = a.beta / 90, a = a.gamma / 90);
                l = 5 * a;
                m = 5 * b
            } else m = 3 * (a.beta / 90) + 1.5, l = 5 * (a.gamma / 90)
        };
        this.drawStart = function () {
            this.rand =
                new Random(this.seed || 1);
            this.bitmap = this.create(this, c);
            k[this.finger] = {
                interval: this.interval + 1,
                scale: 0,
                scaleRatio: 1,
                stepOneVal: 0,
                dripFrameCount: 0,
                prevDist: 0,
                dripPoint: {
                    x: this.x,
                    y: this.y
                },
                prevPoint: {
                    x: this.x,
                    y: this.y
                }
            }
        };
        this.drawEnd = function () {
            delete k[this.finger];
            for (var a in k) break;
            "undefined" === typeof a && (this.animating = !1, cancelAnimationFrame(this.dripInterval), e = [])
        };
        this.draw = function () {
            var b = this.bitmap,
                c = k[this.finger];
            if (c && c.dripPoint) {
                var d = this.colors.length,
                    d = this.colors[Math.abs((2 *
                        this.interval + d + 1) % (2 * d) - d)];
                if (q !== d && d || c.interval === this.interval) {
                    var g = b.canvas;
                    b.globalCompositeOperation = "source-in";
                    b.fillStyle = d || a.style.fill.color;
                    b.fillRect(0, 0, g.width, g.height);
                    q = d
                }
                2 < this.path.length && !this.animating && (this.animating = !0, requestAnimationFrame(this.dripInterval));
                d = this.x - c.prevPoint.x;
                g = this.y - c.prevPoint.y;
                c.prevDist = Math.sqrt(d * d + g * g);
                c.prevPoint = {
                    x: this.x,
                    y: this.y
                };
                d = this.x - c.dripPoint.x;
                g = this.y - c.dripPoint.y;
                20 > Math.sqrt(d * d + g * g) ? 15 === ++c.dripFrameCount && this.dripDistance &&
                    (c.dripFrameCount = 0, e.push(new p({
                    x: this.x,
                    y: this.y
                }))) : (c.dripFrameCount = 0, c.dripPoint = {
                    x: this.x,
                    y: this.y
                });
                d = Math.max((30 - c.prevDist) / 30, 0);
                d = Math.max(1E-5, c.scaleRatio * c.scale * d);
                c.stepOneVal < h && (c.scale = Math.sin(c.stepOneVal), c.stepOneVal += 0.1);
                var c = 0.5 * this.diameter,
                    g = 0.5 * this.diameter,
                    l = c * d,
                    m = g * d,
                    v = this.isRecording || this.isGhost ? this.active : this.ctx;
                v.save();
                v.translate(this.x - l, this.y - m);
                v.scale(d, d);
                v.translate(c, g);
                v.rotate(this.rand.toDouble() * f);
                v.translate(-c, -g);
                v.globalAlpha = this.opacity /
                    100;
                v.drawImage(b.canvas, 0, 0);
                v.restore()
            }
        };
        var p = function (c) {
            var e = b.isGhost ? b.active : b.ctx,
                h = "disco" === b.composite,
                d = a.style.getComposite(b.composite),
                g = b.interval,
                k = b.opacity,
                p = 1,
                x = b.diameter,
                A = 0.05 * b.rand.toDouble() * x + 1,
                C = 5 * (A / x),
                D = b.rand.toDouble() * A,
                B = 0;
            this.color = q;
            this.threshold = x * b.rand.toDouble();
            this.update = function () {
                p -= 0.0050;
                0.5 > p && (p = 0.5);
                var a = Math.max(1E-5, p * C),
                    q = x / 2,
                    z = q * a,
                    A = x / 2 * a;
                e.save();
                e.globalAlpha = b.opacity / 100;
                e.globalCompositeOperation = h ? 0 === g++ % 2 ? "lighter" : "source-over" :
                    d;
                e.translate(c.x - z + D, c.y - A + B);
                e.scale(a, a);
                e.globalAlpha = k / 100;
                e.beginPath();
                e.fillStyle = this.color;
                e.arc(q, x, q, 0, f, !0);
                e.fill();
                e.restore();
                D += 2 * b.rand.toDouble() - 1 + l;
                B += m;
                this.beta++;
                this.gamma++
            };
            this.beta = this.gamma = 0
        };
        this.construct(c)
    })
})(sketch);
(function (a) {
    a.register("brush.textbrush", function (g) {
        var d = 0,
            c = 0;
        this.construct = function (b) {
            this.opacity = b.opacity || 100;
            this.colors = b.colors || a.style.colors;
            this.fontFamily = b.fontFamily || "Georgia";
            this.fontSize = b.fontSizeFloor || {
                min: 10,
                max: 100
            };
            this.composite = b.composite || "paint";
            this.content = b.content || "The quick brown fox.";
            this.spacing = b.spacing || [0, 10];
            b.callback(this)
        };
        this.drawStart = function () {
            d = this.x;
            c = this.y
        };
        this.draw = function () {
            var a = this.ctx,
                f = this.colors,
                h = this.x - d,
                e = this.y - c;
            this.isRecording ||
                (h += 7, e += 7);
            var g = Math.sqrt(h * h + e * e);
            a.save();
            a.font = Math.max(this.fontSize.min, g / 2) + "px " + this.fontFamily;
            a.fillStyle = f[(2 * this.interval + 1) % f.length];
            var f = this.content[this.interval % this.content.length],
                m = a.measureText(f).width;
            g > m && (h = Math.atan2(e, h), a.translate(d, c), a.rotate(h), a.fillText(f, 0, 0), d += Math.cos(h) * m, c += Math.sin(h) * m);
            a.restore()
        };
        this.construct(g)
    })
})(sketch);
(function (a) {
    a.register("brush.calligraphy", function (g) {
        this.construct = function (d) {
            this.opacity = isFinite(d.opacity) ? d.opacity : 100;
            this.colors = d.colors || a.style.colors;
            this.composite = d.composite || "paint";
            this.diameter = isFinite(d.diameter) ? d.diameter : 30;
            this.spacing = d.spacing || [0, 0];
            d.callback(this)
        };
        this.drawStart = function () {
            if (this.isRecording) {
                var a = this.cache;
                a.canvas.width = this.ctx.canvas.width;
                a.canvas.height = this.ctx.canvas.height
            }
        };
        this.draw = function () {
            var a = this.isRecording;
            100 === this.opacity &&
                (a = !1);
            this.isGhost && (a = !0);
            var c = a ? this.cache : this.ctx,
                b = this.colors.length,
                b = this.colors[Math.abs((2 * this.interval + 1) % (2 * b) - b)],
                f = this.diameter;
            c.save();
            c.beginPath();
            c.lineCap = "round";
            c.translate(-f / 2, 0);
            c.moveTo(this.px, this.py);
            c.lineTo(this.px + f, this.py - f / 2);
            c.lineTo(this.x + f, this.y - f / 2);
            c.lineTo(this.x, this.y);
            c.closePath();
            c.strokeStyle = b;
            c.stroke();
            c.fillStyle = b;
            c.fill();
            c.restore();
            a && (this.active.save(), this.active.globalAlpha = this.opacity / 100, this.active.globalCompositeOperation = "copy",
                this.active.drawImage(c.canvas, 0, 0), this.active.restore())
        };
        this.construct(g)
    });
    a.register("brush.pencil", function (g) {
        this.construct = function (d) {
            this.opacity = isFinite(d.opacity) ? d.opacity : 100;
            this.colors = d.colors || a.style.colors;
            this.composite = d.composite || "paint";
            this.diameter = isFinite(d.diameter) ? d.diameter : 30;
            this.spacing = d.spacing || [0, 0];
            this.useSmooth = !0;
            d.callback(this);
            return this
        };
        this.render = function (d) {
            var c = this.path.length,
                b = this.isRecording ? this.active : this.ctx,
                f = this.diameter;
            b.save();
            b.beginPath();
            this.isRecording ? (b.globalAlpha = this.opacity / 100, b.globalCompositeOperation = a.style.getComposite(this.composite)) : b.globalAlpha = 1;
            if (this.isRecording && !this.useSmooth)
                for (var h = 0; h < c; h++) {
                    var e = this.path[h];
                    "M" === e.cmd ? (b.moveTo(e.x, e.y), b.lineTo(e.x + 0.1, e.y + 0.1)) : b.lineTo(e.x, e.y)
                } else a.vector.catmullRomSpline({
                    path: this.path,
                    tension: 0,
                    ctx: b
                });
            b.lineCap = "round";
            b.lineJoin = "round";
            b.lineWidth = f;
            b.stroke();
            "gradient" === this.fill.type ? a.vector.trackGradientBBox(this, 0, d && d.bbox ? d.bbox.scale.x :
                1) : this.stroke && (b.strokeStyle = this.strokeStyle, b.lineWidth = this.lineWidth, b.stroke());
            b.restore()
        };
        return this.construct(g)
    });
    a.register(["brush.eraser", "brush.paintbrush"], function (g) {
        this.bitmap = {};
        this.construct = function (d) {
            this.opacity = isFinite(d.opacity) ? d.opacity : 100;
            this.colors = d.colors || a.style.colors;
            this.composite = d.composite || "paint";
            this.diameter = isFinite(d.diameter) ? d.diameter : 30;
            this.blur = isFinite(d.blur) ? d.blur : 10;
            this.spacing = d.spacing || [0, 0];
            this.useSmooth = !0;
            d.callback(this);
            return this
        };
        this.render = function (d) {
            var c = this.isRecording,
                b = "eraser" === this.type,
                f = !b,
                h = this.path.length,
                e = c ? this.active : this.ctx,
                b = b ? "#000" : this.colors[1 % this.colors.length],
                g = this.diameter,
                m = this.blur;
            if (d && d.bbox) {
                var k = d.bbox.scale.x;
                d = d.bbox.width + (2.5 + a.area.padding) / k
            } else k = 1, d = screen.width + g / 2;
            e.save();
            e.beginPath();
            c ? (e.globalAlpha = this.opacity / 100, e.globalCompositeOperation = a.style.getComposite(this.composite)) : e.globalAlpha = 1;
            if (c && !this.useSmooth)
                for (c = 0; c < h; c++) {
                    var q = this.path[c];
                    "M" === q.cmd ?
                        (e.moveTo(q.x, q.y), e.lineTo(q.x + 0.1, q.y + 0.1)) : e.lineTo(q.x, q.y)
                } else e.translate(-d, 0), a.vector.catmullRomSpline({
                    path: this.path,
                    tension: 0,
                    ctx: e
                });
            e.lineCap = "round";
            e.lineJoin = "round";
            e.lineWidth = g;
            e.shadowOffsetX = d * k;
            e.shadowOffsetY = 0;
            e.shadowBlur = m * k;
            e.shadowColor = b;
            e.strokeStyle = "#000";
            e.stroke();
            f && "gradient" === this.fill.type && a.vector.trackGradientBBox(this, d, k);
            e.restore()
        };
        return this.construct(g)
    });
    a.vector.trackGradientBBox = function (g, d, c, b) {
        var f = g.isRecording ? g.active : g.ctx,
            h = g.blur || 0,
            e = (g.diameter || 0) + h,
            l = e / 2;
        if (g.bbox) b = a.render.cache.enabled ? {
            x1: 0,
            y1: 0,
            x2: g.bbox.width / g.bbox.scale.x,
            y2: g.bbox.height / g.bbox.scale.y
        } : {
            x1: g.bbox.x,
            y1: g.bbox.y,
            x2: g.bbox.x + g.bbox.width,
            y2: g.bbox.y + g.bbox.height
        };
        else if (g.isRecording && !b) {
            var m = g.path,
                k = m.length;
            2 >= k && delete g._bbox;
            b = g._bbox || {
                x1: Infinity,
                y1: Infinity,
                x2: -Infinity,
                y2: -Infinity
            };
            var q = l,
                h = l + h + a.area.padding,
                m = m[k - 1];
            m.x < b.x1 + q && (b.x1 = m.x - q);
            m.y < b.y1 + q && (b.y1 = m.y - q);
            m.x > b.x2 - h && (b.x2 = m.x + h);
            m.y > b.y2 - h && (b.y2 = m.y + h);
            g._bbox = b
        }
        g.fill.mode =
            "linear";
        f.save();
        f.beginPath();
        f.globalAlpha = 1;
        f.globalCompositeOperation = "source-atop";
        f.translate(d, 0);
        g.isRecording ? (f.fillStyle = a.style.createGradient(f, b.x1 * c, b.y1 * c, b.x2 * c, b.y2 * c, g), f.fillRect(0 - l, 0 - l, b.x2 + e, b.y2 + e)) : (d = a.render.cache.padding, l += d, f.fillStyle = a.style.createGradient(f, b.x1 * c + d - l, b.y1 * c + d - l, b.x2 * c + d - l, b.y2 * c + d - l, g), f.fillRect(b.x1 - l, b.y1 - l, b.x2 + 2 * e, b.y2 + 2 * e));
        f.restore()
    };
    return a
})(sketch);
"undefined" === typeof sketch && (sketch = {});
sketch = function (a) {
    a.camera = function (a) {
        var d = this,
            c = function (b, c) {
                b = b || {};
                if (globalExists("gapi.hangout.getLocalParticipantId")) {
                    var e = gapi.hangout.getLocalParticipantId(),
                        e = gapi.hangout.layout.createParticipantVideoFeed(e),
                        f = gapi.hangout.layout.getVideoCanvas();
                    f.setVideoFeed(e);
                    console.log(f)
                }
                var h = b.video || a.rtc.getFocusVideo();
                a.rtc.arrange.setSize(h, 1280, 960, 0, !0, !0);
                var f = document.createElement("canvas"),
                    d = f.getContext("2d");
                h.gl.render(null, function () {
                    f.width = 1280;
                    f.height = 960;
                    d.drawImage(h.gl.getComposite(),
                        0, 0);
                    if (!b.width && !b.height) {
                        var e = a.rtc.arrange.setSize(h, 320, 240, 1, !0);
                        a.rtc.arrange.setPosition(h, 1280 - e.width - 1, 960 - e.height)
                    }
                    c && c(f)
                })
            }, b = function () {
                e.className = "fadein";
                setTimeout(function () {
                    e.className = "fadeout";
                    setTimeout(function () {
                        e.style.display = "none";
                        a.loader.update(a.loader.camera, "taking photo...", 100);
                        delete a.loader.camera
                    }, 200);
                    c({
                        video: l
                    }, function (b) {
                        a.area.inGenesisChannel = !0;
                        a.reset.configure("image");
                        a.actions.deselectAll();
                        a.place({
                            fromSocket: q,
                            type: "image",
                            src: b
                        }, function () {
                            a.feature.stream.videoAtop ?
                                a.rtc.arrange() : a.rtc.pause(l.id);
                            if (q) {
                                var b = a.actions.getFocused();
                                a.actions.deselect(b.zIndex);
                                a.setTool(p)
                            } else a.run("select"), a.ui.buildConfigure(a.tool.type, !0);
                            f && f();
                            d.capturing = !1
                        })
                    })
                }, 100)
            }, f, h = function (c, h, s, u, y, w) {
                l = a.rtc.getFocusVideo(s);
                if (!l) return console.log("missing base stream");
                l.filterId = u = u || l.filterId || 0;
                a.loader.camera = a.loader.camera || a.loader.add("taking photo...");
                d.capturing = !0;
                f = y;
                m = c || a.canvas2d.width;
                k = h || a.canvas2d.height;
                p = a.tool.type || "select";
                q = w;
                a.dataChannel && !q && a.dataChannel.send(["take-snapshot", m, k, s, u]);
                e.style.display = "block";
                setTimeout(b, 1)
            }, e = document.createElement("div");
        e.id = "snapshot";
        e.style.display = "none";
        document.body.appendChild(e);
        var l, m, k, q, p;
        this.capturing = !1;
        this.capture = function () {
            h.call(arguments)
        };
        return this
    };
    return a
}(sketch);
(function (a) {
    a.register("eyeDropper", function (g) {
        var d = this;
        this.type = "eyeDropper";
        this.enabled = !1;
        var c = document.querySelector("#toolbar .center");
        document.createElement("div").style.cssText = "height: 100%; float: left; line-height: 36px; margin: 0 0 0 10px;";
        this.enable = function () {
            !0 !== d.enabled && (d.enabled = !0, d.onDblTap = Event.proxy.dbltap({
                    target: window,
                    fingers: 1,
                    listener: d.mouse
                }), d.onDrag = Event.proxy.drag({
                    position: "relative",
                    target: window,
                    fingers: 1,
                    listener: d.mouse
                }), a.toolkit.select && a.tool !==
                a.toolkit.select && a.toolkit.select.enable({
                    mouse: !1,
                    key: !0
                }), c = document.querySelector("#toolbar .menu"))
        };
        this.disable = function () {
            !1 !== d.enabled && (d.enabled = !1, d.onDrag.remove(), d.onDblTap.remove(), a.toolkit.select && a.tool !== a.toolkit.select && a.toolkit.select.disable({
                mouse: !1,
                key: !0
            }))
        };
        this.mouse = function (b, f) {
            Event.prevent(b);
            if ("drag" !== f.gesture) {
                var h = Event.proxy.getCoord(b),
                    e = Event.proxy.getBoundingBox(a.active.canvas);
                f.x = h.x + (e.scrollLeft - e.x1);
                f.y = h.y + (e.scrollTop - e.y1)
            }
            if (sketch.__enabled) e =
                a.ctx.getImageData(f.x, f.y, 2, 2).data;
            else {
                var h = a.rtc.getFocusVideo().gl.ctx,
                    d = h.canvas.width,
                    e = h.canvas.height,
                    g = parseInt(h.canvas.style.width || d),
                    k = parseInt(h.canvas.style.height || e),
                    q = parseInt(h.canvas.style.left || 0),
                    p = parseInt(h.canvas.style.top || 0),
                    d = (f.x - q) * (d / g) >> 0,
                    k = (k - (f.y - p)) * (e / k) >> 0,
                    e = new Uint8Array(16);
                h.readPixels(d, k, 2, 2, h.RGBA, h.UNSIGNED_BYTE, e)
            }
            h = {};
            for (k = 0; k < e.length; k++) p = k % 4, h[p] = void 0 === h[p] ? e[k] : (h[p] + e[k]) / 2;
            "down" === f.state && (c.style.webkitTransitionDuration = 0);
            e = Color.Space(h,
                "RGBA>W3");
            c.style.background = e;
            if (255 === h[3]) {
                if ("up" === f.state || "dbltap" === f.gesture) c.style.webkitTransitionDuration = "250ms", e = Color.Space(h, "RGBA>W3"), a.tool.setColor(e);
                "dbltap" === f.gesture && a.run(a.tool.lastType)
            }
        };
        return a.initToolkit(this)
    })
})(sketch);
(function (a) {
    a.register("laserPointer", function (d) {
        var c = this;
        this.type = "laserPointer";
        this.vibrate = navigator.vibrate || g;
        this.vibrating = !1;
        this.users = {};
        this.enable = function () {
            c.onDrag = Event.add(window, "drag", this.mouse);
            a.toolkit.select && a.tool !== a.toolkit.select && a.toolkit.select.enable({
                mouse: !1,
                key: !0
            })
        };
        this.disable = function () {
            c.onDrag && c.onDrag.remove();
            a.toolkit.select && a.tool !== a.toolkit.select && a.toolkit.select.disable({
                mouse: !1,
                key: !0
            })
        };
        this.mouse = function (b, f, h) {
            h = h || a.style.fill.color;
            b && ("down" === f.state ? Event.prevent(b) : Event.stop(b));
            var e = a.getMouseId(b, f),
                d = e.split(":")[0],
                g = c.users[d];
            g || (g = c.users[d] = {});
            g[e] = {
                state: f.state,
                x: f.x,
                y: f.y,
                identifier: e,
                color: h
            };
            a.dataChannel && (a.feature.stream.sketchLive && b) && (g = c.users[d][e], a.dataChannel.send(["laserPointer", g.state + "," + g.x + "," + g.y + "," + g.identifier, a.style.fill.color]));
            if ("up" === f.state && (g = c.users[d])) {
                delete g[e];
                for (var k in g) break;
                k || delete c.users[k]
            }
            f = rtc && rtc._me && rtc._me.index || 0;
            k = c.users;
            b = k[f];
            h = a.active;
            h.canvas.width =
                h.canvas.width;
            for (d in k)
                for (e in g = k[d], g) {
                    var q = g[e];
                    h.save();
                    h.beginPath();
                    h.lineWidth = 1;
                    h.shadowColor = q.color;
                    h.shadowBlur = 15;
                    h.shadowOffsetX = 0;
                    h.shadowOffsetY = 0;
                    h.arc(q.x, q.y, 6, 0, 2 * Math.PI, !0);
                    h.fillStyle = q.color;
                    h.strokeStyle = "rgba(255,255,255,0.5)";
                    h.fill();
                    h.stroke();
                    h.restore();
                    h.beginPath();
                    h.arc(q.x, q.y, 7, 0, 2 * Math.PI, !0);
                    h.strokeStyle = "rgba(0,0,0,0.5)";
                    h.stroke();
                    if (parseInt(d) !== f && !c.vibrating) {
                        h.beginPath();
                        for (var p in b) {
                            var r = b[p];
                            h.arc(r.x, r.y, 10, 0, 2 * Math.PI, !0)
                        }
                        h.isPointInPath(q.x,
                            q.y) && (c.vibrate(250), c.vibrating = !0, setTimeout(function () {
                            c.vibrating = !1
                        }, 500))
                    }
                }
        };
        return a.initToolkit(this)
    });
    var g = function (a) {
        console.log("vibrate:", a)
    }
})(sketch);
(function (a) {
    a.register("move", function () {
        var g = this;
        this.enable = function () {
            Event.add(window, "drag", this.mouse);
            a.canvas2d.container.style.cursor = "move";
            a.tool !== a.toolkit.select && a.toolkit.select.enable({
                mouse: !1,
                key: !0
            })
        };
        this.disable = function () {
            Event.remove(window, "drag", this.mouse);
            a.canvas2d.container.style.cursor = "default";
            a.tool !== a.toolkit.select && a.toolkit.select.disable({
                mouse: !1,
                key: !0
            })
        };
        this.mouse = function (d, c) {
            var b = a.canvas2d.scale,
                f = (c.start.x - c.x) / b,
                b = (c.start.y - c.y) / b;
            switch (c.state) {
            case "down":
                a.actions.selectAll();
                a.actions.move(0, 0, "cache");
                break;
            case "move":
                a.actions.move((g.movex || 0) - f, (g.movey || 0) - b);
                break;
            case "up":
                if (c.start.x === c.x && c.start.y === c.y) break;
                a.actions.move(0, 0, "record");
                a.actions.deselectAll()
            }
            g.movex = f;
            g.movey = b;
            a.render.actions("root.move");
            Event.cancel(d)
        };
        return this
    })
})(sketch);
(function (a) {
    a.register("select", function (g) {
        var d = this;
        this.id = "select";
        this.rect = {};
        this.isMoving = !1;
        this.points = {};
        this.copied = {};
        this.enabled = this.cancelSelection = !1;
        this.construct = function () {
            this.ctx = g.layer0.ctx;
            this.active = g.active.ctx;
            this.cache = g.cache.ctx
        };
        this.enable = function (b) {
            d.enabled || (b = b || {}, d.cancelSelection = b.cancelSelection || !1, d.search = b.search || "", "boolean" !== typeof b.mouse && (b.mouse = !0), "boolean" !== typeof b.key && (b.key = !0), "boolean" !== typeof b.cursor && (b.cursor = !0), b.mouse &&
                (d.onMenu = Event.add(this.active.canvas, "contextmenu", this.contextMenu), d.onLongPress = Event.proxy.longpress({
                    timeout: 750,
                    driftDeviance: "touch" === Event.pointerType ? 5 : 1,
                    target: this.active.canvas,
                    listener: this.contextMenu
                }), d.onDrag = Event.proxy.drag({
                    fingers: 1,
                    target: this.active.canvas,
                    listener: this.mouseEvent
                }), b.cursor && (d.onCursorEvent = Event.add(this.active.canvas, "mousemove", this.cursorEvent))), b.key && (Event.add(window, "keydown", a.keydown), Event.add(window, "keyup", a.keyup)), d.enabled = !0)
        };
        this.disable =
            function (b) {
                d.enabled && (b || (b = {}), "undefined" === typeof b.mouse && (b.mouse = !0), "undefined" === typeof b.key && (b.key = !0), "undefined" === typeof b.cursor && (b.cursor = !0), b.mouse && (d.onCursorEvent && d.onCursorEvent.remove(), d.onDrag && d.onDrag.remove(), d.onMenu && d.onMenu.remove(), d.onLongPress && d.onLongPress.remove()), b.key && (Event.remove(window, "keydown", a.keydown), Event.remove(window, "keyup", a.keyup)), d.active.canvas.title = "", d.enabled = !1)
        };
        this.findSingleAction = function (b, c, e) {
            var g = "select" === a.tool.id;
            e =
                e || !1;
            var m = a.feature.canvas.editable;
            b = a.actions.getPointInCanvas(b);
            for (var k = a.area.padding, q = a.render.cache.padding, p = a.actions.selection, r = d.search, t, s, u = c.length; u--;) {
                var y = c[u],
                    w = y.bbox;
                if (w) {
                    var v = "button" === y.type;
                    if (!v) {
                        if (!m) continue;
                        if (r && y.type !== r) continue
                    }
                    var x = a.actions.getPointInAction(y, b),
                        A = x.bbox_x,
                        C = x.bbox_y,
                        D = x.bbox_width,
                        B = x.bbox_height;
                    if (x.x > A && x.y > C && x.x < A + D && x.y < C + B) {
                        var F = a.feature[y.type] || a.feature.tools;
                        if (v)
                            if (!1 === e && "boundingBox" === y.id && g) continue;
                            else return u;
                            else if (e && p[y.zIndex] || y.ctx && (y = y.ctx, A = ((x.x - A) * w.scale.x >> 0) - k + q, x = ((x.y - C) * w.scale.y >> 0) - k + q, F.usePointInPath && y.isPointInPath(A, x) || F.usePointInImageData && 8 < y.getImageData(A, x, 1, 1).data[3])) return u;
                        F.usePointInBoundingBox && (w = D * w.scale.x * B * w.scale.y, void 0 === s || s >= w) && (t = u, s = w)
                    }
                }
            }
            return t
        };
        this.findMultipleActions = function (b, h) {
            if (a.feature.canvas.editable) {
                b || (b = d.tmp.event);
                h || (h = d.tmp.self);
                d.state = h.state;
                d.tmp.event = b;
                d.tmp.self = h;
                var e = a.canvas2d,
                    g = e.scale / e.pixelRatio,
                    m = d.rect;
                "down" ===
                    h.state ? (d.isSelecting = !0, Event.cancel(b), m.x1 = m.x2 = h.x / g, m.y1 = m.y2 = h.y / g) : "up" === h.state ? d.isSelecting = !1 : (m.x2 = h.x / g, m.y2 = h.y / g);
                isFinite(a.actions.idx) && (a.area.hide(), a.render.actions());
                var k = e.container,
                    q = e.layers.active,
                    e = q.ctx,
                    p = (a.project.scrollLeft + k.scrollLeft) / g,
                    r = (a.project.scrollTop + k.scrollTop) / g,
                    g = Math.min(m.x1, m.x2) - p,
                    k = Math.min(m.y1, m.y2) - r,
                    p = Math.max(m.x1, m.x2) - p,
                    r = Math.max(m.y1, m.y2) - r,
                    p = p - g,
                    t = r - k;
                q.title && (q.title = "");
                var q = Event.proxy.metaKey,
                    r = Event.proxy.shiftKey,
                    s = d.findInRect(m,
                        a.actions.data, q, r, !0, !1);
                if ("up" === h.state) {
                    a.actions.idx = void 0;
                    a.actions.hovered = {};
                    if (a.ui.onHover) a.ui.onHover();
                    for (var u in s) s[u] ? a.actions.select(u) : a.actions.deselect(u);
                    m.x1 === h.x && m.y1 === h.y && (q = Event.proxy.metaKey, r = Event.proxy.shiftKey, m = d.getCoord(b), m = d.findSingleAction(m, a.actions.data), c(m, q, r));
                    a.actions.checkForSingleSelection();
                    a.actions.fireOnSelect();
                    a.actions.render("root.select.findMultipleActions")
                } else {
                    a.actions.idx = void 0;
                    if (a.ui.onHover) a.ui.onHover();
                    e.save();
                    e.globalCompositeOperation =
                        "destination-over";
                    Event.proxy.metaKey && selectionCount ? (e.fillStyle = "rgba(255,50,100,0.20)", e.strokeStyle = "rgba(255,50,100,1)") : (e.fillStyle = "rgba(0,240,100,0.20)", e.strokeStyle = "rgba(0,240,100,1)");
                    e.beginPath();
                    e.rect(g + 0.5, k + 0.5, p, t);
                    e.lineWidth = 1;
                    e.stroke();
                    e.fill();
                    e.restore()
                } if (s) d.dirtyHover = !0, a.actions.render("root.select.findMultipleActions");
                else if (d.dirtyHover) {
                    for (u in a.actions.hovered) break;
                    "undefined" === typeof u && a.actions.render("root.select.findMultipleActions")
                }
            }
        };
        this.tmp = {};
        this.dirtyHover = !1;
        this.findInRect = function (c, h, e, d, g, k) {
            d = a.canvas2d;
            var q = d.scale / d.pixelRatio,
                p = d.container,
                r = d.layers;
            h = r.active;
            d = h.ctx;
            var r = r.draw.ctx,
                t = (a.project.scrollLeft + p.scrollLeft) / q,
                p = (a.project.scrollTop + p.scrollTop) / q,
                q = {
                    x: Math.min(c.x1, c.x2) - t,
                    y: Math.min(c.y1, c.y2) - p
                };
            c = {
                x: Math.max(c.x1, c.x2) - t,
                y: Math.max(c.y1, c.y2) - p
            };
            var p = {
                x: c.x,
                y: q.y
            }, t = {
                    x: q.x,
                    y: c.y
                }, s = c.x - q.x,
                u = c.y - q.y,
                y = a.actions.selectionCount,
                w = (new Date).getTime();
            d.clearRect(0, 0, h.width, h.height);
            d.fillStyle = "rgba(0,0,255,1)";
            a.actions.hovered = {};
            r.rect(q.x + 0.5, q.y + 0.5, s, u);
            s = 0;
            u = a.area.padding;
            h = a.actions.data;
            for (var v = {}, x = h.length; x--;) {
                var A = h[x],
                    C = A.placement;
                if (C && C.point2d) {
                    var D = A.bbox;
                    if ("text" === A.type) var B = 1,
                    F = D.width, G = D.height;
                    else B = D.viewBox[2] / D.width, F = D.viewBox[2], G = B * D.height;
                    var z = -u / D.scale.x * B,
                        B = -u / D.scale.y * B,
                        F = F - 2 * z,
                        G = G - 2 * B,
                        J = C.point2d(z, B),
                        O = C.point2d(z + F, B),
                        K = C.point2d(z + F, B + G),
                        R = C.point2d(z, B + G);
                    if (J.x > q.x && J.x < c.x && J.y > q.y && J.y < c.y || O.x > q.x && O.x < c.x && O.y > q.y && O.y < c.y || K.x > q.x && K.x < c.x && K.y >
                        q.y && K.y < c.y || R.x > q.x && R.x < c.x && R.y > q.y && R.y < c.y || b(J, O, q, c) || b(K, R, q, c) || b(O, K, q, c) || b(J, R, q, c) || b(J, O, p, t) || b(K, R, p, t) || b(O, K, p, t) || b(J, R, p, t))
                        if ((a.feature[A.type] || a.feature.tools).usePointInPath && !k)
                            for (D = A.data, z = 0; z < D.length; z++) {
                                if (B = C.point2d(D[z].x, D[z].y), r.isPointInPath(B.x, B.y)) {
                                    if (e && y) {
                                        if (!a.actions.selection[x]) continue;
                                        s++;
                                        v[x] = !1
                                    } else s++, v[x] = !0, a.actions.hovered[A.zIndex] = !0;
                                    a.render.action(A.ctx, A);
                                    break
                                }
                            } else {
                                a.actions.hovered[A.zIndex] = !0;
                                if (e && y) {
                                    if (!a.actions.selection[x]) continue;
                                    J = "rgba(0,0,0,0.20)";
                                    O = "rgba(255,255,255,0.20)";
                                    s++;
                                    v[x] = !1
                                } else J = "rgba(255,255,255,0.20)", O = "rgba(0,0,0,0.20)", s++, v[x] = !0, A.dirtyControl = !0;
                                g && (d.save(), d.beginPath(), C.apply(d), d.rect(z, B, F, G), d.fillStyle = J, d.lineWidth = 1 / D.scale.x, d.strokeStyle = O, d.stroke(), d.fill(), d.restore())
                            }
                }
            }
            console.log("select-time", w - (new Date).getTime());
            if (s) return v
        };
        this.updateCount = function () {
            var b = document.querySelector(".select-count");
            b && (b.textContent = a.actions.selectionCount + " selected")
        };
        this.cursorEvent = function (b) {
            var c =
                d.active,
                e = c.canvas;
            e.title = "";
            if (!(d.isMoving || d.isSelecting || a.area.editing || a.colorPicker && "eyeDropper" === a.colorPicker.state)) {
                var g = "select" === a.tool.id;
                c.clearRect(0, 0, e.width, e.height);
                if (d.cancelSelection) var m = clone(a.actions.controls),
                e = 0;
                else m = a.actions.data.concat(a.actions.controls), e = a.actions.data.length;
                var k = d.getCoord(b),
                    m = d.findSingleAction(k, m),
                    q = 0 > m - e;
                b = a.actions.data[m];
                sketch.tool.coord = k;
                if ("undefined" === typeof m) {
                    k = "";
                    e = "default";
                    a.feature.canvas.editable && a.area.renderControls(null,
                        g);
                    a.area.hover = "";
                    for (var p in a.actions.hovered) break;
                    void 0 !== p && (a.actions.hovered = {}, a.ui.onHover && (a.ui.onHover(), a.render.actions("root.ui.onHover")))
                } else if (q) {
                    if (k = "move", e = "pointer", a.feature.canvas.editable && a.area.renderControls(m, g), a.area.hover = "", !a.actions.hovered[b.zIndex] && (a.actions.hovered = {}, a.actions.hovered[b.zIndex] = !0, a.ui.onHover)) a.ui.onHover(b)
                } else if (p = a.actions.controls[m - e], k = p.id, e = p.cursor || "", a.area.hover = p.id, a.feature.canvas.editable && a.area.renderControls(null,
                    g), !a.actions.hovered[a.actions.idx] && (a.actions.hovered[a.actions.idx] = !0, a.ui.onHover)) a.ui.onHover(a.actions.data[a.actions.idx]);
                c.canvas.title = b ? b.type : k ? a.getTranslation(k) : "";
                g = a.feature.customCursor;
                !e && (g && g[a.tool.type]) && (e = "url(" + g[a.tool.type] + ") 12 6, default");
                c.canvas.style.cursor = e || ""
            }
        };
        this.contextMenu = function (b) {
            if (window.contextmenu && (Event.cancel(b), d.onDrag && d.onDrag.pause(), d.onGesture && d.onGesture.pause(), !(self && "end" === self.state || "contextmenu" !== b.type && "touch" !== Event.pointerType))) {
                var c,
                    e = a.actions.getLength();
                a.ui.menuSelectMultiple && 1 < e ? c = "menuSelectMultiple" : a.ui.menuSelect && e ? c = "menuSelect" : a.ui.menuSelectDefault && (c = "menuSelectDefault");
                c && (b = Event.proxy.getCoord(b), contextmenu.show(a.ui[c], b.x + 5, b.y + 5, !0))
            }
        };
        this.state = "up";
        this.isMoving = this.isModified = this.isSelecting = !1;
        this.mouseEvent = function (b, h) {
            if (2 !== h.fingers) {
                var e = "down" === h.state,
                    g = "move" === h.state,
                    m = "up" === h.state;
                d.state = h.state;
                var k = a.tool.type;
                if (a.detect.area[k] || "select" === k)
                    if (!a.colorPicker || "eyeDropper" !==
                        a.colorPicker.state) {
                        if (!1 === g) {
                            e && (d.isModified = !1);
                            if (d.cancelSelection) var g = clone(a.actions.controls),
                            q = 0;
                            else g = a.actions.data.concat(a.actions.controls), q = a.actions.data.length;
                            var p = d.getCoord(b),
                                r = d.findSingleAction(p, g, m)
                        }
                        var g = Event.proxy.metaKey,
                            k = Event.proxy.shiftKey,
                            t = "undefined" !== typeof r,
                            s = h.start.x !== h.x || h.start.y !== h.y,
                            u = a.actions.selectionCount;
                        if (a.actions.controls[r - q])
                            if (0 === r - q)
                                if (a.active.canvas.className = "drag", m) {
                                    d.isMoving = !1;
                                    if (s) return d.move(h);
                                    r = d.findSingleAction(p,
                                        a.actions.data);
                                    p = a.actions.data[r];
                                    if (r === a.actions.idx && !d.isModified) {
                                        a.area.hidden && "text" === p.type ? a.area.show(p) : (a.actions.deselectAll(), a.actions.checkForSingleSelection(), a.render.actions("root.select.moveEvent"));
                                        return
                                    }
                                    if (!k && !g && p) {
                                        if (a.actions.hasSelection(1, r)) return;
                                        a.actions.select(r, "reset");
                                        a.actions.checkForSingleSelection();
                                        a.actions.fireOnSelect();
                                        a.ui.buildConfigure && a.ui.buildConfigure(p.type);
                                        a.render.actions("root.select.mouseEvent");
                                        d.setActionColor(r);
                                        return
                                    }
                                } else d.isMoving = !0;
                                else {
                                    m || (e = a.actions.controls[r - q], e.event && e.event(b), h.pause(), d.isMoving = !1, Event.cancel(b));
                                    return
                                }
                        if (!m || !d.isMoving || s || d.isModified || k || g)
                            if (m = a.toolkit.text && a.toolkit.text.dragging, !e || (t || !u || k || g || m) || (a.actions.deselectAll(), a.render.actions("root.select.mouseEvent.cancelSelection.b")), e && a.actions.selection[r] && !g || d.isMoving) d.isMoving = "up" !== h.state, d.move(h), Event.cancel(b), s || d.isMoving || a.actions.deselect();
                            else {
                                if (!t || k || g) {
                                    if ("select" === a.tool.id && e) return h.proxy(d.findMultipleActions);
                                    if (a.tool.record) return h.proxy(function (b, c) {
                                        Event.cancel(b);
                                        d.isMoving = "up" !== c.state;
                                        a.tool.record(b, c)
                                    })
                                }
                                0 > r - q && ((k || g) && a.feature.canvas.editable ? (c(r, g, k), a.actions.checkForSingleSelection(), a.actions.fireOnSelect(), e = a.active.canvas, a.active.clearRect(0, 0, e.width, e.height), a.render.actions("root.select.moveActions")) : (p = a.actions.data[r], d.isMoving = "up" !== h.state, d.isModified = !0, a.actions.select(r, "reset"), a.ui.buildConfigure && a.ui.buildConfigure(p.type), d.setActionColor(r), d.move(h)), Event.stop(b))
                            } else d.isMoving = !1, g = a.actions.data.concat(a.actions.controls), a.actions.select(r, "reset"), a.actions.checkForSingleSelection(), a.actions.fireOnSelect(), a.render.actions("root.select.mouseEvent.cancelSelection.a"), Event.cancel(b)
                    }
            }
        };
        this.move = function (b) {
            if ("down" === b.state) {
                if (1 === a.actions.getLength()) {
                    var c = a.actions.data[a.actions.idx];
                    c && c.brush && (b.brush = c.brush);
                    if (!c || !(a.feature[c.type] || a.feature.tools).movable) return
                }
            } else "up" === b.state && delete b.brush; if (b.brush && b.brush.move) b.brush.move(b);
            else {
                var c =
                    b.start.x - b.x,
                    e = b.start.y - b.y;
                switch (b.state) {
                case "down":
                    a.actions.move(0, 0, "cache");
                    break;
                case "move":
                    a.actions.move((d.movex || 0) - c, (d.movey || 0) - e);
                    break;
                case "up":
                    if (b.start.x === b.x && b.start.y === b.y) break;
                    a.actions.move(0, 0, "record")
                }
                d.movex = c;
                d.movey = e;
                b = a.active.canvas;
                a.active.clearRect(0, 0, b.width, b.height);
                a.render.actions("root.select.moveActions")
            }
        };
        this.setActionColor = function (b) {
            if ((b = a.actions.data[b]) && b.toolkit) {
                var c = b.toolkit;
                c.updateBBox && (c.updateBBox(), setTimeout(function () {
                    a.toolkit.text.textarea.blur();
                    a.toolkit.text.textarea.focus()
                }, 10));
                a.style && a.style.update(b)
            }
        };
        this.getCoord = function (a) {
            var b = Event.proxy.getCoord(a),
                c = Event.proxy.getBoundingBox(d.active.canvas);
            b.x += c.scrollLeft - c.x1;
            b.y += c.scrollTop - c.y1;
            b.state = a.type;
            return b
        };
        var c = function (b, c, e) {
            "undefined" !== typeof b && (c && a.actions.selection[b] ? a.actions.deselect(b) : a.actions.select(b))
        }, b = function (a, b, c, d) {
                return (d.y - a.y) * (c.x - a.x) > (c.y - a.y) * (d.x - a.x) !== (d.y - b.y) * (c.x - b.x) > (c.y - b.y) * (d.x - b.x) && (c.y - a.y) * (b.x - a.x) > (b.y - a.y) * (c.x - a.x) !==
                    (d.y - a.y) * (b.x - a.x) > (b.y - a.y) * (d.x - a.x)
            };
        this.construct();
        return a.initToolkit(this)
    })
})(sketch);
(function (a) {
    a.register("shape", function (d) {
        var c = this;
        this.type = "shape";
        this.active = d.active.ctx;
        this.cache = d.cache.ctx;
        this.ctx = d.layer0.ctx;
        this.device = {
            fill: {}
        };
        this.gestures = this.gid = 0;
        this.rendering = !1;
        this.time = 0;
        this.batches = {};
        this.events = {};
        this.path = {};
        this.enable = function () {
            this.disable();
            this.device.useGesture = "ontouchstart" in window && "drag" !== this.device.movement;
            this.events[this.gid] = c.device.useGesture ? Event.add(this.active.canvas, "gesture", new this.record) : Event.add(this.active.canvas,
                "drag", new this.record);
            a.tool !== a.toolkit.select && a.toolkit.select.enable({
                mouse: !1
            })
        };
        this.disable = function () {
            for (var b in this.events) this.events[b].remove(), delete this.events[b];
            a.tool !== a.toolkit.select && a.toolkit.select.disable({
                mouse: !1
            })
        };
        this.changeColor = function (a) {
            this.device.fill.color = a;
            this.device.fill.type = "color";
            this.device.colors = [0, a]
        };
        this.changeDevice = function (a, b, c) {
            this.device = clone(a);
            this.loadResource(this.device, c)
        };
        this.attributes = {
            seed: "number",
            composite: "string",
            movement: "string",
            opacity: "number",
            fill: "style",
            sides: "number",
            slope: "number",
            coils: "number",
            spread: "number",
            points: "number",
            m: "number",
            n1: "number",
            n2: "number",
            n3: "number"
        };
        this.cloneAttributes = function (a, b) {
            a.seed && (b.seed = a.seed);
            a.sides && (b.sides = a.sides);
            a.slope && (b.slope = a.slope);
            a.coils && (b.coils = a.coils);
            a.spread && (b.spread = a.spread);
            a.points && (b.points = a.points);
            a.m && (b.m = a.m);
            a.n1 && (b.n1 = a.n1);
            a.n2 && (b.n2 = a.n2);
            a.n3 && (b.n3 = a.n3);
            a.fill && (b.fill = clone(a.fill));
            a.stroke && (b.stroke = clone(a.stroke));
            return b
        };
        this.updateActionSize = function (a) {};
        this.loadResource = function (b, e, f) {
            "string" === typeof b && (b = {
                type: b
            });
            if (f = a.configure.tools[b.type]) {
                b.dirty = !0;
                b.render = h;
                f = c.cloneAttributes(b, clone(f));
                if (!b.opacity || b.opacity.value) b.opacity = f.opacity.value || 100;
                b.fill || (b.fill = f.fill || a.style.fill);
                b.stroke || (b.stroke = f.stroke || a.style.stroke);
                b.colors || (b.colors = f.colors || a.style.colors);
                b.composite || (b.composite = f.composite || "paint");
                b.movement || (b.movement = f.movement || "placement");
                b.type || (b.type = f.type ||
                    "star");
                f.sides && f.sides.value && (b.sides = f.sides.value || 5);
                f.slope && f.slope.value && (b.slope = f.slope.value || 0.5);
                f.coils && f.coils.value && (b.coils = f.coils.value || 1);
                f.spread && f.spread.value && (b.spread = f.spread.value || 2);
                f.points && f.points.value && (b.points = f.points.value || 250);
                f.m && f.m.value && (b.m = f.m.value || 39);
                f.n1 && f.n1.value && (b.n1 = f.n1.value || 25);
                f.n2 && f.n2.value && (b.n2 = f.n2.value || 215);
                f.n3 && f.n3.value && (b.n3 = f.n3.value || 10);
                a.style.getColors(b)
            }
            e && e(b)
        };
        this.record = function () {
            var d = c.gid;
            return function (g,
                k, q) {
                g && "down" !== k.state && Event.cancel(g);
                var p = a.getMouseId(g, k);
                g && (a.dataChannel && a.feature.stream.sketchLive) && a.dataChannel.send([c.device.type, k.state + "," + k.x + "," + k.y + "," + k.identifier]);
                g = c.batches[p];
                g || (g = c.batches[p] = [], g.time = c.time);
                var r = a.canvas2d,
                    r = r.scale / r.pixelRatio,
                    t = (r - 1) / r,
                    s = a.project.scrollLeft * t,
                    t = a.project.scrollTop * t;
                if (c.device.useGesture)
                    if ("start" === k.state) c.gestures++, c.events[++c.gid] = Event.add(c.active.canvas, "gesture", new c.record);
                    else {
                        "end" === k.state && (c.gestures--,
                            c.events[d].remove(), c.time = g.time, delete c.events[d]);
                        var u = {};
                        u.pt1 = k.touches[0];
                        u.pt2 = k.touches[1];
                        u.rotation = k.rotation;
                        u.state = k.state;
                        u.time = c.time;
                        g[0] = u
                    } else {
                        var u = {}, y = k.start.x / r + s,
                            w = k.start.y / r + t;
                        k.y = k.y / r + t;
                        k.x = k.x / r + s;
                        if ("drag" === c.device.movement) {
                            u.pt1 = {
                                x: b[p],
                                y: f[p]
                            };
                            b[p] = k.x;
                            f[p] = k.y;
                            if ("undefined" === typeof u.pt1.x) return;
                            "up" === k.state && (delete b[p], delete f[p])
                        } else u.pt1 = {
                            x: y,
                            y: w
                        };
                        u.pt2 = {
                            x: k.x,
                            y: k.y
                        };
                        u.rotation = -Math.atan2(k.x - u.pt1.x, k.y - u.pt1.y) * RAD_DEG + 180;
                        u.state = k.state;
                        u.time =
                            c.time;
                        g[0] = u
                    }
                if ("up" === k.state || "end" === k.state) {
                    k = c.cloneAttributes(c.device, a.actions.fromConfigure(a.configure.tools[a.tool.type]));
                    k.data = c.path;
                    k.toolkit = {
                        device: c.device
                    };
                    k.firstRecord = !0;
                    s = !! Event.proxy.metaKey;
                    t = !! Event.proxy.shiftKey;
                    a.detect.shapeConstrain[c.type] ? (s = !t, t = !0) : s && (t = !0);
                    k = clone(u);
                    p = k.pt1;
                    g = k.pt2;
                    c.device.useGesture ? (r = g.x - p.x, y = g.y - p.y, r = Math.max(0, Math.sqrt(r * r + y * y) - 75)) : (r = g.x - p.x, y = g.y - p.y, r = Math.max(0, Math.sqrt(r * r + y * y)));
                    !1 === s && (u.rotation = 0);
                    t ? t = s = 1 : (Math.abs(p.x -
                        g.x) > Math.abs(p.y - g.y) ? (s = 1, t = Math.abs(p.y - g.y) / Math.abs(p.x - g.x)) : (s = Math.abs(p.x - g.x) / Math.abs(p.y - g.y), t = 1), isFinite(s) || (s = 0), isFinite(t) || (t = 0));
                    var y = a.area.padding / 2,
                        w = p.x - r * s,
                        v = p.y - r * t;
                    p.x -= w;
                    p.y -= v;
                    g.x -= w;
                    g.y -= v;
                    u = c.cloneAttributes(c.device, {
                        type: c.type,
                        data: k,
                        color: c.device.colors[1],
                        composite: c.device.composite,
                        opacity: c.device.opacity,
                        render: c.renderAction,
                        bbox: {
                            x: w + y,
                            y: v + y,
                            width: 2 * r,
                            height: 2 * r,
                            rotate: u.rotation,
                            units: "objectBoundingBox",
                            scale: {
                                x: s,
                                y: t
                            }
                        }
                    });
                    u = a.actions.add(u);
                    u.render =
                        h;
                    u.dirty = !0;
                    a.style.getColors(u);
                    a.actions.deselectAll();
                    a.render.actions("root.shape.record");
                    a.history && a.history.store("add", [a.actions.clone(u)]);
                    q && setTimeout(q, 0)
                } else c.rendering || requestAnimationFrame(e)
            }
        };
        var b = {}, f = {}, h = function (b, e, f) {
                var d = this.data;
                if ("undefined" !== typeof d.pt1 && "undefined" !== typeof d.pt2) {
                    this.isRecording = !1;
                    if (!this) return console.log("missing device");
                    var h = this.bbox,
                        r = h.scale.x,
                        t = h.scale.y,
                        s = 1,
                        u = 1;
                    b.save();
                    !1 !== f ? (e.matrix.x = h.viewBox[0] * h.scale.x, e.matrix.y = h.viewBox[1] *
                        h.scale.y, e.apply(b, !0)) : (s = r, u = t);
                    b.beginPath();
                    if (c.device.useGesture) {
                        e = d.pt1;
                        f = d.pt2;
                        var y = (e.x + f.x) / 2,
                            w = (e.y + f.y) / 2,
                            y = f.x - e.x,
                            w = f.y - e.y,
                            v = Math.max(0, Math.sqrt(y * y + w * w) - 75)
                    } else e = d.pt1, f = d.pt2, y = e.x, w = e.y, y = f.x - y, w = f.y - w, v = Math.max(0, Math.sqrt(y * y + w * w));
                    g(b, v, v, v, this);
                    b.restore();
                    b.save();
                    b.globalCompositeOperation = a.style.getComposite(this.composite, d.time);
                    if ("cycle" === this.fill.mode) r = this.colors, b.fillStyle = r[(2 * d.time+++1) % r.length];
                    else {
                        if (c.device.useGesture) d = e.x / s, y = e.y / u, s = f.x / s,
                        u = f.y / u;
                        else {
                            d = (e.x - y) / s;
                            y = (e.y - w) / u;
                            s = f.x / s;
                            u = f.y / u;
                            v = w = 0;
                            r > t ? v = (r - t) * (h.height / 2) / r : w = (t - r) * (h.width / 2) / t;
                            var h = (d + s) / 2,
                                x = (y + u) / 2;
                            b.scale(r, t);
                            b.translate(h + w, x + v);
                            b.rotate(Math.atan2(f.x - e.x, f.y - e.y) - Math.PI);
                            b.translate(-h, -x)
                        }
                        b.fillStyle = a.style.createGradient(c.ctx, d, y, s, u, this)
                    }
                    b.fill();
                    b.restore()
                }
            }, e = function () {
                (new Date).getTime();
                var b = c.device,
                    f = !1,
                    d = c.active,
                    h = !! Event.proxy.metaKey,
                    p = !! Event.proxy.shiftKey;
                a.detect.shapeConstrain[c.type] ? (h = !p, p = !0) : h && (p = !0);
                var r = a.project.scrollLeft,
                    t = a.project.scrollTop;
                b.ctx = c.ctx;
                b.active = c.active;
                b.cache = c.cache;
                b.isRecording = !0;
                c.active.canvas.width = c.active.canvas.width;
                for (var s in c.batches)
                    for (var u = c.batches[s], y = 0; y < u.length; y++) {
                        var w = u.shift(),
                            v = "end" === w.state || "up" === w.state,
                            f = !0;
                        if ("placement" === b.movement) {
                            if (v) continue;
                            u[0] = w
                        }
                        d.save();
                        d.beginPath();
                        if (c.device.useGesture) var x = w.pt1,
                        A = w.pt2, C = (x.x + A.x) / 2, D = (x.y + A.y) / 2, B = A.x - x.x, F = A.y - x.y, G = Math.max(0, Math.sqrt(B * B + F * F) - 75);
                        else x = w.pt1, A = w.pt2, C = x.x, D = x.y, B = A.x - x.x, F = A.y - x.y,
                        G = Math.max(0, Math.sqrt(B * B + F * F));
                        !1 === h && (w.rotation = 0);
                        if (p) var z = 1,
                        J = 1;
                        else Math.abs(x.x - A.x) > Math.abs(x.y - A.y) ? (z = 1, J = Math.abs(x.y - A.y) / Math.abs(x.x - A.x)) : (z = Math.abs(x.x - A.x) / Math.abs(x.y - A.y), J = 1), isFinite(z) || (z = 0), isFinite(J) || (J = 0);
                        var O = new Vector.Transform;
                        O.translate(C - r, D - t);
                        O.scale(z, J);
                        O.rotate(w.rotation * DEG_RAD);
                        O.translate(-C * z, -D * J);
                        O.apply(d);
                        g(d, C * z, D * J, G, b);
                        d.restore();
                        d.save();
                        d.globalAlpha = b.opacity / 100;
                        d.globalCompositeOperation = a.style.getComposite(b.composite, u.time);
                        if ("cycle" ===
                            b.fill.mode) x = b.colors, d.fillStyle = x[(2 * u.time+++1) % x.length];
                        else {
                            w = x.x - B - r;
                            F = x.y - F - t;
                            B = A.x - r;
                            G = A.y - t;
                            if (!1 === h) {
                                var K = O = 0;
                                z > J ? K = D / J - D : O = C / z - C;
                                C = (w + B) / 2;
                                D = (F + G) / 2;
                                d.scale(z, J);
                                d.translate(C + O, D + K);
                                d.rotate(Math.atan2(A.x - x.x, A.y - x.y) - Math.PI);
                                d.translate(-C, -D)
                            }
                            d.fillStyle = a.style.createGradient(c.ctx, w, F, B, G, b)
                        }
                        d.fill();
                        d.restore();
                        if (v) {
                            c.time = c.batches[s].time;
                            delete c.batches[s];
                            break
                        }
                    }
                "undefined" !== typeof s && f ? (requestAnimationFrame(e), c.rendering = !0) : c.rendering = !1
            };
        return a.initToolkit(this)
    });
    var g = function (a, c, b, f, h) {
        switch (h.type) {
        case "circle":
        case "ellipse":
            Vector.Shapes.ellipse(a, c, b, f, f);
            break;
        case "square":
        case "rectangle":
            Vector.Shapes.rect(a, c - f, b - f, c + f, b + f);
            break;
        case "triangle":
            h.sides = 3;
        case "regularPolygon":
            Vector.Shapes.regularPolygon(a, c, b, f, h.sides >> 0);
            break;
        case "gear":
            Vector.Shapes.gear(a, c, b, f, h.sides >> 0, h.slope);
            break;
        case "star":
            Vector.Shapes.star(a, c, b, f, h.sides >> 0, h.slope);
            break;
        case "burst":
            Vector.Shapes.burst(a, c, b, f, h.sides >> 0, h.slope);
            break;
        case "radialBurst":
            Vector.Shapes.radialBurst(a,
                c, b, f, h.sides >> 0, h.spread);
            break;
        case "spiral":
            Vector.Shapes.spirals(a, c, b, f, h.sides >> 0, h.coils, 1 - h.spread / 100, h.colors);
            break;
        case "supershape":
            Vector.Shapes.superformula(a, c, b, f, h.points, h.m >> 0, h.n1, h.n2, h.n3)
        }
    }
})(sketch);
(function (a) {
    a.register("snapshot", function (g) {
        this.construct = function () {
            this.ctx = g.layer0.ctx;
            this.active = g.active.ctx;
            this.cache = g.cache.ctx
        };
        this.enable = function () {
            Event.add(this.active.canvas, "drag", this.mouse);
            a.canvas2d.container.style.cursor = "move";
            a.tool !== a.toolkit.select && a.toolkit.select.enable({
                mouse: !1
            })
        };
        this.disable = function () {
            Event.remove(this.active.canvas, "drag", this.mouse);
            a.canvas2d.container.style.cursor = "default";
            a.tool !== a.toolkit.select && a.toolkit.select.disable({
                mouse: !1
            })
        };
        this.mouse = function (d, c) {
            var b = a.active,
                f = Math.abs(c.x - c.start.x),
                h = Math.abs(c.y - c.start.y),
                e = Math.min(c.start.x, c.x),
                g = Math.min(c.start.y, c.y),
                m = Math.round(f / 2),
                k = Math.round(h / 2),
                q = m % 42 + e,
                p = k % 42 + g;
            b.save();
            b.canvas.width = b.canvas.width;
            b.canvas.style.display = "block";
            b.shadowOffsetX = 1;
            b.shadowOffsetY = 1;
            b.shadowBlur = 1;
            b.beginPath();
            b.fillStyle = "rgba(0,0,0,0.5)";
            b.fillRect(0, 0, b.canvas.width, b.canvas.height);
            b.clearRect(e + 0.5, g + 0.5, f, h);
            b.restore();
            b.save();
            b.rect(e + 0.5, g + 0.5, f, h);
            b.clip();
            b.beginPath();
            b.lineWidth = 1;
            b.strokeStyle = "#333";
            b.strokeRect(e + 0.5, g + 0.5, f, h);
            b.strokeStyle = "rgba(0, 0, 0, 0.25)";
            b.shadowColor = "rgba(255, 255, 255, 0.25)";
            for (var r = 0.5; r < f; r += 42) e + m + 0.5 !== r + q && (b.moveTo(r + q, g), b.lineTo(r + q, g + h));
            for (r = 0.5; r < h; r += 42) g + k + 0.5 !== r + p && (b.moveTo(e, r + p), b.lineTo(e + f, r + p));
            b.stroke();
            b.beginPath();
            b.strokeStyle = "rgba(0, 0, 0, 0.65)";
            b.shadowColor = "rgba(255, 255, 255, 0.15)";
            b.moveTo(e, g + k + 0.5);
            b.lineTo(e + f, g + k + 0.5);
            b.moveTo(e + m + 0.5, g);
            b.lineTo(e + m + 0.5, g + h);
            b.stroke();
            b.beginPath();
            b.strokeStyle = "rgba(255, 255, 255, 0.5)";
            b.shadowColor = "rgba(255, 255, 255, 0)";
            b.moveTo(e + m - 7.5, g + k + 0.5);
            b.lineTo(e + m + 8.5, g + k + 0.5);
            b.moveTo(e + m + 0.5, g + k - 7.5);
            b.lineTo(e + m + 0.5, g + k + 8.5);
            b.stroke();
            b.restore();
            "up" === c.state && (b.canvas.width = b.canvas.width, c.x === c.start.x && c.y === c.start.y ? (window.alertify && alertify.log("No area was selected."), a.download.image(0, 0, b.canvas.width, b.canvas.height)) : a.download.image(e, g, f, h), a.run("select"))
        };
        this.construct();
        return this
    })
})(sketch);
"undefined" === typeof sketch && (sketch = {});
"undefined" === typeof sketch.language && (sketch.language = {});
sketch = function (a) {
    a.language.br = {
        "clear-confirm": "Are you sure you want to clear the canvas?",
        "delete": "Delete",
        rotate: "Rotate",
        "rotate-scale": "Rotate & scale",
        scale: "Scale",
        move: "Move",
        Square: "Square",
        Circle: "Circle",
        "Laser Pointer": "Laser Pointer",
        "Save (to Sketchpad.io)": "Salvar (no Potti Author)",
        "Save (snapshot)": "Salvar (imagem)",
        "Save (json)": "Salvar (json)",
        "Click & drag to create your screenshot": "Clique e Arraste para gerar sua imagem",
        "To desktop": "Para o computador",
        "To sketchpad.io": "Para o Potti Author",
        Syncronize: "Sincronizar",
        "Save entire screen": "Salvar toda a tela",
        "Save screenshot": "Salvar parte da imagem",
        "No area was selected": "Nenhuma a\u0301rea foi selecionada",
        "Saving image to your Download Directory": "Salvando imagem para sua pasta de download",
        "Upload File": "Enviar arquivo para a nuvem",
        Upload: "Enviar para a nuvem",
        History: "Histo\u0301rico",
        "Undo history": "Desfazer",
        "Redo history": "Refazer",
        "Select tool": "Ferramenta de Selec\u0327a\u0303o",
        "Select all": "Selecionar Tudo",
        "Select inverse": "Selec\u0327a\u0303o Inversa",
        "Escape selection": "Sair da Selec\u0327a\u0303o",
        "Delete selection": "Deletar Selec\u0327a\u0303o",
        "Copy selection": "Copiar Selec\u0327a\u0303o",
        "Cut selection": "Recortar Selec\u0327a\u0303o",
        "Paste selection": "Colar Selec\u0327a\u0303o",
        "Send selection Backwards": "Enviar Selec\u0327a\u0303o para Tra\u0301s",
        "Send selection Forwards": "Enviar Selec\u0327a\u0303o para Frente",
        "Send selection to Front": "Enviar 1 Vivel para Frente",
        "Send selection to Back": "Enviar 1 Vi\u0301vel para Tra\u0301s",
        "Move selection Left": "Mover para esquerda",
        "Move selection Right": "Mover para Direita",
        "Move selection Up": "Mover para Cima",
        "Move selection Down": "Mover Baixo",
        "Text tool": "Ferramenta de Texto",
        "Resize instead of Rescale": "Redimensionar",
        "Tool switching": "Ferramentas",
        "Calligraphy tool": "Ferramenta de Selec\u0327a\u0303o",
        "Paint Brush tool": "Ferramenta de Pincel",
        "Pencil tool": "Ferramenta de La\u0301pis",
        "Eraser tool": "Ferramenta de Borracha",
        "Stamp tool": "Ferramenta de Carimbo",
        "Clipart tool": "Ferramenta de",
        "Window toggle": "Alternar Janelas",
        "Color Picker": "Paleta de Cores",
        "Help (you are here)": "Ajuda (voce\u0302 esta\u0301 aqui)",
        Zoom: "Zoom",
        "Zoom-in": "+ Zoom",
        "Zoom-out": "- Zoom",
        "Zoom to actual size": "Zerar Zoom",
        "Drop Files Here": "Arraste fotos aqui",
        Temperature: "Temperatura",
        Tint: "Matiz",
        Exposure: "Exposic\u0327a\u0303o",
        Brightness: "Brilho",
        Contrast: "Contraste",
        Saturation: "Saturac\u0327a\u0303o",
        Help: "Ajuda",
        Save: "Salvar",
        Text: "Texto",
        Opacity: "Opacidad",
        Diameter: "Dia\u0302metro",
        Rotate: "Rotacionar",
        Scale: "Escala",
        Stamp: "Carimbo",
        Shapes: "Formatos",
        Ellipse: "Ellipse",
        Rectangle: "Reta\u0302ngulo",
        Polygon: "Poli\u0301gono",
        Sides: "Lados",
        Gear: "Engrenagem",
        Slope: "Inclinac\u0327a\u0303o das Pontas",
        Star: "Estrela",
        Spiral: "Espiral",
        Coils: "Espirais",
        Spread: "abertura",
        Burst: "Flor",
        "Radial Brust": "Forma Aleato\u0301ria",
        Styles: "Estilos",
        Gradient: "Gradiente",
        Color: "Cor",
        "Delete Layer": "Deletar Camada",
        "Move Layer": "Mover Camada",
        "Scale Layer": "Redimensionar Camada",
        "Rotate Layer": "Rotacionar Camada",
        Clipart: "Clipart",
        "Font Size": "Tamanho da Fonte",
        Blur: "Desfocar",
        Loading: "Carregando",
        Calligraphy: "Caligrafia",
        Crayon: "Giz de Cera",
        Paintbrush: "Pincel",
        Pencil: "La\u0301pis",
        "Downloading File": "Baixando Arquivo",
        Configuration: "Configurac\u0327a\u0303o",
        Backdrop: "Plano de Fundo",
        dark: "escuro",
        light: "claro",
        "Keyboard Shortcuts": "Atalhos do Teclado",
        File: "Arquivo",
        Eraser: "Borracha",
        Left: "Seta da Esquerda",
        Right: "Seta da Direita",
        Up: "Seta para Cima",
        Down: "Seta para Baixo",
        Selection: "Sele\u00e7\u00e3o"
    };
    return a
}(sketch);
"undefined" === typeof sketch && (sketch = {});
"undefined" === typeof sketch.language && (sketch.language = {});
sketch = function (a) {
    a.language.en = {
        Burst: "Bursts",
        About: "[?] <a href='http://sketch.io/' target='_blank'>sketch.js</a> v" + sketch.__version,
        "exit-confirm": "You&rsquo;re about to open a new document.<p>Any unsaved data in current project will be lost.<p>Would you like to save before exiting?",
        "remove-confirm": "You&rsquo;re about to remove this document.<p>Do you want to continue?",
        "clear-confirm": "You&rsquo;re about to open a new document.<p>Any unsaved data in current project will be lost.<p>Do you want to continue?",
        "open-confirm": "You&rsquo;re about to open a new document.<p>Any unsaved data in current project will be lost.<p>Would you like to save first?"
    };
    var g = {
        de: "D Sie Sicher, Dass Sie Die Leinwand L\u00f6schen?{L\u00f6schen{Drehen{Drehen &amp; Skalieren{{Bewegen{{\u00dcbersetzen{Abstand{{{Fell{{{{Deckkraft{Durchmesser{Drehen{{Stempeln{{Ellipse{{{Seiten{{{{{Spulen{Zu Verbreiten{Platzen{{{{{Ebene L\u00f6schen{Bewegen Layer{Zunderschicht{Ebene Drehen{{{Schriftgr\u00f6\u00dfe{Verwischen{L\u00e4dt{Kalligraphie{{{{Download-Datei{Hilfe{{Kulisse{{{{{Speichern (um Sketchpadio){Speichern (Snapshot){Klicken Und Ziehen Sie, Um Den Screenshot Zu Erstellen{Auf Dem Desktop{Um Sketchpadio{{Speichern Gesamten Bildschirm{Screenshot Speichern{Kein Bereich Ausgew\u00e4hlt Wurde{Bild Speichern, Um Ihre Download-Verzeichnis{Datei Hochladen{{R\u00fcckg\u00e4ngig-Funktion{{W\u00e4hlen Sie Tool{Alle Ausw\u00e4hlen{W\u00e4hlen Inverse{Entfliehen Selection{Auswahl L\u00f6schen{Kopieren Selection{Auswahl Ausschneiden{F\u00fcgen Selection{Senden Selection Backwards{Senden Selection Forwards{Senden Auswahl Vor{Senden Auswahl Zur\u00fcck{Auswahl Verschieben Links{{{{{Bewegen Selection Right{Bewegen Sie Die Auswahl Um{Bewegen Selection Down{{Resize Statt Rescale{{Kalligraphie Tool{Pinsel-Werkzeug{Stift-Werkzeug{{{{Clipart Fenster Zu Wechseln{{Hilfe (you Are Here){{{Verkleinern{Zoom Auf Tats\u00e4chliche Gr\u00f6\u00dfe{Drop Dateien Hier{Temperatur{{{Helligkeit{Kontrast{S\u00e4ttigung".split("{"),
        gl: "T\u00e1 Seguro De Que Quere Limpar A Pantalla?;Eliminar;Xirar;Xire E Escala;Escala;Mover;Goma;Traducir;Paso;;;;;Esbozado;;Opacidade;Di\u00e1metro;Xirar;Escala;Selo;Formas;;Rect\u00e1ngulo;Pol\u00edgono;Lados;;;;Espiral;Bobinas;Estender;Rebentar;Explosi\u00f3n Radial;Estilos;Gradiente;Cor;Borrar Capa;;Escala Layer;Xire Layer;;Texto;Tama\u00f1o Da Fonte;;Cargando;Caligraf\u00eda;;Pincel;Lapis;Descarga Do Ficheiro;Axuda;Configuraci\u00f3n;Pano De Fondo;;;Atallos De Teclado;Arquivo;Gardar (para Sketchpadio);Gardar (snapshot);Fai Clic E Arrastra Para Crear A S\u00faa Imaxe;Para Escritorio;Para Sketchpadio;Sincronizar;Salva Pantalla Enteira;Gardar Imaxe;Ningunha \u00c1rea Foi Seleccionada;Gardar Imaxe Para O Seu Directorio De Descarga;Cargar Un Ficheiro;Historia;Desfacer Historia;Refacer Historia;Seleccione Tool;Seleccionar Todo;Seleccionar Inverso;Fuxa Selecci\u00f3n;Borrar Selecci\u00f3n;Copia Selecci\u00f3n;Corte De Selecci\u00f3n;Pegar Selecci\u00f3n;Enviar Selecci\u00f3n Para Atr\u00e1s;Enviar Forwards Selecci\u00f3n;Enviar Selecci\u00f3n Para Adiante;Selecci\u00f3n Para Enviar De Volta;Selecci\u00f3n Mover \u00c1 Esquerda;Esquerda;Dereito;;;Move Selecci\u00f3n Dereita;Move A Selecci\u00f3n Cara Arriba;Move A Selecci\u00f3n Abaixo;Ferramenta De Texto;Redimensionar En Vez De Rescale;Ferramenta De Conmutaci\u00f3n;Ferramenta De Caligraf\u00eda;Pinte Ferramenta Pincel;Ferramenta Lapis;Ferramenta Ereaser;;Ferramenta De Clipart;Fiestra Clipart Cambiar;;Axuda (est\u00e1 Aqu\u00ed);;;Reducir;Zoom Para Tama\u00f1o Real;Aqu\u00ed Soltar Arquivos;Temperatura;Tonalidade;Exposici\u00f3n;Brillo;Contraste;Saturaci\u00f3n".split(";"),
        ja: "\u306f\u3001\u30ad\u30e3\u30f3\u30d0\u30b9\u3092\u30af\u30ea\u30a2\u3057\u3066\u3082\u3088\u308d\u3057\u3044\u3067\u3059\u304b\uff1f \u524a\u9664\u3057\u307e\u3059 \u56de\u8ee2\u3055\u305b\u307e\u3059 \u56de\u8ee2\u3068\u30b9\u30b1\u30fc\u30eb \u30b9\u30b1\u30fc\u30eb \u79fb\u52d5\u3057\u307e\u3059 \u6d88\u3057\u30b4\u30e0 \u7ffb\u8a33 \u9593\u9694 \u30b9\u30c8\u30ea\u30fc\u30de\u30fc \u30af\u30ed\u30fc\u30e0 \u6bdb\u76ae \u30b7\u30a7\u30fc\u30c0 \u5927\u3056\u3063\u3071 \u30a6\u30a7\u30d6 \u4e0d\u900f\u660e \u76f4\u5f84 \u56de\u8ee2\u3055\u305b\u307e\u3059 \u30b9\u30b1\u30fc\u30eb \u30b9\u30bf\u30f3\u30d7 \u56f3\u5f62 \u6955\u5186 \u56db\u89d2\u5f62 \u30dd\u30ea\u30b4\u30f3 \u5074\u9762 \u30ae\u30a2 \u659c\u9762 \u30b9\u30bf\u30fc \u30b9\u30d1\u30a4\u30e9\u30eb \u30b3\u30a4\u30eb \u5e83\u304c\u3063\u305f \u30d0\u30fc\u30b9\u30c8 \u653e\u5c04\u72b6\u306e\u30d0\u30fc\u30b9\u30c8 \u30b9\u30bf\u30a4\u30eb \u52fe\u914d \u8272 \u30ec\u30a4\u30e4\u3092\u524a\u9664\u3057\u307e\u3059 \u30ec\u30a4\u30e4\u30fc\u3092\u79fb\u52d5\u3057\u307e\u3059 \u30ec\u30a4\u30e4\u30fc\u3092\u62e1\u5927\u7e2e\u5c0f\u3057\u307e\u3059 \u30ec\u30a4\u30e4\u30fc\u3092\u56de\u8ee2\u3055\u305b\u307e\u3059 \u30af\u30ea\u30c3\u30d7\u30a2\u30fc\u30c8 \u30c6\u30ad\u30b9\u30c8 \u30d5\u30a9\u30f3\u30c8\u30b5\u30a4\u30ba \u307c\u304b\u3057 \u8aad\u307f\u8fbc\u3093\u3067\u3044\u307e\u3059 \u66f8\u9053 \u30af\u30ec\u30e8\u30f3 \u7d75\u7b46 \u925b\u7b46 \u30d5\u30a1\u30a4\u30eb\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059 \u30d8\u30eb\u30d7 \u69cb\u6210 \u80cc\u666f \u6697\u3044 \u5149 \u30ad\u30fc\u30dc\u30fc\u30c9\u30b7\u30e7\u30fc\u30c8\u30ab\u30c3\u30c8 \u30d5\u30a1\u30a4\u30eb \uff08Sketchpadio\u306b\uff09\u4fdd\u5b58\u3057\u307e\u3059 \uff08\u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8\uff09\u3092\u4fdd\u5b58\u3057\u307e\u3059 \u3042\u306a\u305f\u306e\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8\u3092\u4f5c\u6210\u3059\u308b\u306b\u306f\u30af\u30ea\u30c3\u30af\uff06\u30c9\u30e9\u30c3\u30b0\u3057\u307e\u3059 \u30c7\u30b9\u30af\u30c8\u30c3\u30d7\u306b Sketchpadio\u3078 \u30b7\u30f3\u30af\u30ed \u753b\u9762\u5168\u4f53\u3092\u4fdd\u5b58\u3057\u307e\u3059 \u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8\u3092\u4fdd\u5b58\u3057\u307e\u3059 \u3044\u3044\u3048\u30a8\u30ea\u30a2\u304c\u9078\u629e\u3055\u308c\u3066\u3044\u307e\u305b\u3093 \u3042\u306a\u305f\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u753b\u50cf\u3092\u4fdd\u5b58 \u30d5\u30a1\u30a4\u30eb\u3092\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3057\u307e\u3059 \u6b74\u53f2 \u6b74\u53f2\u3092\u5143\u306b\u623b\u3057\u307e\u3059 \u6b74\u53f2\u3092\u3084\u308a\u76f4\u3057\u307e\u3059 \u30c4\u30fc\u30eb\u3092\u9078\u629e\u3057\u307e\u3059 [\u3059\u3079\u3066]\u3092\u9078\u629e\u3057\u307e\u3059 \u9006\u3092\u9078\u629e\u3057\u307e\u3059 \u9078\u629e\u3092\u30a8\u30b9\u30b1\u30fc\u30d7\u3057\u307e\u3059 \u9078\u629e\u7bc4\u56f2\u3092\u524a\u9664\u3057\u307e\u3059 \u9078\u629e\u7bc4\u56f2\u3092\u30b3\u30d4\u30fc\u3057\u307e\u3059 \u9078\u629e\u7bc4\u56f2\u3092\u5207\u308a\u53d6\u308a\u307e\u3059 \u9078\u629e\u7bc4\u56f2\u3092\u8cbc\u308a\u4ed8\u3051\u307e\u3059 \u5f8c\u65b9\u30bb\u30ec\u30af\u30b7\u30e7\u30f3\u3092\u9001\u4fe1\u3057\u307e\u3059 \u9078\u629e\u8ee2\u9001\u3092\u9001\u4fe1\u3057\u307e\u3059 \u524d\u9762\u306b\u9078\u629e\u7bc4\u56f2\u3092\u9001\u4fe1\u3057\u307e\u3059 \u80cc\u9762\u306b\u30bb\u30ec\u30af\u30b7\u30e7\u30f3\u3092\u9001\u4fe1\u3057\u307e\u3059 \u79fb\u52d5\u9078\u629e\u306f\u5de6 \u6b8b\u3057\u305f \u53f3 \u30a2\u30c3\u30d7 \u30c0\u30a6\u30f3 \u9078\u629e\u7bc4\u56f2\u306e\u53f3\u7aef\u306b\u79fb\u52d5\u3057\u307e\u3059 \u9078\u629e\u7bc4\u56f2\u3092\u4e0a\u306b\u79fb\u52d5 \u9078\u629e\u7bc4\u56f2\u3092\u4e0b\u306b\u79fb\u52d5 \u30c6\u30ad\u30b9\u30c8\u30c4\u30fc\u30eb \u518d\u30b9\u30b1\u30fc\u30ea\u30f3\u30b0\u3059\u308b\u306e\u3067\u306f\u306a\u304f\u30b5\u30a4\u30ba\u3092\u5909\u66f4\u3057\u307e\u3059 \u30c4\u30fc\u30eb\u306e\u5207\u308a\u66ff\u3048 \u66f8\u9053\u30c4\u30fc\u30eb \u30d6\u30e9\u30b7\u30c4\u30fc\u30eb\u3067\u30da\u30a4\u30f3\u30c8 \u925b\u7b46\u30c4\u30fc\u30eb Ereaser\u30c4\u30fc\u30eb \u30c4\u30fc\u30eb\u3092\u30b9\u30bf\u30f3\u30d7\u3057\u307e\u3059 \u30af\u30ea\u30c3\u30d7\u30c4\u30fc\u30eb \u30af\u30ea\u30c3\u30d7\u30a6\u30a3\u30f3\u30c9\u30a6\u3092\u5207\u308a\u66ff\u3048\u307e\u3059 \u30ab\u30e9\u30fc\u30d4\u30c3\u30ab\u30fc \u30d8\u30eb\u30d7\uff08\u3042\u306a\u305f\u304c\u3053\u3053\u306b\u3044\u308b\uff09 \u30ba\u30fc\u30e0 \u30ba\u30fc\u30e0\u30a4\u30f3 \u30ba\u30fc\u30e0\u30a2\u30a6\u30c8\u3057\u307e\u3059 \u5b9f\u969b\u306e\u30b5\u30a4\u30ba\u306b\u62e1\u5927\u3057\u307e\u3059 \u3053\u3053\u306b\u30d5\u30a1\u30a4\u30eb\u3092\u30c9\u30ed\u30c3\u30d7\u3057\u307e\u3059 \u6e29\u5ea6 \u8272\u5408\u3044 \u66b4\u9732 \u660e\u308b\u3055 \u30b3\u30f3\u30c8\u30e9\u30b9\u30c8 \u98fd\u548c".split(" "),
        pt: "certeza De Que Quer Limpar A Tela?;Excluir;Rodar;Gire E Escala;Escala;Mover;Borracha;Traduzir;Espa\u00e7amento;;;;;Esbo\u00e7ado;;Opacidade;Di\u00e2metro;Rodar;Escala;Selo;Formas;;Ret\u00e2ngulo;Pol\u00edgono;Lados;;;;Espiral;Bobinas;Espalhe;Rebentar;Explos\u00e3o Radial;Estilos;Gradiente;Cor;Excluir Camada;Mova Layer;Escala Layer;Gire Layer;;Texto;Tamanho Da Fonte;;Carregando;Caligrafia;;Pincel;L\u00e1pis;Download Do Arquivo;Ajuda;Configura\u00e7\u00e3o;Pano De Fundo;;;Atalhos De Teclado;Arquivo;Salvar (para Sketchpadio);Salvar (snapshot);Clique E Arraste Para Criar A Sua Imagem;Para Desktop;Este Sketchpadio;Sincronizar;Salve Tela Inteira;Guardar Imagem;Nenhuma \u00c1rea Foi Seleccionada;Salvando Imagem Para O Seu Diret\u00f3rio De Download;Carregar Arquivo;Hist\u00f3ria;Desfazer Hist\u00f3ria;Refazer Hist\u00f3ria;Selecione Tool;Selecionar Tudo;Selecionar Inverso;Fuja Sele\u00e7\u00e3o;Excluir Sele\u00e7\u00e3o;Copie Sele\u00e7\u00e3o;Corte De Sele\u00e7\u00e3o;Colar Sele\u00e7\u00e3o;Enviar Sele\u00e7\u00e3o Para Tr\u00e1s;Enviar Forwards Sele\u00e7\u00e3o;Envie Sele\u00e7\u00e3o Para Frente;Sele\u00e7\u00e3o Para Enviar De Volta;Sele\u00e7\u00e3o Mover Para A Esquerda;Esquerda;Direito;;;Mova Selec\u00e7\u00e3o Direita;Mova A Sele\u00e7\u00e3o Para Cima;Move A Sele\u00e7\u00e3o Para Baixo;Ferramenta De Texto;Redimensionar Em Vez De Rescale;Ferramenta De Comuta\u00e7\u00e3o;Ferramenta De Caligrafia;Pinte Ferramenta Pincel;Ferramenta L\u00e1pis;Ferramenta Ereaser;;Ferramenta De Clipart;Janela Clipart Alternar;;Ajuda (voc\u00ea Est\u00e1 Aqui);;;Reduzir;Zoom Para Tamanho Real;Aqui Soltar Arquivos;Temperatura;Tonalidade;Exposi\u00e7\u00e3o;Brilho;Contraste;Satura\u00e7\u00e3o".split(";"),
        sw: "Una Uhakika Unataka Kufuta Canvas?,Futa,Mzunguko,Mzunguko &amp; Wadogo,Wadogo,Hoja,Raba,Kutafsiri,Nafasi,,,,,,Mtandao,,Kipenyo,Mzunguko,Wadogo,Stempu,Maumbo,Duaradufu,Mstatili,Pembenyingi,Pande,,Mteremko,,,,Kuenea,Kupasuka,Radial Kupasuka,Mitindo,,Michezo,Futa Tabaka,Hoja Ya Tabaka,Wadogo Tabaka,Mzunguko Tabaka,,Nakala,,,,,,,Penseli,Kupakua Faili,Msaada,,Kuongezeka,Giza,Mwanga,Kinanda Shortcuts,,Ila (kwa Sketchpadio),Ila (snapshot),Bonyeza &amp; Drag Kujenga Screenshot Yako,Desktop,Ili Sketchpadio,,Ila Screen Nzima,Ila Screenshot,Hakuna Eneo Lilichaguliwa,Kuokoa Sanamu Shusha Directory Yako,Pakia Faili,Historia,Undo Historia,Rudia Historia,Chagua Tool,Chagua Zote,Chagua Inverse,Kutoroka Uchaguzi,Futa Uchaguzi,Nakili Uchaguzi,Kata Ya Uteuzi,Kuweka Uchaguzi,Tuma Nyuma Uchaguzi,Tuma Mbele Ya Uteuzi,Tuma Uteuzi Na Mbele,Tuma Uteuzi Kwa Nyuma,Hoja Ya Uteuzi Wa Kushoto,Kushoto,Haki,,,Hoja Ya Uchaguzi Haki,Hoja Ya Uchaguzi Up,Hoja Ya Uchaguzi Down,Nakala Tool,Resize Badala Ya Rescale,Chombo Byte,,Rangi Brashi Tool,Penseli Tool,,Stempu Tool,,,Michezo Picker,Msaada (wewe Ni Hapa),,,Fifiza,Kuza Kwa Ukubwa Halisi,Tone Files Hapa,Joto,,Mfiduo,Mwangaza,Kinyume,Kueneza".split(","),
        kn: "\u0cb5\u0cc1 \u0c95\u0ccd\u0caf\u0cbe\u0ca8\u0ccd\u0cb5\u0cbe\u0cb8\u0ccd \u0ca4\u0cc6\u0cb0\u0cb5\u0cc1\u0c97\u0cc6\u0cc2\u0cb3\u0cbf\u0cb8\u0cb2\u0cc1 \u0c96\u0c9a\u0cbf\u0ca4\u0cb5\u0cbe\u0c97\u0cbf \u0cac\u0caf\u0cb8\u0cc1\u0cb5\u0cbf\u0cb0\u0cbe?;\u0c85\u0cb3\u0cbf\u0cb8\u0cbf;\u0ca4\u0cbf\u0cb0\u0cc1\u0c97\u0cbf\u0cb8\u0cbf;\u0ca4\u0cbf\u0cb0\u0cc1\u0c97\u0cbf\u0cb8\u0cbf \u0cae\u0ca4\u0ccd\u0ca4\u0cc1 \u0c85\u0cb3\u0cc6\u0caf\u0cc1\u0cb5;\u0cae\u0cbe\u0caa\u0c95;\u0cb8\u0cb0\u0cbf\u0cb8\u0cbf;\u0c8e\u0cb0\u0cc6\u0cd5\u0cb8\u0cb0\u0ccd;\u0c85\u0ca8\u0cc1\u0cb5\u0cbe\u0ca6;\u0c85\u0c82\u0ca4\u0cb0;\u0cb6\u0cbf\u0cd5\u0cb0\u0ccd\u0cb7\u0cbf\u0c95\u0cc6;\u0c95\u0ccd\u0cb0\u0cc6\u0cc2\u0cd5\u0cae\u0ccd;\u0ca4\u0cc1\u0caa\u0ccd\u0caa\u0cb3;\u0cb6\u0cc6\u0cd5\u0ca1\u0cb0\u0ccd;\u0cb8\u0ccd\u0c95\u0cc6\u0c9a\u0cbf\u0cd5;\u0cb5\u0cc6\u0cac\u0ccd;\u0c85\u0caa\u0cbe\u0cb0\u0ca6\u0cb0\u0ccd\u0cb6\u0c95\u0ca4\u0cc6;\u0cb5\u0ccd\u0caf\u0cbe\u0cb8;\u0ca4\u0cbf\u0cb0\u0cc1\u0c97\u0cbf\u0cb8\u0cbf;\u0cae\u0cbe\u0caa\u0c95;\u0c85\u0c82\u0c9a\u0cc6\u0c9a\u0cbf\u0cd5\u0c9f\u0cbf;\u0c86\u0c95\u0cbe\u0cb0\u0c97\u0cb3\u0cc1;\u0ca6\u0cbf\u0cd5\u0cb0\u0ccd\u0c98\u0cb5\u0cc3\u0ca4\u0ccd\u0ca4\u0ca6;\u0c86\u0caf\u0ca4;\u0cac\u0cb9\u0cc1\u0cad\u0cc1\u0c9c\u0cbe\u0c95\u0cc3\u0ca4\u0cbf;\u0cac\u0ca6\u0cbf;\u0c97\u0cc6\u0cd5\u0cb0\u0ccd;\u0c87\u0cb3\u0cbf\u0c9c\u0cbe\u0cb0\u0cc1;\u0cb8\u0ccd\u0c9f\u0cbe\u0cb0\u0ccd;\u0cb8\u0cc1\u0cb0\u0cc1\u0cb3\u0cbf;\u0cb8\u0cc1\u0cb0\u0cc1\u0cb3\u0cbf\u0c97\u0cb3\u0ca8\u0ccd\u0ca8\u0cc1;\u0cb9\u0cb0\u0ca1\u0cbf\u0ca4\u0cc1;\u0cac\u0cb0\u0ccd\u0cb8\u0ccd\u0c9f\u0ccd;\u0cb0\u0cc6\u0cd5\u0ca1\u0cbf\u0caf\u0cb2\u0ccd \u0cac\u0cb0\u0ccd\u0cb8\u0ccd\u0c9f\u0ccd;\u0cb6\u0cc6\u0cd6\u0cb2\u0cbf\u0c97\u0cb3\u0cc1;\u0c97\u0ccd\u0cb0\u0cc6\u0cd5\u0ca1\u0cbf\u0caf\u0c82\u0c9f\u0ccd;\u0cac\u0ca3\u0ccd\u0ca3;\u0cb2\u0cc6\u0cd5\u0caf\u0cb0\u0ccd \u0c85\u0cb3\u0cbf\u0cb8\u0cbf;\u0cb2\u0cc6\u0cd5\u0caf\u0cb0\u0ccd \u0cb8\u0cb0\u0cbf\u0cb8\u0cbf;\u0cb2\u0cc6\u0cd5\u0caf\u0cb0\u0ccd \u0c85\u0cb3\u0cc6\u0caf\u0cc1\u0cb5;\u0cb2\u0cc6\u0cd5\u0caf\u0cb0\u0ccd \u0ca4\u0cbf\u0cb0\u0cc1\u0c97\u0cbf\u0cb8\u0cbf;;\u0caa\u0ca0\u0ccd\u0caf;\u0cab\u0cbe\u0c82\u0c9f\u0ccd \u0c97\u0cbe\u0ca4\u0ccd\u0cb0;\u0cac\u0ccd\u0cb2\u0cb0\u0ccd;\u0cb2\u0cc6\u0cc2\u0cd5\u0ca1\u0ccd;\u0c95\u0ccd\u0caf\u0cbe\u0cb2\u0cbf\u0c97\u0ccd\u0cb0\u0cab\u0cbf;\u0cac\u0cb3\u0caa;;\u0caa\u0cc6\u0ca8\u0ccd\u0cb8\u0cbf\u0cb2\u0ccd;\u0cab\u0cc6\u0cd6\u0cb2\u0ccd \u0ca1\u0ccc\u0ca8\u0ccd\u0cb2\u0cc6\u0cc2\u0cd5\u0ca1\u0ccd;\u0cb8\u0cb9\u0cbe\u0caf;\u0cb8\u0c82\u0cb0\u0c9a\u0ca8\u0cc6;\u0cb9\u0cbf\u0ca8\u0ccd\u0ca8\u0cc6\u0cb2\u0cc6;\u0ca1\u0cbe\u0cb0\u0ccd\u0c95\u0ccd;\u0cac\u0cc6\u0cb3\u0c95\u0cc1;\u0c95\u0cbf\u0cd5\u0cac\u0cc6\u0cc2\u0cd5\u0cb0\u0ccd\u0ca1\u0ccd \u0cb6\u0cbe\u0cb0\u0ccd\u0c9f\u0ccd\u0c95\u0c9f\u0ccd\u0c97\u0cb3\u0cc1;\u0c95\u0ca1\u0ca4;(Sketchpadio \u0c97\u0cc6) \u0c89\u0cb3\u0cbf\u0cb8\u0cbf;(\u0cb8\u0ccd\u0ca8\u0ccd\u0caf\u0cbe\u0caa\u0ccd\u0cb6\u0cbe\u0c9f\u0ccd) \u0c89\u0cb3\u0cbf\u0cb8\u0cbf;\u0c95\u0ccd\u0cb2\u0cbf\u0c95\u0ccd \u0cae\u0cbe\u0ca1\u0cbf \u0cae\u0ca4\u0ccd\u0ca4\u0cc1 \u0ca8\u0cbf\u0cae\u0ccd\u0cae \u0cb8\u0ccd\u0c95\u0ccd\u0cb0\u0cbf\u0cd5\u0ca8\u0ccd\u0cb6\u0cbe\u0c9f\u0ccd \u0cb0\u0c9a\u0cbf\u0cb8\u0cb2\u0cc1 \u0c8e\u0cb3\u0cc6\u0caf\u0cbf\u0cb0\u0cbf;\u0ca1\u0cc6\u0cb8\u0ccd\u0c95\u0ccd\u0c9f\u0cbe\u0caa\u0ccd\u0c97\u0cc6;\u0c88 Sketchpadio;;\u0cb8\u0c82\u0caa\u0cc2\u0cb0\u0ccd\u0ca3 \u0caa\u0cb0\u0ca6\u0cc6\u0caf \u0c89\u0cb3\u0cbf\u0cb8\u0cbf;\u0cb8\u0ccd\u0c95\u0ccd\u0cb0\u0cbf\u0cd5\u0ca8\u0ccd\u0cb6\u0cbe\u0c9f\u0ccd \u0c89\u0cb3\u0cbf\u0cb8\u0cbf;\u0caf\u0cbe\u0cb5\u0cc1\u0ca6\u0cc6\u0cd5 \u0caa\u0ccd\u0cb0\u0ca6\u0cc6\u0cd5\u0cb6\u0cb5\u0ca8\u0ccd\u0ca8\u0cc1 \u0c86\u0caf\u0ccd\u0c95\u0cc6 \u0cae\u0cbe\u0ca1\u0cb2\u0cbe\u0caf\u0cbf\u0ca4\u0cc1;\u0ca8\u0cbf\u0cae\u0ccd\u0cae \u0ca1\u0ccc\u0ca8\u0ccd\u0cb2\u0cc6\u0cc2\u0cd5\u0ca1\u0ccd \u0ca1\u0cc6\u0cd6\u0cb0\u0cc6\u0c95\u0ccd\u0c9f\u0cb0\u0cbf \u0c9a\u0cbf\u0ca4\u0ccd\u0cb0\u0cb5\u0ca8\u0ccd\u0ca8\u0cc1 \u0c89\u0cb3\u0cbf\u0cb8\u0cb2\u0cbe\u0c97\u0cc1\u0ca4\u0ccd\u0ca4\u0cbf\u0ca6\u0cc6;\u0cab\u0cc6\u0cd6\u0cb2\u0ccd \u0c85\u0caa\u0ccd\u0cb2\u0cc6\u0cc2\u0cd5\u0ca1\u0ccd;\u0c87\u0ca4\u0cbf\u0cb9\u0cbe\u0cb8;\u0c87\u0ca4\u0cbf\u0cb9\u0cbe\u0cb8 \u0cb0\u0ca6\u0ccd\u0ca6\u0cc1\u0c97\u0cc6\u0cc2\u0cb3\u0cbf\u0cb8\u0cbf;\u0c87\u0ca4\u0cbf\u0cb9\u0cbe\u0cb8 \u0cae\u0ca4\u0ccd\u0ca4\u0cc6\u0cae\u0cbe\u0ca1\u0cc1;\u0c9f\u0cc2\u0cb2\u0ccd \u0c86\u0caf\u0ccd\u0c95\u0cc6\u0cae\u0cbe\u0ca1\u0cbf;\u0c8e\u0cb2\u0ccd\u0cb2\u0cbe \u0c86\u0caf\u0ccd\u0c95\u0cc6;\u0cb5\u0cbf\u0cb2\u0cc6\u0cc2\u0cd5\u0cae \u0c86\u0caf\u0ccd\u0c95\u0cc6;\u0c86\u0caf\u0ccd\u0c95\u0cc6 \u0ca4\u0caa\u0ccd\u0caa\u0cbf\u0cb8\u0cbf\u0c95\u0cc6\u0cc2\u0cb3\u0ccd\u0cb3\u0cb2\u0cc1;\u0c86\u0caf\u0ccd\u0c95\u0cc6 \u0c85\u0cb3\u0cbf\u0cb8\u0cbf;\u0c86\u0caf\u0ccd\u0c95\u0cc6 \u0ca8\u0c95\u0cb2\u0cbf\u0cb8\u0cbf;\u0c86\u0caf\u0ccd\u0c95\u0cc6 \u0c95\u0ca4\u0ccd\u0ca4\u0cb0\u0cbf\u0cb8\u0cbf;\u0c86\u0caf\u0ccd\u0c95\u0cc6 \u0c85\u0c82\u0c9f\u0cbf\u0cb8\u0cbf;\u0cb9\u0cbf\u0c82\u0ca6\u0cc1\u0cb3\u0cbf\u0ca6 \u0c86\u0caf\u0ccd\u0c95\u0cc6 \u0c95\u0cb3\u0cc1\u0cb9\u0cbf\u0cb8\u0cbf;\u0c86\u0caf\u0ccd\u0c95\u0cc6 \u0cae\u0cc1\u0c82\u0c97\u0ca1 \u0c95\u0cb3\u0cc1\u0cb9\u0cbf\u0cb8\u0cbf;\u0cae\u0cc1\u0c82\u0ca6\u0c95\u0ccd\u0c95\u0cc6 \u0c86\u0caf\u0ccd\u0c95\u0cc6 \u0c95\u0cb3\u0cc1\u0cb9\u0cbf\u0cb8\u0cbf;\u0cb9\u0cbf\u0c82\u0ca6\u0c95\u0ccd\u0c95\u0cc6 \u0c86\u0caf\u0ccd\u0c95\u0cc6 \u0c95\u0cb3\u0cc1\u0cb9\u0cbf\u0cb8\u0cbf;\u0cae\u0cc2\u0cb5\u0ccd \u0c86\u0caf\u0ccd\u0c95\u0cc6 \u0c8e\u0ca1;\u0c89\u0cb3\u0cbf\u0ca6\u0cbf\u0cb5\u0cc6;\u0cb0\u0cc6\u0cd6\u0c9f\u0ccd;\u0c85\u0caa\u0ccd;\u0ca1\u0ccc\u0ca8\u0ccd;\u0cb0\u0cc6\u0cd6\u0c9f\u0ccd \u0c86\u0caf\u0ccd\u0c95\u0cc6 \u0cb8\u0cb0\u0cbf\u0cb8\u0cbf;\u0c86\u0caf\u0ccd\u0c95\u0cc6 \u0c87\u0cb0\u0cc1\u0ca4\u0ccd\u0ca4\u0ca6\u0cc6;\u0c86\u0caf\u0ccd\u0c95\u0cc6 \u0c95\u0cc6\u0cb3\u0c97\u0cc6\u0c9a\u0cb2\u0cbf\u0cb8\u0cc1;\u0caa\u0ca0\u0ccd\u0caf \u0c9f\u0cc2\u0cb2\u0ccd;Rescale \u0cac\u0ca6\u0cb2\u0cbf\u0c97\u0cc6 \u0cae\u0cb0\u0cc1\u0c97\u0cbe\u0ca4\u0ccd\u0cb0\u0c97\u0cc6\u0cc2\u0cb3\u0cbf\u0cb8\u0cbf;\u0c9f\u0cc2\u0cb2\u0ccd \u0cac\u0ca6\u0cb2\u0cbe\u0cb5\u0ca3;\u0c95\u0ccd\u0caf\u0cbe\u0cb2\u0cbf\u0c97\u0ccd\u0cb0\u0cab\u0cbf \u0c9f\u0cc2\u0cb2\u0ccd;\u0cac\u0ccd\u0cb0\u0cb7\u0ccd \u0c9f\u0cc2\u0cb2\u0ccd \u0caa\u0cc6\u0cd5\u0c82\u0c9f\u0ccd;\u0caa\u0cc6\u0ca8\u0ccd\u0cb8\u0cbf\u0cb2\u0ccd \u0c9f\u0cc2\u0cb2\u0ccd;Ereaser \u0c9f\u0cc2\u0cb2\u0ccd;\u0c9f\u0cc2\u0cb2\u0ccd \u0c85\u0c82\u0c9a\u0cc6\u0c9a\u0cbf\u0cd5\u0c9f\u0cbf;Clipart \u0c9f\u0cc2\u0cb2\u0ccd;Clipart \u0cb5\u0cbf\u0c82\u0ca1\u0cc6\u0cc2\u0cd5 \u0c9f\u0cbe\u0c97\u0cb2\u0ccd;\u0cac\u0ca3\u0ccd\u0ca3 \u0c86\u0caf\u0ccd\u0ca6\u0cc1\u0c95\u0cc6\u0cc2\u0cb3\u0ccd\u0cb3\u0cc1\u0cb5\u0cc1\u0ca6\u0cc1;(\u0ca8\u0cbf\u0cd5\u0cb5\u0cc1 \u0c87\u0cb2\u0ccd\u0cb2\u0cbf\u0ca6\u0ccd\u0ca6\u0cbf\u0cd5\u0cb0\u0cbf) \u0cb8\u0cb9\u0cbe\u0caf;\u0c9c\u0cc2\u0cae\u0ccd;\u0cb8\u0cc6\u0cd6\u0ca8\u0ccd \u0c9c\u0cc2\u0cae\u0ccd;\u0c9c\u0cc2\u0cae\u0ccd \u0c94\u0c9f\u0ccd;\u0ca8\u0cbf\u0c9c\u0cb5\u0cbe\u0ca6 \u0c97\u0cbe\u0ca4\u0ccd\u0cb0\u0c95\u0ccd\u0c95\u0cc6 \u0c9c\u0cc2\u0cae\u0ccd;\u0c87\u0cb2\u0ccd\u0cb2\u0cbf \u0cab\u0cc6\u0cd6\u0cb2\u0ccd\u0cb8\u0ccd \u0cac\u0cbf\u0ca1\u0cbf;\u0ca4\u0cbe\u0caa\u0cae\u0cbe\u0ca8;\u0c9f\u0cbf\u0c82\u0c9f\u0ccd;\u0cae\u0cbe\u0ca8\u0ccd\u0caf\u0ca4\u0cc6;\u0caa\u0ccd\u0cb0\u0c95\u0cbe\u0cb6\u0cae\u0cbe\u0ca8;\u0c87\u0ca6\u0c95\u0ccd\u0c95\u0cc6;\u0cb6\u0cc1\u0ca6\u0ccd\u0ca7\u0ca4\u0ccd\u0cb5".split(";"),
        sr: "\u041b\u0438 \u0421\u0442\u0435 \u0421\u0438\u0433\u0443\u0440\u043d\u0438 \u0414\u0430 \u0416\u0435\u043b\u0438\u0442\u0435 \u0414\u0430 \u041e\u0431\u0440\u0438\u0448\u0435\u0442\u0435 \u041f\u043b\u0430\u0442\u043d\u043e,\u0418\u0437\u0431\u0440\u0438\u0448\u0438,\u0420\u043e\u0442\u0438\u0440\u0430\u045a\u0435,\u0420\u043e\u0442\u0438\u0440\u0430\u045a\u0435 \u0418 \u0420\u0430\u0437\u043c\u0435\u0440\u0443,\u0421\u043a\u0430\u043b\u0430,\u041c\u043e\u0432\u0435,\u0413\u0443\u043c\u0438\u0446\u0443,\u041f\u0440\u0435\u0432\u0435\u0434\u0438,\u0420\u0430\u0437\u043c\u0430\u043a,\u0421\u0442\u0440\u0435\u0430\u043c\u0435\u0440,\u0426\u0445\u0440\u043e\u043c\u0435,\u041a\u0440\u0437\u043d\u043e,\u0421\u0445\u0430\u0434\u0435\u0440,\u0421\u043a\u0435\u0442\u0446\u0445\u0438,\u0412\u0435\u0431,\u041e\u043f\u0430\u0446\u0438\u0442\u0438,\u041f\u0440\u0435\u0447\u043d\u0438\u043a,\u0420\u043e\u0442\u0438\u0440\u0430\u045a\u0435,\u0421\u043a\u0430\u043b\u0430,\u0421\u0442\u0430\u043c\u043f,\u041e\u0431\u043b\u0438\u0446\u0438,\u0415\u043b\u0438\u043f\u0441\u0443,\u041f\u0440\u0430\u0432\u043e\u0443\u0433\u0430\u043e\u043d\u0438\u043a,\u041f\u043e\u043b\u0438\u0433\u043e\u043d,\u0421\u0442\u0440\u0430\u043d\u0435,\u041f\u0440\u043e\u0434\u0430\u0432\u043d\u0438\u0446\u0430,\u041d\u0430\u0433\u0438\u0431,\u0417\u0432\u0435\u0437\u0434\u0430,\u0421\u043f\u0438\u0440\u0430\u043b\u043d\u0438,\u041d\u0430\u043c\u043e\u0442\u0430\u0458\u0438,\u0428\u0438\u0440\u0438,\u0411\u0443\u0440\u0441\u0442,\u0420\u0430\u0434\u0438\u0458\u0430\u043b\u043d\u0430 \u0423\u0437\u0430\u0441\u0442\u043e\u043f\u043d\u043e\u0433,\u0421\u0442\u0438\u043b\u043e\u0432\u0438,\u041f\u043e\u0441\u0442\u0435\u043f\u0435\u043d\u043e,\u0411\u043e\u0458\u0430,\u0411\u0440\u0438\u0441\u0430\u045a\u0435 \u041b\u0430\u0438\u0435\u0440,\u041c\u043e\u0432\u0435 \u041b\u0430\u0438\u0435\u0440,\u0421\u0446\u0430\u043b\u0435 \u041b\u0430\u0438\u0435\u0440,\u0420\u043e\u0442\u0430\u0442\u0435 \u041b\u0430\u0438\u0435\u0440,\u041a\u0430\u0440\u0438\u043a\u0430\u0442\u0443\u0440\u0430,\u0422\u0435\u043a\u0441\u0442,\u0412\u0435\u043b\u0438\u0447\u0438\u043d\u0430 \u0421\u043b\u043e\u0432\u0430,\u0417\u0430\u043c\u0430\u0433\u043b\u0438,\u041b\u043e\u0430\u0434\u0438\u043d\u0433,\u041a\u0430\u043b\u0438\u0433\u0440\u0430\u0444\u0438\u0458\u0430,\u041a\u0440\u0435\u0458\u043e\u043d,\u0427\u0435\u0442\u043a\u0438\u0446\u0435,\u041e\u043b\u043e\u0432\u043a\u0430,\u041f\u0440\u0435\u0443\u0437\u0438\u043c\u0430\u045a\u0435 \u0424\u0438\u043b\u0435,\u041f\u043e\u043c\u043e\u045b,\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0458\u0430,\u041f\u043e\u0437\u0430\u0434\u0438\u043d\u0438,\u041c\u0440\u0430\u043a,\u0421\u0432\u0435\u0442\u043b\u043e\u0441\u0442,\u041f\u0440\u0435\u0447\u0438\u0446\u0435 \u041d\u0430 \u0422\u0430\u0441\u0442\u0430\u0442\u0443\u0440\u0438,\u0424\u0438\u043b\u0435,\u0421\u0430\u0432\u0435 (\u043d\u0430 \u0421\u043a\u0435\u0442\u0446\u0445\u043f\u0430\u0434\u0438\u043e),\u0421\u0430\u0447\u0443\u0432\u0430\u0458 (\u0441\u043d\u0438\u043c\u0430\u043a),\u0426\u043b\u0438\u0446\u043a &amp; \u041f\u0440\u0435\u0432\u0443\u0446\u0438\u0442\u0435 \u0414\u0430 \u0411\u0438\u0441\u0442\u0435 \u041d\u0430\u043f\u0440\u0430\u0432\u0438\u043b\u0438 \u0421\u043d\u0438\u043c\u0430\u043a \u0415\u043a\u0440\u0430\u043d\u0430,\u0417\u0430 \u0414\u0435\u0441\u043a\u0442\u043e\u043f,\u0414\u0430 \u0421\u043a\u0435\u0442\u0446\u0445\u043f\u0430\u0434\u0438\u043e,\u0421\u0438\u043d\u0446\u0440\u043e\u043d\u0438\u0437\u0435,\u0421\u0430\u0447\u0443\u0432\u0430\u0458 \u0426\u0435\u043e \u0415\u043a\u0440\u0430\u043d,\u0421\u0430\u0432\u0435 \u0421\u0446\u0440\u0435\u0435\u043d\u0441\u0445\u043e\u0442,\u041d\u0438\u0458\u0435 \u041e\u0431\u043b\u0430\u0441\u0442 \u0408\u0435 \u0418\u0437\u0430\u0431\u0440\u0430\u043d,\u0427\u0443\u0432\u0430\u045a\u0435 \u0421\u043b\u0438\u043a\u0443 \u0417\u0430 \u041f\u0440\u0435\u0443\u0437\u0438\u043c\u0430\u045a\u0435 \u0414\u0438\u0440\u0435\u0446\u0442\u043e\u0440\u0438,\u0423\u043f\u043b\u043e\u0430\u0434 \u0424\u0438\u043b\u0435,\u0418\u0441\u0442\u043e\u0440\u0438\u0458\u0430,\u0423\u043d\u0434\u043e \u0425\u0438\u0441\u0442\u043e\u0440\u0438,\u0420\u0435\u0434\u043e \u0418\u0441\u0442\u043e\u0440\u0438\u0458\u0443,\u0418\u0437\u0430\u0431\u0435\u0440\u0438\u0442\u0435 \u0410\u043b\u0430\u0442\u043a\u0443,\u0418\u0437\u0430\u0431\u0435\u0440\u0438 \u0421\u0432\u0435,\u0418\u0437\u0430\u0431\u0435\u0440\u0438\u0442\u0435 \u0418\u043d\u0432\u0435\u0440\u0437\u043d\u0438,\u0411\u0435\u043a\u0441\u0442\u0432\u043e \u0421\u0435\u043b\u0435\u0446\u0442\u0438\u043e\u043d,\u0411\u0440\u0438\u0441\u0430\u045a\u0435 \u0421\u0435\u043b\u0435\u0446\u0442\u0438\u043e\u043d,\u041a\u043e\u043f\u0438\u0440\u0430\u0458 \u0418\u0437\u0431\u043e\u0440,\u0426\u0443\u0442 \u0421\u0435\u043b\u0435\u0446\u0442\u0438\u043e\u043d,\u041f\u0430\u0441\u0442\u0435 \u0421\u0435\u043b\u0435\u0446\u0442\u0438\u043e\u043d,\u041f\u043e\u0448\u0430\u0459\u0438 \u0421\u0435\u043b\u0435\u0446\u0442\u0438\u043e\u043d \u0423\u043d\u0430\u0437\u0430\u0434,\u041f\u043e\u0448\u0430\u0459\u0438 \u041f\u0440\u043e\u0441\u043b\u0435\u0452\u0443\u0458\u0435 \u0421\u0435\u043b\u0435\u043a\u0446\u0438\u0458\u0435,\u041f\u043e\u0448\u0430\u0459\u0438 \u0418\u0437\u0431\u043e\u0440 \u041d\u0430 \u0424\u0440\u043e\u043d\u0442\u0443,\u041f\u043e\u0448\u0430\u0459\u0438 \u0421\u0435\u043b\u0435\u043a\u0446\u0438\u0458\u0430 \u041d\u0430 \u041b\u0435\u0452\u0438\u043c\u0430,\u041f\u043e\u043a\u0440\u0435\u0442 \u0418\u0437\u0431\u043e\u0440 \u041b\u0435\u0432\u043e,\u041b\u0435\u0432\u043e,\u0422\u0430\u0447\u043d\u043e,\u0413\u043e\u0440\u0435,\u0414\u043e\u043b\u0435,\u041f\u0440\u0435\u043c\u0435\u0441\u0442\u0438\u0442\u0435 \u0421\u0435\u043b\u0435\u043a\u0446\u0438\u0458\u0443 \u0420\u0435\u0434\u0443,\u041c\u043e\u0432\u0435 \u0421\u0435\u043b\u0435\u0446\u0442\u0438\u043e\u043d \u0413\u043e\u0440\u0435,\u041f\u0440\u0435\u043c\u0435\u0441\u0442\u0438 \u0421\u0435\u043b\u0435\u043a\u0446\u0438\u0458\u0443 \u0414\u043e\u043b\u0435,\u0422\u0435\u043a\u0441\u0442 \u0422\u043e\u043e\u043b,\u041f\u0440\u043e\u043c\u0435\u043d\u0438\u0442\u0435 \u0412\u0435\u043b\u0438\u0447\u0438\u043d\u0443 \u0423\u043c\u0435\u0441\u0442\u043e \u0420\u0435\u0441\u0446\u0430\u043b\u0435,\u0410\u043b\u0430\u0442 \u0421\u0432\u0438\u0442\u0446\u0445\u0438\u043d\u0433,\u041a\u0430\u043b\u0438\u0433\u0440\u0430\u0444\u0438\u0458\u0430 \u0422\u043e\u043e\u043b,\u041f\u0430\u0438\u043d\u0442 \u0411\u0440\u0443\u0441\u0445 \u0422\u043e\u043e\u043b,\u041e\u043b\u043e\u0432\u043a\u0430 \u0410\u043b\u0430\u0442\u0430,\u0415\u0440\u0435\u0430\u0441\u0435\u0440 \u0422\u043e\u043e\u043b,\u041f\u0435\u0447\u0430\u0442 \u0422\u043e\u043e\u043b,\u041a\u0430\u0440\u0438\u043a\u0430\u0442\u0443\u0440\u0430 \u0422\u043e\u043e\u043b,\u041a\u0430\u0440\u0438\u043a\u0430\u0442\u0443\u0440\u0430 \u041f\u0440\u043e\u0437\u043e\u0440 \u0422\u043e\u0433\u0433\u043b\u0435,\u0426\u043e\u043b\u043e\u0440 \u041f\u0438\u0446\u043a\u0435\u0440,\u041f\u043e\u043c\u043e\u045b (\u0438\u043e\u0443 \u0410\u0440\u0435 \u0425\u0435\u0440\u0435),\u0417\u0443\u043c\u0438\u0440\u0430\u045a\u0435,\u0417\u043e\u043e\u043c \u0418\u043d,\u0423\u043c\u0430\u045a\u0438,\u0417\u0443\u043c\u0438\u0440\u0430\u045a\u0435 \u0421\u0442\u0432\u0430\u0440\u043d\u043e\u0458 \u0412\u0435\u043b\u0438\u0447\u0438\u043d\u0438,\u0411\u0430\u0446\u0438 \u0424\u0438\u043b\u0435\u0441 \u041e\u0432\u0434\u0435,\u0422\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u0430,\u041d\u0438\u0458\u0430\u043d\u0441\u0430,\u0418\u0437\u043b\u043e\u0436\u0435\u043d\u043e\u0441\u0442,\u041e\u0441\u0432\u0435\u0442\u0459\u0435\u043d\u043e\u0441\u0442,\u041a\u043e\u043d\u0442\u0440\u0430\u0441\u0442,\u0417\u0430\u0441\u0438\u045b\u0435\u045a\u0435".split(","),
        eo: "Vi Vere Volas Forvi\u015di La Tolo?,Forigu,Turni,Turni &amp; Grimpi,Skalo,Movi,,Traduki,Interspacigo,,,Pelto,,,Retejo,Opacidad,Diametro,Turni,Skalo,,Formojn,Elipso,Rektangulo,Poligono,Flankoj,Denta\u0135o,Deklivo,Stelo,Spiralo,Bobenoj,Diskonigi,Krevis,,Stiloj,Gradiento,Koloro,Forigu Layer,Movu Layer,Grimpi Layer,Turni Layer,,Teksto,,,\u015car\u011dante,Kaligrafio,,Peniko,Krajono,Downloading Dosiero,Helpi,Agordo,Fono,Mallumo,Lumo,Klavaro Mallongigojn,Dosiero,Savi (al Sketchpadio),Savi (ekrankopion),Klaku &amp; Treni Por Krei Vian Ekrankopio,Al Labortablo,\u0108i Sketchpadio,,Savi Tutan Ekranon,Savi Ekrankopio,Neniu Areo Estis Selektitaj,Savi Bildo Al Viaj Download Directory,Al\u015dutu Dosiero,Historio,Malfari Historio,Refari Historio,Elektu Ilo,Elektu \u0108ion,Elektu Inversa,Eskapi Selektado,Forigu Selektado,Kopiu Selektado,Tran\u0109i Selektado,Algluu Selektado,Sendu Selektado Malanta\u016den,Sendu Selektado Anta\u016daj,Sendu Selektado Por Fronto,Sendu Selektado Al Dorso,Move Selektado Maldekstra,Forlasis,\u011custe,\u011cis,Sube,Movu Selektado \u011custe,Movu Selektado \u011cis,Movu Selektado Down,Teksto Ilo,Regrandigi Anstata\u016d Rescale,Ilo Re\u015daltanta,Kaligrafio Ilo,Pentri Broso Ilo,Krajono Ilo,Ereaser Ilo,Stamp Ilo,Clipart Ilo,Clipart Fenestro Baskuligi,Koloro Picker,Helpo (vi Estas \u0108i Tie),,,Malzomi,Zomi Al Reala Grandeco,Drop Dosieroj Jen,Temperaturo,Nuancon,Ekspozicio,Brilo,Kontrasto,".split(","),
        ro: "Te\u021bi Sigur C\u0103 Dori\u021bi S\u0103 \u0218terge\u021bi Panza?,\u0218terge\u021bi,Rotire,Roti\u021bi &amp; Scar\u0103,Scar\u0103,Mutare,,Traduce\u021bi,Spa\u021biere,,,Blan\u0103,,Vag,,Opacitate,Diametru,Rotire,Scar\u0103,\u0218tampila,Forme,Elipsa,Dreptunghi,Poligon,P\u0103r\u021bi,,Pant\u0103,Stele,Spiral\u0103,C\u0103tu\u0219e,,,Radial Spargere,Stiluri,,Culoare,\u0218terge\u021bi Layer,Mutare Layer,,Roti\u021bi Layer,,,Dimensiune Font,Estompa,,Caligrafie,,Pensula,Creion,Desc\u0103rcarea De Fi\u0219ier,Ajutor,Configurare,Fundal,\u00centuneric,Lumina,Scurt\u0103turilor De La Tastatur\u0103,Fi\u0219ier,Save (la Sketchpadio),Salva\u021bi (instantaneu),Click &amp; Drag Pentru A Crea Captura De Ecran,Pentru A Desktop-ului,Pentru A Sketchpadio,Sincroniza,Salva\u021bi \u00centregul Ecran,Salva\u021bi Captura De Ecran,Nici O Zon\u0103 A Fost Selectat,Salvarea Imagine Pentru Directorul De Desc\u0103rcare Dumneavoastr\u0103,\u00cenc\u0103rca\u021bi Fi\u0219ier,Istoric,Anula\u021bi Istoric,Refacere Istoric,Selecta\u021bi Tool,Selecta\u021bi Toate,Selecta\u021bi Inverse,Selec\u021bia Scape,\u0218terge\u021bi Selec\u021bie,Copia\u021bi Selec\u021bie,Taie Selec\u021bie,Lipire Selec\u021bie,Trimite Selec\u021bia Ndoaselea,Trimite Atacan\u021bi De Selec\u021bie,Trimite Selec\u021bie \u00cen Fa\u021b\u0103,Selec\u021bie Pentru A Trimite \u00cenapoi,Selec\u021bia Deplasa Spre St\u00e2nga,St\u00e2nga,Corect,Sus,Jos,Mutare Selec\u021bie Dreapta,Mutare Selec\u021bie Sus,Mutare Selec\u021bie \u00cen Jos,,Redimensionarea Loc De Rescala,Instrumentul De Comutare,Caligrafie Tool,,Creion Tool,,,,Fereastra De Clipart Toggle,,Ajutor (e\u0219ti Aici),,M\u0103ri Inch,Mic\u0219orare,Zoom La Dimensiunea Real\u0103,Arunc\u0103 Fi\u0219iere Aici,Temperatura,,Expunere,Luminozitatea,,Satura\u021bie".split(","),
        ta: "\u0bcd\u0b95\u0bb3\u0bcd \u0b95\u0bc7\u0ba9\u0bcd\u0bb5\u0bbe\u0bb8\u0bcd \u0b85\u0bb4\u0bbf\u0b95\u0bcd\u0b95 \u0bb5\u0bc7\u0ba3\u0bcd\u0b9f\u0bc1\u0bae\u0bbe?,\u0ba8\u0bc0\u0b95\u0bcd\u0b95\u0bc1,\u0b9a\u0bc1\u0bb4\u0bb2\u0bc1\u0bae\u0bcd,\u0b9a\u0bc1\u0bb4\u0bb1\u0bcd\u0bb1 &amp; \u0b85\u0bb3\u0bb5\u0bbf\u0b9f,\u0b85\u0bb3\u0bb5\u0bc1,\u0ba8\u0b95\u0bb0\u0bcd\u0ba4\u0bcd\u0ba4,\u0b85\u0bb4\u0bbf\u0baa\u0bcd\u0baa\u0bbe\u0ba9\u0bcd,\u0bae\u0bc6\u0bbe\u0bb4\u0bbf\u0baa\u0bc6\u0baf\u0bb0\u0bcd\u0b95\u0bcd\u0b95,\u0b87\u0b9f\u0bc8\u0bb5\u0bc6\u0bb3\u0bbf,\u0ba8\u0bc0\u0ba3\u0bcd\u0b9f \u0b95\u0bc1\u0bb1\u0bc1\u0b95\u0bbf\u0baf \u0b95\u0bc6\u0bbe\u0b9f\u0bbf,\u0b95\u0bc1\u0bb0\u0bc7\u0bbe\u0bae\u0bcd,\u0bb0\u0bc7\u0bbe\u0bae\u0b99\u0bcd\u0b95\u0bb3\u0bcd,\u0ba8\u0bbf\u0bb4\u0bb2\u0bcd,\u0bae\u0bc7\u0bb2\u0bc7\u0bbe\u0b9f\u0bcd\u0b9f\u0bae\u0bbe\u0ba9,\u0bb5\u0bb2\u0bc8,\u0b92\u0bb3\u0bbf\u0baa\u0bc1\u0b95\u0bbe,\u0bb5\u0bbf\u0b9f\u0bcd\u0b9f\u0bae\u0bcd,\u0b9a\u0bc1\u0bb4\u0bb2\u0bc1\u0bae\u0bcd,\u0b85\u0bb3\u0bb5\u0bc1,\u0bae\u0bc1\u0ba4\u0bcd\u0ba4\u0bbf\u0bb0\u0bc8,\u0bb5\u0b9f\u0bbf\u0bb5\u0b99\u0bcd\u0b95\u0bb3\u0bcd,\u0ba8\u0bc0\u0bb3\u0bcd\u0bb5\u0b9f\u0bcd\u0b9f,\u0b9a\u0bc6\u0bb5\u0bcd\u0bb5\u0b95\u0bae\u0bcd,\u0baa\u0bb2\u0b95\u0bc7\u0bbe\u0ba3\u0bae\u0bcd,\u0baa\u0b95\u0bcd\u0b95\u0b99\u0bcd\u0b95\u0bb3\u0bbf\u0bb2\u0bc1\u0bae\u0bcd,\u0b95\u0bbf\u0baf\u0bb0\u0bcd,\u0b9a\u0bbe\u0baf\u0bcd\u0bb5\u0bc1,\u0bb8\u0bcd\u0b9f\u0bbe\u0bb0\u0bcd,\u0b9a\u0bc1\u0bb4\u0bb2\u0bcd,\u0b9a\u0bc1\u0bb0\u0bc1\u0bb3\u0bcd\u0b95\u0bb3\u0bcd,\u0baa\u0bb0\u0bb5\u0bbf\u0baf\u0ba4\u0bc1,\u0bb5\u0bc6\u0b9f\u0bbf\u0ba4\u0bcd\u0ba4\u0ba4\u0bc1,\u0b86\u0bb0 \u0bb5\u0bc6\u0b9f\u0bbf\u0baa\u0bcd\u0baa\u0bc1,\u0baa\u0bbe\u0b99\u0bcd\u0b95\u0bc1\u0b95\u0bb3\u0bcd,\u0b9a\u0bbe\u0baf\u0bcd\u0bb5\u0bc1,\u0bb5\u0ba3\u0bcd\u0ba3,\u0b85\u0b9f\u0bc1\u0b95\u0bcd\u0b95\u0bc8 \u0ba8\u0bc0\u0b95\u0bcd\u0b95\u0bc1,\u0b85\u0b9f\u0bc1\u0b95\u0bcd\u0b95\u0bc1 \u0ba8\u0b95\u0bb0\u0bcd\u0ba4\u0bcd\u0ba4,\u0b85\u0b9f\u0bc1\u0b95\u0bcd\u0b95\u0bc1 \u0b85\u0bb3\u0bb5\u0bbf\u0b9f,\u0b85\u0b9f\u0bc1\u0b95\u0bcd\u0b95\u0bc1 \u0b9a\u0bc1\u0bb4\u0bb1\u0bcd\u0bb1,\u0b86\u0baf\u0ba4\u0bcd\u0ba4,\u0b89\u0bb0\u0bc8,\u0b8e\u0bb4\u0bc1\u0ba4\u0bcd\u0ba4\u0bc1\u0bb0\u0bc1 \u0b85\u0bb3\u0bb5\u0bc1,\u0bae\u0b99\u0bcd\u0b95\u0bb2\u0bbe\u0b95,\u0b8e\u0bb8\u0bcd,\u0b95\u0bc8\u0baf\u0bc6\u0bb4\u0bc1\u0ba4\u0bcd\u0ba4\u0bc1\u0b95\u0bcd\u0b95\u0bb2\u0bc8,\u0ba8\u0bbf\u0bb1\u0b9a\u0bcd\u0b9a\u0bc7\u0bbe\u0b95\u0bcd\u0b95\u0bc1,\u0bb5\u0bb0\u0bcd\u0ba3\u0ba4\u0bcd\u0ba4\u0bc2\u0bb0\u0bbf\u0b95\u0bc8,\u0baa\u0bc6\u0ba9\u0bcd\u0b9a\u0bbf\u0bb2\u0bcd,\u0b95\u0bc7\u0bbe\u0baa\u0bcd\u0baa\u0bc1 \u0baa\u0ba4\u0bbf\u0bb5\u0bbf\u0bb1\u0b95\u0bcd\u0b95\u0bc1\u0bae\u0bcd,\u0b89\u0ba4\u0bb5\u0bbf,\u0b95\u0b9f\u0bcd\u0b9f\u0bae\u0bc8\u0baa\u0bcd\u0baa\u0bc1,\u0baa\u0bbf\u0ba9\u0bcd\u0ba9\u0ba3\u0bbf\u0baf\u0bbf\u0bb2\u0bcd,\u0b9f\u0bbe\u0bb0\u0bcd\u0b95\u0bcd,\u0b92\u0bb3\u0bbf,\u0bb5\u0bbf\u0b9a\u0bc8\u0baa\u0bcd\u0baa\u0bb2\u0b95\u0bc8 \u0b95\u0bc1\u0bb1\u0bc1\u0b95\u0bcd\u0b95\u0bc1\u0bb5\u0bb4\u0bbf\u0b95\u0bb3\u0bcd,\u0b95\u0bc7\u0bbe\u0baa\u0bcd\u0baa\u0bc1,(Sketchpadio \u0bb5\u0bc7\u0ba3\u0bcd\u0b9f\u0bc1\u0bae\u0bcd) \u0b9a\u0bc7\u0bae\u0bbf\u0b95\u0bcd\u0b95,(\u0baa\u0bc1\u0b95\u0bc8\u0baa\u0bcd\u0baa\u0b9f\u0bae\u0bcd) \u0b9a\u0bc7\u0bae\u0bbf\u0b95\u0bcd\u0b95,\u0b95\u0bbf\u0bb3\u0bbf\u0b95\u0bcd &amp; \u0b89\u0b99\u0bcd\u0b95\u0bb3\u0bcd \u0ba4\u0bbf\u0bb0\u0bc8 \u0b89\u0bb0\u0bc1\u0bb5\u0bbe\u0b95\u0bcd\u0b95 \u0b87\u0bb4\u0bc1\u0b95\u0bcd\u0b95\u0bb5\u0bc1\u0bae\u0bcd,\u0b9f\u0bc6\u0bb8\u0bcd\u0b95\u0bcd\u0b9f\u0bbe\u0baa\u0bcd \u0bb5\u0bc7\u0ba3\u0bcd\u0b9f\u0bc1\u0bae\u0bcd,\u0b87\u0ba8\u0bcd\u0ba4 Sketchpadio,,\u0bae\u0bc1\u0bb4\u0bc1 \u0ba4\u0bbf\u0bb0\u0bc8\u0baf\u0bbf\u0bb2\u0bcd \u0b9a\u0bc7\u0bae\u0bbf\u0b95\u0bcd\u0b95,\u0ba4\u0bbf\u0bb0\u0bc8 \u0b9a\u0bc7\u0bae\u0bbf\u0b95\u0bcd\u0b95,\u0b8e\u0ba8\u0bcd\u0ba4 \u0baa\u0b95\u0bc1\u0ba4\u0bbf\u0baf\u0bbf\u0bb2\u0bcd \u0ba4\u0bc7\u0bb0\u0bcd\u0bb5\u0bc1 \u0b9a\u0bc6\u0baf\u0bcd\u0baf\u0baa\u0bcd\u0baa\u0b9f\u0bcd\u0b9f\u0bbe\u0bb0\u0bcd,\u0b89\u0b99\u0bcd\u0b95\u0bb3\u0bcd \u0baa\u0ba4\u0bbf\u0bb5\u0bbf\u0bb1\u0b95\u0bcd\u0b95 \u0b85\u0b9f\u0bc8\u0bb5\u0bc1 \u0baa\u0b9f\u0ba4\u0bcd\u0ba4\u0bc8 \u0b9a\u0bc7\u0bae\u0bbf\u0b95\u0bcd\u0b95\u0bc1\u0bae\u0bcd,\u0b95\u0bc7\u0bbe\u0baa\u0bcd\u0baa\u0bc1 \u0baa\u0ba4\u0bbf\u0bb5\u0bc7\u0bb1\u0bcd\u0bb1\u0bc1,\u0bb5\u0bb0\u0bb2\u0bbe\u0bb1\u0bc1,\u0bb5\u0bb0\u0bb2\u0bbe\u0bb1\u0bc1 \u0bae\u0bc0\u0bb3\u0bae\u0bc8,\u0bb5\u0bb0\u0bb2\u0bbe\u0bb1\u0bc1 \u0bae\u0bc0\u0ba3\u0bcd\u0b9f\u0bc1\u0bae\u0bcd,\u0b95\u0bb0\u0bc1\u0bb5\u0bbf \u0ba4\u0bc7\u0bb0\u0bcd\u0ba8\u0bcd\u0ba4\u0bc6\u0b9f\u0bc1\u0b95\u0bcd\u0b95\u0bb5\u0bc1\u0bae\u0bcd,\u0b85\u0ba9\u0bc8\u0ba4\u0bcd\u0ba4\u0bc1 \u0ba4\u0bc7\u0bb0\u0bcd\u0bb5\u0bc1,\u0b8e\u0ba4\u0bbf\u0bb0\u0bcd\u0bae\u0bbe\u0bb1\u0bbe\u0ba9 \u0ba4\u0bc7\u0bb0\u0bcd\u0ba8\u0bcd\u0ba4\u0bc6\u0b9f\u0bc1\u0b95\u0bcd\u0b95\u0bb5\u0bc1\u0bae\u0bcd,\u0ba4\u0bc7\u0bb0\u0bcd\u0bb5\u0bc1 \u0b8e\u0bb8\u0bcd\u0b95\u0bc7\u0baa\u0bcd,\u0ba4\u0bc7\u0bb0\u0bcd\u0bb5\u0bc1 \u0ba8\u0bc0\u0b95\u0bcd\u0b95\u0bc1,\u0ba4\u0bc7\u0bb0\u0bcd\u0bb5\u0bc1 \u0ba8\u0b95\u0bb2\u0bc6\u0b9f\u0bc1\u0b95\u0bcd\u0b95,\u0ba4\u0bc7\u0bb0\u0bcd\u0bb5\u0bc1 \u0bb5\u0bc6\u0b9f\u0bcd\u0b9f\u0bbf,\u0ba4\u0bc7\u0bb0\u0bcd\u0bb5\u0bc1 \u0b92\u0b9f\u0bcd\u0b9f\u0bb5\u0bc1\u0bae\u0bcd,\u0baa\u0bbf\u0ba9\u0bcd\u0baa\u0bbe\u0b95 \u0ba4\u0bc7\u0bb0\u0bcd\u0bb5\u0bc1 \u0b85\u0ba9\u0bc1\u0baa\u0bcd\u0baa,\u0ba4\u0bc7\u0bb0\u0bcd\u0bb5\u0bc1 \u0bae\u0bc1\u0ba9\u0bcd\u0ba9\u0bc7\u0bbe\u0b95\u0bcd\u0b95\u0bbf\u0baf \u0b85\u0ba9\u0bc1\u0baa\u0bcd\u0baa,\u0bae\u0bc1\u0ba9\u0bcd \u0ba4\u0bc7\u0bb0\u0bcd\u0bb5\u0bc1 \u0b85\u0ba9\u0bc1\u0baa\u0bcd\u0baa,\u0ba4\u0bbf\u0bb0\u0bc1\u0bae\u0bcd\u0baa \u0ba4\u0bc7\u0bb0\u0bcd\u0bb5\u0bc1 \u0b85\u0ba9\u0bc1\u0baa\u0bcd\u0baa,\u0ba8\u0b9f\u0bb5\u0b9f\u0bbf\u0b95\u0bcd\u0b95\u0bc8 \u0ba4\u0bc7\u0bb0\u0bcd\u0bb5\u0bc1 \u0b87\u0b9f\u0ba4\u0bc1,\u0bb5\u0bbf\u0b9f\u0bcd\u0b9f\u0bc1,\u0b9a\u0bb0\u0bbf,,\u0b95\u0bc0\u0bb4\u0bc7,\u0bb5\u0bb2\u0ba4\u0bc1 \u0ba4\u0bc7\u0bb0\u0bcd\u0bb5\u0bc1 \u0ba8\u0b95\u0bb0\u0bcd\u0ba4\u0bcd\u0ba4\u0bc1,\u0ba4\u0bc7\u0bb0\u0bcd\u0bb5\u0bc1 \u0ba8\u0b95\u0bb0\u0bcd\u0ba4\u0bcd\u0ba4\u0bc1,\u0ba4\u0bc7\u0bb0\u0bcd\u0bb5\u0bc1 \u0ba8\u0b95\u0bb0\u0bcd\u0ba4\u0bcd\u0ba4\u0bc1,\u0b89\u0bb0\u0bc8 \u0b95\u0bb0\u0bc1\u0bb5\u0bbf,Rescale \u0baa\u0ba4\u0bbf\u0bb2\u0bbe\u0b95 \u0b85\u0bb3\u0bb5\u0bc8,\u0b95\u0bb0\u0bc1\u0bb5\u0bbf \u0bb8\u0bcd\u0bb5\u0bbf\u0b9f\u0bcd\u0b9a\u0bbf\u0b99\u0bcd,\u0b95\u0bc8\u0baf\u0bc6\u0bb4\u0bc1\u0ba4\u0bcd\u0ba4\u0bc1\u0b95\u0bcd\u0b95\u0bb2\u0bc8 \u0b95\u0bb0\u0bc1\u0bb5\u0bbf,\u0baa\u0bcd\u0bb0\u0bb7\u0bcd \u0b95\u0bb0\u0bc1\u0bb5\u0bbf \u0b9a\u0bbf\u0ba4\u0bcd\u0ba4\u0bb0\u0bbf\u0b95\u0bcd\u0b95,\u0baa\u0bc6\u0ba9\u0bcd\u0b9a\u0bbf\u0bb2\u0bcd \u0b95\u0bb0\u0bc1\u0bb5\u0bbf,Ereaser \u0b95\u0bb0\u0bc1\u0bb5\u0bbf,\u0b95\u0bb0\u0bc1\u0bb5\u0bbf \u0bae\u0bc1\u0ba4\u0bcd\u0ba4\u0bbf\u0bb0\u0bc8,\u0b86\u0baf\u0ba4\u0bcd\u0ba4 \u0b95\u0bb0\u0bc1\u0bb5\u0bbf,\u0b86\u0baf\u0ba4\u0bcd\u0ba4 \u0bb5\u0bbf\u0ba3\u0bcd\u0b9f\u0bc7\u0bbe \u0ba8\u0bbf\u0bb2\u0bc8\u0bae\u0bbe\u0bb1\u0bcd\u0bb1\u0bc1,\u0ba4\u0bc7\u0bb0\u0bcd\u0bb5\u0bbf,(\u0ba8\u0bc0\u0b99\u0bcd\u0b95\u0bb3\u0bcd \u0b87\u0b99\u0bcd\u0b95\u0bc7) \u0b89\u0ba4\u0bb5\u0bbf,\u0b9c\u0bc2\u0bae\u0bcd,\u0b89\u0bb3\u0bcd\u0bb3\u0bc7 \u0baa\u0bc6\u0bb0\u0bbf\u0ba4\u0bbe\u0b95\u0bcd\u0b95\u0bb5\u0bc1\u0bae\u0bcd,\u0b9a\u0bbf\u0bb1\u0bbf\u0ba4\u0bbe\u0b95\u0bcd\u0b95\u0bc1\u0b95,\u0b89\u0ba3\u0bcd\u0bae\u0bc8\u0baf\u0bbe\u0ba9 \u0b85\u0bb3\u0bb5\u0bc8 \u0baa\u0bc6\u0bb0\u0bbf\u0ba4\u0bbe\u0b95\u0bcd\u0b95\u0bb5\u0bc1\u0bae\u0bcd,\u0b87\u0b99\u0bcd\u0b95\u0bc1 \u0b95\u0bc7\u0bbe\u0baa\u0bcd\u0baa\u0bc1\u0b95\u0bb3\u0bcd \u0b95\u0bc8\u0bb5\u0bbf\u0b9f,\u0bb5\u0bc6\u0baa\u0bcd\u0baa\u0ba8\u0bbf\u0bb2\u0bc8,\u0b9a\u0bbe\u0baf\u0bb2\u0bcd,\u0bb5\u0bc6\u0bb3\u0bbf\u0baa\u0bcd\u0baa\u0bbe\u0b9f\u0bc1,\u0b92\u0bb3\u0bbf\u0bb0\u0bcd\u0bb5\u0bc1,\u0bae\u0bbe\u0bb1\u0bbe\u0b95,\u0bae\u0bc1\u0bb4\u0bc1\u0bae\u0bc8\u0baf\u0bbe\u0b95 \u0ba8\u0ba9\u0bc8\u0ba4\u0bcd\u0ba4\u0bb2\u0bcd".split(","),
        "zh-TW": "\u8981\u6e05\u9664\u756b\u5e03 \u522a\u9664 \u65cb\u8f49 \u65cb\u8f49\u548c\u7e2e\u653e \u898f\u6a21 \u79fb\u52d5 \u6a61\u76ae\u64e6 \u7ffb\u8b6f \u9593\u8ddd \u6d41\u5149 Chrome\u700f\u89bd\u5668 \u6bdb\u76ae \u8457\u8272\u5668 \u7c97\u7565 \u7db2\u7d61 \u4e0d\u900f\u660e\u5ea6 \u76f4\u5f91 \u65cb\u8f49 \u898f\u6a21 \u90f5\u7968 \u5f62\u72c0 \u6a62\u5713\u5f62 \u77e9\u5f62 \u591a\u908a\u5f62 \u96d9\u65b9 \u9f52\u8f2a \u659c\u5761 \u660e\u661f \u87ba\u65cb\u7dda \u7dda\u5708 \u8513\u5ef6\u958b\u4f86 \u7a81\u767c \u5f91\u5411\u7834\u88c2 \u6a23\u5f0f \u6f38\u8b8a \u984f\u8272 \u522a\u9664\u5716\u5c64 \u79fb\u52d5\u5716\u5c64 \u57a2\u5c64 \u65cb\u8f49\u5c64 \u526a\u8cbc\u756b \u6587\u672c \u5b57\u9ad4\u5927\u5c0f \u6a21\u7cca \u8f09\u5165\u4e2d \u66f8\u6cd5 \u881f\u7b46 \u756b\u7b46 \u925b\u7b46 \u4e0b\u8f09\u6587\u4ef6 \u5e6b\u52a9 \u914d\u7f6e \u80cc\u666f \u9ed1\u6697 \u5149 \u9375\u76e4\u5feb\u6377\u9375 \u6587\u4ef6 \u4fdd\u5b58\uff08\u4ee5Sketchpadio\uff09 \u4fdd\u5b58\uff08\u5feb\u7167\uff09 \u9ede\u64ca\u548c\u62d6\u52d5\u4f86\u5275\u5efa\u4f60\u7684\u5c4f\u5e55\u622a\u5716 \u5230\u684c\u9762 \u8981sketchpadio  \u4fdd\u5b58\u6574\u500b\u5c4f\u5e55 \u5c4f\u5e55\u5feb\u7167\u4fdd\u5b58 \u6c92\u6709\u88ab\u9078\u4e2d\u7684\u5340\u57df \u4fdd\u5b58\u5716\u50cf\u5230\u4f60\u7684\u4e0b\u8f09\u76ee\u9304 \u4e0a\u50b3\u6587\u4ef6 \u6b77\u53f2 \u64a4\u6d88\u6b77\u53f2\u8a18\u9304 \u91cd\u505a\u6b77\u53f2 \u9078\u64c7\u201c\u5de5\u5177\u201d \u201c\u5168\u9078\u201d \u9078\u64c7\u9006 \u9003\u96e2\u9078\u64c7 \u522a\u9664\u9078\u64c7 \u8907\u88fd\u9078\u64c7 \u5207\u7684\u9078\u64c7 \u7c98\u8cbc\u9078\u64c7 \u9078\u64c7\u5411\u5f8c \u5c07\u9078\u64c7\u524d\u92d2 \u9078\u64c7\u524d\u9762 \u767c\u9001\u5230\u5f8c\u53f0\u7684\u9078\u64c7 \u5411\u5de6\u79fb\u52d5\u9078\u64c7 \u96e2\u958b \u53f3 \u6700\u591a \u201c\u95dc\u9589\u201d \u5411\u53f3\u79fb\u52d5\u9078\u64c7 \u79fb\u52d5\u9078\u64c7 \u5411\u4e0b\u79fb\u52d5\u9078\u64c7 \u6587\u5b57\u5de5\u5177 \u8abf\u6574\u5927\u5c0f\uff0c\u800c\u4e0d\u662f\u91cd\u65b0\u8abf\u6574 \u5de5\u5177\u5207\u63db \u66f8\u6cd5\u5de5\u5177 \u756b\u7b46\u5de5\u5177 \u925b\u7b46\u5de5\u5177 Ereaser\u5de5\u5177 \u5716\u7ae0\u5de5\u5177 \u526a\u8cbc\u756b\u5de5\u5177 \u526a\u8cbc\u756b\u7a97\u53e3\u5207\u63db \u62fe\u8272\u5668 \u5e6b\u52a9\uff08\u5728\u9019\u88e1\uff09 \u8b8a\u7126 \u653e\u5927 \u7e2e\u5c0f \u7e2e\u653e\u5230\u5be6\u969b\u5927\u5c0f \u522a\u9664\u9019\u88e1\u7684\u6587\u4ef6 \u6eab\u5ea6 \u8272\u8abf \u66dd\u5149 \u4eae\u5ea6 \u5c0d\u6bd4\u5ea6 \u98fd\u548c".split(" ")
    },
        d;
    for (d in g) {
        a.language[d] = {};
        var c = g[d],
            b = 0,
            f;
        for (f in a.language.en) a.language[d][f] = c[b++]
    }
    return a
}(sketch);
"undefined" === typeof sketch && (sketch = {});
sketch = function (a) {
    a.render = {};
    a.render.state = "preload";
    var g = {
        "root.actions.reset": !0,
        "root.render.preload": !0,
        "root.render.resize": !0,
        "root.render.everything": !0
    };
    a.render.actions = function (c, d, e) {
        if (a.__rendering) d && d();
        else if (a.__rendering = !0, a.render.clipped = !1, a.render.from = c, a.render.timestamp = (new Date).getTime(), "root.render.preload" === c && (a.render.state = "preload"), a.feature.canvas.editable || g[c] || !a.actions.data.length)
            if (a.feature.canvas.editable || "preload" === a.render.state) {
                e = a.canvas2d.width *
                    a.canvas2d.pixelRatio;
                var l = a.canvas2d.height * a.canvas2d.pixelRatio;
                if (a.feature.canvas.clearWithBackground && a.render.cache.enabled && !a.render.forOutput && 1 !== a.canvas2d.scale) {
                    a.ctx.save();
                    a.ctx.globalAlpha = 1;
                    var m = a.project.scrollLeft,
                        k = a.project.scrollTop;
                    a.ctx.translate(-m, -k);
                    a.ctx.fillStyle = a.configure.backgroundRaw;
                    a.ctx.fillRect(m, k, e, l);
                    a.ctx.restore()
                } else a.ctx.clearRect(0, 0, e, l);
                a.render.oncomplete = function () {
                    a.tool.device && "paint" !== a.tool.device.composite && a.active.drawImage(a.ctx.canvas,
                        0, 0);
                    a.feature.canvas.drawClippingBox && a.actions.selectionCount && (a.render.drawClipArea(a.active), a.active.stroke());
                    d && d()
                };
                b(c)
            } else a.__rendering = !1, d && d();
            else {
                c = "undefined" === typeof a.actions.idx || "root.area.hide" === c ? a.ctx : a.active;
                e = a.actions.data;
                l = !1;
                for (m = 0; m < e.length; m++) k = e[m], !k.dirty && !k.dirtyTransform || k.error || (a.actions.updateTransform(k), a.render.action(c, k), l = !0);
                a.tool.device && "paint" !== a.tool.device.composite && a.active.drawImage(a.ctx.canvas, 0, 0);
                a.__rendering = !1;
                l && a.area.renderControls();
                d && d()
            }
    };
    var d = -1,
        c = 0,
        b = function (f) {
            var h = a.ctx,
                e = a.actions.data,
                g = "preload" === a.render.state;
            if (0 !== ++d && 0 === d % (g ? 16 : 2048))++c, window.setTimeout(b, 1);
            else {
                var m = d - c;
                if (m > e.length - 1) g && a.loader.loaded("render"), c = 0, d = -1, a.__rendering = !1, a.render.state = "loaded", a.render.oncomplete && (a.render.oncomplete(), delete a.render.oncomplete), a.feature.debug && console.log("render", a.render.timestamp - (new Date).getTime());
                else {
                    e = e[m];
                    if (e.error) return b();
                    if (g = e.toolkit) {
                        a.actions.updateTransform(e);
                        if (isFinite(e.visible)) {
                            if (!e.visible) return b()
                        } else if (!a.actions.isVisible(e)) return b();
                        a.render.clipped || (a.render.drawClipArea(h), h.clip());
                        if (a.render.selectionBypass && !a.render.selectionBypass[m]) return b();
                        if (a.actions.idx === m) {
                            if (!a.feature.gradientTextBeta && "text" === e.type && !a.area.hidden) return a.area.drawControls(a.active, e), b();
                            g.renderAction ? g.renderAction(e, !1, f, b) : a.render.action(g.ctx, e, b);
                            a.area.drawControls(a.active, e)
                        } else g.renderAction ? g.renderAction(e, !0, f, b) : a.render.action(g.ctx, e, b)
                    } else {
                        a.feature.debug && console.log("toolkit was not loaded", e.id, e.type);
                        if (!a.actions.getToolkit(e.type)) return b();
                        c = 0;
                        d = -1;
                        a.__rendering = !1;
                        window.setTimeout(a.render.preload, 0)
                    }
                }
            }
        };
    a.render.drawClipArea = function (b) {
        var c = a.canvas2d.clip,
            e = Math.min(b.canvas.width, c.x2),
            d = Math.min(b.canvas.height, c.y2);
        a.render.clipped = !0;
        b.beginPath();
        b.lineWidth = 0.5;
        b.strokeStyle = "#000";
        b.rect(c.x1, c.y1, e - c.x1, d - c.y1)
    };
    a.render.action = function (b, d, e) {
        var g = d.bbox,
            m = d.zIndex - c,
            k = a.actions.selection;
        d.selected = k[m];
        d.hovered = a.actions.hovered[m];
        if (a.render.cache.enabled && (!d.ctx || d.dirty || d.dirtyCacheForce) && (d.dirtyControl = !0, a.render.cache.add(d), !d.ctx || !d.ctx.canvas.width || !d.ctx.canvas.height)) {
            e && e();
            return
        }
        b.save();
        b.globalCompositeOperation = a.style.getComposite(d.composite);
        b.globalAlpha = a.detect.localAlpha[d.type] ? 1 : isFinite(d.opacity) ? d.opacity / 100 : 1;
        var q = Math.max(g.viewBox[2] / g.width, g.viewBox[3] / g.height);
        if (a.render.cache.enabled) {
            var p = d.placement.clone(),
                r = q / g.scale.x,
                q = q / g.scale.y,
                r = (g.scaleCache && g.scaleCache.x || 1) * r,
                q = (g.scaleCache && g.scaleCache.y || 1) * q;
            p.translate(-(a.render.cache.padding * r), -(a.render.cache.padding *
                q));
            p.scale(r, q);
            p.matrix.x = Math.floor(p.matrix.x);
            p.matrix.y = Math.floor(p.matrix.y);
            p.apply(b, !0);
            b.drawImage(d.ctx.canvas, 0, 0)
        } else p = d.placement.clone(), r = q / g.width, q /= g.height, p.matrix.x -= d.offsetCache || 0, p.matrix.y -= d.offsetCache || 0, p.apply(b, !0), b.beginPath(), b.rect(-0.5, -0.5, g.width * r + 1, g.height * q + 1), b.clip(), d.render(b, p, !1);
        b.restore();
        (a.feature[d.type] || a.feature.tools).drawBoundingBox && (k[m] && !isFinite(a.actions.idx)) && (m = a.area.padding, p = d.placement, "text" === d.type ? (d = 1, k = g.width, r = g.height) :
            (k = g.viewBox[2], d = k / g.width, r = d * g.height), b.save(), p.apply(b), b.beginPath(), p = m / g.scale.x * d, g = m / g.scale.y * d, b.rect(-p, -g, k + 2 * p, r + 2 * g), b.restore(), b.save(), b.lineWidth = 0.5, b.shadowOffsetX = 1, b.shadowOffsetY = 1, "dark" === a.configure.theme ? (b.shadowColor = "#000", b.strokeStyle = "#fff") : (b.shadowColor = "#fff", b.strokeStyle = "#000"), b.stroke(), b.restore());
        e && e()
    };
    a.render.cache2d = function () {
        var b = this;
        this.data = {};
        this.padding = 10;
        this.enabled = !0;
        this.clean = function (c) {
            c.ctx && (c.ctx.canvas.copies--, 0 === c.ctx.canvas.copies &&
                (delete b.data[c.hash], a.feature.debugCache && document.body.removeChild(c.ctx.canvas)))
        };
        this.add = function (c) {
            if (!c) return console.log("missing action");
            if (!c.render) return console.log('missing action.render on "' + c.type + '" action');
            var e = a.actions.createHash(c);
            if (b.data[e] && !c.dirtyCacheForce) delete c.dirty, c.ctx = b.data[e], "undefined" === typeof c.hash && (c.hash = e, c.ctx.canvas.copies++);
            else {
                this.clean(c);
                var d = document.createElement("canvas");
                c.ctx = d.getContext("2d");
                c.ctx.canvas.copies = 1;
                c.hash = e;
                b.data[e] = c.ctx;
                var e = a.render.cache.padding,
                    d = c.ctx.canvas,
                    g = c.bbox;
                a.feature.canvas.cache257 && a.detect.generativeColor[c.type] ? (d.width = Math.max(257, g.width * g.scale.x + 2 * e), d.height = Math.max(257, g.height * g.scale.y + 2 * e)) : (d.width = g.width * g.scale.x + 2 * e, d.height = g.height * g.scale.y + 2 * e);
                a.feature.debugCache && (document.body.appendChild(d), d.title = c.zIndex, d.onclick = function (a) {
                    return function () {
                        console.log(a)
                    }
                }(c));
                a.feature.debugRender && (c.ctx.fillStyle = "rgba(0,0,0,0.5)", c.ctx.fillRect(0, 0, d.width, d.height));
                d = c.placement.clone();
                d.matrix.x = 0;
                d.matrix.y = 0;
                d.rotate(-g.rotate * DEG_RAD);
                c.ctx.save();
                if (a.feature.debugCache) {
                    var g = c.bbox.width * c.bbox.scale.x,
                        k = c.bbox.height * c.bbox.scale.y;
                    c.ctx.fillRect(0, 0, g + 20, k + 20);
                    c.ctx.clearRect(10, 10, g, k)
                }
                c.ctx.translate(e, e);
                c.render(c.ctx, d, !0);
                c.ctx.restore();
                delete c.dirty;
                delete c.dirtyCacheForce
            }
        };
        return this
    };
    a.render.prepareBlendmode = function () {
        var b = a.configure.tools[a.tool.type],
            c = a.canvas2d.layers.draw;
        b.composite && "paint" !== b.composite ? (a.ctx.canvas.style.opacity =
            0, c.style.background = a.ctx.canvas.style.background) : (a.ctx.canvas.style.opacity = 1, c.style.background = "")
    };
    a.render.preload = function (b) {
        function c(d, h) {
            delete d.dirtyResource;
            d.error ? a.feature.debug && console.log("action did not load properly", d) : h || !1 === d ? (g.push(h || "Action missing."), d.error = !0) : d.toolkit && d.toolkit.updateActionSize && (a.feature.canvas.editable ? d.toolkit.updateActionSize(d) : "text" === d.toolkit.type && d.toolkit.updateActionSize(d));
            --q || (a.__rendering = !1, e ? a.render.actions("root.render.preload",
                b.onload) : a.render.actions("root.render.load", b.onload), g.length && window.alertify && alertify.log(g[0]))
        }
        b = b || {};
        if (a.__rendering) {
            if (b.onload) b.onload()
        } else {
            !b.onload && (a.feature.history && a.feature.history.autoSelect) && (b.onload = a.actions.checkForSingleSelection);
            var e = "preload" === a.render.state,
                d = a.actions.data;
            if (0 === d.length) {
                if (a.render.actions("root.render.preload.ignore"), b.onload) b.onload()
            } else {
                var g = [],
                    k = d.length,
                    q = k;
                a.__rendering = !0;
                a.actions.sort();
                for (var p = 0; p < k; p++) {
                    var r = d[p];
                    r.error ?
                        c(r) : r.render && !r.dirtyResource ? c(r) : (a.actions.updateToolkit(r), r.toolkit ? r.toolkit.loadResource(r, c, !b.fromSocket) : c(r, "Missing '" + r.type + "' toolkit"))
                }
            }
        }
    };
    return a
}(sketch);
"undefined" === typeof sketch && (sketch = {});
"undefined" === typeof sketch.server && (sketch.server = {});
sketch = function (a) {
    var g;
    a.server.servers = [];
    a.server.addHost = function (c) {
        mergeObject([c], a.server.servers)
    };
    a.server.getHost = function (c) {
        for (var b = a.server.servers, f = 0, d = c.length, e = b.length; d--;) f += c[d].charCodeAt();
        return b[f % e]
    };
    a.server.getFile = function () {
        var c = a.location.pathGet,
            b = c ? a.getRoomID() : "new";
        if (!b) return (c = a.configure.sync) ? a.location.setHash("sketch", c) : (c = a.configure.defaultSketch) ? (c = c.replace("sketch=", ""), a.location.setHash("sketch", c)) : a.location.setHash("sketch", "new");
        if ("new" ===
            b) return a.actions && a.actions.reset(!0), a.history && a.history.reset(!0), delete a.configure.sync, a.onSketchReady();
        if (a.feature.stream.sketch && a.socketIO && !a.socket) return -1 === b.indexOf("/") && (b = "room/" + b), a.socketIO(b);
        a.loader.thread = a.loader.add("downloading sketch...");
        a.configure.sync = b;
        DOMLoader.sendRequest({
            url: c + b + "&format=" + a.configure.fileFormat + "&timestamp=" + (new Date).getTime(),
            onerror: function (b) {
                a.loader.update(a.loader.thread, "downloading sketch...", 100);
                a.feature.debug ? console.log("server connection error",
                    b) : a.location.setHash("sketch", "new")
            },
            onload: function (b) {
                b = b.responseText;
                if ("<?xml" === b.substr(0, 5) || "<svg" === b.substr(0, 4)) a.loader.update(a.loader.thread, "downloading sketch...", 99), a.open.svg(b, a.onSketchReady, a.onSketchReady);
                else if ("<" === b.substr(0, 1)) a.loader.update(a.loader.thread, "downloading sketch...", 100), a.feature.debug ? console.log("invalid data from server", b) : a.location.setHash("sketch", "new");
                else if ("{" === b.substr(0, 1)) a.loader.update(a.loader.thread, "downloading sketch...", 99),
                a.open.json(b, a.onSketchReady, a.onSketchReady);
                else {
                    for (var c = new Uint8Array(b.length), e = 0; e < b.length; e++) c[e] = b.charCodeAt(e) & 255;
                    a.loader.update(a.loader.thread, "downloading sketch...", 99);
                    a.open.zip(new Blob([c.buffer], {
                        type: "application/zip"
                    }))
                }
            },
            onprogress: function (b) {
                var c = b.total || parseInt(this.getResponseHeader("Content-xlength"));
                isNaN(c) || a.loader.update(a.loader.thread, "downloading sketch...", Math.max(0, (100 * (b.loaded / c) >> 0) - 1))
            }
        })
    };
    a.server.auth = function (c) {
        a.feature.requireAuth ? DOMLoader.sendRequest({
            url: a.location.host +
                "check-login.html",
            onload: function (a) {
                c("true" === a.responseText)
            }
        }) : c(!0)
    };
    a.server.enabled = function () {
        var c = a.configure.fileFormat,
            b = a.feature.sync;
        if (!b[c] && b.useDefaultFormat) return b[c] = !0;
        for (var f in b) switch (f) {
        case "zip":
        case "svg":
        case "json":
        case "thumb":
        case "image":
            if (b[f]) return !0
        }
        return !1
    };
    a.server.save = function (c, b) {
        "function" === typeof c && (c = {
            onsave: c
        });
        c = c || {};
        250 > (new Date).getTime() - g || (g = (new Date).getTime(), a.loader.syncing = a.loader.message("syncing...", function () {
            c.onsave = b ||
                c.onsave;
            c.onprogress = function (b) {
                a.loader.update(a.loader.syncing, "syncing...", b / 2)
            };
            c.onload = function (a) {
                c.metadata = c.metadata || {};
                for (var b in a) c.metadata[b] = a[b];
                d(c)
            };
            a.server.auth(function (b) {
                b ? a.save.syncData(c) : a.run("login")
            })
        }))
    };
    var d = function (c) {
        if (c && dom.getCount(c.metadata)) {
            var b = {
                action: c.url || a.location.pathSave,
                confirm: "text",
                files: []
            }, f = function (a, c) {
                    b.files.push({
                        name: a,
                        data: c
                    })
                };
            a.feature.sync.hash && a.configure.sync && f("sync", a.configure.sync);
            for (var d in c.metadata) f(d, c.metadata[d]);
            f("fileName", a.configure.fileName);
            b.onProgress = function (b) {
                a.loader.update(a.loader.syncing, "syncing...", 50 + b.transferPercent / 2 >> 0)
            };
            b.onUpload = function (b, f) {
                a.loader.update(a.loader.syncing, "syncing...", 100);
                a.feature.debug && console.log(b.transferTotal, f, b);
                "false" === f || "<" === f[0] ? a.feature.debug && console.log("invalid server response", f) : (window.alertify && alertify.log("All changes saved!"), (a.feature.sync.json || a.feature.sync.zip || a.feature.sync.svg) && a.feature.sync.hash && (a.location.setHash("sketch",
                    f), a.setItem("sync", f)), c.callback && c.callback(f))
            };
            new a.uploader.upload(b)
        } else console.log("server sync is not setup")
    };
    return a
}(sketch);
"undefined" === typeof sketch && (sketch = {});
"undefined" === typeof sketch.peer && (sketch.peer = {});
sketch = function (a) {
    a.socketIO = function (d) {
        var c = window.location.protocol,
            b = c + "//" + a.location.hostIO,
            c = "https:" === c,
            f = a.location.hostIO.split(":")[1];
        f || (f = c ? 443 : 80);
        if ("undefined" === typeof io) return DOMLoader.script.add({
            url: b + "/socket.io/socket.io.js",
            verify: "io",
            error: a.setup.defaultSketch,
            callback: function () {
                a.socketIO(d)
            }
        });
        var h = a.configure.username ? a.configure.user_id : Math.abs(Math.random() * INFINITY >> 0);
        a.setItem("user_id", h);
        a.socket = io.connect(b, {
            secure: c,
            port: f
        });
        a.socket.user = {
            username: a.configure.username,
            id: h,
            room: d,
            session_id: a.configure.session_id,
            timestamp: (new Date).getTime()
        };
        for (var e in g) a.socket.addListener(e, g[e]);
        a.socket.addListener("data stream data", function (b) {
            try {
                var c = JSON.parse(b);
                a.peer.run(c)
            } catch (e) {
                console.log(b), console.log(e)
            }
        });
        a.socket.addListener("session.error", function (b) {
            a.onSketchReady()
        });
        a.socket.addListener("session.change", function (b) {
            a.socket.user.room = b
        });
        a.feature.debug && console.log("connecting to WebSocket...", (new Date).getTime() - TIME);
        a.loader.webSocket = a.loader.add("connecting to WebSocket...");
        a.loader.loaded("io-start");
        a.socket.addListener("session.start", function (b) {
            b ? (a.feature.debug && console.log("WebSocket connected", (new Date).getTime() - TIME), a.loader.loaded("io-end"), a.loader.update(a.loader.webSocket, "WebSocket connected", 100), a.openFile("#sketch=" + b, !0)) : alertify.log("User has entered the room.")
        });
        a.socket.addListener("session.end", function (b) {
            b !== h && (alertify.log("User has left the room."), a.colorPalette && (a.colorPalette.container.style.width = window.innerWidth + "px", a.colorPalette.redraw(!0)))
        });
        a.socket.emit("session.start", a.socket.user)
    };
    var g = {};
    a.socketIO.addListener = function (d, c) {
        a.socket ? a.socket.addListener(d, c) : g[d] = c
    };
    a.socketIO.removeListener = function (d, c) {
        if (a.socket) a.socket.removeListener(d, c);
        else
            for (var b in g) d === b && delete g[b]
    };
    return a
}(sketch);
"undefined" === typeof sketch && (sketch = {});
"undefined" === typeof sketch.style && (sketch.style = {});
sketch = function (a) {
    a.style = function () {
        var d = a.configure.defaultFill;
        this.type = d.type || "color";
        this.color = d.color || "#E53939";
        a.feature.palette.gradient && (this.noise = d.noise || !1, this.mode = d.mode || "linear", this.gradient = d.gradient || "0.06567889822065,ff0c0126,0.1176747,ff19022a,0.22994306504649997,ff27032e,0.37598319999999996,ff43013a,0.43984393878431993,ff5f0046,0.544758,ff7e003a,0.6070303324195799,ff9e002f,0.7105123,ffce1129,0.77393466551848,fffe2323,0.8197397,fff6441a,0.8692658678592999,ffee6611,0.930715,fff68617,0.9802042847244999,ffffa61e");
        a.feature.palette.blendmode && (this.blendmode = d.blendmode || "paint");
        return this
    };
    a.style.updateGlobal = function (d) {
        if (d && d.fill) {
            switch (d.fill.type) {
            case "color":
                var c = d.fill.color || d.fillStyle || a.style.fill.color;
                a.colorPicker && "none" !== c && a.colorPicker.update(c);
                a.style.fill.color = c;
                break;
            case "gradient":
                if (!d.fill.gradient) break;
                a.style.fill.gradient = d.fill.gradient
            }
            a.palette && a.palette.update(d.fill.type)
        }
    };
    a.style.update = function (d) {
        d || (d = a.configure.tools[a.tool.type]);
        if (d.fill) {
            switch (d.fill.type) {
            case "color":
                var c =
                    d.fill.color || d.fillStyle || a.style.fill.color;
                a.tool.changeColor && a.tool.changeColor(c);
                a.colorPicker && "none" !== c && a.colorPicker.update(c);
                break;
            case "gradient":
                a.render.actions("root.style.update")
            }
            a.palette && a.palette.update(d.fill.type)
        }
    };
    a.setColorIndicator = function () {
        var d = a.style.fill || a.tool.device && a.tool.device.fill;
        if (a.actions && 1 === a.actions.selectionCount) var c = a.actions.getAction(),
        c = c && c.fill || d;
        else c = d;
        for (var d = c.type, b = document.querySelectorAll(".color-indicator"), f = 0; f < b.length; f++) a.style.renderSwatch(b[f],
            "color", c.color, 42, 23);
        b = document.querySelectorAll(".gradient-indicator");
        for (f = 0; f < b.length; f++) a.style.renderSwatch(b[f], "gradient", c.gradient, 42, 23);
        b = document.querySelectorAll(".style-indicator");
        for (f = 0; f < b.length; f++) b[f].style.cssText = "color" === c.type ? "background: " + c.color : a.style.cssGradient(c.gradient, "left top");
        widget.windows.isOpen("sketch-palette") && (c = a.style.hashDNA(c[d]), (d = document.querySelector("#" + d + c)) && dom.setClassName({
            target: d,
            list: d.parentNode.querySelectorAll("li"),
            className: "selected",
            on: !0
        }))
    };
    a.style.hexFromColor = function (a) {
        "string" === typeof a ? "hsla" === a.substr(0, 4) ? a = Color.Space(a, "W3>HSLA>RGBA>HEX24>W3") : "rgba" === a.substr(0, 4) ? a = Color.Space(a, "W3>RGBA>HEX24>W3") : "rgb" === a.substr(0, 3) ? a = Color.Space(a, "W3>RGB>HEX24>W3") : Color.WebColors[a] && (a = Color.WebColors[a]) : isFinite(a.R) ? a = Color.Space(a, "RGB>HEX24>W3") : isFinite(a.H) && (a = Color.Space(a, "HSLA>RGBA>HEX24>W3"));
        return a
    };
    sketch.setFontStyle = function (d, c, b) {
        if ("object" === typeof d) {
            a.vector.text.supports[d.fontFamily] || a.toolkit.text.loadFont({
                fontFamily: d.fontFamily
            });
            if (b) {
                var f = a.actions.getSelected();
                f && "text" === f.type || a.actions.fromConfigure(a.configure.tools.text);
                a.vector.text.setFontStyle(d, b, a.canvas2d.scale)
            }
            for (var h in d) a.toolkit.setActionData({
                tool: "text",
                param: h,
                data: d[h],
                selection: c
            })
        }
    };
    a.setColor = function (d, c, b, f, h, e) {
        var g = a.configure.tools[(!this.__version && this.type ? this : a.tool).type];
        g && g.fill && (g.fill[d] = c, g.fill.type = d, a.style.fill = clone(g.fill));
        g = !0 === f || "up" === f;
        f = !0 === f || "down" === f;
        var m = a.actions;
        h = h || m.selection;
        var k = "_" + d,
            q = [],
            p = [],
            r;
        for (r in h) {
            var t = (h = m.data[r]) && h.fill;
            if (t) {
                if (!t[k] || f) t[k] = t[d];
                t[k] === c ? h.dirtyControl = !0 : (g && (t[d] = t[k], t[k] = c, q.push({
                    fill: clone(t),
                    id: h.id
                })), t[d] = c, t.type = d, p.push({
                    fill: clone(t),
                    id: h.id
                }), h.dirty = !0, h.dirtyControl = !0, a.style.getColors(h), h.brush && (h.brush.colors = h.colors))
            }
        }
        a.area && a.area.updateColor(c);
        q.length && p.length && a.history && a.history.store(q, p);
        a.dataChannel && a.feature.stream.sketchLive && a.dataChannel.send(["actions.update", p]);
        a.colorPicker && ("color" === d && !e) && ("none" !==
            c && a.colorPicker.update(c), b = !1);
        a.tool.device && (a.tool.device.brush ? (a.tool.device.brush.fill[d] = c, a.style.getColors(a.tool.device.brush)) : (a.tool.device.fill[d] = c, a.style.getColors(a.tool.device)));
        b && a.render.actions("root.setColor");
        a.setColorIndicator();
        a.tool.interval = 0
    };
    a.style.blendmodes = "normal multiply screen overlay darken lighten color-dodge color-burn hard-light soft-light difference exclusion hue saturation color luminosity".split(" ");
    a.style.compositemodes = "source-over source-in source-out source-atop destination-over destination-in destination-out destination-atop lighter darker copy xor".split(" ");
    a.style.setBlendMode = function (d) {
        var c = document.querySelector("#light-mode img");
        if (c) {
            var b = function (a) {
                e.composite = h.composite = a;
                c.style.webkitFilter = "grayscale(" + ("light" === a ? 1 : 0) + ")"
            }, f = a.tool.device,
                h = f && f.brush || f || a.tool.style,
                e = a.configure.tools[a.tool.type];
            h && ("string" === typeof d ? b(d) : "light" === h.composite ? b("paint") : b("light"), a.setTool(sketch.tool.type))
        }
    };
    a.style.renderSwatch = function (d, c, b, f, h) {
        if (d)
            if (d.getContext) {
                var e = d.getContext("2d");
                f = d.width = f || 19;
                h = d.height = h || 19;
                d = Math.max(f,
                    h);
                d = e.createLinearGradient(0, 0, d, d);
                var g = {
                    fill: {}
                };
                g.fill.type = c;
                g.fill[c] = b;
                switch (g.fill.type) {
                case "color":
                    e.fillStyle = g.fill.color;
                    e.fillRect(0, 0, f, h);
                    break;
                case "gradient":
                    c = a.style.getColors(g);
                    for (b = 0; b < c.length; b += 2) d.addColorStop(c[b], c[b + 1]);
                    e.fillStyle = d;
                    e.fillRect(0, 0, f, h)
                }
            } else "color" === c ? d.style.background = b : d.style.cssText = a.style.cssGradient(b, "left top")
    };
    a.style.setCSSGradient = function (a, c, b) {
        if (c)
            if ("none" === c) a.background = "none";
            else {
                b = b || "left top";
                var f = [];
                c = c.split(",");
                for (var h =
                    0, e = c.length; h < e;) {
                    var g = 100 * c[h],
                        m = c[h + 1],
                        k = parseInt(m.substr(2, 2), 16),
                        q = parseInt(m.substr(4, 2), 16),
                        p = parseInt(m.substr(6, 2), 16),
                        m = parseInt(m.substr(0, 2), 16) / 255;
                    f.push("rgba(" + k + "," + q + "," + p + "," + m + ") " + g + "%");
                    h += 2
                }
                f = f.join(", ");
                a.background = "linear-gradient(" + b + "," + f + ");";
                a.background = "-webkit-linear-gradient(" + b + "," + f + ");";
                a.background = "-ms-linear-gradient(" + b + "," + f + ");";
                a.background = "-moz-linear-gradient(" + b + "," + f + ");";
                a.background = "-o-linear-gradient(" + b + "," + f + ");"
            }
    };
    a.style.cssGradient = function (a,
        c) {
        if (a) {
            if ("none" === a) return "background: none";
            c = c || "left top";
            for (var b = [], f = a.split(","), h = 0, e = f.length; h < e;) {
                var g = 100 * f[h],
                    m = f[h + 1],
                    k = parseInt(m.substr(2, 2), 16),
                    q = parseInt(m.substr(4, 2), 16),
                    p = parseInt(m.substr(6, 2), 16),
                    m = parseInt(m.substr(0, 2), 16) / 255;
                b.push("rgba(" + k + "," + q + "," + p + "," + m + ") " + g + "%");
                h += 2
            }
            b = b.join(", ");
            return "background: linear-gradient(" + c + "," + b + ");background: -webkit-linear-gradient(" + c + "," + b + ");background: -ms-linear-gradient(" + c + "," + b + ");background: -moz-linear-gradient(" +
                c + "," + b + ");background: -o-linear-gradient(" + c + "," + b + ");"
        }
    };
    var g = {
        erase: "destination-out",
        paint: "source-over",
        multiply: "darker",
        light: "lighter"
    };
    a.style.getComposite = function (a, c) {
        return "disco" === a ? 0 === c % 2 ? "lighter" : "source-over" : g[a] || "source-over"
    };
    a.style.getColors = function (d) {
        if (d.fill) var c = d.fill,
        b = d.fill.noise;
        else {
            b = a.configure.tools[d.type];
            if (!b.fill) return "";
            c = b.fill;
            b = b.fill.noise
        }
        switch (c.type) {
        case "color":
            if ("none" === c.color) {
                var f = [0, 0];
                break
            }
            if (!b) return d.colors = [0, c.color];
            c = parseInt("0xFF" +
                c.color);
            f = [0, c, 1, c];
            break;
        case "gradient":
            if ("none" === c.gradient) {
                f = [0, 0];
                break
            }
            for (var f = c.gradient.split(","), h = 0; h < f.length; h += 2) c = f[h + 1], "#" === c[0] && (c = c.substr(1)), 6 === c.length && (c = "ff" + c), 3 === c.length && (c = "ff" + c[0] + c[0] + c[1] + c[1] + c[2] + c[2]), f[h] = parseFloat(f[h]), f[h + 1] = parseInt("0x" + c, 16)
        }
        if (!b && !a.detect.generativeColor[d.type]) {
            d.colors = [];
            for (b = 0; b < f.length; b += 2) d.colors.push(f[b]), d.colors.push(Color.Space(f[b + 1], "HEX32>RGBA>W3"));
            return d.colors
        }
        d.colors = Gradient.getColorStops({
            seed: d.seed,
            dna: f,
            length: 500,
            resolution: 1,
            blend: "Luminosity",
            H: b ? 10 : 0,
            S: b ? 20 : 0,
            L: b ? 10 : 0
        });
        return d.colors
    };
    a.style.createGradient = function (d, c, b, f, h, e) {
        var g = e.fill;
        if (g) {
            if ("none" === g[g.type]) return "none";
            if ("erase" === e.composite) return "#000";
            if ("cycle" === e.fill.mode) return d = e.colors, d[(2 * (e.time || 0) + 1) % d.length];
            if ("radial" === e.fill.mode) {
                var g = (c + f) / 2,
                    m = (b + h) / 2;
                c = Math.sqrt(Math.pow(f - c, 2) + Math.pow(h - b, 2)) / 2;
                c = d.createRadialGradient(g, m, 0, g, m, c)
            } else c = d.createLinearGradient(c, b, f, h);
            d = e.colors || (e.colors =
                a.style.getColors(e));
            for (e = 0; e < d.length; e += 2) c.addColorStop(d[e], d[e + 1]);
            return c
        }
    };
    a.style.addFromBlob = function (d, c) {
        a.convert.blobToText(d, function (b) {
            0 === b.indexOf("GIMP Gradient") ? a.style.add(Color.open.GGR(b).join(","), "gradient") : 0 === b.indexOf("GIMP Palette") && a.style.add(Color.open.GPL(b), "color");
            c && c()
        })
    };
    a.style.add = function (d, c) {
        "string" === typeof d && (d = [d]);
        var b = a.style[c + "Hash"],
            f = a.style[c];
        if (d)
            for (var h = 0; h < d.length; h++) {
                var e = d[h],
                    g = createHash(e);
                b[g] || (b[g] = !0, f.splice(0, 0, e))
            }
    };
    a.style.hashDNA = function (a) {
        a = a.toLowerCase().split("#").join("");
        a = Math.abs(createHash(a)).toString(16).substr(0, 6);
        return STRING.rpad(a, "0", 6)
    };
    a.style.gradientHash = {};
    a.style.gradient = [];
    a.style.add("0,ffff0000,0.25,ffffff00,0.5,ffffff00,0.75,ff00ff00,1,ff00ff00 0,ff000000,0.167,ff000000,0.333,ffff0000,0.5,ffff0000,0.667,ffffff00,0.833,ffffff00,1,ffffff00 0,ff9e0142,0.046,ff9e0142,0.091,ffd53e4f,0.136,ffd53e4f,0.182,fff46d43,0.227,fff46d43,0.273,fffdae61,0.318,fffdae61,0.364,fffee08b,0.409,fffee08b,0.455,ffffffbf,0.5,ffffffbf,0.546,ffe6f598,0.591,ffe6f598,0.636,ffabdda4,0.682,ffabdda4,0.727,ff66c2a5,0.773,ff66c2a5,0.818,ff3288bd,0.864,ff3288bd,0.909,ff5e4fa2,0.955,ff5e4fa2,1,ff5e4fa2 0,fffa6c0c,0.04,fff6300a,0.08,fff6300a,0.145,ffd11b7e,0.21,ffd11b7e,0.28,ff7425b1,0.35,ff7425b1,0.42,ff0a62da,0.49,ff0a62da,0.56,ff00c000,0.63,ff00c000,0.715,fff6ef2a,0.8,fff6ef2a,0.9,fffa6c0c,1,fffa6c0c 0,ff9c2224,0.09,ffc42d25,0.18,ffc42d25,0.255,ffe23f30,0.33,ffe23f30,0.415,ffef5d41,0.5,ffef5d41,0.55,fff38d4e,0.6,fff38d4e,0.67,fff59a3a,0.74,fff59a3a,0.815,fffabf58,0.89,fffabf58,0.945,fffccfa0,1,fffccfa0 0.06567889822065,ff0c0126,0.1176747,ff19022a,0.22994306504649997,ff27032e,0.37598319999999996,ff43013a,0.43984393878431993,ff5f0046,0.544758,ff7e003a,0.6070303324195799,ff9e002f,0.7105123,ffce1129,0.77393466551848,fffe2323,0.8197397,fff6441a,0.8692658678592999,ffee6611,0.930715,fff68617,0.9802042847244999,ffffa61e 0,ff607e80,0.25,ff9fd962,0.5,ff9fd962,0.75,fff3fa58,1,fff3fa58 0,ff000000,0.1458854,ff000000,0.16999999999999998,ff000000,0.1941146,ff2b0700,0.21807295,ff560e00,0.2420313,ff8d1e00,0.25648445000000003,ffc42f00,0.2709376,ffd84600,0.2988543,ffec5e00,0.326771,ffde4800,0.3423439,ffd13200,0.3579168,ffe65c11,0.36890635,fffb8623,0.37989589999999995,fffd6919,0.39893229999999996,ffff4d0f,0.41796869999999997,ffc8511f,0.42578119999999997,ff915530,0.43359369999999997,ffc8aa97,0.44140619999999997,ffffffff,0.44921869999999997,ffffffff,0.47153435,ffffffff,0.49384999999999996,ffcdf1ff,0.5277562499999999,ff9be3ff,0.5616625,ff5aa2f1,0.7015583,ff1a61e4,0.7015583,ff1736a4,0.7653604744791199,ff150b64,0.8291626999999999,ff0a0532,0.91458135,ff000000 0.06279181820714999,ff030101,0.1259619,ff0d000a,0.1884619,ff180013,0.25096189999999996,ff65024e,0.31346189999999996,ffb2048a,0.37596189999999996,ffb20356,0.43846189999999996,ffb20323,0.5009619,ffb20319,0.5634619,ffb2030f,0.6259619,ff8d0230,0.6902920499999999,ff680251,0.7546222,ffaf1e4b,0.8247415191252401,fff63b46,0.8750691,ffa71e45,0.95131794026088,ff590245 0,ffffbbd9,0.125,ffdac1df,0.25,ffb6c8e6,0.375,ffc7c9b6,0.55625,ffd9cb86,0.7375,ff819569,0.8609375,ff295f4d,0.984375,ff17423c,1,ff06252c 0,ff15aeeb,0.3333333,ff8157ba,0.50818891461434,ffed008a,0.6717635,fff47961,1,fffbf239 0,ff5b2600,0.5,ff8b5600,1,ffbb8600 0,ff395fa5,0.17,ff51485c,0.277,ff51485c,0.292,ffa47472,0.307,ffa47472,0.332,ff632d02,0.449,ff632d02,0.554,ff494d47,0.695,ff494d47,0.843,ff2e2426,1,ff2e2426 0,ff285f88,0.165,ff9eb9d4,0.33,ff9eb9d4,0.495,fff9947e,0.66,fff9947e,0.83,ffe45d61,1,ffe45d61 0,ff000022,0.175,ff191024,0.28333335,ff322027,0.3916667,ff4c322d,0.5000000499999999,ff664433,0.6083334,ff8a5d3d,0.71666675,ffae7747,0.8250001,ffce9056,1,ffeeaa66 0.125,ff5b49af,0.25,ffa92c77,0.375,fff81040,0.5,fffb5f36,0.58653845,ffffae2d,0.75,ff9f9044,0.797337275,ff40725b 0,ffdb2962,0.3300781,ffe98431,0.54206764604626,fff8df00,0.6728514999999999,ffa4ac33,0.9999998999999999,ff517a67 0,fffe4d01,0.245,fffe7701,0.49,ffffa101,0.745,ff92a470,1,ff26a8e0 0,ff4c36b3,0.15,ffa1207d,0.24734265,fff60a48,0.3446853,fffa7e3b,0.43132864374999996,fffff32e,0.5326573,ff87f874,0.6721152827415,ff0ffebb,0.8,ff26a0be,1,ff3d43c1 0,ffca0020,0.125,ffca0020,0.25,fff4a582,0.375,fff4a582,0.5,ff92c5de,0.625,ff92c5de,0.75,ff0571b0,0.875,ff0571b0,1,ff0571b0 0,ffff67d0,0.036,ffff3e6c,0.072,ffff3e6c,0.127,ffff579e,0.181,ffff579e,0.247,ffff3958,0.313,ffff3958,0.368,ffff3958,0.422,ffff3958,0.482,ffff3958,0.542,ffff3958,0.584,ffff4189,0.627,ffff4189,0.681,ffc41c57,0.735,ffc41c57,0.795,ffff4246,0.855,ffff4246,0.928,ffc2275e,1,ffc2275e 0,ffffff88,0.5,ffffff88,1,ffffff88 0,fff1e767,0.5,fff7ce56,1,fffeb645 0,ffffd65e,0.5,fffeca31,1,fffebf04 0,fff6e6b4,0.5,fff1bb65,1,ffed9017 0,fff6f8f9,0.25,ffedf1f3,0.5,ffe5ebee,0.5,ffdee4e8,0.5,ffd7dee3,0.75,ffe6eaee,1,fff5f7f9 0,ffffffff,0.25,fff9f9f9,0.5,fff3f3f3,0.5,fff0f0f0,0.5,ffededed,0.75,fff6f6f6,1,ffffffff 0,ffffffff,0.25,fff8f8f8,0.5,fff1f1f1,0.5,ffe9e9e9,0.5,ffe1e1e1,0.75,ffebebeb,1,fff6f6f6 0,ffffffff,0.5,fff2f2f2,1,ffe5e5e5 0,ffffffff,0.473029,fff6f6f6,1,ffededed 0,ff499bea,0.5,ff348be7,1,ff207ce5 0,ffdeefff,0.5,ffbbd6ee,1,ff98bede 0,ffa7cfdf,0.5,ff6591b4,1,ff23538a 0,ffb2e1ff,0.5,ff8ccbfd,1,ff66b6fc 0,ff93cede,0.410788,ff6eb9ce,1,ff49a5bf 0,ffa9e4f7,0.5,ff5cccef,1,ff0fb4e7 0,ff63b6db,0.5,ff49a9d5,1,ff309dcf 0,ffe9f6fd,0.5,ffdef2fc,1,ffd3eefb 0,ffd6f9ff,0.5,ffbaf0fc,1,ff9ee8fa 0,fff7fbfc,0.40249,ffd2eaf0,1,ffadd9e4 0,ffc5deea,0.307054,ff65a5ca,1,ff066dab 0,ffaebcbf,0.25,ff8e9999,0.5,ff6e7774,0.5,ff3c423f,0.5,ff0a0e0a,0.75,ff0a0b09,1,ff0a0809 0,ff959595,0.460581,ff4b4b4b,0.502075,ff010101,0.502075,ff272727,0.763485,ff4e4e4e,0.763485,ff343434,1,ff1b1b1b 0,ff7d7e7d,0.5,ff454645,1,ff0e0e0e 0,ff45484d,0.5,ff222426,1,ff000000 0,fffcfff4,0.40249,ffd7ded0,1,ffb3bead 0,fffcfff4,0.5,fff2f4e1,1,ffe9e9ce 0,ffe0f3fa,0.25,ffdcf1fb,0.5,ffd8f0fc,0.5,ffc8e9f9,0.5,ffb8e2f6,0.75,ffb7e0f9,1,ffb6dffd 0,ffb7deed,0.25,ff94d6ee,0.5,ff71ceef,0.5,ff49c1e8,0.5,ff21b4e2,0.75,ff6cc9e7,1,ffb7deed 0,fff3c5bd,0.25,ffed988a,0.5,ffe86c57,0.5,ffe94a2d,0.5,ffea2803,0.625,fff44701,0.75,ffff6600,0.75,ffe34400,1,ffc72200 0,fff85032,0.25,fff45f47,0.5,fff16f5c,0.5,fff34c34,0.5,fff6290c,0.709544,ffee3019,1,ffe73827 0,ffcc0000,0.5,ffcc0000,1,ffcc0000 0,ffff1a00,0.5,ffff1a00,1,ffff1a00 0,ffff3019,0.5,ffe71a0e,1,ffcf0404 0,fff2825b,0.25,ffeb6e43,0.5,ffe55b2b,0.5,ffea6638,1,fff07146 0,fffebbbb,0.452282,fffe8b8b,1,ffff5c5c 0,ffebe9f9,0.25,ffe1dcf4,0.5,ffd8d0ef,0.5,ffd3cbed,0.5,ffcec7ec,0.75,ffc7c3eb,1,ffc1bfea 0,fffcecfc,0.25,fffbc9ee,0.5,fffba6e1,0.5,fffc97dc,0.5,fffd89d7,0.75,fffe82d7,1,ffff7cd8 0,ffff0084,0.5,ffff0084,1,ffff0084 0,ffe570e7,0.46888,ffc65cc5,1,ffa849a3 0,fffb83fa,0.5,fff25ff3,1,ffe93cec 0,ffff5db1,0.5,fff72f96,1,ffef017c 0,ffffb76b,0.25,ffffaf54,0.5,ffffa73d,0.5,ffff911e,0.5,ffff7c00,0.75,ffff7d02,1,ffff7f04 0,ffff7400,0.5,ffff7400,1,ffff7400 0,ffffa84c,0.5,ffff912c,1,ffff7b0d 0,fffceabb,0.25,fffcdb84,0.5,fffccd4d,0.5,fffac126,0.5,fff8b500,0.75,fff9ca49,1,fffbdf93 0,fff9c667,0.5,fff8ae44,1,fff79621 0,ffffc578,0.5,fffdb14d,1,fffb9d23 0,fffac695,0.46888,fff4a963,1,ffef8d31 0,ffffaf4b,0.5,ffffa02a,1,ffff920a 0,ff73880a,0.5,ff73880a,1,ff73880a 0,ff627d4d,0.5,ff405c2a,1,ff1f3b08 0,ffa4b357,0.5,ff8c9e31,1,ff75890c 0,ffe4efc0,0.5,ffc7d699,1,ffabbd73 0,fffefefd,0.423237,ffd6deb9,1,ffaebf76 0,ffd2ff52,0.5,ffb1f34a,1,ff91e842 0,ffc3d9ff,0.414938,ffadc4ec,1,ff98b0d9 0,fff9fcf7,0.5,fff7faf3,1,fff5f9f0 0,fff3e2c7,0.25,ffdac097,0.5,ffc19e67,0.5,ffbb9559,0.5,ffb68d4c,0.75,ffcfb07f,1,ffe9d4b3 0,ffd4e4ef,0.5,ffadc9dd,1,ff86aecc 0,ffe2e2e2,0.25,ffdedede,0.5,ffdbdbdb,0.5,ffd6d6d6,0.5,ffd1d1d1,0.75,ffe7e7e7,1,fffefefe 0,ffeeeeee,0.5,ffeeeeee,1,ffeeeeee 0,ffd2dfed,0.261411,ffc8d7eb,0.506224,ffbed0ea,0.506224,ffb2c8e6,0.506224,ffa6c0e3,0.6182570000000001,ffb0c8e9,0.7510370000000001,ffbad0ef,0.7510370000000001,ff99b5db,1,ff799bc8 0,ffcfe7fa,0.5,ff99bddd,1,ff6393c1 0,ffb8c6df,0.5,ff92a7cb,1,ff6d88b7 0,ffb5bdc8,0.360996,ff6e7881,1,ff28343b 0,ffd8e0de,0.224066,ffb8c7c4,0.333333,ff99afab,0.333333,ff8da6a1,0.666667,ff829d98,0.666667,ff485553,1,ff0e0e0e 0,fff2f5f6,0.365145,ffdde6e9,1,ffc8d7dc 0,ffb0d4e3,0.5,ff9cc7d9,1,ff88bacf 0,ff606c88,0.5,ff4f5c79,1,ff3f4c6b 0,ffcedce7,0.5,ff93a3ac,1,ff596a72 0,ffeeeeee,0.5,ffdddddd,1,ffcccccc 0,ffb4df5b,0.5,ffb4df5b,1,ffb4df5b 0,ffe6f0a3,0.25,ffdceb6d,0.5,ffd2e638,0.5,ffcadf2e,0.5,ffc3d825,0.75,ffcfe434,1,ffdbf043 0,ff9dd53a,0.25,ff9fd544,0.5,ffa1d54f,0.5,ff90cb33,0.5,ff80c217,0.75,ff7ebf10,1,ff7cbc0a 0,ffb6e026,0.5,ffb0de27,1,ffabdc28 0,ff6bba70,0.5,ff6bba70,1,ff6bba70 0,ff8fc800,0.5,ff8fc800,1,ff8fc800 0,ffb4e391,0.25,ff8ad355,0.5,ff61c419,0.5,ff8ad355,1,ffb4e391 0,ffa9db80,0.5,ff9fd077,1,ff96c56f 0,fff8ffe8,0.327801,ffd7ef8a,1,ffb7df2d 0,ffc9de96,0.439834,ff81b065,1,ff398235 0,ffcdeb8e,0.5,ffb9da72,1,ffa5c956 0,ffb4ddb4,0.166667,ff83c783,0.333333,ff52b152,0.333333,ff299d29,0.666667,ff008a00,0.666667,ff005700,1,ff002400 0,fff0b7a1,0.25,ffbe7558,0.5,ff8c3310,0.5,ff802a08,0.5,ff752201,0.75,ff9a4827,1,ffbf6e4e 0,ffd5cea6,0.39834,ffc6bd8b,1,ffb7ad70 0,ffb3dced,0.25,ff6ecae9,0.5,ff29b8e5,0.5,ff72cce9,1,ffbce0ee 0,ffd0e4f7,0.236515,ff6dade6,0.502075,ff0a77d5,0.502075,ff4899df,1,ff87bcea 0,ff3f4c6b,0.5,ff3f4c6b,1,ff3f4c6b 0,ffa7c7dc,0.5,ff96bcd7,1,ff85b2d3 0,ffcedbe9,0.166667,ff97bad8,0.502075,ff6199c7,0.502075,ff4d8ec5,0.502075,ff3a84c3,0.5892120000000001,ff429ed9,0.7095440000000001,ff4bb8f0,0.7095440000000001,ff3886bd,1,ff26558b 0,ffe4f5fc,0.25,ffd1eefa,0.5,ffbfe8f9,0.5,ffafe0f4,0.5,ff9fd8ef,0.75,ff64c4ee,1,ff2ab0ed 0,ffebf1f6,0.25,ffcbe2f2,0.5,ffabd3ee,0.5,ff9acbec,0.5,ff89c3eb,0.75,ffafd7f3,1,ffd5ebfb 0,ff6db3f2,0.25,ff60abf0,0.5,ff54a3ee,0.5,ff4599ef,0.5,ff3690f0,0.75,ff2a7ce7,1,ff1e69de 0,ff3b679e,0.25,ff3377bb,0.5,ff2b88d9,0.5,ff2582d1,0.5,ff207cca,0.75,ff4e9ad9,1,ff7db9e8 0,ff4096ee,0.5,ff4096ee,1,ff4096ee 0,fffeffff,0.352697,ffcfebf7,1,ffa0d8ef 0,fff0f9ff,0.46888,ffc8eaff,1,ffa1dbff 0,ff87e0fd,0.40249,ff46c5ee,1,ff05abe0 0,ff4c4c4c,0.124481,ff595959,0.253112,ff666666,0.253112,ff494949,0.502075,ff2c2c2c,0.502075,ff161616,0.502075,ff000000,0.6016600000000001,ff151515,0.7593360000000001,ff2b2b2b,0.7593360000000001,ff1f1f1f,1,ff131313 0,fff5f6f6,0.207469,ffd6d8de,0.487552,ffb8bac6,0.487552,ffd6d8de,1,fff5f6f6 0,ffb8e1fc,0.095436,ffa4cdf0,0.253112,ff90bae4,0.253112,ff90bcea,0.502075,ff90bff0,0.502075,ff7db3ea,0.502075,ff6ba8e5,0.8333330000000001,ff94cdf1,1,ffbdf3fd 0,ffefc5ca,0.25,ffe08892,0.5,ffd24b5a,0.5,ffc63948,0.5,ffba2737,0.75,ffd55a68,1,fff18e99 0,ffa90329,0.439834,ff8b0121,1,ff6d0019 0,ffe5e696,0.5,ffdbdc7b,1,ffd1d360 0,ffeaefb5,0.5,ffe5ecaa,1,ffe1e9a0 0,ff49c0f0,0.5,ff3ab7e9,1,ff2cafe3 0,ff258dc8,0.5,ff258dc8,1,ff258dc8 0,ffeab92d,0.5,ffd8a81e,1,ffc79810 0,ff7abcff,0.439834,ff5da9f6,1,ff4096ee 0,ffcb60b3,0.25,ffc653aa,0.5,ffc146a1,0.5,ffb4238c,0.5,ffa80077,0.75,ffc11b8d,1,ffdb36a4 0,fff2f9fe,0.5,ffe4f4fd,1,ffd6f0fd 0,ffbfd255,0.25,ffa6c53f,0.5,ff8eb92a,0.5,ff80b115,0.5,ff72aa00,0.75,ff88ba16,1,ff9ecb2d 0,fffeffe8,0.5,ffeaedd3,1,ffd6dbbf 0,fffefcea,0.5,fff7eb90,1,fff1da36 0,fff2f6f8,0.25,ffe5ebef,0.5,ffd8e1e7,0.5,ffc6d3db,0.5,ffb5c6d0,0.75,ffcadae4,1,ffe0eff9 0,ffcb60b3,0.25,ffbc399b,0.5,ffad1283,0.5,ffc52c97,1,ffde47ac 0,fffebf01,0.5,fffebf01,1,fffebf01 0,ffe1ffff,0.06639,ffe1ffff,0.120332,ffe1ffff,0.120332,ffefffff,0.120332,fffdffff,0.302905,ffe2f6fd,0.5435679999999999,ffc8eefb,0.5435679999999999,ffbce3f8,1,ffb1d8f5 0,fffeccb1,0.25,fff7a071,0.5,fff17432,0.5,ffed641c,0.5,ffea5507,0.75,fff27532,1,fffb955e 0,fffeffff,0.5,ffe8f5fc,1,ffd2ebf9 0,ff88bfe8,0.5,ff7cb7e4,1,ff70b0e0 0,ff00b7ea,0.5,ff00aad6,1,ff009ec3 0,ff8989ba,0.5,ff8989ba,1,ff8989ba 0,ff4c4c4c,0.125,ff666666,0.253,ff666666,0.386,ff2c2c2c,0.502,ff000000,0.602,ff2b2b2b,0.759,ff2b2b2b,0.913,ff131313,1,ff131313 0,fff0f9ff,0.469,ffa1dbff,1,ffa1dbff 0,ff7abcff,0.44,ff4096ee,1,ff4096ee 0,ff00b7ea,0.5,ff009ec3,1,ff009ec3 0,fffeffff,0.353,ffa0d8ef,1,ffa0d8ef 0,ffb8e1fc,0.095,ff90bae4,0.253,ff90bae4,0.373,ff90bff0,0.502,ff6ba8e5,0.833,ffbdf3fd,1,ffbdf3fd 0,ff3b679e,0.25,ff2b88d9,0.5,ff207cca,0.75,ff7db9e8,1,ff7db9e8 0,ff6db3f2,0.25,ff54a3ee,0.5,ff3690f0,0.75,ff1e69de,1,ff1e69de 0,ffebf1f6,0.25,ffabd3ee,0.5,ff89c3eb,0.75,ffd5ebfb,1,ffd5ebfb 0,ffe4f5fc,0.25,ffbfe8f9,0.5,ff9fd8ef,0.75,ff2ab0ed,1,ff2ab0ed 0,ffd0e4f7,0.237,ff0a77d5,0.502,ff0a77d5,0.793,ff87bcea,1,ff87bcea 0,ffb3dced,0.25,ff29b8e5,0.5,ff29b8e5,0.75,ffbce0ee,1,ffbce0ee 0,ffb4ddb4,0.167,ff52b152,0.333,ff52b152,0.5,ff008a00,0.667,ff008a00,0.833,ff002400,1,ff002400 0,ffcdeb8e,0.5,ffa5c956,1,ffa5c956 0,ffc9de96,0.44,ff398235,1,ff398235 0,fff8ffe8,0.328,ffb7df2d,1,ffb7df2d 0,ffa9db80,0.5,ff96c56f,1,ff96c56f 0,ffb4e391,0.25,ff61c419,0.5,ff61c419,0.75,ffb4e391,1,ffb4e391 0,ff299a0b,0.5,ff299a0b,1,ff299a0b 0,ff006e2e,0.5,ff006e2e,1,ff006e2e 0,ffcdeb8b,0.5,ffcdeb8b,1,ffcdeb8b 0,ff8fc400,0.5,ff8fc400,1,ff8fc400 0,ffb6e026,0.5,ffabdc28,1,ffabdc28 0,ff9dd53a,0.25,ffa1d54f,0.5,ff80c217,0.75,ff7cbc0a,1,ff7cbc0a 0,ffe6f0a3,0.25,ffd2e638,0.5,ffc3d825,0.75,ffdbf043,1,ffdbf043 0,ffbfd255,0.25,ff8eb92a,0.5,ff72aa00,0.75,ff9ecb2d,1,ff9ecb2d 0,ffeeeeee,0.5,ffcccccc,1,ffcccccc 0,ffcedce7,0.5,ff596a72,1,ff596a72 0,ff606c88,0.5,ff3f4c6b,1,ff3f4c6b 0,ffb0d4e3,0.5,ff88bacf,1,ff88bacf 0,fff2f5f6,0.365,ffc8d7dc,1,ffc8d7dc 0,ffb8c6df,0.5,ff6d88b7,1,ff6d88b7 0,ffd2dfed,0.261,ffbed0ea,0.506,ffa6c0e3,0.618,ffbad0ef,0.751,ffbad0ef,0.876,ff799bc8,1,ff799bc8 0,ffe2e2e2,0.25,ffdbdbdb,0.5,ffd1d1d1,0.75,fffefefe,1,fffefefe 0,fff2f6f8,0.25,ffd8e1e7,0.5,ffb5c6d0,0.75,ffe0eff9,1,ffe0eff9 0,ffd4e4ef,0.5,ff86aecc,1,ff86aecc 0,fffefefd,0.423,ffaebf76,1,ffaebf76 0,ffe4efc0,0.5,ffabbd73,1,ffabbd73 0,ffa4b357,0.5,ff75890c,1,ff75890c 0,ff627d4d,0.5,ff1f3b08,1,ff1f3b08 0,ffffaf4b,0.5,ffff920a,1,ffff920a 0,fffac695,0.469,ffef8d31,1,ffef8d31 0,ffffc578,0.5,fffb9d23,1,fffb9d23 0,fff9c667,0.5,fff79621,1,fff79621 0,fffceabb,0.25,fffccd4d,0.5,fff8b500,0.75,fffbdf93,1,fffbdf93 0,ffff670f,0.5,ffff670f,1,ffff670f 0,ffff5db1,0.5,ffef017c,1,ffef017c 0,fffb83fa,0.5,ffe93cec,1,ffe93cec 0,ffe570e7,0.469,ffa849a3,1,ffa849a3 0,ffcb60b3,0.25,ffad1283,0.5,ffad1283,0.75,ffde47ac,1,ffde47ac 0,fffcecfc,0.25,fffba6e1,0.5,fffd89d7,0.75,ffff7cd8,1,ffff7cd8 0,ffebe9f9,0.25,ffd8d0ef,0.5,ffcec7ec,0.75,ffc1bfea,1,ffc1bfea 0,fffebbbb,0.452,ffff5c5c,1,ffff5c5c 0,fff2825b,0.25,ffe55b2b,0.5,ffe55b2b,0.75,fff07146,1,fff07146 0,fff85032,0.25,fff16f5c,0.5,fff6290c,0.71,ffe73827,1,ffe73827 0,fffeccb1,0.25,fff17432,0.5,ffea5507,0.75,fffb955e,1,fffb955e 0,ffefc5ca,0.25,ffd24b5a,0.5,ffba2737,0.75,fff18e99,1,fff18e99 0,fffeffe8,0.5,ffd6dbbf,1,ffd6dbbf 0,fffcfff4,0.403,ffb3bead,1,ffb3bead 0,ffe5e696,0.5,ffd1d360,1,ffd1d360 0,ff45484d,0.5,ff000000,1,ff000000 0,ff7d7e7d,0.5,ff0e0e0e,1,ff0e0e0e 0,ff959595,0.461,ff010101,0.502,ff010101,0.531,ff4e4e4e,0.764,ff4e4e4e,0.867,ff1b1b1b,1,ff1b1b1b 0,ffaebcbf,0.25,ff6e7774,0.5,ff0a0e0a,0.75,ff0a0809,1,ff0a0809 0,ffc5deea,0.307,ff066dab,1,ff066dab 0,fff7fbfc,0.403,ffadd9e4,1,ffadd9e4 0,ffd6f9ff,0.5,ff9ee8fa,1,ff9ee8fa 0,ffe9f6fd,0.5,ffd3eefb,1,ffd3eefb 0,ff63b6db,0.5,ff309dcf,1,ff309dcf 0,ff2c539e,0.5,ff2c539e,1,ff2c539e 0,ffa9e4f7,0.5,ff0fb4e7,1,ff0fb4e7 0,ff93cede,0.411,ff49a5bf,1,ff49a5bf 0,ffb2e1ff,0.5,ff66b6fc,1,ff66b6fc 0,ffa7cfdf,0.5,ff23538a,1,ff23538a 0,ff4f85bb,0.5,ff4f85bb,1,ff4f85bb 0,ffdeefff,0.5,ff98bede,1,ff98bede 0,fffeffff,0.5,ffd2ebf9,1,ffd2ebf9 0,ff356aa0,0.5,ff356aa0,1,ff356aa0 0,ffffffff,0.25,fff1f1f1,0.5,ffe1e1e1,0.75,fff6f6f6,1,fff6f6f6 0,fff6e6b4,0.5,ffed9017,1,ffed9017 0,ffeab92d,0.5,ffc79810,1,ffc79810 0,ffffd65e,0.5,fffebf04,1,fffebf04".split(" ").reverse(),
        "gradient");
    a.style.colorHash = {};
    a.style.color = [];
    a.style.add("#ffffff #e9e9e9 #d4d4d4 #bfbfbf #aaaaaa #949494 #7f7f7f #6a6a6a #555555 #3f3f3f #a8f1ff #aedbff #bcb8ff #e0a6ff #ffb4de #ffbcbc #ffd1b4 #ffeeaa #ffff9a #e4f9c1 #63e5ff #6ebeff #877fff #c661ff #ff79c2 #ff8888 #ffac79 #ffe067 #ffff49 #cef28f #2bd5ff #3aa1ff #5a51ff #ab29ff #ff48a6 #ff5b5b #ff8a47 #ffce2f #fffd07 #b6e565 #00c1f7 #1285ff #362cff #9000ff #f3228a #ff3737 #ff6c20 #ffba04 #fff200 #9dd241 #00a8e0 #006af5 #1b11ff #7400f4 #d7066f #ff1b1b #ff5103 #eea300 #ffdc00 #83b925 #008cc1 #004fcf #0800da #5800cb #b10053 #e90808 #f43900 #d08800 #d6b700 #689a10 #00668c #00369b #000094 #3a0087 #800037 #ac0000 #c42500 #9f6700 #ab9200 #4c7602 #004058 #001d54 #00003d #1d0043 #45001b #5e0000 #831500 #6a4400 #806e00 #2e4b00".split(" ").reverse(),
        "color");
    return a
}(sketch);
"undefined" === typeof sketch && (sketch = {});
sketch = function (a) {
    a.history = function (a) {
        var d = this;
        this.reset = function (b, c) {
            a.__modified = !1;
            a.__modifiedOnline = !1;
            if (c || !c && b) {
                var e = a.feature.history;
                e.vector && d.resetActionHistory(c);
                e.bitmap && d.resetBitmapHistory(c)
            }
        };
        this.store = function (b, c, e) {
            a.__modified = (new Date).getTime();
            a.__modifiedOnline = (new Date).getTime();
            var f = a.feature.history;
            f.vector && d.storeAction(b, c, e);
            f.bitmap && d.storeBitmap(e)
        };
        this.redo = function (b) {
            var c = a.feature.history,
                e = !0;
            c.vector && (e = d.redoAction(b));
            c.bitmap && d.redoBitmap(b);
            return e
        };
        this.undo = function (b) {
            var c = a.feature.history,
                e = !0;
            c.vector && (e = d.undoAction(b));
            c.bitmap && d.undoBitmap(b);
            return e
        };
        this.history = {};
        this.history.bitmap = {
            max: a.feature.history.limit,
            current: -1,
            data: []
        };
        this.resetBitmapHistory = function (b) {
            var c = d.history.bitmap;
            c.current = 0;
            c.data = c.data.splice(0, 1);
            a.setSize(null, null, !0);
            a.scale2d(1);
            d.storeBitmap(b)
        };
        this.storeBitmap = function (b) {
            b = d.history.bitmap;
            var c = b.data.length - 1,
                e = c - b.current;
            e && (b.data = b.data.splice(0, c - e + 1));
            b.data.length === b.max ?
                b.data.push(b.data.shift()) : b.data.push(a.Canvas());
            b.current = b.data.length - 1;
            c = a.canvas2d.layers.layer0;
            b = b.data[b.current].ctx;
            b.canvas.width = b.canvas.width;
            b.drawImage(c, 0, 0);
            a.feature.debug && document.body.appendChild(b.canvas)
        };
        this.undoBitmap = function () {
            var b = a.canvas2d.layers.layer0.ctx,
                c = d.history.bitmap;
            c.current = Math.max(0, --c.current);
            b.canvas.width = b.canvas.width;
            b.drawImage(c.data[c.current], 0, 0);
            "eraser" === a.tool.type && (b = a.canvas2d.layers.active.ctx, b.canvas.width = b.canvas.width, b.drawImage(c.data[c.current],
                0, 0))
        };
        this.redoBitmap = function () {
            var b = a.canvas2d.layers.layer0.ctx,
                c = d.history.bitmap;
            c.current = Math.min(c.data.length - 1, ++c.current);
            b.canvas.width = b.canvas.width;
            b.drawImage(c.data[c.current], 0, 0);
            "eraser" === a.tool.type && (b = a.canvas2d.layers.active.ctx, b.canvas.width = b.canvas.width, b.drawImage(c.data[c.current], 0, 0))
        };
        this.history.vector = {
            max: a.feature.history.limit,
            current: -1,
            data: []
        };
        this.resetActionHistory = function (a) {
            d.history.vector.data = [];
            d.history.vector.current = -1
        };
        this.popAction = function () {
            d.history.vector.data.pop();
            d.history.vector.data.pop()
        };
        this.storeAction = function (b, f, k) {
            b && f && (h(b), h(f), k || a.fromServer ? (f = d.history.vector, 0 !== f.current % 2 && (f.data[f.current - 1] && f.data[f.current]) && (c = void 0, b = JSON.parse(f.data[f.current - 1]), f = JSON.parse(f.data[f.current]), e(b, f, !1, !0))) : a.dataChannel && (a.feature.stream.sketch && !k) && a.dataChannel.sendPriority(["history.store", b, f]))
        };
        this.undoAction = function (b) {
            var c = d.history.vector;
            if (0 === c.current) return !1;
            c.current = Math.max(0, c.current - 2);
            0 !== c.current % 2 && c.current++;
            if (!c.data[c.current] || !c.data[c.current + 1]) return !1;
            var f = JSON.parse(c.data[c.current]),
                c = JSON.parse(c.data[c.current + 1]);
            e(f, c, !0);
            a.dataChannel && (a.feature.stream.sketch && !b) && (a.dataChannel.sendPriority(["history.undo", !0]), a.dataChannel.send(["history.undo"]));
            return !0
        };
        this.redoAction = function (b) {
            var c = d.history.vector;
            if (c.current === c.data.length - 1) return !1;
            c.current = Math.min(c.data.length - 1, c.current + 2);
            0 === c.current % 2 && c.current--;
            if (!c.data[c.current - 1] || !c.data[c.current]) return !1;
            var f =
                JSON.parse(c.data[c.current - 1]),
                c = JSON.parse(c.data[c.current]);
            e(f, c, !1);
            a.dataChannel && (a.feature.stream.sketch && !b) && (a.dataChannel.sendPriority(["history.redo", !0]), a.dataChannel.send(["history.redo"]));
            return !0
        };
        var c = 0,
            b = {
                add: "add",
                remove: "remove",
                replace: "replace"
            }, f = function (a, b) {
                if (!b || "object" !== typeof b) return b;
                if (!a || "object" !== typeof a) return a;
                for (var c in a) b[c] = a[c] && "object" === typeof a[c] ? f(a[c], b[c] || new a[c].constructor) : a[c];
                return b
            }, h = function (a) {
                var b = d.history.vector,
                    e = b.data.length -
                        1,
                    f = e - b.current;
                0 !== f % 2 && f++;
                f && (b.data = b.data.splice(0, e - f + 1));
                b.data.length === 2 * b.max && (b.data.shift(), b.data.shift());
                b.data.push(JSON.stringify(a));
                b.current = b.data.length - 1;
                c = b.current
            }, e = function (h, m, k, q) {
                if (c !== d.history.vector.current) {
                    c = d.history.vector.current;
                    var p = b[h] || b[m],
                        r = k ? h : m,
                        t = k ? m : h,
                        s = a.detect.refreshPixelData,
                        u = a.actions.selection;
                    if ("replace" === p) k ? (e(m[1], "remove", !1, !1, c = void 0), e("add", m[0], !1, !1, c = void 0)) : (e(m[0], "remove", !1, !1, c = void 0), e("add", m[1], !1, !1, c = void 0));
                    else {
                        "remove" ===
                            p ? (k && (p = "add"), r = h) : "add" === p && (k && (p = "remove"), r = m);
                        if (r[0] && isFinite(r[0].zIndex) && t[0] && isFinite(t[0].zIndex) && !r[0].bbox)
                            if (0 < t[0].zIndex - r[0].zIndex)
                                for (h = 0, m = r.length; h < m; h++) {
                                    var y = r[h];
                                    q = t[h];
                                    a.actions.data.splice(y.zIndex, 0, a.actions.data.splice(q.zIndex, 1)[0]);
                                    k = a.actions.data[y.zIndex];
                                    s[k.type] && (k.dirtyCacheForce = !0);
                                    a.actions.idx === q.zIndex && (a.actions.idx = y.zIndex);
                                    u[q.zIndex] && (a.actions.select(y.zIndex), a.actions.deselect(q.zIndex))
                                } else
                                    for (h = r.length; h--;) y = r[h], q = t[h], a.actions.data.splice(y.zIndex,
                                        0, a.actions.data.splice(q.zIndex, 1)[0]), k = a.actions.data[y.zIndex], s[k.type] && (k.dirtyCacheForce = !0), u[q.zIndex] && (a.actions.select(y.zIndex), a.actions.deselect(q.zIndex)), a.actions.idx === q.zIndex && (a.actions.idx = y.zIndex);
                            else if (isFinite(r.length))
                            for (h = 0, m = r.length; h < m; h++) {
                                y = r[h];
                                if ("add" === p) {
                                    if (!a.actions.getById(y.id)) {
                                        k = a.actions.clone(y);
                                        a.fromServer || a.actions.updateToolkit(k);
                                        a.actions.data.splice(y.zIndex, 0, k);
                                        q && a.area && a.area.inGenesis ? (a.actions.deselect(a.actions.idx), a.actions.idx =
                                            a.actions.getById(INFINITY).zIndex + 1) : a.feature.history.autoSelect && a.actions.select(y.zIndex);
                                        continue
                                    }
                                } else if ("remove" === p) {
                                    k = a.actions.getById(y.id);
                                    if (!k) continue;
                                    q && k.zIndex === a.actions.idx && (a.actions.deselectAll(), window.alertify && alertify.log("Another user removed the item you were editing."));
                                    for (t = 0; t < a.actions.data.length; t++)
                                        if (a.actions.data[t].id === k.id) {
                                            a.actions.data.splice(t, 1);
                                            break
                                        }
                                    continue
                                }
                                if (k = a.actions.getById(y.id)) y.labels && (k.labels = []), f(y, k), a.feature.history.autoSelect &&
                                    a.actions.select(k.zIndex), a.feature.canvas.editable && (s[k.type] ? k.dirtyCacheForce = !0 : y.content ? (delete k.breaks, k.dirty = !0) : (y.color || y.fillStyle || y.bbox && y.bbox.scale ? k.dirty = !0 : (k.dirty = !0, k.dirtyResource = !0), k.dirtyTransform = !0, delete k.visible))
                            } else f(r, sketch.project);
                        a.actions.reindex();
                        !a.fromServer && a.feature.canvas.editable && a.render.preload({
                            fromSocket: !0
                        })
                    }
                }
            }
    };
    return a
}(sketch);
"undefined" !== typeof module && module.exports && (module.exports = sketch.history);
"undefined" === typeof Vector && (Vector = {});
Vector = function (a) {
    a.BBox = function (a, c, b) {
        this.unset();
        if (a) {
            if (4 === a.length && isFinite(a[0])) {
                var f = new Vector.Transform(c);
                c = f.point2d(a[0], a[1]);
                b = f.point2d(a[0], a[3]);
                var h = f.point2d(a[2], a[3]),
                    e = f.point2d(a[2], a[1]);
                a = Math.min(c.x, b.x, h.x, e.x);
                var f = Math.max(c.x, b.x, h.x, e.x),
                    g = Math.min(c.y, b.y, h.y, e.y);
                c = Math.max(c.y, b.y, h.y, e.y);
                return {
                    x1: a,
                    y1: g,
                    x2: f,
                    y2: c
                }
            }
            return this.path(a, c, b)
        }
    };
    a.BBox.prototype = {
        path: function (d, c, b) {
            if (c) var f = a.Transform.isIdentity(c),
            h = new Vector.Transform(c);
            else f = !0;
            var e;
            c = this.x;
            var g = this.y,
                m, k;
            if (f)
                for (var f = 0, q = d.length; f < q; f++) switch ((e = d[f]).cmd) {
                case "M":
                    e.x < c.min && (c.min = e.x);
                    e.x > c.max && (c.max = e.x);
                    e.y < g.min && (g.min = e.y);
                    e.y > g.max && (g.max = e.y);
                    m = e.x;
                    k = e.y;
                    break;
                case "L":
                    e.x < c.min && (c.min = e.x);
                    e.x > c.max && (c.max = e.x);
                    e.y < g.min && (g.min = e.y);
                    e.y > g.max && (g.max = e.y);
                    m = e.x;
                    k = e.y;
                    break;
                case "C":
                    this.cubic(m, k, e.x1, e.y1, e.x2, e.y2, e.x, e.y);
                    m = e.x;
                    k = e.y;
                    break;
                case "Q":
                    var p = m + 2 / 3 * (e.x1 - m),
                        r = k + 2 / 3 * (e.y1 - k),
                        t = p + (e.x - m) / 3,
                        s = r + (e.y - k) / 3;
                    this.cubic(m, k, p, r, t, s, e.x, e.y);
                    m = e.x;
                    k = e.y
                } else
                    for (f = 0, q = d.length; f < q; f++) switch ((e = d[f]).cmd) {
                    case "M":
                        var u = h.point2d(e.x, e.y);
                        u.x < c.min && (c.min = u.x);
                        u.x > c.max && (c.max = u.x);
                        u.y < g.min && (g.min = u.y);
                        u.y > g.max && (g.max = u.y);
                        m = u.x;
                        k = u.y;
                        break;
                    case "L":
                        u = h.point2d(e.x, e.y);
                        u.x < c.min && (c.min = u.x);
                        u.x > c.max && (c.max = u.x);
                        u.y < g.min && (g.min = u.y);
                        u.y > g.max && (g.max = u.y);
                        m = u.x;
                        k = u.y;
                        break;
                    case "C":
                        u = h.point2d(e.x, e.y);
                        p = h.point2d(e.x1, e.y1);
                        e = h.point2d(e.x2, e.y2);
                        this.cubic(m, k, p.x, p.y, e.x, e.y, u.x, u.y);
                        m = u.x;
                        k = u.y;
                        break;
                    case "Q":
                        u = h.point2d(e.x,
                            e.y), h.point2d(e.x1, e.y1), p = m + 2 / 3 * (u.x1 - m), r = k + 2 / 3 * (u.y1 - k), t = p + (u.x - m) / 3, s = r + (u.y - k) / 3, this.cubic(m, k, p, r, t, s, u.x, u.y), m = u.x, k = u.y
                    }
            b && (c.expand(b), g.expand(b));
            return {
                x1: c.min,
                x2: c.max,
                y1: g.min,
                y2: g.max
            }
        },
        cubic: function (a, c, b, f, h, e, g, m) {
            var k = this.x,
                q = this.y;
            g < k.min && (k.min = g);
            g > k.max && (k.max = g);
            m < q.min && (q.min = m);
            m > q.max && (q.max = m);
            var p = k.contains(b) && k.contains(h),
                r = q.contains(f) && q.contains(e);
            if (!p) {
                var p = 3 * a - 9 * b + 9 * h - 3 * g,
                    t = 6 * b - 12 * h + 6 * g,
                    s = 3 * h - 3 * g;
                if (0 >= Math.abs(p)) 0 <= Math.abs(t) && (s = -s / t, 0 < s &&
                    1 > s && k.extendToCubic(s, 1 - s, a, g, b, h));
                else if (s = t * t - 4 * p * s, 0 <= s) {
                    var u = Math.sqrt(s),
                        s = (-t + u) / (2 * p);
                    0 < s && 1 > s && k.extendToCubic(s, 1 - s, a, g, b, h);
                    s = (-t - u) / (2 * p);
                    0 < s && 1 > s && k.extendToCubic(s, 1 - s, a, g, b, h)
                }
            }
            r || (p = 3 * c - 9 * f + 9 * e - 3 * m, t = 6 * f - 12 * e + 6 * m, s = 3 * e - 3 * m, 0 >= Math.abs(p) ? 0 <= Math.abs(t) && (s = -s / t, 0 < s && 1 > s && q.extendToCubic(s, 1 - s, c, m, f, e)) : (s = t * t - 4 * p * s, 0 <= s && (u = Math.sqrt(s), s = (-t + u) / (2 * p), 0 < s && 1 > s && q.extendToCubic(s, 1 - s, c, m, f, e), s = (-t - u) / (2 * p), 0 < s && 1 > s && q.extendToCubic(s, 1 - s, c, m, f, e))))
        },
        unset: function () {
            this.x = new g({
                min: Infinity,
                max: -Infinity
            });
            this.y = new g({
                min: Infinity,
                max: -Infinity
            })
        }
    };
    var g = function (a) {
        this.min = a.min;
        this.max = a.max
    };
    g.prototype = {
        extendToCubic: function (a, c, b, f, h, e) {
            a = a * a * a * b + 3 * a * a * c * h + 3 * a * c * c * e + c * c * c * f;
            a < this.min && (this.min = a);
            a > this.max && (this.max = a)
        },
        extendTo: function (a) {
            a < this.min && (this.min = a);
            a > this.max && (this.max = a)
        },
        contains: function (a) {
            return this.min <= a && a <= this.max
        },
        expand: function (a) {
            this.min -= a;
            this.max += a
        }
    };
    return a
}(Vector);
"undefined" === typeof Vector && (Vector = {});
"undefined" === typeof Vector.Shapes && (Vector.Shapes = {});
(function () {
    var a = 2 * Math.PI,
        g = Vector.Shapes;
    g.record = function () {
        this.data = [];
        this.moveTo = function (a, c) {
            this.data.push({
                cmd: "M",
                x: a,
                y: c
            })
        };
        this.lineTo = function (a, c) {
            this.data.push({
                cmd: "L",
                x: a,
                y: c
            })
        };
        this.bezierCurveTo = function (a, c, b, f, h, e) {
            this.data.push({
                cmd: "C",
                x1: a,
                y1: c,
                x2: b,
                y2: f,
                x: h,
                y: e
            })
        };
        this.quadraticCurveTo = function (a, c, b, f) {
            this.data.push({
                cmd: "Q",
                x1: a,
                y1: c,
                x: b,
                y: f
            })
        };
        this.arcTo = function (a, c, b, f, h) {
            this.data.push({
                cmd: "A",
                x1: a,
                y1: c,
                x2: b,
                y2: f,
                radius: h
            })
        };
        this.closePath = function () {
            this.data.push({
                cmd: "Z"
            })
        }
    };
    g.point = {};
    g.circle = function (a, c, b, f) {
        return g.ellipse(a, c, b, f, f)
    };
    g.ellipse = function (a, c, b, f, h) {
        a.moveTo(c, b - h);
        a.bezierCurveTo(c + 0.5522847498307936 * f, b - h, c + f, b - 0.5522847498307936 * h, c + f, b);
        a.bezierCurveTo(c + f, b + 0.5522847498307936 * h, c + 0.5522847498307936 * f, b + h, c, b + h);
        a.bezierCurveTo(c - 0.5522847498307936 * f, b + h, c - f, b + 0.5522847498307936 * h, c - f, b);
        a.bezierCurveTo(c - f, b - 0.5522847498307936 * h, c - 0.5522847498307936 * f, b - h, c, b - h);
        a.closePath()
    };
    g.line = function (a, c, b, f, h) {
        a.moveTo(c, b);
        a.lineTo(f, h)
    };
    g.SVGPath =
        function (a, c) {
            c = Vector.SVG.toVOBPath(c);
            return g.VOBPath(a, c)
    };
    g.VOBPath = function (a, c) {
        var b, f;
        for (f in c) switch ((b = c[f]).cmd) {
        case "M":
            a.moveTo(b.x, b.y);
            break;
        case "L":
            a.lineTo(b.x, b.y);
            break;
        case "Q":
            a.quadraticCurveTo(b.x1, b.y1, b.x, b.y);
            break;
        case "C":
            a.bezierCurveTo(b.x1, b.y1, b.x2, b.y2, b.x, b.y);
            break;
        case "A":
            a.arcTo(b.x1, b.y1, b.x2, b.y2, b.radius);
            break;
        case "Z":
        case "z":
            a.closePath()
        }
    };
    g.VOBPathDebug = function (a, c) {
        var b = "",
            f;
        for (f in c) switch ((o = c[f]).cmd) {
        case "M":
            b += "ctx.moveTo(" + o.x + "," + o.y +
                ");\n";
            break;
        case "L":
            b += "ctx.lineTo(" + o.x + "," + o.y + ");\n";
            break;
        case "Q":
            b += "ctx.quadraticCurveTo(" + o.x1 + "," + o.y1 + "," + o.x + "," + o.y + ");\n";
            break;
        case "C":
            b += "ctx.bezierCurveTo(" + o.x1 + "," + o.y1 + "," + o.x2 + "," + o.y2 + "," + o.x + "," + o.y + ");\n";
            break;
        case "A":
            b += "ctx.arcTo(" + o.x1 + "," + o.y1 + "," + o.x2 + "," + o.y2 + "," + o.radius + ");\n";
            break;
        case "Z":
        case "z":
            b += "ctx.closePath();\n"
        }
        console.log(b)
    };
    g.rect = function (a, c, b, f, h) {
        0 >= c - f !== 0 >= b - h ? (a.moveTo(c, b), a.lineTo(f, b), a.lineTo(f, h), a.lineTo(c, h)) : (a.moveTo(c, b), a.lineTo(c,
            h), a.lineTo(f, h), a.lineTo(f, b));
        a.lineTo(c, b);
        a.closePath()
    };
    g.roundRect = function (a, c, b, f, h, e, g) {
        0 > f && (c += f, f = Math.abs(f));
        0 > h && (b += h, h = Math.abs(h));
        isFinite(g) || (g = e);
        var m = -Math.PI / 2,
            k = Math.PI / 4;
        e > Math.min(f, h) / 2 && (e = Math.min(f, h) / 2);
        g > Math.min(f, h) / 2 && (g = Math.min(f, h) / 2);
        a.moveTo(c + e, b);
        a.lineTo(c + f - e, b);
        a.quadraticCurveTo(c + f - e + Math.cos(m + k / 2) * e / Math.cos(k / 2), b + g + Math.sin(m + k / 2) * g / Math.cos(k / 2), c + f - e + Math.cos(m + k) * e, b + g + Math.sin(m + k) * g);
        a.quadraticCurveTo(c + f - e + Math.cos((m += k) + k / 2) * e / Math.cos(k /
            2), b + g + Math.sin(m + k / 2) * g / Math.cos(k / 2), c + f - e + Math.cos(m + k) * e, b + g + Math.sin(m + k) * g);
        a.lineTo(c + f, b + h - g);
        a.quadraticCurveTo(c + f - e + Math.cos((m += k) + k / 2) * e / Math.cos(k / 2), b + h - g + Math.sin(m + k / 2) * g / Math.cos(k / 2), c + f - e + Math.cos(m + k) * e, b + h - g + Math.sin(m + k) * g);
        a.quadraticCurveTo(c + f - e + Math.cos((m += k) + k / 2) * e / Math.cos(k / 2), b + h - g + Math.sin(m + k / 2) * g / Math.cos(k / 2), c + f - e + Math.cos(m + k) * e, b + h - g + Math.sin(m + k) * g);
        a.lineTo(c + e, b + h);
        a.quadraticCurveTo(c + e + Math.cos((m += k) + k / 2) * e / Math.cos(k / 2), b + h - g + Math.sin(m + k / 2) * g / Math.cos(k /
            2), c + e + Math.cos(m + k) * e, b + h - g + Math.sin(m + k) * g);
        a.quadraticCurveTo(c + e + Math.cos((m += k) + k / 2) * e / Math.cos(k / 2), b + h - g + Math.sin(m + k / 2) * g / Math.cos(k / 2), c + e + Math.cos(m + k) * e, b + h - g + Math.sin(m + k) * g);
        a.lineTo(c, b + g);
        a.quadraticCurveTo(c + e + Math.cos((m += k) + k / 2) * e / Math.cos(k / 2), b + g + Math.sin(m + k / 2) * g / Math.cos(k / 2), c + e + Math.cos(m + k) * e, b + g + Math.sin(m + k) * g);
        a.quadraticCurveTo(c + e + Math.cos((m += k) + k / 2) * e / Math.cos(k / 2), b + g + Math.sin(m + k / 2) * g / Math.cos(k / 2), c + e + Math.cos(m + k) * e, b + g + Math.sin(m + k) * g);
        a.closePath()
    };
    g.wedge = function (a,
        c, b, f, h, e, g) {
        a.moveTo(c, b);
        a.arc(c, b, f, h, e, g);
        a.lineTo(c, b);
        a.closePath()
    };
    g.regularPolygon = function (a, c, b, f, h) {
        a.moveTo(c, b - f);
        for (var e = 1, g; e < h; e++) g = 0.017453 * 360 / h * e, a.lineTo(Math.sin(g) * f + c, -Math.cos(g) * f + b);
        a.lineTo(c, b - f);
        a.closePath()
    };
    g.gear = function (d, c, b, f, h, e) {
        1 > e && (f *= e);
        var g = a / h,
            m = g / 4;
        e = f / e;
        d.moveTo(f + c, b);
        for (var k = 1; k <= h; k++) d.lineTo(Math.cos(g * k - 3 * m) * e + c, Math.sin(g * k - 3 * m) * e + b), d.lineTo(Math.cos(g * k - 2 * m) * e + c, Math.sin(g * k - 2 * m) * e + b), d.lineTo(Math.cos(g * k - m) * f + c, Math.sin(g * k - m) * f + b),
        d.lineTo(Math.cos(g * k) * f + c, Math.sin(g * k) * f + b);
        d.closePath()
    };
    g.star = function (d, c, b, f, h, e) {
        1 > e && (f *= e);
        var g = a / h,
            m = g / 2;
        e = f / e;
        d.moveTo(f + c, b);
        for (var k = 1; k <= h; k++) d.lineTo(Math.cos(g * k - m) * e + c, Math.sin(g * k - m) * e + b), d.lineTo(Math.cos(g * k) * f + c, Math.sin(g * k) * f + b);
        d.closePath()
    };
    g.burst = function (d, c, b, f, h, e) {
        1 > e && (f *= e);
        var g = a / h,
            m = g / 2,
            k = g / 4;
        e = f / e;
        var q = 0;
        d.moveTo(f + c, b);
        for (q = 1; q <= h; q++) d.quadraticCurveTo(Math.cos(g * q - 3 * k) * (e / Math.cos(k)) + c, Math.sin(g * q - 3 * k) * (e / Math.cos(k)) + b, Math.cos(g * q - m) * e + c, Math.sin(g *
            q - m) * e + b), d.quadraticCurveTo(Math.cos(g * q - k) * (e / Math.cos(k)) + c, Math.sin(g * q - k) * (e / Math.cos(k)) + b, Math.cos(g * q) * f + c, Math.sin(g * q) * f + b);
        d.closePath()
    };
    g.radialBurst = function (d, c, b, f, h, e) {
        e = 4 * e || 1;
        var g = a / h,
            m = g / 8,
            k = g / 4;
        d.moveTo(f + c, b);
        for (var q = 1; q <= h; q++) d.moveTo(0 * Math.cos(g * q - m * e) + c, 0 * Math.sin(g * q - m * e) + b), d.lineTo(Math.cos(g * q - k * e) * f + c, Math.sin(g * q - k * e) * f + b), d.lineTo(Math.cos(g * q) * f + c, Math.sin(g * q) * f + b), d.lineTo(0 * Math.cos(g * q - m * e) + c, 0 * Math.sin(g * q - m * e) + b);
        d.closePath()
    };
    g.spiral = function (d, c, b, f,
        h, e, l) {
        var m = 0,
            k = 0,
            q = 0,
            p = 0;
        e = e / h * a;
        var r = "moveTo";
        if (l)
            for (l = h; 0 < l; l--) {
                var q = Math.pow(f, l / h),
                    t = l * e,
                    m = Math.cos(t) * q + c,
                    q = Math.sin(t) * q + b;
                if (g[r]) k = Math.sqrt(Math.pow(m - k, 2) + Math.pow(q - p, 2)), g[r](d, m, q, k / 2, 5, 3.35);
                else d[r](m, q);
                "moveTo" === r && (g.point.x = m, g.point.y = q, r = "lineTo");
                k = m;
                p = q
            } else {
                for (l = 0; l <= h; l++) q = Math.pow(f, l / h), t = l * e, m = Math.cos(t) * q + c, q = Math.sin(t) * q + b, d.lineTo(m, q);
                g.point.x = m;
                g.point.y = q
            }
        d.closePath()
    };
    g.spirals = function (d, c, b, f, h, e, l, m) {
        for (m = h; m--;) {
            d.save();
            d.translate(c, b);
            d.rotate(m *
                a / h);
            d.translate(-c, -b);
            d.moveTo(c, b);
            var k = 100 * e;
            g.spiral(d, c, b, f * l, k, e, !0);
            var q = g.point.x,
                p = g.point.y;
            g.spiral(d, c, b, f, k, e);
            d.lineTo(q, p);
            d.restore()
        }
        d.closePath()
    };
    g.superformula = function (d, c, b, f, h, e, g, m, k) {
        0 === e && (e = 0.01);
        0 === g && (g = -0.01);
        0 === m && (m = 0.01);
        0 === k && (k = 0.01);
        for (var q = "moveTo", p = 0; p <= h; p++) {
            var r = p * a / h,
                t = Math.pow(Math.abs(Math.cos(e * r / 4) / 1), m),
                s = Math.pow(Math.abs(Math.sin(e * r / 4) / 1), k),
                s = Math.pow(t + s, 1 / g);
            0 === s ? r = t = 0 : (s = 1 / s, t = s * Math.cos(r), r = s * Math.sin(r));
            d[q](t * f + c, r * f + b);
            q = "lineTo"
        }
        d.closePath()
    };
    g.clearPath = function (a, c, b, f, h, e, l, m, k) {
        a.beginPath();
        a.globalCompositeOperation = "destination-out";
        g[c](a, c, b, f, h, e, l, m, k);
        a.fill();
        a.globalCompositeOperation = "source-over";
        a.beginPath()
    };
    g.clipPath = function (a, c, b, f, h, e, l, m, k) {
        a.beginPath();
        g[c](a, c, b, f, h, e, l, m, k);
        a.clip()
    }
})();
"undefined" === typeof Vector && (Vector = {});
(function (a) {
    var g = {
        a: 1,
        b: 0,
        x: 0,
        c: 0,
        d: 1,
        y: 0
    }, d = function (b) {
            var c = a.Transform.identity;
            return b.a === c.a && b.b === c.b && b.c === c.c && b.d === c.d && b.x === c.x && b.y === c.y
        }, c = function () {
            return {
                a: 1,
                b: 0,
                x: 0,
                c: 0,
                d: 1,
                y: 0
            }
        };
    a.Transform = function (a, c) {
        this.matrix = "undefined" === typeof a ? {
            a: 1,
            b: 0,
            x: 0,
            c: 0,
            d: 1,
            y: 0
        } : "undefined" === typeof a[0] ? a : this.cloneMatrix(a);
        return this
    };
    a.Transform.identity = g;
    a.Transform.isIdentity = d;
    a.Transform.getIdentity = c;
    a.Transform.prototype = {
        identity: g,
        isIdentity: d,
        getIdentity: c,
        point2d: function (a,
            c) {
            var d = this.matrix;
            return {
                x: d.a * a + d.c * c + d.x,
                y: d.b * a + d.d * c + d.y
            }
        },
        point2dx: function (a, c, d) {
            var e = this.matrix,
                g = a[c],
                m = a[d];
            a[c] = e.a * g + e.c * m + e.x;
            a[d] = e.b * g + e.d * m + e.y
        },
        flatten: function (a, c, d) {
            if (a && a.length) {
                c && (a = JSON.parse(JSON.stringify(a)));
                c = 0;
                for (var e = a.length, g; c < e; c++) switch ((g = a[c]).cmd) {
                case "M":
                    this.point2dx(g, "x", "y");
                    break;
                case "L":
                    this.point2dx(g, "x", "y");
                    break;
                case "C":
                    this.point2dx(g, "x", "y");
                    this.point2dx(g, "x1", "y1");
                    this.point2dx(g, "x2", "y2");
                    break;
                case "Q":
                    this.point2dx(g, "x", "y");
                    this.point2dx(g, "x1", "y1");
                    break;
                case "Z":
                case "z":
                    isFinite(g.x) && isFinite(g.y) && this.point2dx(g, "x", "y")
                }
                d && (this.matrix = this.getIdentity());
                return a
            }
        },
        invert: function (a) {
            a = a || this.matrix;
            "undefined" === typeof a.a && (M = this.cloneMatrix(M));
            var c = a.a * a.d - a.b * a.c;
            delete this.matrix;
            this.combine({
                a: a.d / c,
                b: -a.b / c,
                x: (a.b * a.y - a.d * a.x) / c,
                c: -a.c / c,
                d: a.a / c,
                y: (a.c * a.x - a.a * a.y) / c
            });
            return this
        },
        transform: function (a, c, d, e, g, m) {
            var k = this.matrix;
            this.matrix = {
                a: k.a * a + k.c * c,
                b: k.b * a + k.d * c,
                c: k.a * d + k.c * e,
                d: k.b * d + k.d *
                    e,
                x: k.a * g + k.c * m + k.x,
                y: k.b * g + k.d * m + k.y
            };
            return this
        },
        setTransform: function (a, c, d, e, g, m) {
            this.matrix = {
                a: a,
                b: c,
                c: d,
                d: e,
                x: g,
                y: m
            };
            return this
        },
        rotate: function (a) {
            var c = this.matrix,
                d = Math.cos(a);
            a = Math.sin(a);
            this.matrix = {
                a: c.a * d + c.b * -a,
                b: c.a * a + c.b * d,
                c: c.c * d + c.d * -a,
                d: c.c * a + c.d * d,
                x: c.x,
                y: c.y
            };
            return this
        },
        scale: function (a, c) {
            "undefined" === typeof c && (c = a);
            var d = this.matrix;
            this.matrix = {
                a: d.a * a,
                b: d.b * c,
                c: d.c * a,
                d: d.d * c,
                x: d.x,
                y: d.y
            };
            return this
        },
        skew: function (a, c) {
            var d = this.matrix,
                e = d.a,
                g = d.b,
                m = d.c,
                k = d.d,
                q =
                    Math.tan(a),
                p = Math.tan(c);
            d.a = e + m * p;
            d.b = g + k * p;
            d.c = e * q + m;
            d.d = g * q + k;
            return this
        },
        translate: function (a, c) {
            "undefined" === typeof c && (c = 0);
            var d = this.matrix;
            d.x = d.a * a + d.c * c + d.x;
            d.y = d.b * a + d.d * c + d.y;
            return this
        },
        relative: function (a, c) {
            var d = this.matrix;
            delete this.matrix;
            this.combine([{
                a: 1,
                b: 0,
                x: -a,
                c: 0,
                d: 1,
                y: -c
            }, {
                a: d.a,
                b: d.b,
                x: d.x,
                c: d.c,
                d: d.d,
                y: d.y
            }, {
                a: 1,
                b: 0,
                x: a,
                c: 0,
                d: 1,
                y: c
            }]);
            return this
        },
        runBefore: function (a, c, d, e, g, m, k) {
            var q = this.cloneMatrix();
            this.reset();
            this[a](c, d, e, g, m, k);
            a = this.cloneMatrix();
            this.reset();
            this.combine([a, q]);
            return this
        },
        combine: function (a) {
            var c = [];
            if ("undefined" !== typeof a.matrix)
                for (var d = 0; d < arguments.length; d++) c[d] = arguments[d].matrix;
            else if ("number" === typeof a.a)
                for (d = 0; d < arguments.length; d++) c[d] = arguments[d];
            else c = a;
            for (var d = this.matrix, e = [], g = 0; g < c.length; g++) "undefined" === typeof d ? d = c[g] : (e = c[g], d = {
                a: d.a * e.a + d.b * e.c,
                b: d.a * e.b + d.b * e.d,
                c: d.c * e.a + d.d * e.c,
                d: d.c * e.b + d.d * e.d,
                x: d.a * e.x + d.c * e.y + d.x,
                y: d.b * e.x + d.d * e.y + d.y
            });
            this.matrix = d;
            return this
        },
        clone: function () {
            return new a.Transform(this.cloneMatrix())
        },
        cloneMatrix: function (a) {
            a = a || this.matrix;
            return "undefined" === typeof a.a ? {
                a: a[0],
                b: a[1],
                c: a[2],
                d: a[3],
                x: a[4],
                y: a[5]
            } : {
                a: a.a,
                b: a.b,
                c: a.c,
                d: a.d,
                x: a.x,
                y: a.y
            }
        },
        reset: function () {
            this.matrix = c();
            return this
        },
        toString: function () {
            var a = this.matrix;
            return a.a + "," + a.b + "," + a.c + "," + a.d + "," + a.x + "," + a.y
        },
        apply: function (a, c) {
            var d = this.matrix;
            c ? a.transform(d.a, d.b, d.c, d.d, d.x, d.y) : a.setTransform(d.a, d.b, d.c, d.d, d.x, d.y);
            return this
        }
    };
    a.Transform.__default = new a.Transform
})(Vector);
"function" !== typeof Object.create && (Object.create = function () {
    function a() {}
    return function (g) {
        a.prototype = g;
        return new a
    }
}());
var QueueLinearFloodFill = function () {
    var a, g, d, c, b, f, h, e, l, m, k, q, p, r, t, s, u, y, w, v, x, A, C, D, B, F, G = function (a) {
            l = a.src;
            m = a.srcRect || {
                x: 0,
                y: 0,
                width: u,
                height: y
            };
            k = a.srcData || l.getImageData(m.x, m.y, m.width, m.height);
            p = a.dst;
            r = a.dstRect || {
                x: 0,
                y: 0
            };
            t = a.dstData || p.getImageData(m.x, m.y, m.width, m.height);
            u = l.canvas.width || 0;
            y = l.canvas.height || 0;
            w = 4 * u;
            if ("number" === typeof a.tolerance) {
                var b = 255 * a.tolerance;
                v = [b, b, b, b]
            } else b = a.tolerance, v = [255 * b[0], 255 * b[1], 255 * b[2], 255 * b[3]];
            x = a.contiguous
        };
    G.prototype.render =
        function (J) {
            if (!isFinite(J.x) || !isFinite(J.y)) return console.log("point.x || point.y is NaN");
            var G = J.x,
                K = J.y;
            J = w * K + 4 * G;
            A = p.createImageData(u * y / 4 + 1 >> 0, 1).data;
            k || (k = l.getImageData(m.x, m.y, m.width, m.height));
            t || (t = p.getImageData(m.x, m.y, m.width, m.height));
            q = k.data;
            s = t.data;
            a = q[J] - v[0];
            g = q[J + 1] - v[1];
            d = q[J + 2] - v[2];
            c = q[J + 3] - v[3];
            b = q[J] + v[0];
            f = q[J + 1] + v[1];
            h = q[J + 2] + v[2];
            e = q[J + 3] + v[3];
            D = [];
            F = B = 0;
            if (x)
                for (z(G, K); 0 < F;) {
                    C = D[B];
                    B++;
                    F--;
                    for (var G = u * (C.y + 1) + C.startx, K = u * (C.y - 1) + C.startx, R = C.y - 1, N = C.y + 1, E = C.endx,
                            aa = C.startx; aa <= E; aa++) J = w * R + 4 * aa, 0 < C.y && (!A[K] && q[J] >= a && q[J] <= b && q[J + 1] >= g && q[J + 1] <= f && q[J + 2] >= d && q[J + 2] <= h && q[J + 3] >= c && q[J + 3] <= e) && z(aa, R), J = w * N + 4 * aa, C.y < y - 1 && (!A[G] && q[J] >= a && q[J] <= b && q[J + 1] >= g && q[J + 1] <= f && q[J + 2] >= d && q[J + 2] <= h && q[J + 3] >= c && q[J + 3] <= e) && z(aa, N), G++, K++
                } else
                    for (E = q.length, J = 0; J < E; J += 4) q[J] >= a && (q[J] <= b && q[J + 1] >= g && q[J + 1] <= f && q[J + 2] >= d && q[J + 2] <= h && q[J + 3] >= c && q[J + 3] <= e) && (s[J + 3] = 255);
            p.putImageData(t, r.x, r.y)
    };
    var z = function (k, l) {
        for (var p = k, m = w * l + 4 * k, t = u * l + k; A[t] = 1, s[m + 3] = 255, t--,
            m -= 4, p--, !(0 > p) && q[m] >= a && q[m] <= b && q[m + 1] >= g && q[m + 1] <= f && q[m + 2] >= d && q[m + 2] <= h && q[m + 3] >= c && q[m + 3] <= e;);
        for (var r = k, m = w * l + 4 * k, t = u * l + k; A[t] = 1, s[m + 3] = 255, t++, m += 4, r++, !(r >= u) && q[m] >= a && q[m] <= b && q[m + 1] >= g && q[m + 1] <= f && q[m + 2] >= d && q[m + 2] <= h && q[m + 3] >= c && q[m + 3] <= e;);
        F + B === D.length && (D.splice(0, B), B = 0);
        D[B + F] = {
            startx: ++p,
            endx: --r,
            y: l
        };
        F++
    };
    return G
}();
(function (a) {
    a.convert || (a.convert = {});
    a.convert.blobToABR = function (a, d) {
        var c, b, f, h, e = a.slice(0, a.size),
            l = new FileReader;
        l.onload = function (a) {
            var e = function () {
                if (!(s + 1 > y.byteLength)) return w.getUint8(s++-1, !1)
            }, g = function () {
                    if (!(s + 2 > y.byteLength)) return w.getUint16((s += 2) - 2, !1)
                }, p = function () {
                    if (!(s + 4 > y.byteLength)) return w.getUint32((s += 4) - 4, !1)
                }, r = function (a) {
                    var b = p();
                    if (0 === b) return s = brush.next, a && A();
                    a = 0;
                    for (var c = ""; a < b; a++) c += String.fromCharCode(w.getUint16(s, !1)), s += 2;
                    return c
                }, t = function (a) {
                    for (var b =
                        "", c = y.byteLength, e = 0; b !== a && s < c;) {
                        ++e;
                        var f = String.fromCharCode(w.getUint8(s, !1));
                        s++;
                        if (a[b.length] === f) {
                            if (b += f, b === a) return e
                        } else b = ""
                    }
                }, s = 0,
                u = 0,
                y = l.result,
                w = new DataView(y);
            c = [];
            b = g();
            h = f = 0;
            var v = function () {
                if (x !== h && !(s > y.byteLength - 1)) {
                    var a = {};
                    a.idx = x;
                    c.push(a);
                    C && (a.type = g());
                    a.byteSize = p();
                    if (D)
                        for (; 0 !== a.byteSize % 4;) a.byteSize++;
                    a.next = s + a.byteSize;
                    if (C) {
                        if (2 !== a.type) return s = a.next, A();
                        s += 4;
                        a.spacing = g();
                        2 === b && (a.name = r(!0).replace(/\W/g, "").trim());
                        a.antialiasing = e();
                        s += 8
                    } else s +=
                        1 === f ? 47 : 301;
                    var l = p(),
                        m = p(),
                        v = p(),
                        F = p(),
                        R = g(),
                        N = e();
                    a.width = F - m;
                    a.height = v - l;
                    a.size = a.width * (R >> 3) * a.height;
                    l = document.createElement("canvas");
                    l.style.background = "#ffffaa";
                    l.width = a.width;
                    l.height = a.height;
                    m = l.getContext("2d");
                    v = m.getImageData(0, 0, l.width, l.height);
                    F = v.data;
                    if (0 === N)
                        if (8 === R)
                            for (var N = s, E = 0, R = s + a.size; N < R; N++, E += 4) F[E] = 0, F[E + 1] = 0, F[E + 2] = 0, F[E + 3] = w.getUint8(N);
                        else
                            for (N = s, E = 0, R = s + a.size; N < R; N += 4, E += 4) F[E] = w.getUint8(N), F[E + 1] = w.getUint8(N + 1), F[E + 2] = w.getUint8(N + 2), F[E + 3] = w.getUint8(N +
                                3);
                        else {
                            for (var E = 0, aa = [], N = 0; N < a.height; N++) aa[N] = w.getUint16(s, !1), s += 2;
                            R = 8 === R ? 3 : 0;
                            for (N = 0; N < a.height; N++)
                                for (var da = 0; da < aa[N];) {
                                    var X = w.getUint8(s);
                                    s++;
                                    da++;
                                    128 <= X && (X -= 256);
                                    if (0 > X) {
                                        if (-128 != X) {
                                            var X = -X + 1,
                                                la = w.getUint8(s);
                                            s++;
                                            da++;
                                            for (var V = 0; V < X; V++, E += R + 1) F[E + 3] = la
                                        }
                                    } else
                                        for (V = 0; V < X + 1; V++, E += R + 1) F[E + R] = w.getUint8(s), s++, da++
                                }
                        }
                    D && (s = B + u, u += t("Nm  TEXT"), a.name = r(), u += t("Nm  TEXT"), u += t("Nm  TEXT"));
                    m.putImageData(v, 0, 0);
                    d(l, a, 100 * ((x + 1) / h), A);
                    s = a.next
                }
            }, x = 0,
                A = function () {
                    setTimeout(function () {
                            v(x++)
                        },
                        1)
                }, C = 6 > b,
                D = 6 <= b;
            if (C) h = g(), v();
            else if (D) {
                f = g();
                t("8BIMsamp");
                var B = p() + s;
                a = s;
                for (h = 0; s < B;) {
                    for (var F = p(); 0 !== F % 4;) F++;
                    s += F;
                    h++
                }
                s = a;
                v()
            }
        };
        l.readAsArrayBuffer(e)
    }
})(sketch);
(function (a) {
    a.convert || (a.convert = {});
    a.convert.blobToGBR = function (a, d) {
        var c = {
            0: "headerSize",
            4: "version",
            8: "width",
            12: "height",
            16: "colorDepth",
            20: "namespace",
            24: "spacing"
        }, b = {}, f = a.slice(0, a.size),
            h = new FileReader;
        h.onload = function (a) {
            var f = h.result;
            a = new DataView(f);
            for (var g = 0; 28 > g; g += 4) b[c[g]] = a.getUint32(g, !1);
            b.name = "";
            for (var g = 28, k = b.headerSize - 1; g < k; g++) b.name += String.fromCharCode(a.getUint8(g));
            var q = document.createElement("canvas");
            q.style.background = "#ffffaa";
            var p = q.getContext("2d");
            q.width = b.width;
            q.height = b.height;
            var r = p.getImageData(0, 0, q.width, q.height),
                t = r.data;
            if (1 === b.colorDepth)
                for (g = k, k = 0, f = f.byteLength; g < f; g++, k += 4) {
                    var s = a.getUint8(g);
                    t[k + 0] = 0;
                    t[k + 1] = 0;
                    t[k + 2] = 0;
                    t[k + 3] = s
                } else
                    for (g = k, f = f.byteLength - 4; g < f; g += 4) {
                        var k = a.getUint8(g),
                            s = a.getUint8(g + 1),
                            u = a.getUint8(g + 2),
                            y = a.getUint8(g + 3);
                        t[4 * g + 0] = 255 - k;
                        t[4 * g + 1] = 255 - s;
                        t[4 * g + 2] = 255 - u;
                        t[4 * g + 3] = 255 - y
                    }
            p.putImageData(r, 0, 0);
            document.body.appendChild(q);
            d && d(q, b, 100)
        };
        h.readAsArrayBuffer(f)
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
"undefined" === typeof sketch.io && (sketch.io = {});
(function (a) {
    a.io.json = new function () {
        var d = this;
        this.read = function (c, b, f) {
            if (!c) return console.log("missing configure");
            b = b || c.onload || g;
            f = f || c.onerror || g;
            if (c.data) c = c.data;
            else {
                if (c.hash) return a.convert.blobToText(c, function (c) {
                    a.open.json(c, b, f)
                });
                c = c.src ? c.src : c
            } if ("<" === c.substr(0, 1)) return a.loader.stop();
            if ("http" === c.substr(0, 4) || parseUri.isLocalhost(c)) {
                if (!window.DOMLoader) {
                    a.feature.debug && console.log("missing module: 'DOMLoader'");
                    return
                }
                return DOMLoader.sendRequest({
                    url: c,
                    onload: function (c) {
                        a.open.json(c.responseText,
                            b, f)
                    }
                })
            }
            try {
                return c = JSON.parse(c), b(c)
            } catch (d) {
                return f(d)
            }
        };
        this.open = function (c, b, f) {
            d.read(c, function (h) {
                if (c.mergeIntoActions) return d.merge(h, b, f);
                a.loader.thread = a.loader.thread || a.loader.add("opening sketch...");
                a.reset();
                "sketch" === h.title && (h.title = a.configure.fileName = a.configure.defaultFileName);
                "..." === h.description && (h.description = a.configure.fileDescription = a.configure.defaultFileDescription);
                h.title && (a.configure.fileName = h.title);
                h.description && (a.configure.fileDescription = h.description);
                h.actions && (a.actions.data = h.actions);
                h.history && (h.history.vector && a.history) && (a.history.history.vector = h.history.vector);
                var e = h.metadata || {};
                e.background && a.setBackground(e.background);
                isFinite(h.width) && (e.width = h.width);
                isFinite(h.height) && (e.height = h.height);
                e.width && e.height ? a.project.setSize(e.width, e.height, e.autoResize) : a.project.setSize(0, 0);
                h.actions = d.upgrade(h);
                a.actions.reindex();
                a.actions.preload({
                    onload: function () {
                        a.loader.update(a.loader.thread, "opening sketch...", 100);
                        delete a.loader.thread;
                        a.assets && a.assets.addFromActions(a.actions.data);
                        b && b()
                    }
                })
            }, f)
        };
        this.merge = function (c, b, f) {
            if (!c) return f();
            c = c.actions ? c.actions : c;
            for (f = 0; f < c.length; f++) {
                var d = c[f];
                a.actions.getById(d.id) || a.actions.data.push(d)
            }
            a.actions.reindex();
            a.actions.preload({
                onload: function () {
                    a.assets && a.assets.addFromActions(a.actions.data);
                    b && b()
                }
            })
        };
        this.upgrade = function (c) {
            c.version = c.version.replace("dev", "");
            var b = new a.version(c.version || "2.0"),
                b = {
                    "2.0a": b.isLessThan("2.0a"),
                    "3.3": b.isLessThan("3.3")
                };
            c.srcs &&
                a.feature.deubg && console.log("data.srcs");
            c = c.actions;
            for (var f = 0, d = c.length; f < d; f++) {
                var e = c[f];
                b["2.0a"] && (e.color_mode && (e.fill.mode = e.color_mode), e.color_noise && (e.fill.noise = e.color_noise), e.flow && (e.spacing = e.flow));
                b["3.3"] && (e.src && (e.src = e.src.replace("/brush/", "/stamp/"), e.src = e.src.replace("/animal/", "/animals/")), "polygon" === e.type && (e.type = "regularPolygon"), "radialBurst" === e.type && (e.spread = e.slope), "0,00000000" === e.fill.gradient && (e.fill.gradient = "none"))
            }
            return c
        }
    };
    var g = function (a,
        c) {
        console.log("callback", a, c)
    }
})(sketch);
"undefined" !== typeof module && module.exports && (module.exports = sketch.io.json);
"undefined" === typeof sketch && (sketch = {});
"undefined" === typeof sketch.io && (sketch.io = {});
(function (a) {
    a.io.svg = new function () {
        var d = this;
        this.toActions = function (c, b) {
            var f = c.data;
            if (!f.vob) return console.log("error", f);
            var f = f.vob.childNodes,
                d = c.mergeIntoActions ? [] : a.actions.data = [],
                e = function (b) {
                    for (var c = 0; c < b.length; c++) {
                        var f = b[c];
                        f.childNodes && e(f.childNodes);
                        if (f.data) {
                            for (var g = f.matrix, p = (new CSSMatrix("matrix(" + [g.a, g.b, g.c, g.d, g.x, g.y].join() + ")")).decompose(), g = p.rotate, r = p.scale, p = p.translate, t = new a.vector.bbox(f.data), s = t.x, u = t.y, y = a.actions.clone(f.data), w = 0; w < y.length; w++) isFinite(y[w].x) &&
                                (y[w].x -= s, y[w].y -= u), isFinite(y[w].x1) && (y[w].x1 -= s, y[w].y1 -= u), isFinite(y[w].x2) && (y[w].x2 -= s, y[w].y2 -= u);
                            g = {
                                zIndex: c,
                                composite: "paint",
                                data: y,
                                diameter: f.style.strokeWidth,
                                opacity: 100 * f.style.fillOpacity,
                                fill: {
                                    type: "color",
                                    color: f.style.fillStyle
                                },
                                id: a.actions.createId(f.id),
                                type: f.type,
                                style: f.style,
                                bbox: {
                                    x: s * r.x + p.x,
                                    y: u * r.y + p.y,
                                    width: t.width / r.x,
                                    height: t.height / r.y,
                                    units: "objectBoundingBox",
                                    scale: {
                                        x: r.x,
                                        y: r.y
                                    },
                                    rotate: g.z
                                }
                            };
                            f.labels && (g.labels = f.labels.split(","));
                            d.push(g)
                        }
                    }
                };
            e(f);
            b(d)
        };
        this.add =
            function (a, b, f) {
                a.mergeIntoActions = !0;
                d.open(a, b, f)
        };
        this.open = function (c, b, f) {
            if (!c) return console.log("error: missing configuration");
            b = b || c.onload || g;
            f = f || c.onerror || g;
            var h;
            c.data ? h = c.data : "string" === typeof c ? h = c : c.src && (h = c.src);
            0 === h.indexOf("<polygon") && (h = '<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:sketchjs="https://sketch.io/dtd/" sketchjs:version="3.0">' + h + "</svg>");
            0 === h.indexOf("<svg") && (h = '<?xml version="1.0" encoding="UTF-8"?>' + h);
            0 === h.indexOf("<?xml") && (h = "data:image/svg+xml;base64," +
                btoa(h));
            var e = a.loader.thread = a.loader.thread || a.loader.add("");
            a.loader.update(e, "reading svg...", 0);
            var l = c.mergeIntoActions;
            new a.perf;
            return new Vector.SVG({
                skipRender: !0,
                placement: "none",
                src: h,
                onerror: f,
                onload: function (c) {
                    if (c.vob.metadata) {
                        var f = JSON.parse(atob(c.vob.metadata));
                        a.project.labels = f.labels
                    }
                    d.toActions({
                        data: c,
                        mergeIntoActions: l
                    }, function (f) {
                        a.loader.update(e, "rendering svg...", 50);
                        setTimeout(function () {
                            if (l) a.io.json.merge(f), a.loader.update(e, null, 100);
                            else {
                                var d = c.viewBox;
                                a.render.state =
                                    "preload";
                                a.project.setSize(d[2], d[3]);
                                a.actions.reset();
                                a.actions.data = f;
                                a.actions.preload({
                                    onload: function () {
                                        a.loader.stop(e);
                                        delete a.loader.thread;
                                        b && b(f)
                                    }
                                })
                            }
                        }, 1)
                    })
                }
            })
        }
    };
    var g = function (a, c) {
        console.log("callback", a, c)
    }
})(sketch);
"undefined" !== typeof module && module.exports && (module.exports = sketch.io.svg);
"undefined" === typeof sketch && (sketch = {});
"undefined" === typeof sketch.io && (sketch.io = {});
sketch = function (a) {
    a.io.zip = new function () {
        this.open = function (d, c) {
            c = c || a.onSketchReady;
            var b, f = "unpacking " + g(d.size);
            a.loader.thread = a.loader.thread || a.loader.add(f);
            a.loader.decoding = a.loader.add("...");
            a.io.zip.decode({
                blob: d,
                oncomplete: function () {
                    a.loader.update(a.loader.decoding, null, 100);
                    b ? a.open.json(b, c, c) : (a.loader.update(a.loader.thread, null, 100), c && c())
                },
                onchange: function (c) {
                    var e = c.blob,
                        f = c.filename,
                        d = c.next;
                    if (0 === e.size) return d();
                    switch (f) {
                    case "sketch.json":
                        a.convert.blobToText(e,
                            function (a) {
                                b = a;
                                d()
                            });
                        break;
                    case "README.txt":
                        d();
                        break;
                    default:
                        var g = "#" + f.split(".").shift();
                        "image/svg+xml" === e.type ? a.convert.blobToText(e, function (b) {
                            a.assets.add({
                                data: b,
                                onload: d,
                                onerror: d,
                                targetId: g
                            })
                        }) : (c = URL.createObjectURL(e), a.assets.add({
                            src: c,
                            onload: d,
                            onerror: d,
                            targetId: g
                        }))
                    }
                },
                onprogress: function (b, c, d, m) {
                    d = STRING.basename(d);
                    var k = d.length;
                    12 < k && (d = d.substr(0, 12));
                    12 !== k && (d += "...");
                    m = g(m);
                    a.loader.update(a.loader.thread, f, Math.max(0, b - 1));
                    a.loader.update(a.loader.decoding, d + " (" + m +
                        ")", Math.max(0, c - 1))
                }
            })
        };
        this.encode = function (d, c, b, f) {
            if (globalExists("zip")) {
                zip.fs.FS();
                var h = 0,
                    e = zip.fs.entries[0],
                    g = new Queue({
                        items: d,
                        flatten: !0,
                        oncomplete: function () {
                            e.exportBlob(function (a) {
                                c(a)
                            }, function (a, c, e) {
                                b && (a = Math.round(100 * (a / c)), a !== h && (b(a), h = a))
                            }, f)
                        },
                        next: function (a, b, c) {
                            if (a.blob) e.addBlob(a.filename, a.blob);
                            else if (a.length)
                                for (b = e.addDirectory(c), c = 0; c < a.length; c++) b.addBlob(a[c].filename, a[c].blob);
                            g.next()
                        }
                    })
            } else a.feature.debug && console.log("missing: zip library")
        };
        this.decode =
            function (d, c, b, f, h) {
                c = d.onchange || c;
                b = d.oncomplete || b;
                f = d.onprogress || f;
                h = d.onerror || h;
                d = d.blob || d;
                var e = {
                    json: "application/json",
                    txt: "text/plain",
                    svg: "image/svg+xml",
                    png: "image/png",
                    jpeg: "image/jpeg",
                    jpg: "image/jpeg",
                    gif: "image/gif"
                };
                zip.createReader(new zip.BlobReader(d), function (a) {
                    a.getEntries(function (d) {
                        var h = d.length - 1,
                            g = 0,
                            p = 0,
                            r = "",
                            t = 0,
                            s = 0,
                            u = new Queue({
                                items: d,
                                flatten: !0,
                                oncomplete: function () {
                                    a.close()
                                },
                                next: function (a, d) {
                                    p = d / h;
                                    s = Math.min(h, d + 1) / h - p;
                                    var l = d === h,
                                        m = a.filename;
                                    r = STRING.basename(m);
                                    if (0 === r.indexOf(".")) l ? b && b() : u.next();
                                    else {
                                        var A = m.split(".").pop();
                                        a.getData(new zip.BlobWriter(e[A]), function (a) {
                                            c({
                                                blob: a,
                                                filename: m,
                                                idx: d,
                                                length: h,
                                                percent: g,
                                                batchPercent: t,
                                                next: u.next
                                            });
                                            l && b && b()
                                        }, f && function (a, b, c) {
                                            t = a / b;
                                            a = 100 * (p + s * t) >> 0;
                                            a !== g && f(g = a, 100 * t >> 0, r, b)
                                        })
                                    }
                                }
                            })
                    })
                }, h || function (c) {
                    a.feature.debug && console.error(c);
                    b && b()
                })
        }
    };
    var g = function (a, c) {
        c = c || 0;
        for (var b = 0, f = a || 0; 1024 <= f;) b++, f /= 1024;
        return parseInt(f).toFixed(c) + " " + "bytes kb mb gb tb pb".split(" ")[b]
    };
    return a
}(sketch);
"undefined" !== typeof module && module.exports && (module.exports = sketch.io.zip);
"undefined" === typeof sketch && (sketch = {});
"undefined" === typeof sketch.io && (sketch.io = {});
"undefined" === typeof sketch.save && (sketch.save = {});
"undefined" === typeof sketch.download && (sketch.download = {});
"undefined" === typeof sketch.convert && (sketch.convert = {});
"undefined" === typeof sketch.open && (sketch.open = {});
sketch = function (a) {
    a.io.svg && (a.open.svg = a.io.svg.open);
    a.io.json && (a.open.json = a.io.json.open);
    a.io.zip && (a.open.sketch = a.open.zip = a.io.zip.open);
    var g = function (b, c, f, d, g, q, p) {
        var r = typeof b,
            t = "object" === r ? b : {}, s = function (a, b, c) {
                typeof t[a] !== b && (t[a] = c)
            }, u = function (a, b, c) {
                if ("function" === typeof c)
                    if (t.callback) {
                        var e = t.callback;
                        t.callback = function () {
                            e();
                            c()
                        }
                    } else t.callback = c;
                if (typeof c === b) return t[a] = c, !0
            };
        "number" === r ? (u("x", "number", b), u("y", "number", c), u("width", "number", f), u("height", "number",
            d), u("mime", "string", g), u("quality", "number", q), u("callback", "function", p)) : "string" === r ? (u("mime", "string", b), u("quality", "number", c), u("callback", "function", f)) : "function" === r && u("callback", "function", b);
        a.project.width && s("width", "number", a.project.width);
        a.project.height && s("height", "number", a.project.height);
        s("mime", "string", a.configure.image.mime);
        s("quality", "number", a.configure.image.quality);
        return t
    }, d = new function () {
            var b = "download" in document.createElement("a");
            this.lapse = 1E3;
            this.now =
                function () {
                    return (new Date).getTime()
            };
            this.getElement = function () {
                var b = this.element || a.$("#download");
                if (b) return b;
                this.element = document.createElement("a");
                this.element.id = "download";
                this.element.target = "_blank";
                this.element.style.display = "none";
                this.element.timestamp = this.now() - this.lapse;
                document.body.appendChild(this.element);
                return this.element
            };
            this.isReady = function (a) {
                var b = this.getElement(),
                    c = this.now();
                if (c - b.timestamp >= this.lapse) return a ? !0 : b.timestamp = c
            };
            this.onReady = function (a) {
                var b =
                    this.getElement();
                if (this.isReady(!0)) return a(b), b
            };
            this.download = function (a, c) {
                if (b) {
                    window.alertify && alertify.log("Saving to computer...");
                    var f = d.getElement();
                    f.download = c;
                    f.href = a;
                    f.click()
                } else window.open().document.write("<title>" + c + '</title><img src="' + a + '"/>')
            }
        };
    a.download.blob = function (b, c) {
        b = b || new Blob(["hello world"]);
        c = c || a.configure.fileName + ".txt";
        var f = globalExists("chrome.fileSystem.chooseEntry"),
            g = a.supports.blob;
        f ? chrome.fileSystem.chooseEntry({
                type: "saveFile",
                suggestedName: c
            },
            function (a) {
                a.createWriter(function (a) {
                    a.write(b)
                }, function (a) {
                    console.log(a)
                })
            }) : g ? (window.alertify && alertify.log("Saving to computer..."), saveAs(b, c)) : (f = URL.createObjectURL(b), d.download(f, c))
    };
    a.download.text = function (b, c, f) {
        canvas = canvas || document.createElement("canvas");
        c = c || a.configure.fileName + ".txt";
        f = f || "text/plain";
        a.supports.blob ? a.download.blob(new Blob([b], {
            type: f
        }), c) : (b = "data:" + f + ";base64," + btoa(b), d.download(b, c))
    };
    a.download.canvas = function (b, c, f, g) {
        if (d.isReady()) {
            b = b || document.createElement("canvas");
            f = f || "image/png";
            g = g || 1;
            var k = f.split("/").pop(),
                q = c || a.configure.fileName || "sketch";
            c = -1 === q.indexOf(k) ? q + "." + k : q;
            a.supports.blob ? b.toBlob(function (b) {
                a.download.blob(b, c)
            }, f, g) : (b = b.toDataURL(f, g), d.download(b, c))
        }
    };
    a.download.sketch = a.download.zip = function (b) {
        d.isReady() && a.save.zip(function (c) {
            var f = b || a.configure.fileName;
            b = -1 === f.indexOf(".zip") ? f + ".zip" : f;
            a.download.blob(c, b)
        })
    };
    a.download.svg = function (b) {
        d.isReady() && a.save.svg(function (c, f) {
            var d = b || a.configure.fileName;
            b = -1 === d.indexOf(".svg") ?
                d + ".svg" : d;
            a.download.text(c, b, "image/svg+xml")
        })
    };
    a.download.json = function (b) {
        d.isReady() && a.save.json(function (c, f) {
            var d = b || a.configure.fileName;
            b = -1 === d.indexOf(".json") ? d + ".json" : d;
            a.download.text(JSON.stringify(c), b, "application/json")
        })
    };
    a.download.image = function (b, c, f, m, k, q, p) {
        d.onReady(function (d) {
            var t = g(b, c, f, m, k, q, p);
            a.save.canvas(t, function (b) {
                a.download.canvas(b, t.filename, t.mime, t.quality)
            })
        })
    };
    a.download.pdf = function (b, c, f, m, k, q, p) {
        d.onReady(function (d) {
            var t = g(b, c, f, m, k, q, p);
            a.save.canvas(t,
                function (b) {
                    b = sketch.save.canvas();
                    var c = b.toDataURL("image/jpeg"),
                        e = new jsPDF,
                        f = b.width;
                    b = b.height;
                    var d = Math.max(f / e.internal.pageSize.width, b / e.internal.pageSize.height),
                        h = t.filename || a.configure.fileName;
                    e.addImage(c, "JPEG", 0, 0, f / d, b / d);
                    a.download.blob(e.output("blob"), h + ".pdf")
                })
        })
    };
    a.convert.htmlToCanvas = function (a) {
        var b = document.querySelector("#html-to-canvas");
        if (!b) return a.onerror();
        b.style.display = "block";
        b.innerHTML = a.html;
        html2canvas(b, {
            onerror: a.onerror,
            onrendered: function (c) {
                a.onload(c);
                b.style.display = "none"
            }
        })
    };
    a.convert.blobToText = function (a, b) {
        var c = new FileReader;
        c.onload = function (a) {
            b(a.target.result)
        };
        c.readAsText(a)
    };
    a.convert.fileToCanvas = function (b, c, f, d) {
        "string" === typeof b && (b = {
            src: b
        });
        DOMLoader.image({
            src: b.src,
            onprogress: function () {},
            onerror: function (c) {
                a.feature.debug && console.log("failed to load: " + b.src);
                d && d()
            },
            onload: function () {
                var a = a || document.createElement("canvas"),
                    c = a.getContext("2d");
                a.width = this.width;
                a.height = this.height;
                c.drawImage(this, 0, 0);
                f(a, b)
            }
        })
    };
    a.open.folder = function (b, c, f) {
        a.loader.thread = a.loader.thread || a.loader.add("reading files...");
        var d, g = new Queue({
                items: b,
                flatten: !0,
                oncomplete: function () {
                    d ? a.open.json(d, c, f) : (a.loader.update(a.loader.thread, null, 100), c && c())
                },
                next: function (c, e) {
                    a.loader.update(a.loader.thread, null, Math.max(0, (100 * ((e + 1) / b.length) >> 0) - 1));
                    if (!c.name) return g.next();
                    switch (c.name) {
                    case "sketch.json":
                        a.convert.blobToText(c, function (a) {
                            d = a;
                            g.next()
                        });
                        break;
                    case "README.txt":
                        g.next();
                        break;
                    default:
                        var f = "#" + c.name.split(".").shift();
                        if ("image/svg+xml" === c.type) a.convert.blobToText(c, function (b) {
                            a.assets.add({
                                data: b,
                                onload: g.next,
                                onerror: g.next,
                                targetId: f
                            })
                        });
                        else {
                            var l = URL.createObjectURL(c);
                            a.assets.add({
                                src: l,
                                onload: g.next,
                                onerror: g.next,
                                targetId: f
                            })
                        }
                    }
                }
            })
    };
    a.open.image = function (b) {
        "string" === typeof b && (b = {
            src: b
        });
        var c = function (c) {
            a.feature.debug && console.log("failed to load: " + b.src);
            onerror && onerror()
        }, f = function (c) {
                if (b.openAsNew) {
                    a.run("new");
                    var e = c.width;
                    c = c.height;
                    var f = a.area.padding / 2,
                        f = {
                            x: e / 2 + f,
                            y: c / 2 + f
                        };
                    a.project.setSize(e,
                        c);
                    a.place({
                        type: "image",
                        src: b.src,
                        width: e,
                        height: c,
                        points: [f]
                    }, function () {
                        a.run("select");
                        a.actions.deselectAll();
                        b.callback && b.callback()
                    })
                } else a.addMedia({
                    src: b.src,
                    callback: b.callback
                })
            }; - 1 !== b.src.indexOf("filesystem:") ? (c = new Image, c.src = b.src, c.onload = function () {
                var a = document.createElement("canvas"),
                    b = a.getContext("2d");
                a.width = this.width;
                a.height = this.height;
                b.drawImage(this, 0, 0);
                f(a)
            }) : a.assets.addImage(b.src, function (a, b) {
                f(b)
            }, c)
    };
    a.save = function (a) {
        this.toDataURL = function (a, b) {
            "string" ===
                typeof a && (a = {
                    mime: a
                });
            a = a || {};
            return this.canvas(a).toDataURL(a.mime || "image/png", a.quality || 1)
        };
        this.blob = function (a, c) {
            "function" === typeof a ? (c = a, a = {}) : (a = a || {}, c = c || a.callback || b);
            this.canvas(a).toBlob(function (a) {
                c(a)
            }, a.mime || "image/png")
        };
        this.blobURL = function (a, c) {
            "function" === typeof a ? (c = a, a = {}) : (a = a || {}, c = c || a.callback || b);
            this.blob(a, function (a) {
                c(URL.createObjectURL(a))
            })
        };
        this.canvas = function (b, c, f, d, g) {
            var p = function () {
                var g = document.createElement("canvas"),
                    p = g.getContext("2d");
                g.width =
                    f = f || r;
                g.height = d = d || t;
                x && "none" !== x && (p.save(), p.fillStyle = x, p.translate(-Math.abs(b % f), -Math.abs(c % d)), p.fillRect(0, 0, 2 * f, 2 * d), p.restore());
                var s = a.canvas2d.layers,
                    q;
                for (q in s) "cache" !== q && "active" !== q && p.drawImage(s[q], 0, 0);
                return g
            };
            if (!a.project.autoResize) var r = a.project.width || a.canvas2d.width,
            t = a.project.height || a.canvas2d.height;
            var s = "object" === typeof b ? b : {}, u = g,
                y = s.callback,
                w = "function" === typeof c ? c : "";
            g = function (a) {
                u && u(a);
                y && y(a);
                w && w(a)
            };
            d = isFinite(s.height) ? s.height : d || t;
            f = isFinite(s.width) ?
                s.width : f || r;
            c = isFinite(s.y) ? s.y : isFinite(c) ? c : 0;
            b = isFinite(s.x) ? s.x : isFinite(b) ? b : 0;
            var v = s.highRes || !1,
                x = s.background || void 0,
                A = s.clampToLayer || !1,
                C = s.fromSelection || !1,
                s = C || s.getBoundingBox || !isFinite(b) || !isFinite(c) || !isFinite(f) || !isFinite(d);
            "undefined" === typeof x && (x = a.configure.backgroundRaw);
            if (s) {
                if (!a.actions) return console.log("missing", b, c, f, d);
                var s = a.actions.getBoundingBox(A, C),
                    D = a.render.cache.padding;
                b = (s.x >> 0) - D;
                c = (s.y >> 0) - D;
                f = (s.width >> 0) + 2 * D;
                d = (s.height >> 0) + 2 * D
            } else b -= a.project.scrollLeft,
            c -= a.project.scrollTop;
            A && (f = Math.min(f, a.canvas2d.width), d = Math.min(d, a.canvas2d.height), b = Math.max(b, 0), c = Math.max(c, 0));
            a.actions ? (a.render.forOutput = !0, A = a.canvas2d.scale, s = clone(a.actions.selection), a.actions.selectAll(), a.actions.move(-b * A, -c * A), a.actions.deselectAll(), a.setSize(f, d), D = a.render.cache.enabled, C && (a.render.selectionBypass = s), v && (a.render.cache.enabled = !1), a.render.actions("root.save.canvas", null, !0), p = p(), a.actions.selectAll(), a.actions.move(b * A, c * A), a.actions.selection = s, a.setSize(),
                v && (a.render.cache.enabled = D), a.render.selectionBypass = !1, a.render.forOutput = !1, a.render.actions("root.save.canvas", null, !0)) : p = p();
            g && g(p);
            return p
        };
        this.image = function (b, c) {
            b = b || {};
            c = c || function (a) {
                console.log("no callback", a)
            };
            var f = function (f) {
                b.toDataURL ? c(f.toDataURL(p, b.quality || 1), b) : b.toBlob ? f.toBlob(function (f) {
                    b.toDownload && a.download.blob(f, a.configure.fileName + "." + g);
                    c(f, b)
                }, p) : c(f, b)
            }, d = a.canvas2d,
                g = b.format || "png",
                p = "image/" + g;
            b.crop ? a.save.canvas({
                background: b.background,
                fromSelection: b.fromSelection || !1,
                getBoundingBox: b.getBoundingBox || !1,
                clampToLayer: b.clampToLayer || !1,
                callback: function (c) {
                    a.thumbnailer.generate({
                        src: c,
                        width: b.width || d.width,
                        height: b.height || d.height,
                        center: b.center,
                        croparea: b.croparea,
                        crop: b.crop,
                        onload: f
                    })
                }
            }) : a.save.canvas({
                x: b.x || 0,
                y: b.y || 0,
                fromSelection: b.fromSelection || !1,
                getBoundingBox: b.getBoundingBox || !1,
                clampToLayer: b.clampToLayer || !1,
                width: b.width || d.width,
                height: b.height || d.height,
                background: b.background,
                callback: f
            })
        };
        this.json = function (b, f) {
            b = b || function (a, b) {
                console.log(a,
                    b)
            };
            var d = a.actions.data,
                g = {};
            if (a.history && a.history.history)
                if (f) {
                    var q = a.feature.sync.json;
                    q && q.undo && (g.history = {}, g.history.vector = a.history.history.vector)
                } else a.feature.history.vector && (g.history = {}, g.history.vector = a.history.history.vector);
            g.metadata = a.project;
            g.version = a.__version;
            g.title = a.configure.fileName;
            g.description = a.configure.fileDescription;
            g.actions = c(a.actions.clone(d));
            "sketch" === g.title && (g.title = a.configure.fileName = a.configure.defaultFileName);
            "..." === g.description && (g.description =
                a.configure.fileDescription = a.configure.defaultFileDescription);
            this.assets(function (a) {
                b(JSON.stringify(g), a)
            })
        };
        this.assets = function (b) {
            b = b || {};
            "function" === typeof b && (b = {
                callback: b
            });
            var c = b.actions || (b.fromSelection ? a.actions.getSelection() : a.actions.data),
                f = b.callback || function (a) {
                    console.log(a)
                }, d = b.toBlobURL || !1,
                g = function () {
                    !--s && u >= t - 1 && f(r)
                };
            b = function (b) {
                ++s;
                var c = b.src;
                if (r[c]) g();
                else if (!1 === p && parseUri.isLocalhost(c)) g();
                else if (a.assets.data[c]) {
                    var e = a.assets.data[c],
                        f = a.configure.image,
                        l = f.mime,
                        f = f.quality,
                        t = b.type;
                    if ("clipart" === t) {
                        if (!e.stringify) return console.log(e), g();
                        b = new Blob([e.stringify()], {
                            type: "image/svg+xml"
                        });
                        r[c] = d ? URL.createObjectURL(b) : b;
                        g()
                    } else a.detect.stampResource[t] && "image/jpeg" === l && (t = e.getContext("2d"), t.save(), t.globalCompositeOperation = "destination-atop", t.fillStyle = "#fff", t.fillRect(0, 0, e.width, e.height), t.restore()), d ? a.assets.dataIDtoURL[b.src] ? (r[c] = a.assets.dataIDtoURL[b.src], g()) : e.blob ? (r[c] = URL.createObjectURL(e.blob), g()) : e.toBlob(function (a) {
                        r[c] =
                            URL.createObjectURL(a);
                        g()
                    }, l, f) : e.blob ? (r[c] = e.blob, g()) : e.toBlob(function (a) {
                        r[c] = a;
                        g()
                    }, l, f)
                } else g()
            };
            var p = a.feature.sync.localRefs,
                r = {}, t = c.length;
            if (0 === t || a.fromServer) return f(r);
            for (var s = 0, u = 0; u < t; u++) {
                var y = c[u];
                y.src ? b(y) : !s && u >= t - 1 && f(r)
            }
        };
        this.svg = function (c) {
            var f = c.data || a.actions.data;
            "function" !== typeof c && ("object" === typeof c ? (f = c.items || f, c = c.callback || b) : c = function () {});
            for (var d = [], g = new Vector.SVG, f = a.actions.clone(f), q = 0; q < f.length; q++) {
                var p = f[q];
                p.style || (p.style = {});
                var r = {
                    a: p.bbox.scale.x,
                    b: 0,
                    c: 0,
                    d: p.bbox.scale.y,
                    x: p.bbox.x,
                    y: p.bbox.y
                }, t = {
                        id: p.id,
                        type: p.type,
                        parentNode: g.vob
                    };
                if (p.data && p.data.length) {
                    var s = p.data;
                    switch (a.detect.brush[p.type] ? "brush" : p.type) {
                    case "stamp":
                    case "path":
                        t.d = Vector.SVGPath.fromVOBPath(s);
                        break;
                    case "brush":
                    case "polygon":
                    case "polyline":
                        t.points = Vector.SVGPath.fromVOBPolygon(s)
                    }
                }
                t.bbox = {
                    x1: p.bbox.x,
                    y1: p.bbox.y,
                    x2: p.bbox.x + p.bbox.width,
                    y2: p.bbox.y + p.bbox.height
                };
                t.src = p.src;
                t.matrix = r;
                t.transform = r;
                t.style = {
                    opacity: p.style.opacity,
                    fillOpacity: p.style.fillOpacity,
                    fillRule: p.style.fillRule,
                    fillStyle: "color" === p.fill.type ? p.fill.color : "url(#gradient0)",
                    strokeLinecap: p.style.strokeLinecap,
                    strokeLinejoin: p.style.strokeLinejoin,
                    strokeMiterlimit: p.style.strokeMiterlimit,
                    strokeDasharray: p.style.strokeDasharray,
                    strokeDashoffset: p.style.strokeDashoffset,
                    strokeOpacity: p.style.strokeOpacity,
                    strokeStyle: p.style.strokeStyle,
                    strokeWidth: p.diameter
                };
                p.labels && (t.labels = p.labels.join(","));
                d.push(t)
            }
            g.vob.childNodes = d;
            g.vob.metadata = btoa(JSON.stringify(a.project));
            g.stringify ?
                c(g, g.stringify()) : console.log("missing: SVG.stringify")
        };
        this.sketch = this.zip = function (c, f) {
            c = c || b;
            this.folder(function (b) {
                a.io.zip.encode(b, function (a) {
                    c(a)
                }, f)
            })
        };
        this.folder = function (c) {
            c = c || b;
            a.save.json(function (a, b) {
                var d = [],
                    h;
                for (h in b) {
                    var g = f[b[h].type];
                    d.push({
                        filename: h.substr(1) + "." + g,
                        blob: b[h]
                    })
                }
                d.push({
                    filename: "sketch.json",
                    blob: new Blob([a], {
                        type: "text/plain"
                    })
                });
                d.push({
                    filename: "README.txt",
                    blob: new Blob(["\tWelcome to Sketchpad!\n\n\tThe contents of your drawing are kept in this .ZIP file.\n\n\tTo reload your image just drag the .ZIP back into Sketchpad!\n\n\t... but it seems you're here to explore, so here's a rundown:\n\n\tThe .JSON file inside has all your drawing commands, styles,\n\ttransforms, and other things that make up your drawing.\n\n\tThe other files included are other media resources which you\n\tmay of uploaded, or which you've taken with your webcam.\n\n\tWe hope you enjoy Sketchpad =)\n\n\tSketch.IO <hello@sketch.io>\n\thttps://sketch.io/\n\t\t\t\t"], {
                        type: "text/plain"
                    })
                });
                c(d)
            })
        };
        this.syncData = function (c) {
            c = c || {};
            var f = c.onprogress,
                d = c.onload || b;
            c = c.sync || a.feature.sync;
            var g = 0,
                q;
            for (q in c) c[q] && (!0 === c[q] && (c[q] = {}), g++);
            var p = g,
                r = function () {
                    f && f(100 * ((p - (g - 1)) / p));
                    --g || (a.setSizeAndUpdate(), d && d(s))
                }, t, s = {};
            for (q in c)
                if (t = c[q]) switch (q) {
                case "folder":
                    a.save.folder(function (a) {
                        s.folder = a;
                        r()
                    }, !0);
                    break;
                case "zip":
                    a.save.zip(function (a) {
                        s.sketch = a;
                        r()
                    });
                    break;
                case "svg":
                    a.save.svg(function (a, b) {
                        s.svg = b;
                        r()
                    });
                    break;
                case "json":
                    a.save.json(function (a) {
                        s.json =
                            a;
                        r()
                    }, !0);
                    break;
                case "thumb":
                    t.suffix = t.suffix || "thumb";
                case "image":
                    var u = t.format || "png";
                    t.idx = t.suffix ? t.suffix + "." + u : u;
                    t.toBlob || (t.toDataURL = !0);
                    a.save.image(t, function (a, b) {
                        s[b.idx] = a;
                        r()
                    });
                    break;
                default:
                    r()
                }
        };
        return this
    };
    a.print = function (b) {
        a.save.canvas({
            callback: function (a) {
                var c = document.querySelector("#print");
                c || (c = document.createElement("div"), c.id = "print", document.body.appendChild(c));
                c.innerHTML = "";
                c.appendChild(a);
                b || window.print()
            }
        })
    };
    var c = function (a) {
        for (var b in a) {
            var c = a[b].data;
            if (c && c.length)
                for (var f = 0; f < c.length; f++) c[f].x = Math.round(1E3 * c[f].x) / 1E3, c[f].y = Math.round(1E3 * c[f].y) / 1E3;
            c = a[b].bbox;
            c.width = Math.round(1E3 * c.width) / 1E3;
            c.height = Math.round(1E3 * c.height) / 1E3;
            c.x = Math.round(1E3 * c.x) / 1E3;
            c.y = Math.round(1E3 * c.y) / 1E3
        }
        return a
    }, b = function (a, b) {
            console.log("callback", a, b)
        }, f = {
            "image/png": "png",
            "image/gif": "gif",
            "image/jpeg": "jpeg",
            "image/svg+xml": "svg"
        };
    return a
}(sketch);
"undefined" !== typeof module && module.exports && (module.exports = sketch.save);
var ColorMatrix = function () {
    var a = [1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0];
    ColorMatrix = function (g, d) {
        this.filters = {};
        this.id = "ColorMatrix";
        if (g)
            if ("object" === typeof g) {
                var c = !0,
                    b;
                for (b in g) c = !1;
                c && (this.matrix = a.slice(0));
                for (var f in g) break;
                if ("number" === typeof g[f])
                    if (isNaN(f)) this.update(g);
                    else {
                        c = {};
                        for (b in g) c[b] = g[b];
                        this.matrix = c
                    } else "object" === typeof g[f] && this.combine(g)
            } else this.update(g, d);
            else this.matrix = a.slice(0);
        return this
    };
    ColorMatrix.prototype = {
        brightness: function (a) {
            return [1,
                0, 0, 0, a, 0, 1, 0, 0, a, 0, 0, 1, 0, a, 0, 0, 0, 1, 0]
        },
        contrast: function (a, d) {
            d = d || 0.5;
            return [++a, 0, 0, 0, d * (1 - a), 0, a, 0, 0, d * (1 - a), 0, 0, a, 0, d * (1 - a), 0, 0, 0, 1, 0]
        },
        sepia: function () {
            return [0.393, 0.769, 0.189, 0, 0, 0.349, 0.686, 0.168, 0, 0, 0.272, 0.534, 0.131, 0, 0, 0, 0, 0, 1, 0]
        },
        exposure: function (a) {
            return [a, 0, 0, 0, 0, 0, a, 0, 0, 0, 0, 0, a, 0, 0, 0, 0, 0, 1, 0]
        },
        colorize: function (g) {
            var d = (g >>> 16 & 255) / 255,
                c = (g >>> 8 & 255) / 255,
                b = (g & 255) / 255;
            g = (g >>> 24) / 255;
            d = [0.212656 * d, 0.715158 * d, 0.072186 * d, 0, 0, 0.212656 * c, 0.715158 * c, 0.072186 * c, 0, 0, 0.212656 * b, 0.715158 *
                b, 0.072186 * b, 0, 0, 0, 0, 0, 1, 0
            ];
            if (1 > g)
                for (c = 0; 20 > c; c++) d[c] = (1 - g) * a[c] + g * d[c];
            return d
        },
        monotone: function (g) {
            var d = (g >>> 16 & 255) / 255,
                c = (g >>> 8 & 255) / 255,
                b = (g & 255) / 255;
            g = (g >>> 24) / 255;
            d = [d, c, b, 0, 0, d, c, b, 0, 0, d, c, b, 0, 0, 0, 0, 0, 1, 0];
            if (1 > g)
                for (c = 0; 20 > c; c++) d[c] = (1 - g) * a[c] + g * d[c];
            return d
        },
        hue: function (a) {
            a *= DEG_RAD;
            var d = Math.cos(a);
            a = Math.sin(a);
            return [0.212656 + 0.787344 * d + -0.212656 * a, 0.715158 + -0.715158 * d + -0.715158 * a, 0.072186 + -0.072186 * d + 0.927814 * a, 0, 0, 0.212656 + -0.212656 * d + 0.143 * a, 0.715158 + d * (1 - 0.715158) + 0.14 *
                a, 0.072186 + -0.072186 * d + -0.283 * a, 0, 0, 0.212656 + -0.212656 * d + -0.787344 * a, 0.715158 + -0.715158 * d + 0.715158 * a, 0.072186 + 0.927814 * d + 0.072186 * a, 0, 0, 0, 0, 0, 1, 0]
        },
        invert: function (a, d) {
            d = d || 1;
            a *= -1;
            return [a, 0, 0, 0, d, 0, a, 0, 0, d, 0, 0, a, 0, d, 0, 0, 0, 1, 0]
        },
        temperature: function (a) {
            return [1 + a / 256, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1 + -a / 256, 0, 0, 0, 0, 0, 1, 0]
        },
        tint: function (a) {
            return [1 + a / 256, 0, 0, 0, 0, 0, 1 + -a / 256, 0, 0, 0, 0, 0, 1 + a / 256, 0, 0, 0, 0, 0, 1, 0]
        },
        saturation: function (a) {
            var d = 0.212656 * (1 - a),
                c = 0.715158 * (1 - a),
                b = 0.072186 * (1 - a);
            return [d + a, c, b, 0, 0, d,
                c + a, b, 0, 0, d, c, b + a, 0, 0, 0, 0, 0, 1, 0]
        },
        blend: function (a, d) {
            for (var c = this.matrix, b = [], f = 0; 20 > f; f++) b[f] = (1 - d) * c[f] + d * a[f];
            this.matrix = b;
            return this
        },
        light: function (a, d, c, b) {
            c = b.highlights;
            d = -clamp(c.value * (c.max - c.min) + c.min, c.min, c.max);
            c = b.shadows;
            b = -clamp(c.value * (c.max - c.min) + c.min, c.min, c.max);
            var f = Math.PI;
            c = Math.cos(f);
            for (var f = Math.sin(f), h = a.data, e = h.length, l = 0; l < e; l += 4) {
                var m = h[l],
                    k = h[l + 1],
                    q = h[l + 2],
                    p = m,
                    r = k,
                    t = q,
                    m = m ^ 255,
                    k = k ^ 255,
                    q = q ^ 255,
                    s = (0.299 + 0.701 * c + 0.168 * f) * m + (0.587 - 0.587 * c + 0.33 * f) * k + (0.114 -
                        0.114 * c - 0.497 * f) * q,
                    u = (0.299 - 0.299 * c - 0.328 * f) * m + (0.587 + 0.413 * c + 0.035 * f) * k + (0.114 - 0.114 * c + 0.292 * f) * q,
                    y = (0.299 - 0.3 * c + 1.25 * f) * m + (0.587 - 0.588 * c - 1.05 * f) * k + (0.114 + 0.886 * c - 0.203 * f) * q,
                    m = p < s ? p : s,
                    k = r < u ? r : u,
                    q = t < y ? t : y,
                    p = (1 - d) * p + d * m,
                    r = (1 - d) * r + d * k,
                    t = (1 - d) * t + d * q,
                    m = p > s ? p : s,
                    k = r > u ? r : u,
                    q = t > y ? t : y,
                    p = (1 - b) * p + b * m,
                    r = (1 - b) * r + b * k,
                    t = (1 - b) * t + b * q;
                h[l] = (0 > p ? 0 : 256 > p ? p : 255) >> 0;
                h[l + 1] = (0 > r ? 0 : 256 > r ? r : 255) >> 0;
                h[l + 2] = (0 > t ? 0 : 256 > t ? t : 255) >> 0
            }
            return a
        },
        duotone: function (a, d, c, b) {
            d = Color.HSV_RGB({
                H: 360 * b.hue.value,
                S: 100 * b.saturation.value,
                V: 100 * b.saturation.value
            });
            c = 1.5 * b.luminance.value;
            b = b.amount.value;
            for (var f = a.data, h = f.length, e = 0; e < h; e += 4) {
                var l = f[e],
                    m = f[e + 1],
                    k = f[e + 2],
                    q = 0.212656 * l + 0.715158 * m + 0.072186 * k,
                    p = (1 - q / 255) * d.R + q / 255 * q,
                    r = (1 - q / 255) * d.G + q / 255 * q,
                    t = (1 - q / 255) * d.B + q / 255 * q,
                    q = q - (p + r + t) / 3,
                    p = p + q,
                    r = r + q,
                    t = t + q,
                    q = (p + r + t) / 3,
                    s = Math.min(p, r, t);
                0 > s && (p = q + (p - q) * q / (q - s), r = q + (r - q) * q / (q - s), t = q + (t - q) * q / (q - s));
                s = Math.max(p, r, t);
                255 < s && (p = q + (p - q) * (255 - q) / (s - q), r = q + (r - q) * (255 - q) / (s - q), t = q + (t - q) * (255 - q) / (s - q));
                p = ((1 - b) * l + b * p) * c;
                r = ((1 - b) * m + b * r) *
                    c;
                t = ((1 - b) * k + b * t) * c;
                f[e] = p;
                f[e + 1] = r;
                f[e + 2] = t
            }
            return a
        },
        combine: function (a) {
            var d = [];
            if ("number" === typeof a[0])
                for (var c = 0, b = arguments.length; c < b; c++) d[c] = arguments[c];
            else d = a;
            var b = this.matrix,
                f = [];
            for (c in d)
                if (b) {
                    for (var h = 0; 5 > h; h++)
                        for (var e = 0; 20 > e; e += 5) f[e + h] = b[e] * d[c][h] + b[e + 1] * d[c][h + 5] + b[e + 2] * d[c][h + 10] + b[e + 3] * d[c][h + 15] + (4 === h ? b[e + 4] : 0);
                    b = f
                } else b = d[c];
            this.matrix = b;
            return this
        },
        update: function (a, d) {
            if ("string" === typeof a) {
                if (!this[a]) return;
                "number" === typeof d ? this.filters[a] = this[a](d) :
                    delete this.filters[a]
            } else
                for (var c in a) this[c] && ("number" === typeof a[c] ? this.filters[c] = this[c](a[c]) : delete this.filters[c]);
            delete this.matrix;
            this.combine(this.filters);
            return this
        },
        getMatrix4x4: function () {
            var a = this.matrix;
            return [a[0], a[1], a[2], a[3], a[5], a[6], a[7], a[8], a[10], a[11], a[12], a[13], a[15], a[16], a[17], a[18]]
        },
        toString: function () {
            return this.matrix.join(",")
        },
        apply: function (a, d, c, b) {
            var f = a.canvas;
            b || (b = [0, 0]);
            c || (c = a);
            d || (d = [0, 0, f.width, f.height]);
            a = a.getImageData(d[0], d[1], d[2],
                d[3]);
            d = a.data;
            for (var h = this.matrix, f = h[0], e = h[1], l = h[2], m = h[3], k = h[4], q = h[5], p = h[6], r = h[7], t = h[8], s = h[9], u = h[10], y = h[11], w = h[12], v = h[13], x = h[14], A = h[15], C = h[16], D = h[17], B = h[18], h = h[19], F, G, z, J, O, K, R, N = 0, E = d.length; N < E; N += 4) F = d[N], G = d[N + 1], z = d[N + 2], J = d[N + 3], O = F * f + G * e + z * l + J * m + k, K = F * q + G * p + z * r + J * t + s, R = F * u + G * y + z * w + J * v + x, F = F * A + G * C + z * D + J * B + h, a.data[N] = (0 > O ? 0 : 255 > O ? O : 255) >> 0, a.data[N + 1] = (0 > K ? 0 : 255 > K ? K : 255) >> 0, a.data[N + 2] = (0 > R ? 0 : 255 > R ? R : 255) >> 0, a.data[N + 3] = (0 > F ? 0 : 255 > F ? F : 255) >> 0;
            c.putImageData(a, b[0], b[1])
        },
        reset: function () {
            this.matrix = a.slice(0)
        }
    };
    return ColorMatrix
}();
(function (a) {
    a.register("media", function (g, d) {
        d.id = "media";
        g.defaultWidth = g.defaultWidth || 100;
        g.defaultHeight = g.defaultHeight || 100;
        g.minWidth = g.minWidth || 3;
        g.minHeight = g.minHeight || 3;
        d.loadSVGResource = function (a, b, f) {
            if (!globalExists("Vector.SVG")) throw "Requires Vector.SVG library.";
            var d = a.action;
            b = d.bbox.width;
            var e = d.bbox.height,
                g = f.viewBox;
            a.scaleBBox(g[2] - g[0], g[3] - g[1]);
            if ("objectBoundingBox" === d.bbox.units) {
                var m = d.bbox.scale,
                    k = d.bbox.height;
                d.bbox.x += (1 - d.bbox.width / b) * b / 2 * m.x;
                d.bbox.y += (1 -
                    k / e) * e / 2 * m.y
            }
            d.svg = f;
            d.dirty = !0;
            d.bbox.viewBox = g;
            d.render = function (a, b, c) {
                a = {
                    ctx: a
                };
                "symbol" === d.type && (a.defaultFill = this.fill && this.fill.color ? this.fill.color : "#000000");
                !1 !== c && (a.matrix = b.matrix);
                f.render(a)
            };
            if (a.onComplete) a.onComplete(d)
        };
        d.loadImageResource = function (a, b, f) {
            b = a.action;
            var h = "default" === f.className ? [0, 0, b.bbox.width, b.bbox.height] : [0, 0, f.width, f.height];
            a.scaleBBox(h[2] - h[0], h[3] - h[1]);
            b.dirty = !0;
            b.bbox.viewBox = h;
            b.render = function (a, b) {
                this.canvas = f;
                !this.dirty && this.canvasCtx ||
                    d.updateActionSize(this);
                if (this.canvasCtx) a.save(), this.canvasCtx.canvas ? a.drawImage(this.canvasCtx.canvas, 0, 0) : a.drawImage(this.canvasCtx.getComposite(), 0, 0);
                else {
                    var c = this.bbox.width * this.bbox.scale.x,
                        h = this.bbox.height * this.bbox.scale.y;
                    a.save();
                    a.drawImage(this.canvas, 0, 0, c, h)
                }
                a.restore()
            };
            if (a.onComplete) a.onComplete(b)
        };
        d.loadResource = function (c, b, f) {
            if (!c.src) return b(c);
            var h = c.src,
                e = c.bbox,
                g = e.owidth || e.width,
                m = e.oheight || e.height;
            f = a.actions.fromConfigure(a.configure.tools[c.type]);
            for (var k in f) "undefined" ===
                typeof c[k] && (c[k] = f[k]);
            var q = {
                src: h,
                action: c,
                onError: function () {
                    var e = "&ldquo;" + h.split("/").pop() + "&rdquo; unavailable.";
                    b && b(c, e);
                    if ("undefined" !== typeof image) {
                        var e = a.cache,
                            f = e.canvas;
                        f.width = c.bbox.width;
                        f.height = c.bbox.height;
                        e.fillStyle = "#000";
                        e.fillRect(0, 0, f.width, f.height);
                        image.src = f.toDataURL()
                    }
                },
                onComplete: b,
                scaleBBox: function (a, b) {
                    g / a > m / b && (m = g / a * b);
                    g / a < m / b && (g = m / b * a);
                    e.width = g;
                    e.height = m;
                    e.owidth || (e.owidth = g);
                    e.oheight || (e.oheight = m)
                }
            };
            a.assets.add({
                src: q.src,
                type: c.type,
                onload: function (a,
                    b) {
                    b.setAttribute || "image" === c.type ? d.loadImageResource(q, a, b) : d.loadSVGResource(q, a, b)
                }
            })
        };
        d.changeColor = function (a) {
            d.style.fillStyle = a
        };
        d.updateActionSize = function (c) {
            var b, f, d;
            if ("image" === c.type && window.ColorMatrix)
                if (c.canvas) {
                    c.canvasCtx || (c.canvasCtx = document.createElement("canvas").getContext("2d"));
                    var e = new ColorMatrix;
                    d = c.canvasCtx.canvas;
                    var g = c.canvasCtx;
                    f = c.bbox.width * c.bbox.scale.x;
                    b = c.bbox.height * c.bbox.scale.y;
                    d.width = Math.round(f) || 1;
                    d.height = Math.round(b) || 1;
                    e.reset();
                    e.update("saturation",
                        c.saturation);
                    e.update("tint", c.tint);
                    e.update("temperature", c.temperature);
                    e.update("exposure", c.exposure);
                    e.update("brightness", c.brightness);
                    e.update("contrast", c.contrast);
                    g.drawImage(c.canvas, 0, 0, f, b);
                    e.apply(g)
                } else a.feature.debug && console.log("missing canvas", c)
        };
        d.updateTimeout = function (c) {
            var b = a.actions.data[a.actions.idx];
            if (b) {
                var f = Math.sqrt(b.bbox.width * b.bbox.height);
                b.dirty = !0;
                b.bbox.scaleCache = {
                    x: 1,
                    y: 1
                };
                a.area.sizeAtRender = f;
                a.active.canvas.width = a.active.canvas.width;
                a.actions.constrain(b);
                a.actions.updateTransform(b);
                a.render.action(c ? a.ctx : a.active, b);
                a.area.renderControls(a.actions.idx)
            }
        };
        d.record = function (c, b, f) {
            if (!c || a.feature.placement.drag)
                if (!a.colorPicker || "eyeDropper" !== a.colorPicker.state) {
                    var h = d.style;
                    if (h.render) {
                        var e = a.canvas2d,
                            e = e.scale / e.pixelRatio,
                            l = (e - 1) / e,
                            m = a.project.scrollLeft * l,
                            l = a.project.scrollTop * l,
                            k = b.start.x / e + m,
                            q = b.start.y / e + l;
                        b.y = b.y / e + l;
                        b.x = b.x / e + m;
                        m = h.bbox;
                        Math.min(k, b.x);
                        Math.min(q, b.y);
                        var p = 2 * (Math.abs(k - b.x) || 1),
                            r = 2 * (Math.abs(q - b.y) || 1);
                        b.bbox && !b.bbox.border && (p = b.bbox.width || p, r = b.bbox.height || r);
                        var t = a.feature.placement.minWidth,
                            s = a.feature.placement.minHeight,
                            u = a.feature.placement.maxWidth,
                            y = a.feature.placement.maxHeight,
                            p = Math.max(t, Math.min(u, p)),
                            r = Math.max(s, Math.min(y, r));
                        p / m.width > r / m.height ? r = p / m.width * m.height : p = r / m.height * m.width;
                        m.x = k;
                        m.y = q;
                        m.width = p;
                        m.height = r;
                        l = Math.sqrt(p * r);
                        e = l / a.area.sizeAtRender;
                        if ("down" === b.state) e = a.actions.fromConfigure(a.configure.tools[d.type]), e.render = h.render, e.bbox = clone(m), e.dirty = !0, a.actions.add(e,
                            h, !0), a.area.sizeAtRender = l, a.active.canvas.width = a.active.canvas.width;
                        else if (l = a.actions.data[a.actions.idx]) {
                            l.type = d.type;
                            l.bbox.x = m.x;
                            l.bbox.y = m.y;
                            l.bbox.width = p;
                            l.bbox.height = r;
                            l.bbox.owidth = p;
                            l.bbox.oheight = r;
                            l.bbox.units = "objectBoundingBox";
                            l.bbox.scale = {
                                x: 1,
                                y: 1
                            };
                            l.bbox.scaleCache = {
                                x: e,
                                y: e
                            };
                            l.bbox.minWidth = t;
                            l.bbox.maxWidth = u;
                            l.bbox.minHeight = s;
                            l.bbox.maxHeight = y;
                            l.dirtyTransform = !0;
                            l.dirtyControl = !0;
                            if (b.bbox && !b.bbox.border) mergeObject(b.bbox, l.bbox);
                            else if ("undefined" === typeof b.rotate || !0 === b.rotate) k = -Math.atan2(b.x - k, b.y - q) * RAD_DEG, l.bbox.rotate = (k + 360) % 360;
                            r = l.bbox.scale.y * r / 2;
                            l.bbox.x -= l.bbox.scale.x * p / 2;
                            l.bbox.y -= r;
                            sketch.rtc && sketch.rtc.videos && (p = sketch.rtc.videos, p.you && p.you.element.gl && (l.filters = p.you.element.gl.filters));
                            if ("up" === b.state && (l.svg = h.svg, a.area.inGenesis = !0, l.bbox.width * l.bbox.height < g.minWidth * g.minHeight))
                                if (a.feature.placement.click) h = m.width, m = m.height, p = g.defaultWidth, r = g.defaultHeight, p / h > r / m && (r = p / h * m), p / h < r / m && (p = r / m * h), l.bbox.width = p, l.bbox.height =
                                    r, l.bbox.owidth = p, l.bbox.oheight = r, l.bbox.x -= p / 2, l.bbox.y -= r / 2;
                                else {
                                    a.actions.data.pop();
                                    a.render.actions("root.toolkit.media.record");
                                    return
                                }
                            clearTimeout(a.area.timeout);
                            h = "up" === b.state;
                            0.5 > e || 2 < e || h ? (d.updateTimeout(h), h && f && f()) : (a.area.timeout = setTimeout(d.updateTimeout, 250), a.active.canvas.width = a.active.canvas.width, a.actions.constrain(l), a.actions.updateTransform(l), a.render.action(a.active, l), a.area.renderControls(a.actions.idx))
                        }
                    } else b.pause && b.pause(), h.src || (h.src = a.media[h.type].paths[0].path),
                    d.loadResource(h, function (a) {
                        if (!a.src) return console.log("missing src");
                        b.resume && b.resume();
                        d.record(c, b, f)
                    }, !1)
                }
        };
        d.onEnterKey = function () {
            a.run("deselect-all")
        };
        d.style = {
            bbox: {
                x: 0,
                y: 0,
                width: 100,
                height: 100,
                rotate: 0,
                scale: {
                    x: 1,
                    y: 1
                }
            }
        }
    })
})(sketch);
var OES_texture_float_linear = function () {
    function a(a) {
        if (!a.getExtension("OES_texture_float")) return !1;
        var b = a.createFramebuffer(),
            c = a.createTexture();
        a.bindTexture(a.TEXTURE_2D, c);
        a.texParameteri(a.TEXTURE_2D, a.TEXTURE_MAG_FILTER, a.NEAREST);
        a.texParameteri(a.TEXTURE_2D, a.TEXTURE_MIN_FILTER, a.NEAREST);
        a.texParameteri(a.TEXTURE_2D, a.TEXTURE_WRAP_S, a.CLAMP_TO_EDGE);
        a.texParameteri(a.TEXTURE_2D, a.TEXTURE_WRAP_T, a.CLAMP_TO_EDGE);
        a.texImage2D(a.TEXTURE_2D, 0, a.RGBA, 1, 1, 0, a.RGBA, a.UNSIGNED_BYTE, null);
        a.bindFramebuffer(a.FRAMEBUFFER,
            b);
        a.framebufferTexture2D(a.FRAMEBUFFER, a.COLOR_ATTACHMENT0, a.TEXTURE_2D, c, 0);
        b = a.createTexture();
        a.bindTexture(a.TEXTURE_2D, b);
        a.texParameteri(a.TEXTURE_2D, a.TEXTURE_MAG_FILTER, a.LINEAR);
        a.texParameteri(a.TEXTURE_2D, a.TEXTURE_MIN_FILTER, a.LINEAR);
        a.texParameteri(a.TEXTURE_2D, a.TEXTURE_WRAP_S, a.CLAMP_TO_EDGE);
        a.texParameteri(a.TEXTURE_2D, a.TEXTURE_WRAP_T, a.CLAMP_TO_EDGE);
        a.texImage2D(a.TEXTURE_2D, 0, a.RGBA, 2, 2, 0, a.RGBA, a.FLOAT, new Float32Array([2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]));
        var c = a.createProgram(),
            e = a.createShader(a.VERTEX_SHADER),
            f = a.createShader(a.FRAGMENT_SHADER);
        a.shaderSource(e, "      attribute vec2 vertex;      void main() {        gl_Position = vec4(vertex, 0.0, 1.0);      }    ");
        a.shaderSource(f, "      uniform sampler2D texture;      void main() {        gl_FragColor = texture2D(texture, vec2(0.5));      }    ");
        a.compileShader(e);
        a.compileShader(f);
        a.attachShader(c, e);
        a.attachShader(c, f);
        a.linkProgram(c);
        e = a.createBuffer();
        a.bindBuffer(a.ARRAY_BUFFER, e);
        a.bufferData(a.ARRAY_BUFFER,
            new Float32Array([0, 0]), a.STREAM_DRAW);
        a.enableVertexAttribArray(0);
        a.vertexAttribPointer(0, 2, a.FLOAT, !1, 0, 0);
        e = new Uint8Array(4);
        a.useProgram(c);
        a.viewport(0, 0, 1, 1);
        a.bindTexture(a.TEXTURE_2D, b);
        a.drawArrays(a.POINTS, 0, 1);
        a.readPixels(0, 0, 1, 1, a.RGBA, a.UNSIGNED_BYTE, e);
        return 127 === e[0] || 128 === e[0]
    }

    function g() {}

    function d(a) {
        "OES_texture_float_linear" === a ? (void 0 === this.$OES_texture_float_linear$ && Object.defineProperty(this, "$OES_texture_float_linear$", {
            enumerable: !1,
            configurable: !1,
            writable: !1,
            value: new g
        }), a = this.$OES_texture_float_linear$) : a = h.call(this, a);
        return a
    }

    function c() {
        var a = e.call(this); - 1 === a.indexOf("OES_texture_float_linear") && a.push("OES_texture_float_linear");
        return a
    }
    try {
        var b = document.createElement("canvas").getContext("experimental-webgl")
    } catch (f) {}
    if (b && -1 === b.getSupportedExtensions().indexOf("OES_texture_float_linear") && a(b)) {
        var h = WebGLRenderingContext.prototype.getExtension,
            e = WebGLRenderingContext.prototype.getSupportedExtensions;
        WebGLRenderingContext.prototype.getExtension =
            d;
        WebGLRenderingContext.prototype.getSupportedExtensions = c
    }
};
if ("undefined" === typeof glfx) var glfx = {};
glfx = function (a) {
    var g = [];
    a.debug = !1;
    a.filters = {};
    a.filterId = 1;
    a.reset = function () {
        for (var a = 0; a < g.length; a++) {
            var c = g[a];
            c.parentNode && c.parentNode.removeChild(c);
            for (var d = c.gl, e = d.layers, l = 0; l < e.length; l++) c = e[l], c.TEXTURE && c.TEXTURE.destroy(), c.parentNode && c.parentNode.removeChild(c);
            d.layers = []
        }
        g = []
    };
    a.applyShader = function (a, c, h) {
        c = c || a.offsetWidth;
        h = h || a.offsetHeight;
        c = new d(a, c, h);
        g.push({
            source: a,
            gl: c
        });
        return c
    };
    var d = function (b, c, d) {
        var e = this;
        this.source = b;
        this.layers = [];
        new sketch.perf;
        this.render = function (b, g, k) {
            k = e.source;
            var q = e.filters;
            if (q)
                for (var p = !1, r = Math.max(q.length, e.layers.length), t = 0; t < r; t++) {
                    var s = t === q.length - 1,
                        u = q[t];
                    if (u) {
                        if (e.layers[t]) {
                            var y = e.layers[t],
                                w = y.TEXTURE;
                            w.clean ? delete w.clean : w.loadContentsOf(k, c, d)
                        } else y = a.canvas(), w = y.texture(k), y.glfx = e, y.className = "texture" + t, y.TEXTURE = w, k.parentNode && k.parentNode.appendChild(y), e.layers[t] = y;
                        y.style.display = b || e.display ? b || e.display : s ? "block" : "none";
                        s = y.draw(w, c, d);
                        for (w = 0; w < u.length; w++)
                            if (y = u[w], !1 !== y.enabled) switch (y.cmd) {
                            case "shader":
                                var v =
                                    y.data;
                                if (!s[y.id]) {
                                    console.log("missing filter", y.id);
                                    break
                                }
                                switch (y.id) {
                                case "colormap":
                                    if (glfx.filters.colormap.loadResource(v[1], function () {
                                        e.render(b, g)
                                    })) return;
                                    break;
                                case "displacement":
                                    if (glfx.filters.displacement.loadResource(v[4], function () {
                                        e.render(b, g)
                                    })) return;
                                    break;
                                case "blend":
                                    v[3] = e.layers[0], v[4] = e.layers[1]
                                }
                                p = p || !s[y.id].apply(s, y.data)
                            }
                            p || (t === q.length - 1 && s.mirror.apply(s, [1, 0]), s.update())
                    } else {
                        var y = e.layers[t];
                        y.style.display = "none"
                    }
                }
            g && g()
        };
        this.viewport = function (a, b, g, q) {
            c =
                g;
            d = q;
            a = e.layers;
            b = a.length;
            for (g = 0; g < b; g++)
                for (q = a[g], q.width = c, q.height = d, q.ctx.viewport(0, 0, c, d), g = 0; g < e.layers.length; g++) q = e.layers[g], q.TEXTURE && (q.TEXTURE.destroy(), q.TEXTURE = q.texture(e.source), q.TEXTURE.clean = !0)
        };
        this.setFilter = function (a) {
            e.filters = a
        };
        this.setDefaults = function () {
            this.filters = {};
            for (var b in a.filters) this.filters[b] = {
                index: 0,
                enabled: !1,
                values: a.filters[b].defaults
            }
        };
        this.animate = function (b) {
            a.animate(b)
        };
        this.play = function () {
            e.animating = !0
        };
        this.pause = function () {
            e.animating = !1
        };
        this.getComposite = function (a) {
            if (e.filters) {
                var b = e.layers[e.filters.length - 1];
                a = a || {};
                return a.mime ? b.toDataURL(a.mime, a.quality) : b
            }
        };
        this.setDefaults();
        return this
    };
    a.render = function (b) {
        if (!a.animationId || b)
            if (a.animationId || !sketch.rtc) a.requestAnimation(!0), a.cancelAnimation();
            else {
                var c = function () {
                    d.removeEventListener("playing", c);
                    setTimeout(function () {
                        a.requestAnimation(!0);
                        a.cancelAnimation();
                        d.pause()
                    }, 250)
                }, d = sketch.rtc.getFocusVideo();
                d && (d.addEventListener("playing", c), d.play())
            }
    };
    a.textures = {};
    a.loadResource = function (b, c, d, e, g, m, k) {
        e = e || b[c];
        if ("string" !== typeof e || a.textures[e]) return !1;
        var q;
        k = k || e.replace("./media/", "");
        sketch.loader && 0 === !e.indexOf("data") && (q = sketch.loader.message(k));
        var p = DOMLoader.image({
            src: e,
            onload: function () {
                var r = document.createElement("canvas"),
                    t = r.getContext("2d");
                if (g && m) r.width = g, r.height = m, t.drawImage(p, 0, 0);
                else {
                    var s = t.createPattern(p, "repeat");
                    r.width = p.width;
                    r.height = p.height;
                    t.scale(1, 1);
                    t.fillStyle = s;
                    t.fillRect(0, 0, 1 * r.width, 1 * r.height)
                }
                setTimeout(function () {
                    r.ctx =
                        t;
                    a.textures[e] = b[c] = r;
                    d && d(r);
                    q && sketch.loader.update(q, k, 100)
                }, 50)
            },
            onprogress: q && function (a) {
                sketch.loader.update(q, k, a && a.lengthComputable ? 100 * (a.loaded / a.totalSize) >> 0 : "")
            }
        });
        a.textures[e] = p;
        return !0
    };
    a.animate = function (b) {
        null === b ? a.animationId ? a.cancelAnimation() : a.requestAnimation(b) : b ? a.requestAnimation(b) : a.cancelAnimation()
    };
    a.requestAnimation = function (b) {
        !0 === b && a.animationId && a.cancelAnimation();
        sketch.feature.stats && sketch.stats.begin();
        b = g.length;
        for (var c = 0; c < b; c++) {
            var d = g[c].gl;
            d && "none" !== d.display && d.render()
        }
        sketch.feature.stats && sketch.stats.end();
        a.animationId = window.requestAnimationFrame(a.requestAnimation)
    };
    a.cancelAnimation = function () {
        a.animationId && window.cancelAnimationFrame(a.animationId);
        delete a.animationId
    };
    a.param = function (a, c, d) {
        return {
            param: a,
            format: c,
            value: d
        }
    };
    var c = function (a) {
        return a[1] ? a[1].split(",").map(function (a) {
            return "width" === a ? window.innerWidth : "width/2" === a ? window.innerWidth / 2 : "height" === a ? window.innerHeight : "height/2" === a ? window.innerHeight /
                2 : parseFloat(a)
        }) : ""
    };
    a.addFilter = function (b, f) {
        var d = b.type,
            e = "gl_" + d,
            g = sketch.configure.tools[e] = {};
        g.toolkit = "media";
        g.type = e;
        var e = sketch.vars,
            m = b.defaults = [],
            k = b.paramIndex = {}, q = {
                temperature: ["#568fcf", "#f7e146"],
                tint: ["#00ae47", "#c73baf"],
                exposure: ["#777", "#eee"],
                brightness: ["#777", "#eee"],
                contrast: ["#777", "#eee"]
            };
        b.param || console.log(b);
        for (var p = 0; p < b.param.length; p++) {
            var r = b.param[p];
            r || console.log(d);
            var t = r.param,
                s = r.value;
            k[t] = p;
            m.push(s);
            r = r.format.replace(")", "").split("(");
            switch (r[0]) {
            case "px":
            case "int":
                r =
                    c(r);
                g[t] = new e.clamp(s, r[0] || 0, r[1] || 100);
                break;
            case "float":
                r = c(r);
                g[t] = new e.clamp(s, r[0] || 0, r[1] || 1);
                break;
            case "degree":
                r = c(r);
                g[t] = new e.clamp(s, r[0] || 0, r[1] || 360);
                break;
            case "radian":
                r = c(r);
                g[t] = new e.clamp(s, r[0] || 0, r[1] || 360 * DEG_RAD);
                break;
            case "color":
                g[t] = new e.color(s);
                break;
            case "select":
                g[t] = new e.select(r[1].split(","));
                break;
            default:
                console.log(r[0])
            }
            q[t] && g[t] && (g[t].gradient = q[t])
        }
        a.filters[d] = b
    };
    a.dragCenterPoint = function (b, c) {
        var d = c.env,
            e = d.type;
        if (b && b.activeFilter) {
            var g = a.filters[e] &&
                a.filters[e].paramIndex,
                e = sketch.configure.tools["gl_" + e];
            e.centerX.value = b.activeFilter.data[g.centerX] = c.x / d.width;
            e.centerY.value = b.activeFilter.data[g.centerY] = c.y / d.height;
            a.render()
        }
    };
    a.getStack = function (b) {
        for (var c = [], d = a.filterStack[a.filterId], e = 0; e < d.length; e++) {
            for (var g = [], m = d[e], k = 0; k < m.length; k++) {
                var q = m[k];
                !1 !== q.enabled && ("blend" === q.id ? (g.shift(), g.push({
                    cmd: "shader",
                    id: "blend",
                    data: [q.data[0], q.data[1], q.data[2], "texture0", "texture1"]
                })) : g.push(q))
            }
            c.push(g)
        }
        return b ? encodeURIComponent(JSON.stringify(c)) :
            JSON.stringify(c)
    };
    a.getContext = function (a, c) {
        c = c || {
            preserveDrawingBuffer: !0,
            premultipliedAlpha: !1
        };
        return a.getContext("webgl", c) || a.getContext("experimental-webgl", c)
    };
    return a
}(glfx);
if ("undefined" === typeof gl) var gl;
"undefined" === typeof glfx && (glfx = {});
(function () {
    function a(a) {
        return {
            _: a,
            loadContentsOf: function (a, b, c) {
                gl = this._.gl;
                this._.loadContentsOf(a, b, c)
            },
            destroy: function () {
                gl = this._.gl;
                this._.destroy()
            }
        }
    }

    function g(b) {
        var c = a(Texture.fromElement(b));
        return b.texture = c
    }

    function d(a, b) {
        if (gl.getExtension("OES_texture_float") && gl.getExtension("OES_texture_float_linear") && !m) {
            var c = new Texture(100, 100, gl.RGBA, gl.FLOAT);
            try {
                c.drawTo(function () {
                    m = gl.FLOAT
                })
            } catch (e) {}
            c.destroy()
        }
        this.width = a;
        this.height = b;
        this.randomSeed = new Random(1);
        this._.texture &&
            this._.texture.destroy();
        this._.spareTexture && this._.spareTexture.destroy();
        this._.extraTexture && this._.extraTexture.destroy();
        this._.extraTexture2 && this._.extraTexture.destroy();
        this._.texture = new Texture(a, b, gl.RGBA, m);
        this._.spareTexture = new Texture(a, b, gl.RGBA, m);
        this._.extraTexture = new Texture(0, 0, gl.RGBA, m);
        this._.extraTexture2 = new Texture(0, 0, gl.RGBA, m);
        this._.flippedShader = this._.flippedShader || new Shader(null, "\t\tuniform sampler2D texture;\t\tvarying vec2 texCoord;\t\tvoid main() {\t\t\tgl_FragColor = texture2D(texture, vec2(texCoord.x, 1.0 - texCoord.y));\t\t}\t");
        this._.isInitialized = !0;
        this._.dirty = !1
    }

    function c(a, b, c) {
        !this._.dirty && this._.isInitialized && a._.width == this.width && a._.height == this.height || d.call(this, b ? b : a._.width, c ? c : a._.height);
        this.now = (new Date).getTime();
        this.startTime = this.startTime || this.now;
        this.random = this.randomSeed.toDouble();
        a._.use();
        this._.texture.drawTo(function () {
            Shader.getDefaultShader().drawRect()
        });
        return this
    }

    function b() {
        this._.texture.use();
        this._.flippedShader.drawRect();
        return this
    }

    function f(a) {
        a.parentNode.insertBefore(this,
            a);
        a.parentNode.removeChild(a);
        return this
    }

    function h() {
        var b = new Texture(this._.texture.width, this._.texture.height, gl.RGBA, gl.UNSIGNED_BYTE);
        this._.texture.use();
        b.drawTo(function () {
            Shader.getDefaultShader().drawRect()
        });
        return a(b)
    }

    function e() {
        var a = this._.texture.width,
            b = this._.texture.height,
            c = new Uint8Array(4 * a * b);
        this._.texture.drawTo(function () {
            gl.readPixels(0, 0, a, b, gl.RGBA, gl.UNSIGNED_BYTE, c)
        });
        return c
    }

    function l(a) {
        return function () {
            gl = this._.gl;
            return a.apply(this, arguments)
        }
    }
    glfx.canvas =
        function () {
            var a = document.createElement("canvas");
            try {
                gl = glfx.getContext(a), "function" === typeof OES_texture_float_linear && (OES_texture_float_linear(), OES_texture_float_linear = !1)
            } catch (d) {
                throw gl = null, "This browser does not support WebGL";
            }
            a._ = {
                gl: gl,
                isInitialized: !1,
                dirty: !1,
                texture: null,
                spareTexture: null,
                flippedShader: null
            };
            a.ctx = gl;
            a.texture = l(g);
            a.draw = l(c);
            a.update = l(b);
            a.replace = l(f);
            a.contents = l(h);
            a.getPixelArray = l(e);
            for (var p in glfx.filters) a[p] = l(glfx.filters[p].shader);
            return a
    };
    glfx.simpleShader =
        function (a, b, c, e) {
            (c || this._.texture).use();
            this._.spareTexture.drawTo(function () {
                a.invalid || a.uniforms(b).drawRect()
            });
            this._.spareTexture.swapWith(e || this._.texture)
    };
    var m
})();
"undefined" === typeof glfx && (glfx = {});
var glfx = function (a) {
    a.loadFilters = function (g) {
        glfx.filters.colormap && glfx.filters.colormap.construct();
        var d = a.filterStack = [
            [
                [{
                    cmd: "input",
                    id: "source0",
                    name: "rainbow tron",
                    enabled: !0
                }, {
                    id: "colormap",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.5309734513274337, 5]
                }],
                [{
                    cmd: "input",
                    id: "source0",
                    enabled: !0
                }, {
                    id: "denoise",
                    cmd: "shader",
                    enabled: !0,
                    data: [20]
                }, {
                    cmd: "shader",
                    id: "tron",
                    data: [0.35398230088495575, 0.7920353982300885, 84.23008849557522, 0, 0, 0, 0],
                    enabled: !0
                }, {
                    id: "colormap",
                    cmd: "shader",
                    enabled: !0,
                    data: [1, 4]
                }],
                [{
                    cmd: "shader",
                    id: "blend",
                    data: [9, 1, 0.9778761061946902, "texture0", "texture1"]
                }]
            ],
            [
                [{
                    cmd: "input",
                    id: "source0",
                    name: "rainbow tron",
                    enabled: !0
                }, {
                    id: "colormap",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.5309734513274337, 5]
                }, {
                    id: "displacement",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.7433628318584071, 0.10619469026548672, 0.8849557522123894, 1.8185840707964602, 0, -0.23893805309734517]
                }],
                [{
                    cmd: "input",
                    id: "source0",
                    enabled: !0
                }, {
                    id: "denoise",
                    cmd: "shader",
                    enabled: !0,
                    data: [20]
                }, {
                    cmd: "shader",
                    id: "tron",
                    data: [0.23893805309734514, 0.43565309734513274,
                        100, 0, 0, 0, 0
                    ],
                    enabled: !0
                }, {
                    id: "colormap",
                    cmd: "shader",
                    enabled: !0,
                    data: [1, 4]
                }],
                [{
                    cmd: "shader",
                    id: "blend",
                    data: [9, 1, 0.9778761061946902, "texture0", "texture1"]
                }]
            ],
            [
                [{
                    cmd: "input",
                    id: "source0",
                    name: "rainbow tron",
                    enabled: !0
                }, {
                    id: "colormap",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.6548672566371682, 18]
                }, {
                    id: "displacement",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.7035398230088495, 0.10619469026548672, 0.8849557522123894, 1.1017699115044248, 0, -0.23893805309734517]
                }],
                [{
                    cmd: "input",
                    id: "source0",
                    enabled: !0
                }, {
                    cmd: "shader",
                    id: "tron",
                    data: [0.21238938053097345, 1, 34.29203539823009, 0.0051991150442477875, 5.640884955752212, 0, 0],
                    enabled: !0
                }, {
                    id: "colormap",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.7256637168141593, 1]
                }],
                [{
                    cmd: "shader",
                    id: "blend",
                    data: [13, 1, 0.9778761061946902, "texture0", "texture1"]
                }]
            ],
            [
                [{
                    cmd: "input",
                    id: "source0",
                    name: "rainbow tron",
                    enabled: !0
                }, {
                    id: "hueSaturation",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.9292035398230087, 0.7345132743362832]
                }, {
                    id: "denoise",
                    cmd: "shader",
                    enabled: !0,
                    data: [30]
                }, {
                    id: "zoomBlur",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.5,
                        0.5, 0.10619469026548672
                    ]
                }, {
                    id: "displacement",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.95, 0.0663716814159292, 0.17699115044247787, 1.4867256637168142, 0, -0.6106194690265487]
                }, {
                    id: "ink",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.2743362831858407]
                }],
                [{
                    cmd: "input",
                    id: "source0",
                    enabled: !0
                }, {
                    cmd: "shader",
                    id: "tron",
                    data: [2, 1, 1, 0.025, 5.640884955752212, 0, 0],
                    enabled: !0
                }, {
                    id: "colormap",
                    cmd: "shader",
                    enabled: !0,
                    data: [1, 19]
                }, {
                    id: "displacement",
                    cmd: "shader",
                    enabled: !0,
                    data: [1.008849557522124, 3, 0.5309734513274336, 1, 0, -0.008849557522123908]
                }],
                [{
                    cmd: "shader",
                    id: "blend",
                    data: [10, 0.7964601769911505, 0.7300884955752213, "texture0", "texture1"]
                }]
            ],
            [
                [{
                    cmd: "input",
                    id: "source0",
                    name: "rainbow tron",
                    enabled: !0
                }, {
                    id: "hueSaturation",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.9292035398230087, 0.7345132743362832]
                }, {
                    id: "denoise",
                    cmd: "shader",
                    enabled: !0,
                    data: [30]
                }, {
                    id: "zoomBlur",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.5, 0.5, 0.10619469026548672]
                }, {
                    id: "displacement",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.95, 0.0663716814159292, 0.17699115044247787, 1.4867256637168142, 0, -0.6106194690265487]
                }, {
                    id: "ink",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.2743362831858407]
                }],
                [{
                    cmd: "input",
                    id: "source0",
                    enabled: !0
                }, {
                    cmd: "shader",
                    id: "tron",
                    data: [2, 1, 1, 0.025, 5.640884955752212, 0, 0],
                    enabled: !0
                }, {
                    id: "colormap",
                    cmd: "shader",
                    enabled: !0,
                    data: [1, 19]
                }, {
                    id: "displacement",
                    cmd: "shader",
                    enabled: !0,
                    data: [1.008849557522124, 3, 0.5309734513274336, 1, 0, -0.008849557522123908]
                }],
                [{
                    cmd: "shader",
                    id: "blend",
                    data: [0, 0.7964601769911505, 0.7300884955752213, "texture0", "texture1"]
                }]
            ],
            [
                [{
                    cmd: "input",
                    id: "source0",
                    name: "rainbow tron",
                    enabled: !0
                }, {
                    id: "hueSaturation",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.9292035398230087, 0.7345132743362832]
                }, {
                    id: "denoise",
                    cmd: "shader",
                    enabled: !0,
                    data: [30]
                }, {
                    id: "zoomBlur",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.5, 0.5, 0.10619469026548672]
                }, {
                    id: "displacement",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.95, 0.0663716814159292, 0.17699115044247787, 1.4867256637168142, 0, -0.6106194690265487]
                }, {
                    id: "ink",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.2743362831858407]
                }],
                [{
                    cmd: "input",
                    id: "source0",
                    enabled: !0
                }, {
                    cmd: "shader",
                    id: "tron",
                    data: [2, 1, 1, 0.025, 5.640884955752212,
                        0, 0
                    ],
                    enabled: !0
                }, {
                    id: "colormap",
                    cmd: "shader",
                    enabled: !0,
                    data: [1, 11]
                }, {
                    id: "displacement",
                    cmd: "shader",
                    enabled: !0,
                    data: [1, 3, 1.1504424778761062, 1, 0, -0.026548672566371723]
                }],
                [{
                    cmd: "shader",
                    id: "blend",
                    data: [16, 0.7964601769911505, 0.7300884955752213, "texture0", "texture1"]
                }]
            ],
            [
                [{
                    cmd: "input",
                    id: "source0",
                    name: "rainbow tron",
                    enabled: !0
                }, {
                    id: "hueSaturation",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.9292035398230087, 0.7345132743362832]
                }, {
                    id: "denoise",
                    cmd: "shader",
                    enabled: !0,
                    data: [30]
                }, {
                    id: "zoomBlur",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.5, 0.5, 0.10619469026548672]
                }, {
                    id: "displacement",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.95, 0.0663716814159292, 0.17699115044247787, 1.4867256637168142, 0, -0.6106194690265487]
                }, {
                    id: "ink",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.2743362831858407]
                }],
                [{
                    cmd: "input",
                    id: "source0",
                    enabled: !0
                }, {
                    cmd: "shader",
                    id: "tron",
                    data: [2, 1, 1, 0.025, 5.640884955752212, 0, 0],
                    enabled: !0
                }, {
                    id: "colormap",
                    cmd: "shader",
                    enabled: !0,
                    data: [1, 19]
                }, {
                    id: "displacement",
                    cmd: "shader",
                    enabled: !0,
                    data: [1, 3, 1.1504424778761062, 1, 0, -0.026548672566371723]
                }],
                [{
                    cmd: "shader",
                    id: "blend",
                    data: [16, 0.7964601769911505, 0.7300884955752213, "texture0", "texture1"]
                }]
            ],
            [
                [{
                    cmd: "input",
                    id: "source0",
                    name: "rainbow tron",
                    enabled: !0
                }, {
                    id: "hueSaturation",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.9292035398230087, 0.7345132743362832]
                }, {
                    id: "denoise",
                    cmd: "shader",
                    enabled: !0,
                    data: [30]
                }, {
                    id: "zoomBlur",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.5, 0.5, 0.10619469026548672]
                }, {
                    id: "displacement",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.95, 0.0663716814159292, 0.17699115044247787, 1.4867256637168142, 0, -0.6106194690265487]
                }, {
                    id: "ink",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.2743362831858407]
                }],
                [{
                    cmd: "input",
                    id: "source0",
                    enabled: !0
                }, {
                    cmd: "shader",
                    id: "tron",
                    data: [2, 1, 1, 0.025, 5.640884955752212, 0, 0],
                    enabled: !0
                }, {
                    id: "colormap",
                    cmd: "shader",
                    enabled: !0,
                    data: [1, 3]
                }, {
                    id: "displacement",
                    cmd: "shader",
                    enabled: !0,
                    data: [1, 3, 1.1504424778761062, 1, 0, -0.026548672566371723]
                }],
                [{
                    cmd: "shader",
                    id: "blend",
                    data: [16, 0.7964601769911505, 0.7300884955752213, "texture0", "texture1"]
                }]
            ],
            [
                [{
                    cmd: "input",
                    id: "source0",
                    name: "rainbow tron",
                    enabled: !0
                }, {
                    id: "denoise",
                    cmd: "shader",
                    enabled: !0,
                    data: [30]
                }, {
                    id: "zoomBlur",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.5, 0.5, 0.0752212389380531]
                }, {
                    id: "colormap",
                    cmd: "shader",
                    enabled: !0,
                    data: [1, 7]
                }, {
                    id: "displacement",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.95, 0.0663716814159292, 0.17699115044247787, 1.4867256637168142, 0, -0.6106194690265487]
                }, {
                    id: "ink",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.2743362831858407]
                }],
                [{
                    cmd: "input",
                    id: "source0",
                    enabled: !0
                }, {
                    cmd: "shader",
                    id: "tron",
                    data: [1.920353982300885, 1, 1, 0.025, 5.640884955752212, 0, 0],
                    enabled: !0
                }, {
                    id: "colormap",
                    cmd: "shader",
                    enabled: !0,
                    data: [1, 19]
                }, {
                    id: "displacement",
                    cmd: "shader",
                    enabled: !0,
                    data: [1, 3, 1.1504424778761062, 1, 0, -0.026548672566371723]
                }],
                [{
                    cmd: "shader",
                    id: "blend",
                    data: [4, 0.7964601769911505, 0.7300884955752213, "texture0", "texture1"]
                }]
            ],
            [
                [{
                    cmd: "input",
                    id: "source0",
                    name: "rainbow tron",
                    enabled: !0
                }, {
                    id: "denoise",
                    cmd: "shader",
                    enabled: !0,
                    data: [30]
                }, {
                    id: "zoomBlur",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.5, 0.5, 0.0752212389380531]
                }, {
                    id: "colormap",
                    cmd: "shader",
                    enabled: !0,
                    data: [1, 7]
                }, {
                    id: "displacement",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.95, 0.0663716814159292, 0.17699115044247787, 1.4867256637168142, 0, -0.6106194690265487]
                }, {
                    id: "ink",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.2743362831858407]
                }],
                [{
                    cmd: "input",
                    id: "source0",
                    enabled: !0
                }, {
                    cmd: "shader",
                    id: "tron",
                    data: [1.920353982300885, 1, 2.752212389380531, 0.025, 5.640884955752212, 0, 0],
                    enabled: !0
                }, {
                    id: "ripple",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.84070796460177, 0.4424778761061947, 1, 0.5]
                }],
                [{
                    cmd: "shader",
                    id: "blend",
                    data: [4, 0.7566371681415929, 1, "texture0", "texture1"]
                }]
            ],
            [
                [{
                    cmd: "input",
                    id: "source0",
                    name: "rainbow tron",
                    enabled: !0
                }, {
                    id: "denoise",
                    cmd: "shader",
                    enabled: !0,
                    data: [30]
                }, {
                    id: "displacement",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.95, 0.0663716814159292, 0.17699115044247787, 1.4867256637168142, 0, -0.6106194690265487]
                }, {
                    id: "ink",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.2743362831858407]
                }],
                [{
                    cmd: "input",
                    id: "source0",
                    enabled: !0
                }, {
                    cmd: "shader",
                    id: "tron",
                    data: [1.920353982300885, 1, 2.752212389380531, 0.025, 5.640884955752212, 0, 0],
                    enabled: !0
                }, {
                    id: "ripple",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.84070796460177, 0.4424778761061947,
                        1, 0.5
                    ]
                }, {
                    id: "hueSaturation",
                    cmd: "shader",
                    enabled: !0,
                    data: [1, -0.12389380530973448]
                }],
                [{
                    cmd: "shader",
                    id: "blend",
                    data: [4, 0.7566371681415929, 1, "texture0", "texture1"]
                }]
            ],
            [
                [{
                    cmd: "input",
                    id: "source0",
                    name: "rainbow tron",
                    enabled: !0
                }, {
                    id: "denoise",
                    cmd: "shader",
                    enabled: !0,
                    data: [30]
                }, {
                    id: "displacement",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.95, 0.0663716814159292, 0.17699115044247787, 1.4867256637168142, 0, -0.6106194690265487]
                }],
                [{
                    cmd: "input",
                    id: "source0",
                    enabled: !0
                }, {
                    id: "ripple",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.84070796460177,
                        0.4424778761061947, 1, 0.5
                    ]
                }, {
                    id: "hueSaturation",
                    cmd: "shader",
                    enabled: !0,
                    data: [1, -0.12389380530973448]
                }, {
                    cmd: "shader",
                    id: "tron",
                    data: [1.3097345132743363, 1, 7.570796460176992, 0.025, 5.640884955752212, 0, 0],
                    enabled: !0
                }],
                [{
                    cmd: "shader",
                    id: "blend",
                    data: [4, 0.7566371681415929, 1, "texture0", "texture1"]
                }]
            ],
            [
                [{
                    cmd: "input",
                    id: "source0",
                    name: "rainbow tron",
                    enabled: !0
                }, {
                    id: "denoise",
                    cmd: "shader",
                    enabled: !0,
                    data: [30]
                }, {
                    id: "colormap",
                    cmd: "shader",
                    enabled: !0,
                    data: [1, 16]
                }, {
                    id: "displacement",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.95,
                        0.0663716814159292, 0.17699115044247787, 1.4867256637168142, 0, -0.6106194690265487
                    ]
                }],
                [{
                    cmd: "input",
                    id: "source0",
                    enabled: !0
                }, {
                    id: "ripple",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.84070796460177, 0.4424778761061947, 1, 0.5]
                }, {
                    id: "hueSaturation",
                    cmd: "shader",
                    enabled: !0,
                    data: [1, 0.008849557522123908]
                }, {
                    cmd: "shader",
                    id: "tron",
                    data: [1.3097345132743363, 1, 7.570796460176992, 0.025, 5.640884955752212, 0, 0],
                    enabled: !0
                }],
                [{
                    cmd: "shader",
                    id: "blend",
                    data: [4, 0.7566371681415929, 1, "texture0", "texture1"]
                }]
            ],
            [
                [{
                    cmd: "input",
                    id: "source0",
                    name: "rainbow tron",
                    enabled: !0
                }, {
                    id: "denoise",
                    cmd: "shader",
                    enabled: !0,
                    data: [30]
                }, {
                    id: "colormap",
                    cmd: "shader",
                    enabled: !0,
                    data: [1, 16]
                }, {
                    id: "displacement",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.95, 0.0663716814159292, 0.17699115044247787, 1.4867256637168142, 0, -0.6106194690265487]
                }, {
                    id: "unsharpMask",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.4424778761061947, 1.991150442477876]
                }],
                [{
                    cmd: "input",
                    id: "source0",
                    enabled: !0
                }, {
                    id: "ripple",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.84070796460177, 0.4424778761061947, 1, 0.5]
                }, {
                    id: "hueSaturation",
                    cmd: "shader",
                    enabled: !0,
                    data: [1, 0.008849557522123908]
                }, {
                    cmd: "shader",
                    id: "tron",
                    data: [1.3097345132743363, 1, 7.570796460176992, 0.025, 5.640884955752212, 0, 0],
                    enabled: !0
                }, {
                    id: "colormap",
                    cmd: "shader",
                    enabled: !0,
                    data: [1, 3]
                }],
                [{
                    cmd: "shader",
                    id: "blend",
                    data: [4, 0.7566371681415929, 1, "texture0", "texture1"]
                }]
            ],
            [
                [{
                    cmd: "input",
                    id: "source0",
                    name: "rainbow tron",
                    enabled: !0
                }, {
                    id: "denoise",
                    cmd: "shader",
                    enabled: !0,
                    data: [30]
                }, {
                    id: "colormap",
                    cmd: "shader",
                    enabled: !0,
                    data: [1, 18]
                }, {
                    id: "displacement",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.95, 0.0663716814159292, 0.17699115044247787, 1.4867256637168142, 0, -0.6106194690265487]
                }, {
                    id: "unsharpMask",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.4424778761061947, 1.991150442477876]
                }],
                [{
                    cmd: "input",
                    id: "source0",
                    enabled: !0
                }, {
                    id: "ripple",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.84070796460177, 0.4424778761061947, 1, 0.5]
                }, {
                    id: "hueSaturation",
                    cmd: "shader",
                    enabled: !0,
                    data: [1, 0.008849557522123908]
                }, {
                    cmd: "shader",
                    id: "tron",
                    data: [1.3097345132743363, 1, 7.570796460176992, 0.025, 5.640884955752212, 0, 0],
                    enabled: !0
                }, {
                    id: "colormap",
                    cmd: "shader",
                    enabled: !0,
                    data: [1, 3]
                }],
                [{
                    cmd: "shader",
                    id: "blend",
                    data: [16, 0.7566371681415929, 1, "texture0", "texture1"]
                }]
            ],
            [
                [{
                    cmd: "input",
                    id: "source0",
                    name: "rainbow tron",
                    enabled: !0
                }, {
                    id: "denoise",
                    cmd: "shader",
                    enabled: !0,
                    data: [30]
                }, {
                    id: "colormap",
                    cmd: "shader",
                    enabled: !0,
                    data: [1, 18]
                }, {
                    id: "displacement",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.9557522123893805, 0.03982300884955752, 0.2654867256637168, 1.4867256637168142, 0, -0.6106194690265487]
                }, {
                    id: "unsharpMask",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.4424778761061947, 1.991150442477876]
                }],
                [{
                    cmd: "input",
                    id: "source0",
                    enabled: !0
                }, {
                    id: "ripple",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.84070796460177, 0.4424778761061947, 1, 0.5]
                }, {
                    id: "hueSaturation",
                    cmd: "shader",
                    enabled: !0,
                    data: [1, 0.008849557522123908]
                }, {
                    cmd: "shader",
                    id: "tron",
                    data: [1.3097345132743363, 1, 7.570796460176992, 0.025, 5.640884955752212, 0, 0],
                    enabled: !0
                }, {
                    id: "colormap",
                    cmd: "shader",
                    enabled: !0,
                    data: [1, 3]
                }],
                [{
                    cmd: "shader",
                    id: "blend",
                    data: [16, 0.7787610619469026, 1, "texture0", "texture1"]
                }]
            ],
            [
                [{
                    cmd: "input",
                    id: "source0",
                    name: "rainbow tron",
                    enabled: !0
                }, {
                    id: "denoise",
                    cmd: "shader",
                    enabled: !0,
                    data: [30]
                }, {
                    id: "colormap",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.6194690265486725, 15]
                }, {
                    id: "displacement",
                    cmd: "shader",
                    enabled: !0,
                    data: [1.0353982300884956, 0.03982300884955752, 0.2654867256637168, 1.4867256637168142, 0, -0.6106194690265487]
                }, {
                    id: "unsharpMask",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.4424778761061947, 1.991150442477876]
                }],
                [{
                    cmd: "input",
                    id: "source0",
                    enabled: !0
                }, {
                    cmd: "shader",
                    id: "tron",
                    data: [1.3097345132743363, 1, 7.570796460176992, 0.025, 5.640884955752212, 0, 0],
                    enabled: !0
                }, {
                    id: "colormap",
                    cmd: "shader",
                    enabled: !0,
                    data: [1, 3]
                }],
                [{
                    cmd: "shader",
                    id: "blend",
                    data: [13, 0.7787610619469026, 1, "texture0", "texture1"]
                }]
            ],
            [
                [{
                    cmd: "input",
                    id: "source0",
                    name: "rainbow tron",
                    enabled: !0
                }, {
                    id: "colormap",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.6194690265486725, 10]
                }, {
                    id: "displacement",
                    cmd: "shader",
                    enabled: !0,
                    data: [1.0353982300884956, 0, 10.442477876106196, 1.4867256637168142, 0, -0.6106194690265487]
                }, {
                    id: "unsharpMask",
                    cmd: "shader",
                    enabled: !0,
                    data: [1.7699115044247788, 7.300884955752212]
                }],
                [{
                    cmd: "input",
                    id: "source0",
                    enabled: !0
                }, {
                    cmd: "shader",
                    id: "tron",
                    data: [0.6460176991150443, 1, 15.017699115044248, 0.0051991150442477875, 5.640884955752212, 0, 0],
                    enabled: !0
                }, {
                    id: "colormap",
                    cmd: "shader",
                    enabled: !0,
                    data: [1, 4]
                }],
                [{
                    cmd: "shader",
                    id: "blend",
                    data: [4, 0.7699115044247787, 1, "texture0", "texture1"]
                }]
            ],
            [
                [{
                    cmd: "input",
                    id: "source0",
                    name: "rainbow tron",
                    enabled: !0
                }, {
                    id: "colormap",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.6194690265486725, 10]
                }, {
                    id: "displacement",
                    cmd: "shader",
                    enabled: !0,
                    data: [1.0353982300884956, 0, 10.442477876106196, 1.4867256637168142,
                        0, -0.6106194690265487
                    ]
                }, {
                    id: "zoomBlur",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.16371681415929204, 0.19469026548672566, 0.048672566371681415]
                }, {
                    id: "unsharpMask",
                    cmd: "shader",
                    enabled: !0,
                    data: [1.7699115044247788, 7.300884955752212]
                }],
                [{
                    cmd: "input",
                    id: "source0",
                    enabled: !0
                }, {
                    cmd: "shader",
                    id: "tron",
                    data: [0.6460176991150443, 1, 15.017699115044248, 0.0051991150442477875, 5.640884955752212, 0, 0],
                    enabled: !0
                }, {
                    id: "colormap",
                    cmd: "shader",
                    enabled: !0,
                    data: [1, 4]
                }],
                [{
                    cmd: "shader",
                    id: "blend",
                    data: [4, 0.7699115044247787, 1, "texture0",
                        "texture1"
                    ]
                }]
            ],
            [
                [{
                    cmd: "input",
                    id: "source0",
                    name: "rainbow tron",
                    enabled: !0
                }, {
                    id: "colormap",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.7831858407079646, 9]
                }, {
                    id: "displacement",
                    cmd: "shader",
                    enabled: !0,
                    data: [1.0353982300884956, 0, 10.442477876106196, 1.4867256637168142, 0, -0.6106194690265487]
                }, {
                    id: "zoomBlur",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.5, 0.19469026548672566, 0.03982300884955752]
                }, {
                    id: "unsharpMask",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.9734513274336283, 9.15929203539823]
                }],
                [{
                    cmd: "input",
                    id: "source0",
                    enabled: !0
                }, {
                    cmd: "shader",
                    id: "tron",
                    data: [0.6460176991150443, 1, 15.017699115044248, 0.0051991150442477875, 5.640884955752212, 0, 0],
                    enabled: !0
                }, {
                    id: "colormap",
                    cmd: "shader",
                    enabled: !0,
                    data: [1, 4]
                }],
                [{
                    cmd: "shader",
                    id: "blend",
                    data: [2, 0.7699115044247787, 1, "texture0", "texture1"]
                }]
            ],
            [
                [{
                    cmd: "input",
                    id: "source0",
                    name: "rainbow tron",
                    enabled: !0
                }, {
                    id: "colormap",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.7831858407079646, 9]
                }, {
                    id: "displacement",
                    cmd: "shader",
                    enabled: !0,
                    data: [1.0353982300884956, 0, 10.442477876106196, 0.9424778761061947, 0, 0.053097345132743445]
                }, {
                    id: "zoomBlur",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.5, 0.27876106194690264, 0.004424778761061947]
                }, {
                    id: "unsharpMask",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.9734513274336283, 9.15929203539823]
                }],
                [{
                    cmd: "input",
                    id: "source0",
                    enabled: !0
                }, {
                    cmd: "shader",
                    id: "tron",
                    data: [0.6460176991150443, 1, 15.017699115044248, 0.02190265486725664, 5.640884955752212, 0, 0],
                    enabled: !0
                }, {
                    id: "colormap",
                    cmd: "shader",
                    enabled: !0,
                    data: [1, 4]
                }],
                [{
                    cmd: "shader",
                    id: "blend",
                    data: [2, 0.7699115044247787, 1, "texture0", "texture1"]
                }]
            ],
            [
                [{
                    cmd: "input",
                    id: "source0",
                    name: "rainbow tron",
                    enabled: !0
                }, {
                    id: "colormap",
                    cmd: "shader",
                    enabled: !0,
                    data: [1, 3]
                }, {
                    id: "displacement",
                    cmd: "shader",
                    enabled: !0,
                    data: [1.0353982300884956, 0, 10.442477876106196, 1.4867256637168142, 0, -0.6106194690265487]
                }],
                [{
                    cmd: "input",
                    id: "source0",
                    enabled: !0
                }, {
                    cmd: "shader",
                    id: "tron",
                    data: [0.12389380530973451, 0.45132743362831856, 15.017699115044248, 0.0051991150442477875, 5.640884955752212, 0, 0],
                    enabled: !0
                }, {
                    id: "colormap",
                    cmd: "shader",
                    enabled: !0,
                    data: [1, 4]
                }],
                [{
                    cmd: "shader",
                    id: "blend",
                    data: [2, 1, 1, "texture0",
                        "texture1"
                    ]
                }]
            ],
            [
                [{
                    cmd: "input",
                    id: "source0",
                    name: "rainbow tron",
                    enabled: !0
                }, {
                    id: "colormap",
                    cmd: "shader",
                    enabled: !0,
                    data: [1, 3]
                }, {
                    id: "displacement",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.7433628318584071, 0.10619469026548672, 0.8849557522123894, 1.8185840707964602, 0, -0.23893805309734517]
                }],
                [{
                    cmd: "input",
                    id: "source0",
                    enabled: !0
                }, {
                    cmd: "shader",
                    id: "tron",
                    data: [0.12389380530973451, 0.45132743362831856, 15.017699115044248, 0.0051991150442477875, 5.640884955752212, 0, 0],
                    enabled: !0
                }, {
                    id: "colormap",
                    cmd: "shader",
                    enabled: !0,
                    data: [1, 4]
                }],
                [{
                    cmd: "shader",
                    id: "blend",
                    data: [2, 1, 1, "texture0", "texture1"]
                }]
            ],
            [
                [{
                    cmd: "input",
                    id: "source0",
                    name: "rainbow tron",
                    enabled: !0
                }, {
                    id: "colormap",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.9292035398230089, 11]
                }, {
                    id: "displacement",
                    cmd: "shader",
                    enabled: !0,
                    data: [3, 3, 13.008849557522124, 3, 0, -0.22123893805309736]
                }],
                [{
                    cmd: "input",
                    id: "source0",
                    enabled: !0
                }, {
                    cmd: "shader",
                    id: "tron",
                    data: [0.11504424778761062, 0.336283185840708, 100, 0, 0, 0, 0],
                    enabled: !0
                }, {
                    id: "lumaKey",
                    cmd: "shader",
                    enabled: !0,
                    data: [0, 0.22566371681415928]
                }],
                [{
                    cmd: "shader",
                    id: "blend",
                    data: [2, 1, 1, "texture0", "texture1"]
                }]
            ],
            [
                [{
                    cmd: "input",
                    id: "source0",
                    name: "rainbow tron",
                    enabled: !0
                }, {
                    id: "colormap",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.5309734513274337, 6]
                }, {
                    id: "displacement",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.7433628318584071, 0.10619469026548672, 0.8849557522123894, 1.8185840707964602, 0, -0.23893805309734517]
                }],
                [{
                    cmd: "input",
                    id: "source0",
                    enabled: !0
                }, {
                    cmd: "shader",
                    id: "tron",
                    data: [0.12389380530973451, 0.45132743362831856, 15.017699115044248, 0.0051991150442477875, 5.640884955752212,
                        0, 0
                    ],
                    enabled: !0
                }, {
                    id: "colormap",
                    cmd: "shader",
                    enabled: !0,
                    data: [1, 4]
                }],
                [{
                    cmd: "shader",
                    id: "blend",
                    data: [0, 1, 0.9778761061946902, "texture0", "texture1"]
                }]
            ],
            [
                [{
                    cmd: "input",
                    id: "source0",
                    name: "rainbow tron",
                    enabled: !0
                }, {
                    id: "colormap",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.5309734513274337, 5]
                }, {
                    id: "displacement",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.7433628318584071, 0.10619469026548672, 0.8849557522123894, 1.8185840707964602, 0, -0.23893805309734517]
                }],
                [{
                    cmd: "input",
                    id: "source0",
                    enabled: !0
                }, {
                    cmd: "shader",
                    id: "tron",
                    data: [0.23893805309734514,
                        0.43565309734513274, 100, 0, 0, 0, 0
                    ],
                    enabled: !0
                }, {
                    id: "colormap",
                    cmd: "shader",
                    enabled: !0,
                    data: [1, 4]
                }],
                [{
                    cmd: "shader",
                    id: "blend",
                    data: [9, 1, 0.9778761061946902, "texture0", "texture1"]
                }]
            ],
            [
                [{
                    cmd: "input",
                    id: "source0",
                    name: "newsprint",
                    enabled: !0
                }, {
                    cmd: "shader",
                    id: "film",
                    enabled: !0,
                    data: [0.5, 0, 1, 5]
                }, {
                    cmd: "shader",
                    id: "dotScreen",
                    enabled: !0,
                    data: [0.19911504424778761, 0.21238938053097345, 4.36486766914688, 2.920353982300885]
                }, {
                    cmd: "shader",
                    id: "RGBShift",
                    enabled: !0,
                    data: [0.0010, 0.001327433628318584]
                }, {
                    cmd: "shader",
                    id: "oldFilm",
                    enabled: !0,
                    data: [0.672566371681416, 0.5176991150442478, 0.4424778761061947, 0.21238938053097345]
                }, {
                    cmd: "shader",
                    id: "vignette",
                    enabled: !0,
                    data: [0.6946902654867256, 0.7212389380530974]
                }, {
                    cmd: "shader",
                    id: "tiltShift",
                    enabled: !0,
                    data: [0.0010, 0.22566371681415928, 0.5796460176991151, 0.4557522123893805, 2.6548672566371683, 1063.0088495575221]
                }, {
                    cmd: "shader",
                    id: "sepia",
                    enabled: !0,
                    data: [1]
                }]
            ],
            [
                [{
                    cmd: "input",
                    id: "source0",
                    name: "newsprint"
                }, {
                    cmd: "shader",
                    id: "film",
                    enabled: !0,
                    data: [2.0132743362831858, 0.0010, 0.3185840707964602,
                        1309.3097345132744
                    ]
                }, {
                    cmd: "shader",
                    id: "dotScreen",
                    enabled: !0,
                    data: [0.5, 0.5, 0.0010, 5.20353982300885]
                }, {
                    cmd: "shader",
                    id: "RGBShift",
                    enabled: !0,
                    data: [2.1963346870229525, 0.003982300884955752]
                }, {
                    cmd: "shader",
                    id: "oldFilm",
                    enabled: !0,
                    data: [0.7, 0.3, 0.3, 0.3]
                }]
            ],
            [
                [{
                    cmd: "input",
                    id: "source0",
                    name: "old tv",
                    enabled: !0
                }, {
                    cmd: "shader",
                    id: "film",
                    enabled: !0,
                    data: [0.5, 0.06637168141592921, 0.6902654867256637, 1024]
                }, {
                    cmd: "shader",
                    id: "bulgePinch",
                    enabled: !0,
                    data: [0.5, 0.5, 0.8, 0.5663716814159292]
                }, {
                    cmd: "shader",
                    id: "oldFilm",
                    enabled: !0,
                    data: [0.7, 0, 0.3, 0.22123893805309736]
                }, {
                    cmd: "shader",
                    id: "vignette",
                    enabled: !0,
                    data: [1, 1]
                }]
            ],
            [
                [{
                    cmd: "input",
                    id: "source0",
                    name: "rainbow tron",
                    enabled: !0
                }, {
                    id: "colormap",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.9292035398230089, 11]
                }, {
                    id: "displacement",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.7433628318584071, 0.915929203539823, 0.7964601769911505, 1.470962389380531, 0, 0.5381637168141593]
                }],
                [{
                    cmd: "input",
                    id: "source0",
                    enabled: !0
                }, {
                    cmd: "shader",
                    id: "tron",
                    data: [0.09734513274336283, 0.39297566371681414, 100, 0, 0, 0, 0],
                    enabled: !0
                }, {
                    id: "colormap",
                    cmd: "shader",
                    enabled: !0,
                    data: [1, 18]
                }],
                [{
                    cmd: "shader",
                    id: "blend",
                    data: [14, 1, 1, "texture0", "texture1"]
                }]
            ],
            [
                [{
                    cmd: "input",
                    id: "source0",
                    name: "rainbow tron",
                    enabled: !0
                }, {
                    id: "colormap",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.9292035398230089, 11]
                }, {
                    id: "displacement",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.7433628318584071, 0.6238938053097345, 0.7964601769911505, 1.3805309734513274, 0, 0.7079646017699115]
                }],
                [{
                    cmd: "input",
                    id: "source0",
                    enabled: !0
                }, {
                    cmd: "shader",
                    id: "tron",
                    data: [0.09734513274336283, 0.39297566371681414,
                        100, 0, 0, 0, 0
                    ],
                    enabled: !0
                }, {
                    id: "colormap",
                    cmd: "shader",
                    enabled: !0,
                    data: [1, 18]
                }],
                [{
                    cmd: "shader",
                    id: "blend",
                    data: [2, 1, 1, "texture0", "texture1"]
                }]
            ],
            [
                [{
                    cmd: "input",
                    id: "source0",
                    name: "rainbow tron",
                    enabled: !0
                }, {
                    id: "colormap",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.9292035398230089, 10]
                }, {
                    id: "displacement",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.7433628318584071, 0, 0, 2.190265486725664, 0, -1]
                }],
                [{
                    cmd: "input",
                    id: "source0",
                    enabled: !0
                }, {
                    cmd: "shader",
                    id: "tron",
                    data: [0.008849557522123894, 0.39297566371681414, 100, 0, 0, 0, 0],
                    enabled: !0
                }, {
                    id: "colormap",
                    cmd: "shader",
                    enabled: !0,
                    data: [1, 4]
                }],
                [{
                    cmd: "shader",
                    id: "blend",
                    data: [18, 1, 1, "texture0", "texture1"]
                }]
            ],
            [
                [{
                    cmd: "input",
                    id: "source0",
                    name: "rainbow tron",
                    enabled: !0
                }, {
                    id: "denoise",
                    cmd: "shader",
                    enabled: !0,
                    data: [30]
                }, {
                    id: "colormap",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.9292035398230089, 10]
                }, {
                    id: "displacement",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.7433628318584071, 0, 0, 2.190265486725664, 0, -1]
                }],
                [{
                    cmd: "input",
                    id: "source0",
                    enabled: !0
                }, {
                    cmd: "shader",
                    id: "tron",
                    data: [0.008849557522123894, 0.39297566371681414,
                        100, 0, 0, 0, 0
                    ],
                    enabled: !0
                }, {
                    id: "colormap",
                    cmd: "shader",
                    enabled: !0,
                    data: [1, 4]
                }],
                [{
                    cmd: "shader",
                    id: "blend",
                    data: [18, 1, 1, "texture0", "texture1"]
                }]
            ],
            [
                [{
                    cmd: "input",
                    id: "source0",
                    name: "rainbow tron",
                    enabled: !0
                }, {
                    id: "denoise",
                    cmd: "shader",
                    enabled: !0,
                    data: [30]
                }, {
                    id: "colormap",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.41150442477876104, 6]
                }, {
                    id: "displacement",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.7433628318584071, 0, 0, 2.190265486725664, 0, -1]
                }],
                [{
                    cmd: "input",
                    id: "source0",
                    enabled: !0
                }, {
                    cmd: "shader",
                    id: "tron",
                    data: [0.008849557522123894,
                        0.39297566371681414, 100, 0, 0, 0, 0
                    ],
                    enabled: !0
                }, {
                    id: "colormap",
                    cmd: "shader",
                    enabled: !0,
                    data: [1, 4]
                }],
                [{
                    cmd: "shader",
                    id: "blend",
                    data: [18, 1, 1, "texture0", "texture1"]
                }]
            ],
            [
                [{
                    cmd: "input",
                    id: "source0",
                    name: "rainbow tron",
                    enabled: !0
                }, {
                    id: "denoise",
                    cmd: "shader",
                    enabled: !0,
                    data: [30]
                }, {
                    id: "colormap",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.41150442477876104, 6]
                }, {
                    id: "displacement",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.7433628318584071, 0.7433628318584071, 0.08849557522123894, 2.176991150442478, 0, 0.23008849557522115]
                }],
                [{
                    cmd: "input",
                    id: "source0",
                    enabled: !0
                }, {
                    cmd: "shader",
                    id: "tron",
                    data: [0.008849557522123894, 0.39297566371681414, 100, 0, 0, 0, 0],
                    enabled: !0
                }, {
                    id: "colormap",
                    cmd: "shader",
                    enabled: !0,
                    data: [1, 4]
                }],
                [{
                    cmd: "shader",
                    id: "blend",
                    data: [18, 1, 1, "texture0", "texture1"]
                }]
            ],
            [
                [{
                    cmd: "input",
                    id: "source0",
                    name: "rainbow tron",
                    enabled: !0
                }, {
                    id: "colormap",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.9292035398230089, 11]
                }, {
                    id: "displacement",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.7433628318584071, 0.915929203539823, 0.7964601769911505, 1.470962389380531, 0, 0.5381637168141593]
                }],
                [{
                    cmd: "input",
                    id: "source0",
                    enabled: !0
                }, {
                    cmd: "shader",
                    id: "tron",
                    data: [0.09734513274336283, 0.39297566371681414, 100, 0, 0, 0, 0],
                    enabled: !0
                }, {
                    id: "colormap",
                    cmd: "shader",
                    enabled: !0,
                    data: [1, 18]
                }, {
                    id: "lumaKey",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.1504424778761062, 0.23008849557522124]
                }],
                [{
                    cmd: "shader",
                    id: "blend",
                    data: [14, 1, 1, "texture0", "texture1"]
                }]
            ],
            [
                [{
                    cmd: "input",
                    id: "source0",
                    name: "rainbow tron",
                    enabled: !0
                }, {
                    id: "colormap",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.9380530973451328, 11]
                }, {
                    id: "displacement",
                    cmd: "shader",
                    enabled: !0,
                    data: [1.2610619469026547, 0.09292035398230089, 1.0619469026548671, 0, 0, 0.5381637168141593]
                }],
                [{
                    cmd: "input",
                    id: "source0",
                    enabled: !0
                }, {
                    cmd: "shader",
                    id: "tron",
                    data: [0, 0.41150442477876104, 19.836283185840706, 0, 0, 0, 0],
                    enabled: !0
                }, {
                    id: "colormap",
                    cmd: "shader",
                    enabled: !0,
                    data: [1, 18]
                }],
                [{
                    cmd: "shader",
                    id: "blend",
                    data: [14, 1, 1, "texture0", "texture1"]
                }]
            ],
            [
                [{
                    cmd: "input",
                    id: "source0",
                    name: "rainbow tron",
                    enabled: !0
                }, {
                    id: "denoise",
                    cmd: "shader",
                    enabled: !0,
                    data: [30]
                }, {
                    id: "colormap",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.41150442477876104,
                        6
                    ]
                }, {
                    id: "displacement",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.7433628318584071, 0, 20, 3, 0, 0.23008849557522115]
                }],
                [{
                    cmd: "input",
                    id: "source0",
                    enabled: !0
                }, {
                    cmd: "shader",
                    id: "tron",
                    data: [0.008849557522123894, 0.39297566371681414, 100, 0, 0, 0, 0],
                    enabled: !0
                }, {
                    id: "colormap",
                    cmd: "shader",
                    enabled: !0,
                    data: [1, 4]
                }],
                [{
                    cmd: "shader",
                    id: "blend",
                    data: [18, 1, 1, "texture0", "texture1"]
                }]
            ],
            [
                [{
                    cmd: "input",
                    id: "source0",
                    name: "rainbow tron",
                    enabled: !0
                }, {
                    id: "denoise",
                    cmd: "shader",
                    enabled: !0,
                    data: [30]
                }, {
                    id: "colormap",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.6415929203539823, 18]
                }, {
                    id: "displacement",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.7433628318584071, 0, 20, 3, 0, 0.23008849557522115]
                }],
                [{
                    cmd: "input",
                    id: "source0",
                    enabled: !0
                }, {
                    cmd: "shader",
                    id: "tron",
                    data: [0.008849557522123894, 0.39297566371681414, 100, 0, 0, 0, 0],
                    enabled: !0
                }, {
                    id: "colormap",
                    cmd: "shader",
                    enabled: !0,
                    data: [1, 4]
                }],
                [{
                    cmd: "shader",
                    id: "blend",
                    data: [0, 1, 1, "texture0", "texture1"]
                }, {
                    id: "edgeDetect",
                    cmd: "shader",
                    enabled: !0,
                    data: [-0.8761061946902657, 0.30973451327433627, 1]
                }]
            ],
            [
                [{
                    cmd: "input",
                    id: "source0",
                    name: "rainbow tron",
                    enabled: !0
                }, {
                    id: "oldFilm",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.7, 0.3, 0.3, 0.3]
                }, {
                    id: "denoise",
                    cmd: "shader",
                    enabled: !0,
                    data: [30]
                }, {
                    id: "colormap",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.41150442477876104, 6]
                }, {
                    id: "displacement",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.7433628318584071, 0, 20, 3, 0, 0.23008849557522115]
                }],
                [{
                    cmd: "input",
                    id: "source0",
                    enabled: !0
                }, {
                    cmd: "shader",
                    id: "tron",
                    data: [0.008849557522123894, 0.39297566371681414, 100, 0, 0, 0, 0],
                    enabled: !0
                }, {
                    id: "colormap",
                    cmd: "shader",
                    enabled: !0,
                    data: [1, 4]
                }],
                [{
                    cmd: "shader",
                    id: "blend",
                    data: [18, 1, 1, "texture0", "texture1"]
                }]
            ],
            [
                [{
                    cmd: "input",
                    id: "source0",
                    name: "rainbow tron",
                    enabled: !0
                }, {
                    id: "colormap",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.3407079646017699, 4]
                }, {
                    id: "displacement",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.7433628318584071, 0, 0.7964601769911505, 1.470962389380531, 0, 0.5381637168141593]
                }],
                [{
                    cmd: "input",
                    id: "source0",
                    enabled: !0
                }, {
                    cmd: "shader",
                    id: "tron",
                    data: [0.09734513274336283, 0.30973451327433627, 100, 0, 0, 0, 0],
                    enabled: !0
                }, {
                    id: "colormap",
                    cmd: "shader",
                    enabled: !0,
                    data: [1, 7]
                }],
                [{
                    cmd: "shader",
                    id: "blend",
                    data: [9, 1, 0.9778761061946902, "texture0", "texture1"]
                }]
            ],
            [
                [{
                    cmd: "input",
                    id: "source0",
                    name: "rainbow tron",
                    enabled: !0
                }, {
                    id: "colormap",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.3407079646017699, 4]
                }, {
                    id: "displacement",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.7433628318584071, 0.8495575221238938, 0.17699115044247787, 1.3805309734513274, 15, 0.6017699115044248]
                }],
                [{
                    cmd: "input",
                    id: "source0",
                    enabled: !0
                }, {
                    cmd: "shader",
                    id: "tron",
                    data: [0.09734513274336283, 0.30973451327433627, 100, 0, 0, 0, 0],
                    enabled: !0
                }, {
                    id: "colormap",
                    cmd: "shader",
                    enabled: !0,
                    data: [1, 7]
                }],
                [{
                    cmd: "shader",
                    id: "blend",
                    data: [9, 1, 0.9778761061946902, "texture0", "texture1"]
                }]
            ],
            [
                [{
                    cmd: "input",
                    id: "source0",
                    name: "rainbow tron",
                    enabled: !0
                }, {
                    id: "colormap",
                    cmd: "shader",
                    enabled: !0,
                    data: [1, 4]
                }, {
                    id: "displacement",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.7699115044247788, 0.8495575221238938, 0.17699115044247787, 1.3805309734513274, 15, 0.6017699115044248]
                }],
                [{
                    cmd: "input",
                    id: "source0",
                    enabled: !0
                }, {
                    cmd: "shader",
                    id: "tron",
                    data: [0.09734513274336283, 0.30973451327433627, 100, 0, 0, 0, 0],
                    enabled: !0
                }, {
                    id: "colormap",
                    cmd: "shader",
                    enabled: !0,
                    data: [1, 12]
                }],
                [{
                    cmd: "shader",
                    id: "blend",
                    data: [9, 1, 0.9778761061946902, "texture0", "texture1"]
                }]
            ],
            [
                [{
                    cmd: "input",
                    id: "source0",
                    name: "rainbow tron",
                    enabled: !0
                }, {
                    id: "colormap",
                    cmd: "shader",
                    enabled: !0,
                    data: [1, 4]
                }, {
                    id: "displacement",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.7699115044247788, 0.8495575221238938, 0.17699115044247787, 1.3805309734513274, 15, 0.6017699115044248]
                }],
                [{
                    cmd: "input",
                    id: "source0",
                    enabled: !0
                }, {
                    cmd: "shader",
                    id: "tron",
                    data: [0.09734513274336283, 0.30973451327433627, 100, 0, 0, 0, 0],
                    enabled: !0
                }, {
                    id: "colormap",
                    cmd: "shader",
                    enabled: !0,
                    data: [1, 8]
                }],
                [{
                    cmd: "shader",
                    id: "blend",
                    data: [9, 1, 0.9778761061946902, "texture0", "texture1"]
                }]
            ],
            [
                [{
                    cmd: "input",
                    id: "source0",
                    name: "rainbow tron",
                    enabled: !0
                }, {
                    id: "denoise",
                    cmd: "shader",
                    enabled: !0,
                    data: [30]
                }, {
                    id: "colormap",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.41150442477876104, 6]
                }, {
                    id: "displacement",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.7433628318584071, 0, 20, 3, 0, 0.23008849557522115]
                }],
                [{
                    cmd: "input",
                    id: "source0",
                    enabled: !0
                }, {
                    cmd: "shader",
                    id: "tron",
                    data: [0.008849557522123894,
                        0.39297566371681414, 100, 0, 0, 0, 0
                    ],
                    enabled: !0
                }, {
                    id: "colormap",
                    cmd: "shader",
                    enabled: !0,
                    data: [1, 4]
                }],
                [{
                    cmd: "shader",
                    id: "blend",
                    data: [18, 1, 1, "texture0", "texture1"]
                }, {
                    id: "brightnessContrast",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.06194690265486735, 0.18584070796460184]
                }, {
                    id: "sepia",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.4026548672566372]
                }]
            ],
            [
                [{
                    cmd: "input",
                    id: "source0",
                    name: "rainbow tron",
                    enabled: !0
                }, {
                    id: "denoise",
                    cmd: "shader",
                    enabled: !0,
                    data: [30]
                }, {
                    id: "colormap",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.6415929203539823, 18]
                }, {
                    id: "displacement",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.7433628318584071, 0.10619469026548672, 0, 2.495575221238938, 0, 0.6283185840707965]
                }],
                [{
                    cmd: "input",
                    id: "source0",
                    enabled: !0
                }, {
                    cmd: "shader",
                    id: "tron",
                    data: [0.008849557522123894, 0.39297566371681414, 100, 0, 0, 0, 0],
                    enabled: !0
                }, {
                    id: "colormap",
                    cmd: "shader",
                    enabled: !0,
                    data: [1, 4]
                }],
                [{
                    cmd: "shader",
                    id: "blend",
                    data: [0, 1, 1, "texture0", "texture1"]
                }]
            ],
            [
                [{
                    cmd: "input",
                    id: "source0",
                    name: "green displace",
                    enabled: !0
                }, {
                    cmd: "shader",
                    id: "colormap",
                    enabled: !0,
                    data: [1, 11]
                }, {
                    cmd: "shader",
                    id: "vignette",
                    enabled: !0,
                    data: [0.6415929203539823, 1]
                }, {
                    cmd: "shader",
                    id: "triangleBlur",
                    enabled: !0,
                    data: [7.743362831858407]
                }, {
                    cmd: "shader",
                    id: "hueSaturation",
                    enabled: !0,
                    data: [-0.47787610619469023, 0.4070796460176991]
                }, {
                    cmd: "shader",
                    id: "displacement",
                    enabled: !0,
                    data: [0.9424778761061947, 0.0663716814159292, 0.08849557522123894, 0.6504424778761062]
                }, {
                    cmd: "shader",
                    id: "edgeDetect",
                    enabled: !0,
                    data: [-2.601769911504425, 0.048672566371681415, 1]
                }]
            ],
            [
                [{
                    cmd: "input",
                    id: "source0",
                    name: "pink"
                }, {
                    cmd: "shader",
                    id: "edgeDetect",
                    data: [-3,
                        0.05752212389380531, 1
                    ],
                    enabled: !0
                }, {
                    cmd: "shader",
                    id: "colormap",
                    data: [1, 10],
                    enabled: !0
                }, {
                    cmd: "shader",
                    id: "hueSaturation",
                    enabled: !0,
                    data: [-0.16814159292035402, 0.34513274336283195]
                }, {
                    cmd: "shader",
                    id: "brightnessContrast",
                    enabled: !0,
                    data: [0.0010, 0.004424778761061954]
                }, {
                    cmd: "shader",
                    id: "lumaKey",
                    enabled: !0,
                    data: [0.0010, 0.9336283185840708]
                }]
            ],
            [
                [{
                    cmd: "input",
                    id: "source0",
                    name: "blue"
                }, {
                    cmd: "shader",
                    id: "edgeDetect",
                    data: [-3, 0.09734513274336283, 1],
                    enabled: !0
                }, {
                    cmd: "shader",
                    id: "colormap",
                    data: [1, 10],
                    enabled: !0
                }, {
                    cmd: "shader",
                    id: "hueSaturation",
                    enabled: !0,
                    data: [-0.5486725663716814, 0.5929203539823009]
                }]
            ],
            [
                [{
                    cmd: "input",
                    id: "source0",
                    name: "Rainbow room"
                }, {
                    cmd: "shader",
                    id: "edgeDetect",
                    data: [3, 0.07079646017699115, 1],
                    enabled: !0
                }, {
                    cmd: "shader",
                    id: "colormap",
                    data: [1, 19],
                    enabled: !0
                }, {
                    cmd: "shader",
                    id: "invert",
                    enabled: !0,
                    data: [30]
                }, {
                    cmd: "shader",
                    id: "hueSaturation",
                    enabled: !0,
                    data: [0.3982300884955752, 0.2920353982300885]
                }]
            ],
            [
                [{
                    cmd: "input",
                    id: "source0",
                    name: "crisp",
                    enabled: !0
                }, {
                    id: "unsharpMask",
                    cmd: "shader",
                    enabled: !0,
                    data: [3.274336283185841, 4.0265486725663715]
                }, {
                    id: "denoise",
                    cmd: "shader",
                    enabled: !0,
                    data: [20]
                }, {
                    cmd: "shader",
                    id: "edgeDetect",
                    enabled: !0,
                    data: [0.18584070796460228, 0.26548672566371684, 1]
                }]
            ],
            [
                [{
                    cmd: "input",
                    id: "source0",
                    name: "sepia glow sketch"
                }, {
                    cmd: "shader",
                    id: "edgeDetect",
                    enabled: !0,
                    data: [0.5, 1, 0]
                }, {
                    cmd: "shader",
                    id: "oldFilm",
                    enabled: !0,
                    data: [0.6238938053097345, 0.0010, 0.6548672566371682, 0.0010]
                }, {
                    cmd: "shader",
                    id: "vignette",
                    enabled: !0,
                    data: [1, 1]
                }, {
                    cmd: "shader",
                    id: "brightnessContrast",
                    enabled: !0,
                    data: [0.2566371681415929,
                        0.5
                    ]
                }]
            ],
            [
                [{
                    cmd: "input",
                    id: "source0",
                    name: "bronze hatch"
                }, {
                    cmd: "shader",
                    id: "film",
                    enabled: !0,
                    data: [10, 0.0010, 0.6106194690265486, 5]
                }, {
                    cmd: "shader",
                    id: "edgeDetect",
                    enabled: !0,
                    data: [0.8495575221238938, 1, 0.1592920353982301]
                }, {
                    cmd: "shader",
                    id: "vignette",
                    enabled: !0,
                    data: [0.7433628318584071, 0.9557522123893806]
                }, {
                    cmd: "shader",
                    id: "brightnessContrast",
                    enabled: !0,
                    data: [0.12831858407079644, 0.5]
                }, {
                    cmd: "shader",
                    id: "colorMatrixOld",
                    enabled: !0,
                    data: [121.06194690265488]
                }]
            ],
            [
                [{
                    cmd: "input",
                    id: "source0",
                    name: "dark glow",
                    enabled: !0
                }, {
                    id: "denoise",
                    cmd: "shader",
                    enabled: !0,
                    data: [30]
                }, {
                    cmd: "shader",
                    id: "tron",
                    data: [0.31858407079646023, 0.32, 56.19469026548672, 0, 0, 0, 0],
                    enabled: !0
                }]
            ],
            [
                [{
                    cmd: "input",
                    id: "source0",
                    name: "tron kaleidoscope",
                    enabled: !0
                }, {
                    id: "denoise",
                    cmd: "shader",
                    enabled: !0,
                    data: [30]
                }, {
                    cmd: "shader",
                    id: "tron",
                    data: [0.25663716814159293, 0.28761061946902655, 84.66814159292035, 0, 0, 11.283185840707963, 0],
                    enabled: !0
                }],
                [{
                    cmd: "input",
                    id: "source0",
                    enabled: !0
                }, {
                    cmd: "shader",
                    id: "swirl",
                    enabled: !0,
                    data: [0, 0.5, 335.4424778761062,
                        1
                    ]
                }, {
                    cmd: "shader",
                    id: "tron",
                    data: [0.35, 0, 42, 0, 3, 10, 2],
                    enabled: !0
                }, {
                    cmd: "shader",
                    id: "kaleidoscope",
                    enabled: !0,
                    data: [1.55, 5]
                }, {
                    cmd: "shader",
                    id: "vignette",
                    enabled: !0,
                    data: [1, 0.5]
                }],
                [{
                    cmd: "shader",
                    id: "blend",
                    data: ["ADD", 1, 1, "texture0", "texture1"]
                }]
            ],
            [
                [{
                    cmd: "input",
                    id: "source0",
                    name: "rainbow tron",
                    enabled: !0
                }, {
                    id: "colormap",
                    cmd: "shader",
                    enabled: !0,
                    data: [1, 18]
                }, {
                    id: "displacement",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.7433628318584071, 0.915929203539823, 0.7964601769911505, 0, 17, 0.32743362831858414]
                }],
                [{
                    cmd: "input",
                    id: "source0",
                    enabled: !0
                }, {
                    cmd: "shader",
                    id: "tron",
                    data: [0.336283185840708, 0.32, 100, 0, 0, 0, 0],
                    enabled: !0
                }],
                [{
                    cmd: "shader",
                    id: "blend",
                    data: [14, 1, 1, "texture0", "texture1"]
                }]
            ],
            [
                [{
                    cmd: "input",
                    id: "source0",
                    name: "light glow",
                    enabled: !0
                }, {
                    id: "denoise",
                    cmd: "shader",
                    enabled: !0,
                    data: [30]
                }, {
                    cmd: "shader",
                    id: "edgeDetect",
                    data: [0.7, 1, 1],
                    enabled: !0
                }],
                [{
                    cmd: "input",
                    id: "source0",
                    enabled: !0
                }, {
                    cmd: "shader",
                    id: "tron",
                    data: [0.4, 0.32, 24, 0, 0, 0, 0],
                    enabled: !0
                }],
                [{
                    cmd: "shader",
                    id: "blend",
                    data: ["ADD", 1, 1, "texture0", "texture1"]
                }]
            ],
            [
                [{
                    cmd: "input",
                    id: "source0",
                    name: "wood",
                    enabled: !0
                }, {
                    cmd: "shader",
                    id: "edgeDetect",
                    data: [-2.2566371681415927, 0.12389380530973451, 1],
                    enabled: !0
                }, {
                    id: "invert",
                    cmd: "shader",
                    enabled: !0,
                    data: []
                }, {
                    id: "displacement",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.9424778761061947, 0.1327433628318584, 0, 0.9690265486725664, 41, 0.1327433628318584]
                }, {
                    id: "colormap",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.8805309734513275, 3]
                }],
                [{
                    cmd: "input",
                    id: "source0",
                    enabled: !0
                }, {
                    cmd: "shader",
                    id: "tron",
                    data: [0.5929203539823009, 0.5486725663716814, 22.90265486725664,
                        0, 0, 0, 0
                    ],
                    enabled: !0
                }, {
                    id: "oldFilm",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.7, 0, 0, 0.3]
                }],
                [{
                    cmd: "shader",
                    id: "blend",
                    data: [13, 1, 1, "texture0", "texture1"]
                }]
            ],
            [
                [{
                    cmd: "input",
                    id: "source0",
                    name: "cracks",
                    enabled: !0
                }, {
                    id: "colormap",
                    cmd: "shader",
                    enabled: !0,
                    data: [1, 10]
                }, {
                    cmd: "shader",
                    id: "edgeDetect",
                    data: [0.7, 1, 1],
                    enabled: !0
                }, {
                    id: "displacement",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.9955752212389382, 0, 0, 1.0221238938053097, 50, -0.8053097345132744]
                }],
                [{
                    cmd: "input",
                    id: "source0",
                    enabled: !0
                }, {
                    id: "denoise",
                    cmd: "shader",
                    enabled: !0,
                    data: [30]
                }, {
                    cmd: "shader",
                    id: "tron",
                    data: [0.168141592920354, 0.5309734513274337, 100, 0, 0, 0, 0],
                    enabled: !0
                }, {
                    id: "oldFilm",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.7, 0.1, 0.3, 0.3]
                }],
                [{
                    cmd: "shader",
                    id: "blend",
                    data: [11, 1, 1, "texture0", "texture1"]
                }]
            ],
            [
                [{
                    cmd: "input",
                    id: "source0",
                    name: "high contrast",
                    enabled: !0
                }, {
                    id: "colormap",
                    cmd: "shader",
                    enabled: !0,
                    data: [1, 1]
                }, {
                    id: "lensBlur",
                    cmd: "shader",
                    enabled: !0,
                    data: [7.079646017699115, 0.75, 0]
                }, {
                    cmd: "shader",
                    id: "edgeDetect",
                    data: [-0.5575221238938051, 1, 1],
                    enabled: !0
                }],
                [{
                    cmd: "input",
                    id: "source0",
                    enabled: !0
                }, {
                    id: "denoise",
                    cmd: "shader",
                    enabled: !0,
                    data: [30]
                }, {
                    cmd: "shader",
                    id: "tron",
                    data: [0.1238938053097347, 0.8805309734513275, 100, 0, 0, 0, 0],
                    enabled: !0
                }, {
                    id: "oldFilm",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.7, 0.1, 0.3, 0.3]
                }],
                [{
                    cmd: "shader",
                    id: "blend",
                    data: [11, 1, 1, "texture0", "texture1"]
                }]
            ],
            [
                [{
                    cmd: "input",
                    id: "source0",
                    name: "green canvas",
                    enabled: !0
                }, {
                    id: "colormap",
                    cmd: "shader",
                    enabled: !0,
                    data: [1, 9]
                }, {
                    id: "lensBlur",
                    cmd: "shader",
                    enabled: !0,
                    data: [29.646017699115045, 0.75, 0]
                }, {
                    cmd: "shader",
                    id: "edgeDetect",
                    data: [-0.5575221238938051, 1, 1],
                    enabled: !0
                }, {
                    id: "displacement",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.9955752212389382, 0, 0, 1.7256637168141593, 28, -0.11504424778761058]
                }],
                [{
                    cmd: "input",
                    id: "source0",
                    enabled: !0
                }, {
                    id: "denoise",
                    cmd: "shader",
                    enabled: !0,
                    data: [30]
                }, {
                    cmd: "shader",
                    id: "tron",
                    data: [0.13274336283185842, 0.8805309734513275, 100, 0, 0, 0, 0],
                    enabled: !0
                }, {
                    id: "oldFilm",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.7, 0.1, 0.3, 0.3]
                }],
                [{
                    cmd: "shader",
                    id: "blend",
                    data: [11, 1, 1, "texture0", "texture1"]
                }]
            ],
            [
                [{
                    cmd: "input",
                    id: "source0",
                    name: "coffee stains",
                    enabled: !0
                }, {
                    id: "colormap",
                    cmd: "shader",
                    enabled: !0,
                    data: [1, 14]
                }, {
                    id: "lensBlur",
                    cmd: "shader",
                    enabled: !0,
                    data: [29.646017699115045, 0.75, 0]
                }, {
                    cmd: "shader",
                    id: "edgeDetect",
                    data: [-0.5575221238938051, 1, 1],
                    enabled: !0
                }, {
                    id: "displacement",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.9955752212389382, 1.247787610619469, 10.353982300884956, 0.7831858407079646, 22, 0.1504424778761062]
                }],
                [{
                    cmd: "input",
                    id: "source0",
                    enabled: !0
                }, {
                    id: "denoise",
                    cmd: "shader",
                    enabled: !0,
                    data: [30]
                }, {
                    cmd: "shader",
                    id: "tron",
                    data: [0.13274336283185842, 0.8805309734513275,
                        100, 0, 0, 0, 0
                    ],
                    enabled: !0
                }, {
                    id: "oldFilm",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.7, 0.1, 0.3, 0.3]
                }],
                [{
                    cmd: "shader",
                    id: "blend",
                    data: [11, 1, 1, "texture0", "texture1"]
                }]
            ],
            [
                [{
                    cmd: "input",
                    id: "source0",
                    name: "sunrise",
                    enabled: !0
                }, {
                    id: "colormap",
                    cmd: "shader",
                    enabled: !0,
                    data: [1, 15]
                }, {
                    cmd: "shader",
                    id: "edgeDetect",
                    data: [0.7, 1, 1],
                    enabled: !0
                }, {
                    id: "displacement",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.9955752212389382, 0.15486725663716813, 0, 2.349557522123894, 29, 0.10619469026548667]
                }],
                [{
                    cmd: "input",
                    id: "source0",
                    enabled: !0
                }, {
                    id: "denoise",
                    cmd: "shader",
                    enabled: !0,
                    data: [30]
                }, {
                    cmd: "shader",
                    id: "tron",
                    data: [0.11504424778761062, 0.4823008849557522, 100, 0, 0, 0, 3.451327433628318],
                    enabled: !0
                }, {
                    id: "oldFilm",
                    cmd: "shader",
                    enabled: !0,
                    data: [0.7, 0.1, 0.3, 0.3]
                }],
                [{
                    cmd: "shader",
                    id: "blend",
                    data: [11, 1, 1, "texture0", "texture1"]
                }]
            ],
            [
                [{
                    cmd: "input",
                    id: "source0",
                    name: "orange radiant"
                }, {
                    cmd: "shader",
                    id: "edgeDetect",
                    enabled: !0,
                    data: [0.7699115044247787, 1, 1]
                }, {
                    cmd: "shader",
                    id: "oldFilm",
                    enabled: !0,
                    data: [0.6327433628318584, 0.0010, 0.4, 0.0010]
                }, {
                    cmd: "shader",
                    id: "brightnessContrast",
                    enabled: !0,
                    data: [-0.37168141592920356, 0.23451327433628322]
                }, {
                    cmd: "shader",
                    id: "colorMatrixOld",
                    enabled: !0,
                    data: [264.42477876106193]
                }, {
                    cmd: "shader",
                    id: "hueSaturation",
                    enabled: !0,
                    data: [0.5044247787610618, 0.7699115044247788]
                }]
            ],
            [
                [{
                    cmd: "input",
                    id: "source0",
                    name: "blue radiant"
                }, {
                    cmd: "shader",
                    id: "film",
                    enabled: !0,
                    data: [6.3008849557522115, 0.0010, 0.0010, 1693.4557522123894]
                }, {
                    cmd: "shader",
                    id: "edgeDetect",
                    enabled: !0,
                    data: [0.8849557522123894, 1, 1]
                }, {
                    cmd: "shader",
                    id: "brightnessContrast",
                    enabled: !0,
                    data: [-0.37168141592920356,
                        0.23451327433628322
                    ]
                }, {
                    cmd: "shader",
                    id: "colorMatrixOld",
                    enabled: !0,
                    data: [265]
                }, {
                    cmd: "shader",
                    id: "denoise",
                    enabled: !0,
                    data: [30]
                }, {
                    cmd: "shader",
                    id: "hueSaturation",
                    enabled: !0,
                    data: [0.49557522123893816, 0.7699115044247788]
                }]
            ],
            [
                [{
                    cmd: "input",
                    id: "source0",
                    name: "burn radiant"
                }, {
                    cmd: "shader",
                    id: "film",
                    enabled: !1,
                    data: [6.3008849557522115, 0.0010, 0.0010, 1693.4557522123894]
                }, {
                    cmd: "shader",
                    id: "edgeDetect",
                    enabled: !0,
                    data: [0.672566371681416, 1, 1]
                }, {
                    cmd: "shader",
                    id: "oldFilm",
                    enabled: !0,
                    data: [1, 0.0010, 0.28761061946902655,
                        0.0010
                    ]
                }, {
                    cmd: "shader",
                    id: "hueSaturation",
                    enabled: !0,
                    data: [-0.20353982300884954, 0.8230088495575221]
                }]
            ],
            [
                [{
                    cmd: "input",
                    id: "source0",
                    name: "burn fire",
                    enabled: !0
                }, {
                    id: "denoise",
                    cmd: "shader",
                    enabled: !0,
                    data: [30]
                }, {
                    cmd: "shader",
                    id: "film",
                    enabled: !0,
                    data: [6.3008849557522115, 0, 0.5221238938053098, 1943]
                }, {
                    cmd: "shader",
                    id: "edgeDetect",
                    enabled: !0,
                    data: [0.672566371681416, 1, 0.3]
                }, {
                    cmd: "shader",
                    id: "oldFilm",
                    enabled: !0,
                    data: [1, 0.0010, 0.28761061946902655, 0.0010]
                }, {
                    cmd: "shader",
                    id: "hueSaturation",
                    enabled: !0,
                    data: [-0.20353982300884954,
                        0.8230088495575221
                    ]
                }]
            ],
            [
                [{
                    cmd: "input",
                    id: "source0",
                    name: "kiwi",
                    enabled: !0
                }, {
                    id: "denoise",
                    cmd: "shader",
                    enabled: !0,
                    data: [30]
                }, {
                    cmd: "shader",
                    id: "film",
                    enabled: !0,
                    data: [10, 0.0010, 0.6106194690265486, 5]
                }, {
                    cmd: "shader",
                    id: "edgeDetect",
                    enabled: !0,
                    data: [0.7699115044247788, 0.40707964601769914, 1]
                }, {
                    cmd: "shader",
                    id: "vignette",
                    enabled: !0,
                    data: [0.9513274336283186, 1]
                }, {
                    cmd: "shader",
                    id: "brightnessContrast",
                    enabled: !0,
                    data: [0.19469026548672574, 0.584070796460177]
                }, {
                    cmd: "shader",
                    id: "colorMatrixOld",
                    enabled: !0,
                    data: [149.73451327433628]
                }]
            ],
            [
                [{
                    cmd: "input",
                    id: "source0",
                    name: "yellow monster",
                    enabled: !0
                }, {
                    id: "denoise",
                    cmd: "shader",
                    enabled: !0,
                    data: [30]
                }, {
                    cmd: "shader",
                    id: "edgeDetect",
                    data: [0.6902654867256635, 0.5486725663716814, 1],
                    enabled: !0
                }, {
                    cmd: "shader",
                    id: "colormap",
                    data: [0.8716814159292036, 13],
                    enabled: !0
                }, {
                    cmd: "shader",
                    id: "hueSaturation",
                    enabled: !0,
                    data: [-0.4601769911504425, 0.8407079646017699]
                }]
            ],
            [
                [{
                    cmd: "input",
                    id: "source0",
                    name: "oompa loompa"
                }, {
                    cmd: "shader",
                    id: "edgeDetect",
                    data: [-3, 0.03982300884955752, 0.8938053097345132],
                    enabled: !0
                }, {
                    cmd: "shader",
                    id: "colormap",
                    data: [1, 0],
                    enabled: !0
                }, {
                    cmd: "shader",
                    id: "hueSaturation",
                    enabled: !0,
                    data: [-0.5663716814159292, 0.5929203539823009]
                }]
            ],
            [
                [{
                    cmd: "input",
                    id: "source0",
                    name: "green displace"
                }, {
                    cmd: "shader",
                    id: "colormap",
                    enabled: !0,
                    data: [1, 11]
                }, {
                    cmd: "shader",
                    id: "vignette",
                    enabled: !0,
                    data: [0.6415929203539823, 1]
                }, {
                    cmd: "shader",
                    id: "triangleBlur",
                    enabled: !0,
                    data: [6.6371681415929205]
                }, {
                    cmd: "shader",
                    id: "hueSaturation",
                    enabled: !0,
                    data: [-0.47787610619469023, 0.4070796460176991]
                }, {
                    cmd: "shader",
                    id: "displacement",
                    enabled: !0,
                    data: [0.5973451327433629, 1, 16, 1]
                }, {
                    cmd: "shader",
                    id: "edgeDetect",
                    enabled: !0,
                    data: [-3, 0.030973451327433628, 1]
                }]
            ],
            [
                [{
                    cmd: "input",
                    id: "source0",
                    name: "turquoise displace"
                }, {
                    cmd: "shader",
                    id: "brightnessContrast",
                    enabled: !0,
                    data: [-0.026548672566371667, 0.10619469026548678]
                }, {
                    cmd: "shader",
                    id: "colormap",
                    enabled: !0,
                    data: [0.9424778761061947, 11]
                }, {
                    cmd: "shader",
                    id: "vignette",
                    enabled: !0,
                    data: [0.6415929203539823, 1]
                }, {
                    cmd: "shader",
                    id: "triangleBlur",
                    enabled: !0,
                    data: [6.6371681415929205]
                }, {
                    cmd: "shader",
                    id: "displacement",
                    enabled: !0,
                    data: [0.6858407079646017, 0.4646017699115045, 1.3274336283185841, 1.0176991150442478]
                }, {
                    cmd: "shader",
                    id: "edgeDetect",
                    enabled: !0,
                    data: [-3, 0.05752212389380531, 1]
                }]
            ],
            [
                [{
                    cmd: "input",
                    id: "source0",
                    name: "natural displace",
                    enabled: !0
                }, {
                    cmd: "shader",
                    id: "brightnessContrast",
                    enabled: !0,
                    data: [0.23008849557522115, 0.3097345132743363]
                }, {
                    cmd: "shader",
                    id: "colormap",
                    enabled: !0,
                    data: [0.5707964601769911, 1]
                }, {
                    cmd: "shader",
                    id: "displacement",
                    enabled: !0,
                    data: [0.9734513274336283, 0.2654867256637168, 0.2654867256637168,
                        0, 0, 0.017699115044247815
                    ]
                }]
            ],
            [
                [{
                    cmd: "input",
                    id: "source0",
                    name: "natural displace"
                }, {
                    cmd: "shader",
                    id: "brightnessContrast",
                    enabled: !0,
                    data: [0.2743362831858407, 0.5]
                }, {
                    cmd: "shader",
                    id: "colormap",
                    enabled: !0,
                    data: [0.5707964601769911, 8]
                }, {
                    cmd: "shader",
                    id: "vignette",
                    enabled: !0,
                    data: [0.6415929203539823, 1]
                }, {
                    cmd: "shader",
                    id: "triangleBlur",
                    enabled: !0,
                    data: [6.6371681415929205]
                }, {
                    cmd: "shader",
                    id: "displacement",
                    enabled: !0,
                    data: [0.9734513274336283, 0.17699115044247787, 0.1327433628318584, 0.6637168141592921]
                }, {
                    cmd: "shader",
                    id: "edgeDetect",
                    enabled: !0,
                    data: [-3, 0.030973451327433628, 1]
                }]
            ],
            [
                [{
                    cmd: "input",
                    id: "source0",
                    name: "white displace"
                }, {
                    cmd: "shader",
                    id: "colormap",
                    enabled: !0,
                    data: [0.8849557522123894, 6]
                }, {
                    cmd: "shader",
                    id: "displacement",
                    enabled: !0,
                    data: [0.30973451327433627, 1.836283185840708, 0.01, 2.433628318584071]
                }, {
                    cmd: "shader",
                    id: "edgeDetect",
                    enabled: !0,
                    data: [-1.7256637168141593, 0.04424778761061947, 1]
                }, {
                    cmd: "shader",
                    id: "invert",
                    enabled: !0,
                    data: []
                }, {
                    cmd: "shader",
                    id: "hueSaturation",
                    enabled: !0,
                    data: [0.7345132743362832, 0.2743362831858407]
                }]
            ],
            [
                [{
                    cmd: "input",
                    id: "source0",
                    name: "blue displace"
                }, {
                    cmd: "shader",
                    id: "colormap",
                    enabled: !0,
                    data: [1, 18]
                }, {
                    cmd: "shader",
                    id: "triangleBlur",
                    enabled: !0,
                    data: [0.0010]
                }, {
                    cmd: "shader",
                    id: "displacement",
                    enabled: !0,
                    data: [0.30973451327433627, 1.0619469026548671, 2.1238938053097343, 2.433628318584071]
                }, {
                    cmd: "shader",
                    id: "edgeDetect",
                    enabled: !0,
                    data: [-1.7256637168141593, 0.04424778761061947, 1]
                }, {
                    cmd: "shader",
                    id: "brightnessContrast",
                    enabled: !0,
                    data: [0.15486725663716816, 0.26106194690265483]
                }, {
                    cmd: "shader",
                    id: "invert",
                    enabled: !0,
                    data: []
                }]
            ],
            [
                [{
                    cmd: "input",
                    id: "source0",
                    name: "red displace"
                }, {
                    cmd: "shader",
                    id: "colormap",
                    enabled: !0,
                    data: [0.34513274336283184, 10]
                }, {
                    cmd: "shader",
                    id: "triangleBlur",
                    enabled: !0,
                    data: [0.0010]
                }, {
                    cmd: "shader",
                    id: "displacement",
                    enabled: !0,
                    data: [0.5530973451327434, 1.6150442477876106, 0.24336283185840707, 2.3451327433628317]
                }, {
                    cmd: "shader",
                    id: "edgeDetect",
                    enabled: !0,
                    data: [-1.7256637168141593, 0.04424778761061947, 1]
                }, {
                    cmd: "shader",
                    id: "brightnessContrast",
                    enabled: !0,
                    data: [0.15486725663716816, 0.26106194690265483]
                }]
            ],
            [
                [{
                    cmd: "input",
                    id: "source0",
                    name: "vulcan"
                }, {
                    cmd: "shader",
                    id: "edgeDetect",
                    enabled: !0,
                    data: [0.42, 1, 0.5398230088495575]
                }, {
                    cmd: "shader",
                    id: "vignette",
                    enabled: !0,
                    data: [0.7433628318584071, 0.9557522123893806]
                }, {
                    cmd: "shader",
                    id: "brightnessContrast",
                    enabled: !0,
                    data: [0.28, 0.5]
                }, {
                    cmd: "shader",
                    id: "colorMatrixOld",
                    enabled: !0,
                    data: [106.72566371681417]
                }, {
                    cmd: "shader",
                    id: "hueSaturation",
                    enabled: !0,
                    data: [0.008849557522123908, 0.3982300884955752]
                }, {
                    cmd: "shader",
                    id: "vibrance",
                    enabled: !0,
                    data: [0.017699115044247815]
                }]
            ],
            [
                [{
                    cmd: "input",
                    id: "source0",
                    name: "monster"
                }, {
                    cmd: "shader",
                    id: "edgeDetect",
                    enabled: !0,
                    data: [0.6371681415929205, 1, 0.7964601769911505]
                }, {
                    cmd: "shader",
                    id: "brightnessContrast",
                    enabled: !0,
                    data: [0.22123893805309736, 0.5]
                }, {
                    cmd: "shader",
                    id: "colorMatrixOld",
                    enabled: !0,
                    data: [194.3362831858407]
                }]
            ],
            [
                [{
                    cmd: "input",
                    id: "source0",
                    name: "old film"
                }, {
                    cmd: "shader",
                    id: "film",
                    enabled: !0,
                    data: [10, 0.0010, 0.5088495575221239, 5]
                }, {
                    cmd: "shader",
                    id: "edgeDetect",
                    enabled: !0,
                    data: [0.3, 1, 0.4778761061946903]
                }, {
                    cmd: "shader",
                    id: "oldFilm",
                    enabled: !0,
                    data: [0.0010, 0.0010, 0.8053097345132744, 0.3]
                }, {
                    cmd: "shader",
                    id: "sepia",
                    enabled: !0,
                    data: [0.8]
                }, {
                    cmd: "shader",
                    id: "vibrance",
                    enabled: !0,
                    data: [1]
                }]
            ],
            [
                [{
                    cmd: "input",
                    id: "source0",
                    name: "invert green"
                }, {
                    cmd: "shader",
                    id: "edgeDetect",
                    data: [3, 0.2079646017699115, 1],
                    enabled: !0
                }, {
                    cmd: "shader",
                    id: "colormap",
                    data: [1, 3],
                    enabled: !0
                }, {
                    cmd: "shader",
                    id: "denoise",
                    enabled: !0,
                    data: [30]
                }, {
                    cmd: "shader",
                    id: "hueSaturation",
                    enabled: !0,
                    data: [-0.16814159292035402, 0.34513274336283195]
                }]
            ],
            [
                [{
                    cmd: "input",
                    id: "source0",
                    name: "invert blue"
                }, {
                    cmd: "shader",
                    id: "edgeDetect",
                    data: [3, 0.07079646017699115, 1],
                    enabled: !0
                }, {
                    cmd: "shader",
                    id: "colormap",
                    data: [0.8716814159292036, 15],
                    enabled: !0
                }, {
                    cmd: "shader",
                    id: "invert",
                    enabled: !0,
                    data: [30]
                }, {
                    cmd: "shader",
                    id: "hueSaturation",
                    enabled: !0,
                    data: [-0.1415929203539823, 0.7079646017699115]
                }]
            ],
            [
                [{
                    cmd: "input",
                    id: "source0",
                    name: "dot shift"
                }, {
                    cmd: "shader",
                    id: "bulgePinch",
                    enabled: !0,
                    data: [0.5, 0.5132743362831859, 0.5, 0.6814159292035398]
                }, {
                    cmd: "shader",
                    id: "dotScreen",
                    enabled: !0,
                    data: [0.5, 0.5, 0.0010, 1.504424778761062]
                }, {
                    cmd: "shader",
                    id: "RGBShift",
                    enabled: !0,
                    data: [2.057326162527829, 0.030530973451327433]
                }, {
                    cmd: "shader",
                    id: "colorMatrixOld",
                    enabled: !0,
                    data: [116.28318584070797]
                }]
            ],
            [
                [{
                    cmd: "input",
                    id: "source0",
                    name: "zoom distort #1"
                }, {
                    cmd: "shader",
                    id: "film",
                    enabled: !0,
                    data: [0.5, 0.3893805309734513, 0.6592920353982301, 5]
                }, {
                    cmd: "shader",
                    id: "colorHalftone",
                    enabled: !0,
                    data: [0.5, 0.5, 3.169394358488818, 3.101769911504425]
                }, {
                    cmd: "shader",
                    id: "oldFilm",
                    enabled: !0,
                    data: [0.7, 0.3, 0.3, 0.3]
                }, {
                    cmd: "shader",
                    id: "zoomBlur",
                    enabled: !0,
                    data: [0.5,
                        0.5, 0.10176991150442478
                    ]
                }]
            ],
            [
                [{
                    cmd: "input",
                    id: "source0",
                    name: "zoom distort #2"
                }, {
                    cmd: "shader",
                    id: "oldFilm",
                    enabled: !0,
                    data: [0.7, 0.8451327433628318, 1, 1]
                }, {
                    cmd: "shader",
                    id: "zoomBlur",
                    enabled: !0,
                    data: [0.5, 0.5, 0.33185840707964603]
                }, {
                    cmd: "shader",
                    id: "brightnessContrast",
                    enabled: !0,
                    data: [0, 0.5]
                }]
            ],
            [
                [{
                    cmd: "input",
                    id: "source0",
                    name: "zoom distort #3"
                }, {
                    cmd: "shader",
                    id: "film",
                    enabled: !0,
                    data: [10, 0.0010, 0.5088495575221239, 5]
                }, {
                    cmd: "shader",
                    id: "bulgePinch",
                    enabled: !0,
                    data: [0.6742857142857143, 0.32857142857142857,
                        200, 0.5
                    ]
                }, {
                    cmd: "shader",
                    id: "edgeDetect",
                    enabled: !0,
                    data: [0.4424778761061947, 1, 0.2]
                }, {
                    cmd: "shader",
                    id: "vignette",
                    enabled: !0,
                    data: [0.7433628318584071, 0.9557522123893806]
                }, {
                    cmd: "shader",
                    id: "noise",
                    enabled: !0,
                    data: [0.0010]
                }, {
                    cmd: "shader",
                    id: "zoomBlur",
                    enabled: !0,
                    data: [0.41, 0.2342857142857143, 0.4336283185840708]
                }, {
                    cmd: "shader",
                    id: "brightnessContrast",
                    enabled: !0,
                    data: [0.17699115044247793, 0.5]
                }, {
                    cmd: "shader",
                    id: "colorMatrixOld",
                    enabled: !0,
                    data: [313.8053097345133]
                }, {
                    cmd: "shader",
                    id: "hueSaturation",
                    enabled: !0,
                    data: [0, 0.3982300884955752]
                }]
            ],
            [
                [{
                    cmd: "input",
                    id: "source0",
                    name: "kaleidoscope",
                    enabled: !0
                }, {
                    cmd: "shader",
                    id: "swirl",
                    enabled: !0,
                    data: [0.5, 0.5, 662.3362831858408, 2.477876106194689]
                }, {
                    cmd: "shader",
                    id: "kaleidoscope",
                    enabled: !0,
                    data: [5.754952914098117, 12.787610619469026]
                }, {
                    cmd: "shader",
                    id: "vignette",
                    enabled: !0,
                    data: [0.7079646017699115, 0.6769911504424779]
                }, {
                    cmd: "shader",
                    id: "hueSaturation",
                    enabled: !0,
                    data: [0.03539823008849563, 0.31858407079646023]
                }]
            ],
            [
                [{
                    cmd: "input",
                    id: "source0",
                    name: "green kaleidoscope"
                }, {
                    cmd: "shader",
                    id: "popArt",
                    enabled: !0,
                    data: []
                }, {
                    cmd: "shader",
                    id: "swirl",
                    enabled: !0,
                    data: [0.5, 0.5, 862.3008849557523, 0.9734513274336276]
                }, {
                    cmd: "shader",
                    id: "edgeDetect",
                    enabled: !0,
                    data: [0.5, 1, 1]
                }, {
                    cmd: "shader",
                    id: "kaleidoscope",
                    enabled: !0,
                    data: [1.1, 4.716814159292035]
                }, {
                    cmd: "shader",
                    id: "vignette",
                    enabled: !0,
                    data: [0.7654867256637168, 0.1902654867256637]
                }, {
                    cmd: "shader",
                    id: "hueSaturation",
                    enabled: !0,
                    data: [-1, 0]
                }]
            ],
            [
                [{
                    cmd: "input",
                    id: "source0",
                    name: "ancient kaleidoscope"
                }, {
                    cmd: "shader",
                    id: "film",
                    enabled: !0,
                    data: [0.5, 0.22123893805309736, 1.5663716814159292, 1068.1017699115046]
                }, {
                    cmd: "shader",
                    id: "popArt",
                    enabled: !0,
                    data: []
                }, {
                    cmd: "shader",
                    id: "bulgePinch",
                    enabled: !0,
                    data: [0.5, 0.5, 1, -0.06194690265486724]
                }, {
                    cmd: "shader",
                    id: "swirl",
                    enabled: !0,
                    data: [0.5, 0.5, 999, 1]
                }, {
                    cmd: "shader",
                    id: "edgeDetect",
                    enabled: !0,
                    data: [0.5, 1, 0]
                }, {
                    cmd: "shader",
                    id: "kaleidoscope",
                    enabled: !0,
                    data: [4.976505176925425, 7.6902654867256635]
                }, {
                    cmd: "shader",
                    id: "oldFilm",
                    enabled: !0,
                    data: [0.7, 0.3, 0.3, 0.3]
                }, {
                    cmd: "shader",
                    id: "vignette",
                    enabled: !0,
                    data: [1,
                        0.7964601769911505
                    ]
                }, {
                    cmd: "shader",
                    id: "sepia",
                    enabled: !0,
                    data: [0.8]
                }]
            ],
            [
                [{
                    cmd: "input",
                    id: "source0",
                    name: "ancient kaleidoscope"
                }, {
                    cmd: "shader",
                    id: "film",
                    enabled: !0,
                    data: [0.5, 0.2, 1, 2024]
                }, {
                    cmd: "shader",
                    id: "popArt",
                    enabled: !0,
                    data: []
                }, {
                    cmd: "shader",
                    id: "bulgePinch",
                    enabled: !0,
                    data: [0.5, 0.5, 0.1415929203539823, 0.12389380530973448]
                }, {
                    cmd: "shader",
                    id: "swirl",
                    enabled: !0,
                    data: [0.5, 0.5, 0.0010, 1.6814159292035402]
                }, {
                    cmd: "shader",
                    id: "edgeDetect",
                    enabled: !0,
                    data: [0.5, 1, 0.6371681415929203]
                }, {
                    cmd: "shader",
                    id: "colorIsolation",
                    enabled: !0,
                    data: [0.5]
                }, {
                    cmd: "shader",
                    id: "kaleidoscope",
                    enabled: !0,
                    data: [3.169394358488818, 2.911504424778761]
                }, {
                    cmd: "shader",
                    id: "oldFilm",
                    enabled: !0,
                    data: [0.7, 0.3, 0.09734513274336283, 0.3]
                }, {
                    cmd: "shader",
                    id: "vignette",
                    enabled: !0,
                    data: [0.6592920353982301, 0.6504424778761062]
                }, {
                    cmd: "shader",
                    id: "tiltShift",
                    enabled: !0,
                    data: [0.0010, 0.24336283185840707, 0.5929203539823009, 0.5619469026548672, 15, 200]
                }, {
                    cmd: "shader",
                    id: "sepia",
                    enabled: !0,
                    data: [0.8]
                }]
            ]
        ],
            c = parseUri(window.location.search).queryKey.filter;
        if (c)
            if (32 ===
                c.length) DOMLoader.sendRequest({
                url: "./filesystem.php?filter=" + c,
                body: "test!",
                onerror: function (a) {
                    sketch.loader.stop();
                    g()
                },
                onload: function (a) {
                    sketch.loader.stop();
                    try {
                        var b = JSON.parse(a.responseText);
                        d.unshift(b)
                    } catch (c) {}
                    g()
                },
                onprogress: function (a) {
                    sketch.loader.message("loading: " + (100 * (a.loaded / a.total) >> 0) + "%")
                }
            });
            else {
                try {
                    c = JSON.parse(atob(c)), "string" === typeof c ? d.unshift(JSON.parse(c)) : d.unshift()
                } catch (b) {}
                g && g()
            } else g && g();
        for (c = 0; c < d.length; c++) {
            var f = d[c];
            f.name = f[0][0].name;
            1 < f.length &&
                (f[f.length - 1] = [{
                    cmd: "input",
                    id: "source0"
                },
                f[f.length - 1][0]
            ]);
            for (var h = 0; h < f.length; h++)
                for (var e = f[h], l = 0; l < e.length; l++) {
                    var m = e[l];
                    "undefined" === typeof m.enabled && (m.enabled = !0)
                }
        }
        a.removed = [];
        a.filterStack.removeItem = function (a) {
            a = glfx.filterStack.splice(a, 1);
            for (var b = 0; b < a.length; b++) glfx.removed.push(a[b])
        }
    };
    return a
}(glfx),
    Shader = function () {
        function a(a, b) {
            var c = gl.createShader(a);
            gl.shaderSource(c, b);
            gl.compileShader(c);
            if (!gl.getShaderParameter(c, gl.COMPILE_STATUS)) {
                var d = gl.getShaderInfoLog(c);
                if (glfx.handleError) {
                    glfx.handleError(d);
                    return
                }
                throw "compile error: " + gl.getShaderInfoLog(c);
            }
            return c
        }

        function g(f, h, e) {
            e = e || "NORMAL";
            this.texCoordAttribute = this.vertexAttribute = null;
            this.program = gl.createProgram();
            f = f || d;
            f = a(gl.VERTEX_SHADER, f);
            if (!f) return this.invalid = !0;
            gl.attachShader(this.program, f);
            h = h || c;
            if (b) {
                h = "#define " + e + ";\nprecision " + b + " float;" + h;
                var g = a(gl.FRAGMENT_SHADER, h);
                if (!g) return this.invalid = !0;
                gl.attachShader(this.program, g)
            } else try {
                g = a(gl.FRAGMENT_SHADER, "#define " +
                    e + ";\nprecision highp float;" + h), gl.attachShader(this.program, g), b = "highp"
            } catch (m) {
                g = a(gl.FRAGMENT_SHADER, "#define " + e + ";\nprecision mediump float;" + h), gl.attachShader(this.program, g), b = "mediump"
            }
            gl.linkProgram(this.program);
            if (!gl.getProgramParameter(this.program, gl.LINK_STATUS)) throw "link error: " + gl.getProgramInfoLog(this.program);
            this.invalid = !1
        }
        var d = "\tattribute vec2 vertex;\tattribute vec2 _texCoord;\tvarying vec2 texCoord;\tvoid main() {\t\tvec2 coord = vertex * 2.0 - 1.0;\t\tgl_Position = vec4(coord.x, coord.y, 0.0, 1.0);\t\ttexCoord = _texCoord;\t}",
            c = "    uniform sampler2D texture;    varying vec2 texCoord;    void main() {        gl_FragColor = texture2D(texture, texCoord);    }",
            b;
        g.prototype.destroy = function () {
            gl.deleteProgram(this.program);
            this.program = null
        };
        g.prototype.uniforms = function (a) {
            gl.useProgram(this.program);
            for (var b in a)
                if (a.hasOwnProperty(b)) {
                    var c = gl.getUniformLocation(this.program, b);
                    if (null !== c) {
                        var d = a[b];
                        if ("[object Array]" == Object.prototype.toString.call(d))
                            if (d.format) {
                                var g = d.format;
                                if (-1 !== g.indexOf("matrix")) gl[g](c, !1, new Float32Array(d));
                                else gl[g](c, new Float32Array(d))
                            } else switch (d.length) {
                            case 1:
                                gl.uniform1fv(c, new Float32Array(d));
                                break;
                            case 2:
                                gl.uniform2fv(c, new Float32Array(d));
                                break;
                            case 3:
                                gl.uniform3fv(c, new Float32Array(d));
                                break;
                            case 4:
                                gl.uniform4fv(c, new Float32Array(d));
                                break;
                            case 9:
                                gl.uniformMatrix3fv(c, !1, new Float32Array(d));
                                break;
                            case 16:
                                gl.uniformMatrix4fv(c, !1, new Float32Array(d));
                                break;
                            default:
                                throw "dont't know how to load uniform \"" + b + '" of length ' + d.length;
                            } else if ("[object Number]" ==
                                Object.prototype.toString.call(d)) gl.uniform1f(c, d);
                            else throw 'attempted to set uniform "' + b + '" to invalid value ' + (d || "undefined").toString();
                    }
                }
            return this
        };
        g.prototype.textures = function (a) {
            gl.useProgram(this.program);
            for (var b in a) a.hasOwnProperty(b) && gl.uniform1i(gl.getUniformLocation(this.program, b), a[b]);
            return this
        };
        g.prototype.drawRect = function (a, b, c, d) {
            var g = gl.getParameter(gl.VIEWPORT);
            b = void 0 !== b ? (b - g[1]) / g[3] : 0;
            a = void 0 !== a ? (a - g[0]) / g[2] : 0;
            c = void 0 !== c ? (c - g[0]) / g[2] : 1;
            d = void 0 !== d ? (d -
                g[1]) / g[3] : 1;
            null == gl.vertexBuffer && (gl.vertexBuffer = gl.createBuffer());
            gl.bindBuffer(gl.ARRAY_BUFFER, gl.vertexBuffer);
            gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([a, b, a, d, c, b, c, d]), gl.STATIC_DRAW);
            null == gl.texCoordBuffer && (gl.texCoordBuffer = gl.createBuffer(), gl.bindBuffer(gl.ARRAY_BUFFER, gl.texCoordBuffer), gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([0, 0, 0, 1, 1, 0, 1, 1]), gl.STATIC_DRAW));
            null == this.vertexAttribute && (this.vertexAttribute = gl.getAttribLocation(this.program, "vertex"), gl.enableVertexAttribArray(this.vertexAttribute));
            null == this.texCoordAttribute && (this.texCoordAttribute = gl.getAttribLocation(this.program, "_texCoord"), gl.enableVertexAttribArray(this.texCoordAttribute));
            gl.useProgram(this.program);
            gl.bindBuffer(gl.ARRAY_BUFFER, gl.vertexBuffer);
            gl.vertexAttribPointer(this.vertexAttribute, 2, gl.FLOAT, !1, 0, 0);
            gl.bindBuffer(gl.ARRAY_BUFFER, gl.texCoordBuffer);
            gl.vertexAttribPointer(this.texCoordAttribute, 2, gl.FLOAT, !1, 0, 0);
            gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4)
        };
        g.getDefaultShader = function () {
            gl.defaultShader = gl.defaultShader ||
                new g;
            return gl.defaultShader
        };
        return g
    }(),
    Texture = function () {
        function a(a, b, f, d) {
            this.gl = gl;
            this.id = gl.createTexture();
            this.width = a;
            this.height = b;
            this.format = f;
            this.type = d;
            gl.bindTexture(gl.TEXTURE_2D, this.id);
            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);
            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);
            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);
            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);
            a && b && gl.texImage2D(gl.TEXTURE_2D,
                0, this.format, a, b, 0, this.format, this.type, null)
        }

        function g(a) {
            null == d && (d = document.createElement("canvas"));
            d.width = a.width;
            d.height = a.height;
            a = d.getContext("2d");
            a.clearRect(0, 0, d.width, d.height);
            return a
        }
        a.fromElement = function (c, b, f) {
            var d = new a(0, 0, gl.RGBA, gl.UNSIGNED_BYTE);
            d.loadContentsOf(c, b, f);
            return d
        };
        a.prototype.loadContentsOf = function (a, b, f) {
            a && (this.width = b || a.width || a.videoWidth, this.height = f || a.height || a.videoHeight, this.width && this.height && (gl.bindTexture(gl.TEXTURE_2D, this.id), gl.texImage2D(gl.TEXTURE_2D,
                0, this.format, this.format, this.type, a)))
        };
        a.prototype.initFromBytes = function (a, b, f) {
            this.width = a;
            this.height = b;
            this.format = gl.RGBA;
            this.type = gl.UNSIGNED_BYTE;
            gl.bindTexture(gl.TEXTURE_2D, this.id);
            gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, a, b, 0, gl.RGBA, this.type, new Uint8Array(f))
        };
        a.prototype.destroy = function () {
            gl.deleteTexture(this.id);
            this.id = null
        };
        a.prototype.use = function (a) {
            gl.activeTexture(gl.TEXTURE0 + (a || 0));
            gl.bindTexture(gl.TEXTURE_2D, this.id)
        };
        a.prototype.unuse = function (a) {
            gl.activeTexture(gl.TEXTURE0 +
                (a || 0));
            gl.bindTexture(gl.TEXTURE_2D, null)
        };
        a.prototype.ensureFormat = function (a, b, f, d) {
            if (1 == arguments.length) {
                var e = arguments[0];
                a = e.width;
                b = e.height;
                f = e.format;
                d = e.type
            }
            if (a != this.width || b != this.height || f != this.format || d != this.type) this.width = a, this.height = b, this.format = f, this.type = d, gl.bindTexture(gl.TEXTURE_2D, this.id), gl.texImage2D(gl.TEXTURE_2D, 0, this.format, a, b, 0, this.format, this.type, null)
        };
        a.prototype.drawTo = function (a) {
            gl.framebuffer = gl.framebuffer || gl.createFramebuffer();
            gl.bindFramebuffer(gl.FRAMEBUFFER,
                gl.framebuffer);
            gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, this.id, 0);
            if (gl.checkFramebufferStatus(gl.FRAMEBUFFER) !== gl.FRAMEBUFFER_COMPLETE) throw Error("incomplete framebuffer");
            gl.viewport(0, 0, this.width, this.height);
            a();
            gl.bindFramebuffer(gl.FRAMEBUFFER, null)
        };
        var d = null;
        a.prototype.fillUsingCanvas = function (a) {
            a(g(this));
            this.format = gl.RGBA;
            this.type = gl.UNSIGNED_BYTE;
            gl.bindTexture(gl.TEXTURE_2D, this.id);
            gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE,
                d);
            return this
        };
        a.prototype.toImage = function (a) {
            this.use();
            Shader.getDefaultShader().drawRect();
            var b = 4 * this.width * this.height,
                f = new Uint8Array(b),
                h = g(this),
                e = h.createImageData(this.width, this.height);
            gl.readPixels(0, 0, this.width, this.height, gl.RGBA, gl.UNSIGNED_BYTE, f);
            for (var l = 0; l < b; l++) e.data[l] = f[l];
            h.putImageData(e, 0, 0);
            a.src = d.toDataURL()
        };
        a.prototype.swapWith = function (a) {
            var b;
            b = a.id;
            a.id = this.id;
            this.id = b;
            b = a.width;
            a.width = this.width;
            this.width = b;
            b = a.height;
            a.height = this.height;
            this.height =
                b;
            b = a.format;
            a.format = this.format;
            this.format = b
        };
        return a
    }();
(function () {
    var a = "NORMAL ADD SUBTRACT MULTIPLY DARKEN COLOUR_BURN LINEAR_BURN LIGHTEN SCREEN COLOUR_DODGE LINEAR_DODGE OVERLAY SOFT_LIGHT HARD_LIGHT VIVID_LIGHT LINEAR_LIGHT PIN_LIGHT DIFFERENCE EXCLUSION".split(" ");
    glfx.addFilter({
        type: "blend",
        param: [glfx.param("blendmode", "int(0," + (a.length - 1) + ")", 1), glfx.param("srcAmount", "float(0,1)", 1), glfx.param("dstAmount", "float(0,1)", 1)],
        getBlendMode: function (g) {
            return isFinite(g) ? a[g] : g
        },
        shaderCode: "uniform vec3 blendmode;\nuniform float srcAmount;\nuniform float dstAmount;\nuniform sampler2D texture0;\nuniform sampler2D texture1;\nvarying vec2 texCoord;\nvec3 blend (vec3 src, vec3 dst) {\n\t#ifdef NORMAL\n\t\treturn src + dst;\n\t#endif\n\t#ifdef ADD\n\t\treturn src + dst;\n\t#endif\n\t#ifdef SUBTRACT\n\t\treturn src - dst;\n\t#endif\n\t#ifdef MULTIPLY\n\t\treturn src * dst;\n\t#endif\n\t#ifdef DARKEN\n\t\treturn min(src, dst);\n\t#endif\n\t#ifdef COLOUR_BURN\n\t\treturn vec3((src.x == 0.0) ? 0.0 : (1.0 - ((1.0 - dst.x) / src.x)),\n\t\t\t\t\t(src.y == 0.0) ? 0.0 : (1.0 - ((1.0 - dst.y) / src.y)),\n\t\t\t\t\t(src.z == 0.0) ? 0.0 : (1.0 - ((1.0 - dst.z) / src.z)));\n\t#endif\n\t#ifdef LINEAR_BURN\n\t\treturn (src + dst) - 1.0;\n\t#endif\n\t#ifdef LIGHTEN\n\t\treturn max(src, dst);\n\t#endif\n\t#ifdef SCREEN\n\t\treturn (src + dst) - (src * dst);\n\t#endif\n\t#ifdef COLOUR_DODGE\n\t\treturn vec3((src.x == 1.0) ? 1.0 : min(1.0, dst.x / (1.0 - src.x)),\n\t\t\t\t\t(src.y == 1.0) ? 1.0 : min(1.0, dst.y / (1.0 - src.y)),\n\t\t\t\t\t(src.z == 1.0) ? 1.0 : min(1.0, dst.z / (1.0 - src.z)));\n\t#endif\n\t\t\t\n\t#ifdef LINEAR_DODGE\n\t\treturn src + dst;\n\t#endif\n\t#ifdef OVERLAY\n\t\treturn vec3((dst.x <= 0.5) ? (2.0 * src.x * dst.x) : (1.0 - 2.0 * (1.0 - dst.x) * (1.0 - src.x)),\n\t\t\t\t\t(dst.y <= 0.5) ? (2.0 * src.y * dst.y) : (1.0 - 2.0 * (1.0 - dst.y) * (1.0 - src.y)),\n\t\t\t\t\t(dst.z <= 0.5) ? (2.0 * src.z * dst.z) : (1.0 - 2.0 * (1.0 - dst.z) * (1.0 - src.z)));\n\t#endif\n\t#ifdef SOFT_LIGHT\n\t\treturn vec3((src.x <= 0.5) ? (dst.x - (1.0 - 2.0 * src.x) * dst.x * (1.0 - dst.x)) : (((src.x > 0.5) && (dst.x <= 0.25)) ? (dst.x + (2.0 * src.x - 1.0) * (4.0 * dst.x * (4.0 * dst.x + 1.0) * (dst.x - 1.0) + 7.0 * dst.x)) : (dst.x + (2.0 * src.x - 1.0) * (sqrt(dst.x) - dst.x))),\n\t\t\t\t\t(src.y <= 0.5) ? (dst.y - (1.0 - 2.0 * src.y) * dst.y * (1.0 - dst.y)) : (((src.y > 0.5) && (dst.y <= 0.25)) ? (dst.y + (2.0 * src.y - 1.0) * (4.0 * dst.y * (4.0 * dst.y + 1.0) * (dst.y - 1.0) + 7.0 * dst.y)) : (dst.y + (2.0 * src.y - 1.0) * (sqrt(dst.y) - dst.y))),\n\t\t\t\t\t(src.z <= 0.5) ? (dst.z - (1.0 - 2.0 * src.z) * dst.z * (1.0 - dst.z)) : (((src.z > 0.5) && (dst.z <= 0.25)) ? (dst.z + (2.0 * src.z - 1.0) * (4.0 * dst.z * (4.0 * dst.z + 1.0) * (dst.z - 1.0) + 7.0 * dst.z)) : (dst.z + (2.0 * src.z - 1.0) * (sqrt(dst.z) - dst.z))));\n\t#endif\n\t#ifdef HARD_LIGHT\n\t\treturn vec3((src.x <= 0.5) ? (2.0 * src.x * dst.x) : (1.0 - 2.0 * (1.0 - src.x) * (1.0 - dst.x)),\n\t\t\t\t\t(src.y <= 0.5) ? (2.0 * src.y * dst.y) : (1.0 - 2.0 * (1.0 - src.y) * (1.0 - dst.y)),\n\t\t\t\t\t(src.z <= 0.5) ? (2.0 * src.z * dst.z) : (1.0 - 2.0 * (1.0 - src.z) * (1.0 - dst.z)));\n\t#endif\n\t#ifdef VIVID_LIGHT\n\t\treturn vec3((src.x <= 0.5) ? (1.0 - (1.0 - dst.x) / (2.0 * src.x)) : (dst.x / (2.0 * (1.0 - src.x))),\n\t\t\t\t\t(src.y <= 0.5) ? (1.0 - (1.0 - dst.y) / (2.0 * src.y)) : (dst.y / (2.0 * (1.0 - src.y))),\n\t\t\t\t\t(src.z <= 0.5) ? (1.0 - (1.0 - dst.z) / (2.0 * src.z)) : (dst.z / (2.0 * (1.0 - src.z))));\n\t#endif\n\t#ifdef LINEAR_LIGHT\n\t\treturn 2.0 * src + dst - 1.0;\n\t#endif\n\t#ifdef PIN_LIGHT\n\t\treturn vec3((src.x > 0.5) ? max(dst.x, 2.0 * (src.x - 0.5)) : min(dst.x, 2.0 * src.x),\n\t\t\t\t\t(src.x > 0.5) ? max(dst.y, 2.0 * (src.y - 0.5)) : min(dst.y, 2.0 * src.y),\n\t\t\t\t\t(src.z > 0.5) ? max(dst.z, 2.0 * (src.z - 0.5)) : min(dst.z, 2.0 * src.z));\n\t#endif\n\t#ifdef DIFFERENCE\n\t\treturn abs(dst - src);\n\t#endif\n\t#ifdef EXCLUSION\n\t\treturn src + dst - 2.0 * src * dst;\n\t#endif\n}\nvoid main() {\n   vec4 src = texture2D(texture0, texCoord);\n   vec4 dst = texture2D(texture1, texCoord);\n\tvec3 color = clamp(blend(src.xyz*srcAmount, dst.xyz*dstAmount), 0.0, 1.0);\n   gl_FragColor.rgb = color;\n   gl_FragColor.a = src.a * dst.a;\n}",
        shader: function (g,
            d, c, b, f) {
            g = isFinite(g) ? a[g] : g;
            var h = glfx.filters.blend;
            if (h.dirty || this.mode !== g) delete gl.blend, this.mode = g;
            gl.blend = gl.blend || new Shader(null, h.shaderCode, g);
            this._.texture.loadContentsOf(b);
            this._.extraTexture.loadContentsOf(f);
            this._.extraTexture.use(1);
            gl.blend.textures({
                texture0: 0,
                texture1: 1
            });
            glfx.simpleShader.call(this, gl.blend, {
                blendmode: g,
                srcAmount: d,
                dstAmount: c,
                texSize: [this.width, this.height]
            });
            this._.extraTexture.unuse(1);
            return this
        }
    })
})();
glfx.helper = {};
glfx.helper.warpShader = {};

function warpShader(a, g) {
    return new Shader(null, a + "    uniform sampler2D texture;    uniform vec2 texSize;    varying vec2 texCoord;    void main() {        vec2 coord = texCoord * texSize;        " + g + "        gl_FragColor = texture2D(texture, coord / texSize);        vec2 clampedCoord = clamp(coord, vec2(0.0), texSize);        if (coord != clampedCoord) {            /* fade to transparent if we are outside the image */            gl_FragColor.a *= max(0.0, 1.0 - length(coord - clampedCoord));        }    }")
}
var randomShaderFunc = "    float random(vec3 scale, float seed) {        /* use the fragment position for a different seed per-pixel */        return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);    }";
glfx.helper.RGB_HSL = "vec3 RGB_HSL(vec3 rgb) {\n\tvec3 hsl;\n\tfloat fmin = min(min(rgb.r, rgb.g), rgb.b);\n\tfloat fmax = max(max(rgb.r, rgb.g), rgb.b);\n\tfloat fdelta = fmax - fmin;\n\thsl.z = (fmax + fmin) / 2.0;\n\tif (fdelta == 0.0) {\n\t\thsl.x = 0.0;\n\t\thsl.y = 0.0;\n\t} else {\n\t\tif (hsl.z < 0.5) {\n\t\t\thsl.y = fdelta / (fmax + fmin);\n\t\t} else {\n\t\t\thsl.y = fdelta / (2.0 - fmax - fmin);\n\t\t}\n\t\tvec3 delta = (((fmax - rgb) / 6.0) + (fdelta / 2.0)) / fdelta;\n\t\tif (rgb.r == fmax ) {\n\t\t\thsl.x = delta.z - delta.y;\n\t\t} else if (rgb.g == fmax) {\n\t\t\thsl.x = (1.0 / 3.0) + delta.x - delta.z;\n\t\t} else if (rgb.b == fmax) {\n\t\t\thsl.x = (2.0 / 3.0) + delta.y - delta.x;\n\t\t}\n\t\tif (hsl.x < 0.0) {\n\t\t\thsl.x += 1.0;\n\t\t} else if (hsl.x > 1.0) {\n\t\t\thsl.x -= 1.0;\n\t\t}\n\t}\n\treturn hsl;\n}";
glfx.helper.simplex_noise = "vec3 mod289(vec3 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec2 mod289(vec2 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec3 permute(vec3 x) { return mod289(((x*34.0)+1.0)*x); }\nfloat snoise (vec2 v) {\n\tconst vec4 C = vec4(0.211324865405187, 0.366025403784439, -0.577350269189626, 0.024390243902439);\n\tvec2 i  = floor(v + dot(v, C.yy) );\n\tvec2 x0 = v -   i + dot(i, C.xx);\n\tvec2 i1;\n\ti1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);\n\tvec4 x12 = x0.xyxy + C.xxzz;\n\tx12.xy -= i1;\n\ti = mod289(i);\n\tvec3 p = permute( permute( i.y + vec3(0.0, i1.y, 1.0 )) + i.x + vec3(0.0, i1.x, 1.0 ));\n\tvec3 m = max(0.5 - vec3(dot(x0,x0), dot(x12.xy,x12.xy), dot(x12.zw,x12.zw)), 0.0);\n\tm = m*m ;\n\tm = m*m ;\n\tvec3 x = 2.0 * fract(p * C.www) - 1.0;\n\tvec3 h = abs(x) - 0.5;\n\tvec3 ox = floor(x + 0.5);\n\tvec3 a0 = x - ox;\n\tm *= 1.79284291400159 - 0.85373472095314 * ( a0*a0 + h*h );\n\tvec3 g;\n\tg.x  = a0.x  * x0.x  + h.x  * x0.y;\n\tg.yz = a0.yz * x12.xz + h.yz * x12.yw;\n\treturn 130.0 * dot(m, g);\n}";
glfx.addFilter({
    type: "bulgePinch",
    param: [glfx.param("centerX", "float", 0.5), glfx.param("centerY", "float", 0.5), glfx.param("radius", "float", 0.5), glfx.param("strength", "float(-1,1)", 0.5)],
    ondrag: glfx.dragCenterPoint,
    shaderCode: ["uniform float radius;\nuniform float strength;\nuniform vec2 center;", "coord -= center;\nfloat distance = length(coord);\nif (distance < radius) {\n\tfloat percent = distance / radius;\n\tif (strength > 0.0) {\n\t\tcoord *= mix(1.0, smoothstep(0.0, radius / distance, percent), strength * 0.75);\n\t} else {\n\t\tcoord *= mix(1.0, pow(percent, 1.0 + strength * 0.75) * radius / distance, 1.0 - percent);\n\t}\n}\ncoord += center;"],
    shader: function (a, g, d, c) {
        var b = glfx.filters.bulgePinch;
        b.dirty && delete gl.bulgePinch;
        gl.bulgePinch = gl.bulgePinch || warpShader(b.shaderCode[0], b.shaderCode[1]);
        glfx.simpleShader.call(this, gl.bulgePinch, {
            radius: d * this.width,
            strength: clamp(-1, c, 1),
            center: [this.width * (1 - a), this.height * g],
            texSize: [this.width, this.height]
        });
        return this
    }
});
(function () {
    var a = "./media/texture/concrete_1.jpeg ./media/texture/concrete_2.jpeg ./media/texture/concrete_3.jpeg ./media/texture/concrete_4.jpeg ./media/texture/concrete_5.jpeg ./media/texture/fabric_1.jpeg ./media/texture/fabric_2.jpeg ./media/texture/fabric_3.jpeg ./media/texture/leather_1.jpeg ./media/texture/leather_2.jpeg ./media/texture/leather_3.jpeg ./media/texture/leather_4.jpeg ./media/texture/leather_5.jpeg ./media/texture/leather_6.jpeg ./media/texture/leather_7.jpeg ./media/texture/leather_8.jpeg ./media/texture/paint_1.jpeg ./media/texture/paint_2.jpeg ./media/texture/paint_3.jpeg ./media/texture/paper_1.jpeg ./media/texture/paper_2.jpeg ./media/texture/paper_3.jpeg ./media/texture/paper_4.jpeg ./media/texture/paper_5.jpeg ./media/texture/paper_6.jpeg ./media/texture/paper_7.jpeg ./media/texture/plastic_1.jpeg ./media/texture/plastic_2.jpeg ./media/texture/plastic_3.jpeg ./media/texture/plastic_4.jpeg ./media/texture/plastic_5.jpeg ./media/texture/rocks_1.jpeg ./media/texture/rocks_2.jpeg ./media/texture/rocks_3.jpeg ./media/texture/rocks_4.jpeg ./media/texture/rocks_5.jpeg ./media/texture/rocks_6.jpeg ./media/texture/rocks_7.jpeg ./media/texture/water_1.jpeg ./media/texture/water_2.jpeg ./media/texture/water_3.jpeg ./media/texture/wood_1.jpeg ./media/texture/wood_2.jpeg ./media/texture/wood_3.jpeg ./media/texture/wood_4.jpeg ./media/texture/wood_5.jpeg ./media/texture/wood_6.jpeg ./media/texture/wood_7.jpeg ./media/texture/wood_8.jpeg ./media/texture/wood_9.jpeg ./media/texture/crack3.jpg".split(" ");
    glfx.addFilter({
        type: "displacement",
        textures: a,
        loadResource: function (a, d) {
            var c = glfx.filters.displacement.textures;
            return "string" !== typeof c[a] ? !1 : glfx.loadResource(c, a, d)
        },
        param: [glfx.param("zoom", "float(0,3)", 1), glfx.param("dotDepth", "float(0,3)", 1), glfx.param("dotSize", "float(0,20)", 1), glfx.param("textureDepth", "float(0,3)", 1), glfx.param("textureId", "int(0," + (a.length - 1) + ")", 1), glfx.param("strength", "float(-1,1)", 0.1)],
        shaderCode: "uniform sampler2D texture0;\nuniform sampler2D texture1;\nuniform float time;\nuniform float zoom;\nuniform float dotDepth;\nuniform float dotSize;\nuniform float strength;\nuniform float textureDepth;\nuniform float textureId;\nvarying vec2 texCoord;\nfloat random(float seed) {\n\treturn fract(sin(seed)*23443.23);\n}\nvec2 random2f(vec2 p) {\n\treturn vec2(random(p.x+p.y*100.), random(p.x+p.y*1000.));\n}\nfloat voronoi( in vec2 x ) {\n\tvec2 p = floor( x );\n\tvec2 f = fract( x );\n\tfloat res = 8.0;\n\tfor( float j=-1.; j<=1.; j++ )\n\tfor( float i=-1.; i<=1.; i++ ) {\n\t    vec2  b = vec2( i, j );\n\t    vec2  r = b - f + random2f( p + b );\n\t    float d = dot( r, r );\n\t    res = min( res, d );\n\t}\n\treturn sqrt( res );\n}\nvoid main() {\n\tfloat t = time / dotSize;\n\tfloat b = voronoi(.003 * sin(t) * texCoord + 2. * t);\n\tfloat g = voronoi(0.2 * sin(t) * texCoord);\n\tfloat r = voronoi(t * texCoord - 1. * t);\n\tvec4 tex = texture2D(texture1, texCoord);\n\tvec4 dot = tex * vec4(r, g, b, 1);\n\tvec4 dis;\n\tif (textureId == 0.0) {\n\t\tdis = dot * dotDepth + tex * textureDepth;\n\t} else {\n\t\tdis = dot * dotDepth + 1.0 - tex * textureDepth;\n\t}\n\tdis.x -= 0.5;\n\tdis.y -= 0.5;\n\tdis.x *= strength;\n\tdis.y *= strength;\n\tvec2 res_uv = texCoord;\n\tres_uv.x = res_uv.x + dis.x;\n\tres_uv.y = res_uv.y + dis.y;\n\tgl_FragColor = texture2D(texture0, zoom * res_uv);\n\n}",
        shader: function (a, d, c, b, f, h) {
            var e = glfx.filters.displacement;
            e.dirty && delete gl.displacement;
            gl.displacement = gl.displacement || new Shader(null, e.shaderCode);
            isFinite(f) && 0 !== f ? (this._.extraTexture.loadContentsOf(glfx.filters.displacement.textures[f]), this._.extraTexture.use(1)) : this._.texture.use(1);
            gl.displacement.textures({
                texture0: 0,
                texture1: 1
            });
            glfx.simpleShader.call(this, gl.displacement, {
                time: 100,
                zoom: isFinite(a) ? a : 1,
                dotDepth: isFinite(d) ? d : 1,
                dotSize: c || 0.0010,
                textureDepth: isFinite(b) ? b : 1,
                strength: isFinite(h) ?
                    h : 1,
                textureId: f || 0
            });
            return this
        }
    })
})();
glfx.addFilter({
    type: "mirror",
    param: [glfx.param("flipX", "int(0,1)", 0), glfx.param("flipY", "int(0,1)", 0)],
    shaderCode: ["\tattribute vec2 vertex;\n\tattribute vec2 _texCoord;\n\tuniform float flipX;\n\tuniform float flipY;\n\tvarying vec2 texCoord;\n\tvoid main() {\n\t\tvec2 coord = vertex * 2.0 - 1.0;\n\t\tfloat x = flipX > 0.0 ? 1.0 - coord.x - 1.0 : coord.x;\n\t\tfloat y = flipY > 0.0 ? 1.0 - coord.y - 1.0 : coord.y;\n\t\tgl_Position = vec4(x, y, 0.0, 1.0);\n\t\ttexCoord = _texCoord;\n\t}", "    uniform sampler2D texture;\n    varying vec2 texCoord;\n    void main() {\n        gl_FragColor = texture2D(texture, texCoord);\n    }"],
    shader: function (a, g, d) {
        d = glfx.filters.mirror;
        d.dirty && delete gl.mirror;
        gl.mirror = gl.mirror || new Shader(d.shaderCode[0], d.shaderCode[1]);
        glfx.simpleShader.call(this, gl.mirror, {
            flipX: isFinite(a) ? a : 0,
            flipY: isFinite(g) ? g : 0
        });
        return this
    }
});
glfx.addFilter({
    type: "ripple",
    param: [glfx.param("wave", "float(0,10)", Math.PI / 0.75), glfx.param("distortion", "float(0,100)", 1), glfx.param("centerX", "float", 0.5), glfx.param("centerY", "float", 0.5)],
    shaderCode: "varying vec2 texCoord;\nuniform vec2 center;\nuniform sampler2D texture;\nuniform float time;\nuniform float wave;\nuniform float distortion;\nvoid main(void) {\n\tfloat scalar = abs(1.0 - abs(distance(texCoord, center)));\n\tfloat sinOffset = sin(wave * time / scalar);\n\tsinOffset = clamp(sinOffset, 0.0, 1.0);\n\tfloat sinSign = cos(wave / scalar);\n\tsinOffset = sinOffset * distortion / 32.0;\n\tgl_FragColor = texture2D(texture, texCoord + sinOffset * sinSign);\n}",
    shader: function (a,
        g, d, c) {
        var b = glfx.filters.ripple;
        b.dirty && delete gl.ripple;
        gl.ripple = gl.ripple || new Shader(null, b.shaderCode);
        glfx.simpleShader.call(this, gl.ripple, {
            time: (this.now - this.startTime) / 1E3,
            texSize: [this.width, this.height],
            center: [1 - d, c],
            distortion: g,
            wave: a
        });
        return this
    }
});
glfx.addFilter({
    type: "swirl",
    param: [glfx.param("centerX", "float", 0.5), glfx.param("centerY", "float", 0.5), glfx.param("radius", "int(0,width)", 200), glfx.param("angle", "radian(-10,10)", 1)],
    ondrag: glfx.dragCenterPoint,
    shaderCode: ["uniform float radius;\nuniform float angle;\nuniform vec2 center;", "coord -= center;\nfloat distance = length(coord);\nif (distance < radius) {\n\tfloat percent = (radius - distance) / radius;\n\tfloat theta = percent * percent * angle;\n\tfloat s = sin(theta);\n\tfloat c = cos(theta);\n\tcoord = vec2(\n\t\tcoord.x * c - coord.y * s,\n\t\tcoord.x * s + coord.y * c\n\t);\n}\ncoord += center;"],
    shader: function (a, g, d, c) {
        var b = glfx.filters.swirl;
        b.dirty && delete gl.swirl;
        gl.swirl = gl.swirl || warpShader(b.shaderCode[0], b.shaderCode[1]);
        glfx.simpleShader.call(this, gl.swirl, {
            radius: d,
            center: [this.width * (1 - a), this.height * g],
            angle: c,
            texSize: [this.width, this.height]
        });
        return this
    }
});
glfx.addFilter({
    type: "edgeDetect",
    param: [glfx.param("amount", "float(-3,3)", 0.5), glfx.param("diameter", "float(0,1)", 1), glfx.param("opacity", "float(0,1)", 1)],
    shaderCode: "uniform sampler2D texture;\nvarying vec2 texCoord;\nuniform float amount;\nuniform float diameter;\nuniform float opacity;\nvoid main() {\n\tfloat step_x = 0.0015 * diameter;\n\tfloat step_y = 0.0015 * diameter;\n\tvec3 t1 = texture2D(texture, vec2(texCoord.x - step_x, texCoord.y - step_y)).rgb;\n\tvec3 t2 = texture2D(texture, vec2(texCoord.x, texCoord.y - step_y)).rgb * 2.0;\n\tvec3 t3 = texture2D(texture, vec2(texCoord.x + step_x, texCoord.y - step_y)).rgb;\n\tvec3 t4 = texture2D(texture, vec2(texCoord.x - step_x, texCoord.y)).rgb * 2.0;\n\tvec3 t5 = texture2D(texture, texCoord).rgb;\n\tvec3 t6 = texture2D(texture, vec2(texCoord.x + step_x, texCoord.y)).rgb * 2.0;\n\tvec3 t7 = texture2D(texture, vec2(texCoord.x - step_x, texCoord.y + step_y)).rgb;\n\tvec3 t8 = texture2D(texture, vec2(texCoord.x, texCoord.y + step_y)).rgb * 2.0;\n\tvec3 t9 = texture2D(texture, vec2(texCoord.x + step_x, texCoord.y + step_y)).rgb;\n\tvec3 H = t1 + t2 + t3 - t7 - t8 - t9;\n\tvec3 V = t1 - t3 + t4 - t6 + t7 - t9;\n\tvec3 res = sqrt(H * H + V * V);\n\tgl_FragColor.a = 1.0;\n\tgl_FragColor.rgb = (res * amount) + (t5 * opacity);\n}",
    shader: function (a,
        g, d) {
        var c = glfx.filters.edgeDetect;
        c.dirty && delete gl.edgeDetect;
        gl.edgeDetect = gl.edgeDetect || new Shader(null, c.shaderCode);
        glfx.simpleShader.call(this, gl.edgeDetect, {
            amount: isFinite(a) ? a : 0,
            opacity: isFinite(d) ? d : 0,
            diameter: isFinite(g) ? g : 1
        });
        return this
    }
});
glfx.addFilter({
    type: "ink",
    param: [glfx.param("strength", "float(-0.5,0.5)", 0.25)],
    shaderCode: "\t\t\tuniform sampler2D texture;\n\t\t\tuniform float strength;\n\t\t\tuniform vec2 texSize;\n\t\t\tvarying vec2 texCoord;\n\t\t\tvoid main() {\n\t\t\t\tvec2 dx = vec2(1.0 / texSize.x, 0.0);\n\t\t\t\tvec2 dy = vec2(0.0, 1.0 / texSize.y);\n\t\t\t\tvec4 color = texture2D(texture, texCoord);\n\t\t\t\tfloat bigTotal = 0.0;\n\t\t\t\tfloat smallTotal = 0.0;\n\t\t\t\tvec3 bigAverage = vec3(0.0);\n\t\t\t\tvec3 smallAverage = vec3(0.0);\n\t\t\t\tfor (float x = -2.0; x <= 2.0; x += 1.0) {\n\t\t\t\t\tfor (float y = -2.0; y <= 2.0; y += 1.0) {\n\t\t\t\t\t\tvec3 sample = texture2D(texture, texCoord + dx * x + dy * y).rgb;\n\t\t\t\t\t\tbigAverage += sample;\n\t\t\t\t\t\tbigTotal += 1.0;\n\t\t\t\t\t\tif (abs(x) + abs(y) < 2.0) {\n\t\t\t\t\t\t\tsmallAverage += sample;\n\t\t\t\t\t\t\tsmallTotal += 1.0;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tvec3 edge = max(vec3(0.0), bigAverage / bigTotal - smallAverage / smallTotal);\n\t\t\t\tgl_FragColor = vec4(color.rgb - dot(edge, edge) * strength * 100000.0, color.a);\n\t\t\t}",
    shader: function (a) {
        var g =
            glfx.filters.ink;
        g.dirty && delete gl.ink;
        gl.ink = gl.ink || new Shader(null, g.shaderCode);
        glfx.simpleShader.call(this, gl.ink, {
            strength: a * a * a * a * a,
            texSize: [this.width, this.height]
        });
        return this
    }
});
glfx.addFilter({
    type: "unsharpMask",
    param: [glfx.param("radius", "float(0,20)", 10), glfx.param("strength", "float(0,10)", 1)],
    defaults: [20, 2],
    shaderCode: "\t\t\tuniform sampler2D blurredTexture;\n\t\t\tuniform sampler2D originalTexture;\n\t\t\tuniform float strength;\n\t\t\tuniform float threshold;\n\t\t\tvarying vec2 texCoord;\n\t\t\tvoid main() {\n\t\t\t\tvec4 blurred = texture2D(blurredTexture, texCoord);\n\t\t\t\tvec4 original = texture2D(originalTexture, texCoord);\n\t\t\t\tgl_FragColor = mix(blurred, original, 1.0 + strength);\n\t\t\t}",
    shader: function (a,
        g) {
        var d = glfx.filters.unsharpMask;
        d.dirty && delete gl.unsharpMask;
        gl.unsharpMask = gl.unsharpMask || new Shader(null, d.shaderCode);
        this._.extraTexture.ensureFormat(this._.texture);
        this._.texture.use();
        this._.extraTexture.drawTo(function () {
            Shader.getDefaultShader().drawRect()
        });
        this._.extraTexture.use(1);
        this.triangleBlur(a);
        gl.unsharpMask.textures({
            originalTexture: 1
        });
        glfx.simpleShader.call(this, gl.unsharpMask, {
            strength: g
        });
        this._.extraTexture.unuse(1);
        return this
    }
});
glfx.addFilter({
    type: "denoise",
    param: [glfx.param("exponent", "int(10,30)", 20)],
    shader: function (a) {
        gl.denoise = gl.denoise || new Shader(null, "\t\t\tuniform sampler2D texture;\t\t\tuniform float exponent;\t\t\tuniform float strength;\t\t\tuniform vec2 texSize;\t\t\tvarying vec2 texCoord;\t\t\tvoid main() {\t\t\t\tvec4 center = texture2D(texture, texCoord);\t\t\t\tvec4 color = vec4(0.0);\t\t\t\tfloat total = 0.0;\t\t\t\tfor (float x = -4.0; x <= 4.0; x += 1.0) {\t\t\t\t\tfor (float y = -4.0; y <= 4.0; y += 1.0) {\t\t\t\t\t\tvec4 sample = texture2D(texture, texCoord + vec2(x, y) / texSize);\t\t\t\t\t\tfloat weight = 1.0 - abs(dot(sample.rgb - center.rgb, vec3(0.25)));\t\t\t\t\t\tweight = pow(weight, exponent);\t\t\t\t\t\tcolor += sample * weight;\t\t\t\t\t\ttotal += weight;\t\t\t\t\t}\t\t\t\t}\t\t\t\tcolor = color / total;\t\t\t\tif (color.a > 1.0) color.a = 1.0;\t\t\t\tif (color.r > 1.0) color.r = 1.0;\t\t\t\tif (color.g > 1.0) color.g = 1.0;\t\t\t\tif (color.b > 1.0) color.b = 1.0;\t\t\t\tgl_FragColor = color;\t\t\t}\t\t");
        for (var g = 0; 2 > g; g++) glfx.simpleShader.call(this, gl.denoise, {
            exponent: Math.max(0, a),
            texSize: [this.width, this.height]
        });
        return this
    }
});
glfx.addFilter({
    type: "noise",
    param: [glfx.param("amount", "float", 0.5)],
    shaderCode: ["uniform sampler2D texture;\nuniform float amount;\nuniform float random;\nvarying vec2 texCoord;", glfx.helper.simplex_noise, "void main() {\n\tvec4 color = texture2D(texture, texCoord);\n\tfloat diff = snoise(texCoord * vec2(1024.0 + random * 512.0, 1024.0 + random * 512.0)) * 0.5;\n\tcolor.r += diff;\n\tcolor.g += diff;\n\tcolor.b += diff;\n\tgl_FragColor = color;\n}"].join("\n"),
    shader: function (a) {
        var g = glfx.filters.noise;
        g.dirty && delete gl.noise;
        gl.noise = gl.noise || new Shader(null, g.shaderCode);
        glfx.simpleShader.call(this, gl.noise, {
            amount: clamp(0, a, 1),
            random: Math.random()
        });
        return this
    }
});
glfx.addFilter({
    type: "colorHalftone",
    param: [glfx.param("centerX", "float", 0.5), glfx.param("centerY", "float", 0.5), glfx.param("angle", "radian", 320), glfx.param("size", "int(1,20)", 7)],
    ondrag: glfx.dragCenterPoint,
    shaderCode: "\t\t\tuniform sampler2D texture;\n\t\t\tuniform vec2 center;\n\t\t\tuniform float angle;\n\t\t\tuniform float scale;\n\t\t\tuniform vec2 texSize;\n\t\t\tvarying vec2 texCoord;\n\t\t\t\n\t\t\tfloat pattern(float angle) {\n\t\t\t\tfloat s = sin(angle), c = cos(angle);\n\t\t\t\tvec2 tex = texCoord * texSize - center;\n\t\t\t\tvec2 point = vec2(\n\t\t\t\t\tc * tex.x - s * tex.y,\n\t\t\t\t\ts * tex.x + c * tex.y\n\t\t\t\t) * scale;\n\t\t\t\treturn (sin(point.x) * sin(point.y)) * 4.0;\n\t\t\t}\n\t\t\t\n\t\t\tvoid main() {\n\t\t\t\tvec4 color = texture2D(texture, texCoord);\n\t\t\t\tvec3 cmy = 1.0 - color.rgb;\n\t\t\t\tfloat k = min(cmy.x, min(cmy.y, cmy.z));\n\t\t\t\tcmy = (cmy - k) / (1.0 - k);\n\t\t\t\tcmy = clamp(cmy * 10.0 - 3.0 + vec3(pattern(angle + 0.26179), pattern(angle + 1.30899), pattern(angle)), 0.0, 1.0);\n\t\t\t\tk = clamp(k * 10.0 - 5.0 + pattern(angle + 0.78539), 0.0, 1.0);\n\t\t\t\tgl_FragColor = vec4(1.0 - cmy - k, color.a);\n\t\t\t}",
    shader: function (a,
        g, d, c) {
        var b = glfx.filters.colorHalftone;
        b.dirty && delete gl.colorHalftone;
        gl.colorHalftone = gl.colorHalftone || new Shader(null, b.shaderCode);
        glfx.simpleShader.call(this, gl.colorHalftone, {
            center: [this.width * (1 - a), this.height * g],
            angle: d,
            scale: Math.PI / c,
            texSize: [this.width, this.height]
        });
        return this
    }
});
glfx.addFilter({
    type: "dotScreen",
    param: [glfx.param("centerX", "float", 0.5), glfx.param("centerY", "float", 0.5), glfx.param("angle", "radian", 1.1), glfx.param("size", "px(0,20)", 3)],
    ondrag: glfx.dragCenterPoint,
    shaderCode: "\t\t\tuniform sampler2D texture;\n\t\t\tuniform vec2 center;\n\t\t\tuniform float angle;\n\t\t\tuniform float scale;\n\t\t\tuniform vec2 texSize;\n\t\t\tvarying vec2 texCoord;\n\t\t\t\n\t\t\tfloat pattern() {\n\t\t\t\tfloat s = sin(angle), c = cos(angle);\n\t\t\t\tvec2 tex = texCoord * texSize - center;\n\t\t\t\tvec2 point = vec2(\n\t\t\t\t\tc * tex.x - s * tex.y,\n\t\t\t\t\ts * tex.x + c * tex.y\n\t\t\t\t) * scale;\n\t\t\t\treturn (sin(point.x) * sin(point.y)) * 4.0;\n\t\t\t}\n\t\t\t\n\t\t\tvoid main() {\n\t\t\t\tvec4 color = texture2D(texture, texCoord);\n\t\t\t\tfloat average = (color.r + color.g + color.b) / 3.0;\n\t\t\t\tgl_FragColor = vec4(vec3(average * 10.0 - 5.0 + pattern()), color.a);\n\t\t\t}",
    shader: function (a,
        g, d, c) {
        var b = glfx.filters.dotScreen;
        b.dirty && delete gl.dotScreen;
        gl.dotScreen = gl.dotScreen || new Shader(null, b.shaderCode);
        glfx.simpleShader.call(this, gl.dotScreen, {
            center: [this.width * (1 - a), this.height * g],
            angle: d,
            scale: Math.PI / c,
            texSize: [this.width, this.height]
        });
        return this
    }
});
glfx.addFilter({
    type: "edgeWork",
    param: [glfx.param("radius", "px(0.1,25)", 4)],
    shader: function (a) {
        gl.edgeWork1 = gl.edgeWork1 || new Shader(null, "\t\t\tuniform sampler2D texture;\t\t\tuniform vec2 delta;\t\t\tvarying vec2 texCoord;\t\t\t" + randomShaderFunc + "\t\t\tvoid main() {\t\t\t\tvec2 color = vec2(0.0);\t\t\t\tvec2 total = vec2(0.0);\t\t\t\t\t\t\t\t/* randomize the lookup values to hide the fixed number of samples */\t\t\t\tfloat offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\t\t\t\t\t\t\t\tfor (float t = -30.0; t <= 30.0; t++) {\t\t\t\t\tfloat percent = (t + offset - 0.5) / 30.0;\t\t\t\t\tfloat weight = 1.0 - abs(percent);\t\t\t\t\tvec3 sample = texture2D(texture, texCoord + delta * percent).rgb;\t\t\t\t\tfloat average = (sample.r + sample.g + sample.b) / 3.0;\t\t\t\t\tcolor.x += average * weight;\t\t\t\t\ttotal.x += weight;\t\t\t\t\tif (abs(t) < 15.0) {\t\t\t\t\t\tweight = weight * 2.0 - 1.0;\t\t\t\t\t\tcolor.y += average * weight;\t\t\t\t\t\ttotal.y += weight;\t\t\t\t\t}\t\t\t\t}\t\t\t\tgl_FragColor = vec4(color / total, 0.0, 1.0);\t\t\t}\t\t");
        gl.edgeWork2 = gl.edgeWork2 || new Shader(null, "\t\t\tuniform sampler2D texture;\t\t\tuniform vec2 delta;\t\t\tvarying vec2 texCoord;\t\t\t" + randomShaderFunc + "\t\t\tvoid main() {\t\t\t\tvec2 color = vec2(0.0);\t\t\t\tvec2 total = vec2(0.0);\t\t\t\t\t\t\t\t/* randomize the lookup values to hide the fixed number of samples */\t\t\t\tfloat offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\t\t\t\t\t\t\t\tfor (float t = -30.0; t <= 30.0; t++) {\t\t\t\t\tfloat percent = (t + offset - 0.5) / 30.0;\t\t\t\t\tfloat weight = 1.0 - abs(percent);\t\t\t\t\tvec2 sample = texture2D(texture, texCoord + delta * percent).xy;\t\t\t\t\tcolor.x += sample.x * weight;\t\t\t\t\ttotal.x += weight;\t\t\t\t\tif (abs(t) < 15.0) {\t\t\t\t\t\tweight = weight * 2.0 - 1.0;\t\t\t\t\t\tcolor.y += sample.y * weight;\t\t\t\t\t\ttotal.y += weight;\t\t\t\t\t}\t\t\t\t}\t\t\t\tfloat c = clamp(10000.0 * (color.y / total.y - color.x / total.x) + 0.5, 0.0, 1.0);\t\t\t\tgl_FragColor = vec4(c, c, c, 1.0);\t\t\t}\t\t");
        glfx.simpleShader.call(this, gl.edgeWork1, {
            delta: [a / this.width, 0]
        });
        glfx.simpleShader.call(this, gl.edgeWork2, {
            delta: [0, a / this.height]
        });
        return this
    }
});
glfx.addFilter({
    type: "film",
    param: [glfx.param("pixelSize", "float(0,10)", 0.5), glfx.param("amount", "float(0,1)", 0.2), glfx.param("opacity", "float(0,2)", 1), glfx.param("sCount", "int(0,2024)", 1024)],
    shaderCode: ["uniform sampler2D texture;\nvarying vec2 texCoord;\nuniform float time;\nuniform float opacity;\nuniform float sCount;\nuniform float amount;\nuniform float pixelSize;", glfx.helper.simplex_noise, "void main() {\n\tvec4 cTextureScreen = texture2D( texture, texCoord );\n\tfloat dx = texCoord.x * texCoord.y * time *  1000.0;\n\tvec3 cResult = cTextureScreen.rgb + cTextureScreen.rgb * clamp( 0.1 + dx * 100.0, 0.0, 1.0 );\n\tvec2 sc = vec2( sin( texCoord.y * sCount ), cos( texCoord.y * sCount ) );\n\tcResult += cTextureScreen.rgb * vec3( sc.x, sc.y, sc.x ) * opacity;\n\tfloat xs = floor(gl_FragCoord.x / pixelSize);\n\tfloat ys = floor(gl_FragCoord.y / pixelSize);\n\tvec4 snow = vec4(snoise(vec2(xs * time, ys * time)) * amount);\n\tvec4 res = vec4( cResult, cTextureScreen.a -cTextureScreen.r);\n\tgl_FragColor = res + snow;\n}"].join("\n"),
    shader: function (a, g, d, c) {
        var b = glfx.filters.film;
        b.dirty && delete gl.film;
        gl.film = gl.film || new Shader(null, b.shaderCode);
        glfx.simpleShader.call(this, gl.film, {
            time: (this.now - this.startTime) / 1E3,
            amount: g || 0,
            pixelSize: isFinite(a) ? a : 10,
            opacity: d || 0,
            sCount: Math.min(2.5 * this.height, c) || 0,
            texSize: [this.width, this.height]
        });
        return this
    }
});
glfx.addFilter({
    type: "hexagonalPixelate",
    param: [glfx.param("centerX", "float", 0.5), glfx.param("centerY", "float", 0.5), glfx.param("scale", "px(1,100)", 15)],
    ondrag: glfx.dragCenterPoint,
    shaderCode: "uniform sampler2D texture;\nuniform vec2 center;\nuniform float scale;\nuniform vec2 texSize;\nvarying vec2 texCoord;\nvoid main() {\n\tvec2 tex = (texCoord * texSize - center) / scale;\n\ttex.y /= 0.866025404;\n\ttex.x -= tex.y * 0.5;\n\t\n\tvec2 a;\n\tif (tex.x + tex.y - floor(tex.x) - floor(tex.y) < 1.0) a = vec2(floor(tex.x), floor(tex.y));\n\telse a = vec2(ceil(tex.x), ceil(tex.y));\n\tvec2 b = vec2(ceil(tex.x), floor(tex.y));\n\tvec2 c = vec2(floor(tex.x), ceil(tex.y));\n\t\n\tvec3 TEX = vec3(tex.x, tex.y, 1.0 - tex.x - tex.y);\n\tvec3 A = vec3(a.x, a.y, 1.0 - a.x - a.y);\n\tvec3 B = vec3(b.x, b.y, 1.0 - b.x - b.y);\n\tvec3 C = vec3(c.x, c.y, 1.0 - c.x - c.y);\n\t\n\tfloat alen = length(TEX - A);\n\tfloat blen = length(TEX - B);\n\tfloat clen = length(TEX - C);\n\t\n\tvec2 choice;\n\tif (alen < blen) {\n\t\tif (alen < clen) choice = a;\n\t\telse choice = c;\n\t} else {\n\t\tif (blen < clen) choice = b;\n\t\telse choice = c;\n\t}\n\t\n\tchoice.x += choice.y * 0.5;\n\tchoice.y *= 0.866025404;\n\tchoice *= scale / texSize;\n\tgl_FragColor = texture2D(texture, choice + center / texSize);\n}",
    shader: function (a, g, d) {
        var c = glfx.filters.hexagonalPixelate;
        c.dirty && delete gl.hexagonalPixelate;
        gl.hexagonalPixelate = gl.hexagonalPixelate || new Shader(null, c.shaderCode);
        glfx.simpleShader.call(this, gl.hexagonalPixelate, {
            center: [this.width * (1 - a), this.height * g],
            scale: d,
            texSize: [this.width, this.height]
        });
        return this
    }
});
glfx.addFilter({
    type: "kaleidoscope",
    param: [glfx.param("angle", "radian", 1.1), glfx.param("sides", "int(1,25)", 3)],
    shaderCode: "uniform sampler2D texture;\nvarying vec2 texCoord;\nuniform float sides;\nuniform float angle;\nvoid main() {\n\tvec2 p = texCoord - 0.5;\n\tfloat r = length(p);\n\tfloat a = atan(p.y, p.x) + angle;\n\tfloat tau = 2.0 * 3.1416 ;\n\ta = mod(a, tau/sides);\n\ta = abs(a - tau/sides/2.) ;\n\tp = r * vec2(cos(a), sin(a));\n\tvec4 color = texture2D(texture, p + 0.5);\n\tgl_FragColor = color;\n}",
    shader: function (a,
        g) {
        var d = glfx.filters.kaleidoscope;
        d.dirty && delete gl.kaleidoscope;
        gl.kaleidoscope = gl.kaleidoscope || new Shader(null, d.shaderCode);
        glfx.simpleShader.call(this, gl.kaleidoscope, {
            angle: a,
            sides: Math.round(g)
        });
        return this
    }
});
glfx.addFilter({
    type: "oldFilm",
    param: [glfx.param("sepia", "float", 0.7), glfx.param("noise", "float", 0.3), glfx.param("burn", "float", 0.3), glfx.param("scratch", "float", 0.3)],
    shaderCode: ["uniform vec2 ImageSize;\nuniform sampler2D Sample0;\nuniform float sepia;\nuniform float noise;\nuniform float burn;\nuniform float scratch;\nuniform float random;\nuniform float time;\nvarying vec2 texCoord;", glfx.helper.simplex_noise, "void main () {\n\tvec3 color = texture2D(Sample0, texCoord).xyz;\n\tcolor += color * burn;\n\tfloat average = (color.x + color.y + color.z) / 3.0;\n\tcolor.xyz += (average - color.xyz) * (1.0);\n\tfloat r = color.x;\n\tfloat g = color.y;\n\tfloat b = color.z;\n\tcolor.x = min(1.0, (r * (1.0 - (0.607 * sepia))) + (g * (0.769 * sepia)) + (b * (0.189 * sepia)));\n\tcolor.y = min(1.0, (r * 0.349 * sepia) + (g * (1.0 - (0.314 * sepia))) + (b * 0.168 * sepia));\n\tcolor.z = min(1.0, (r * 0.272 * sepia) + (g * 0.534 * sepia) + (b * (1.0 - (0.869 * sepia))));\n\tfloat coord = snoise(texCoord * vec2(1024.0 + random * 512.0, 1024.0 + random * 512.0)) * 0.5;\n\tcolor += coord * noise;\n\tif ( random < scratch ) {\n\t\tfloat dist = 1.0 / scratch;\n\t\tfloat d = distance(texCoord, vec2(random * dist, random * dist));\n\t\tif ( d < 0.4 ) {\n\t\t\tfloat xPeriod = 8.0;\n\t\t\tfloat yPeriod = 1.0;\n\t\t\tfloat pi = 3.141592;\n\t\t\tfloat phase = time;\n\t\t\tfloat turbulence = snoise(texCoord * 2.5);\n\t\t\tfloat vScratch = 0.5 + (sin(((texCoord.x * xPeriod + texCoord.y * yPeriod + turbulence)) * pi + phase) * 0.5);\n\t\t\tvScratch = clamp((vScratch * 10000.0) + 0.35, 0.0, 1.0);\n\t\t\tcolor.xyz *= vScratch;\n\t\t}\n\t}\n\tgl_FragColor.xyz = color;\n\tgl_FragColor.w = 1.0;\n}"].join("\n"),
    shader: function (a, g, d, c) {
        var b = glfx.filters.oldFilm;
        b.dirty && delete gl.oldFilm;
        gl.oldFilm = gl.oldFilm || new Shader(null, b.shaderCode);
        glfx.simpleShader.call(this, gl.oldFilm, {
            sepia: a,
            noise: g,
            burn: d,
            scratch: c,
            random: this.random,
            time: (this.now - this.startTime) / 1E3
        });
        return this
    }
});
glfx.addFilter({
    type: "RGBShift",
    param: [glfx.param("angle", "radian", 1.1), glfx.param("amount", "float(0,0.1)", 0.05)],
    shaderCode: "uniform sampler2D texture;\nuniform vec2 texSize;\nvarying vec2 texCoord;\nuniform float time;\nuniform float amount;\nuniform float angle;\nvoid main() {\nvec2 uv = gl_FragCoord.xy / texSize.xy;\n\tvec2 offset = amount * vec2( cos(angle), sin(angle));\n\tfloat value = 0.0;\n    vec3 col;\n    col.r = texture2D(texture, vec2(uv.x + value, uv.y) + offset).r;\n    col.g = texture2D(texture, uv).g;\n    col.b = texture2D(texture, vec2(uv.x - value, uv.y) - offset).b;\n    gl_FragColor = vec4(col,1.0);\n}",
    shader: function (a,
        g) {
        var d = glfx.filters.RGBShift;
        d.dirty && delete gl.RGBShift;
        gl.RGBShift = gl.RGBShift || new Shader(null, d.shaderCode);
        glfx.simpleShader.call(this, gl.RGBShift, {
            texSize: [this.width, this.height],
            time: (this.now - this.startTime) / 1E3,
            angle: a,
            amount: g
        });
        return this
    }
});
(function (a, g) {
    if ("object" === typeof exports) g(a.require("seriously"));
    else if ("function" === typeof a.define && a.define.amd) a.define(["seriously"], g);
    else {
        var d = a.Seriously;
        d || (d = {
            plugin: function (a, b) {
                this[a] = b
            }
        });
        g(d)
    }
})(this, function (a, g) {
    a.plugin("scanlines", {
        shader: function (a, c) {
            c.fragment = "#ifdef GL_ES\n\nprecision mediump float;\n\n#endif\n\n\nvarying vec2 vTexCoord;\nvarying vec4 vPosition;\n\nuniform sampler2D source;\nuniform float lines;\nuniform float width;\nuniform float intensity;\n\nvoid main(void) {\n\tvec4 pixel = texture2D(source, vTexCoord);\n\tfloat darken = 2.0 * abs( fract(vTexCoord.y * lines) - 0.5);\n\tdarken = clamp(darken - width + 0.5, 0.0, 1.0);\n\tdarken = 1.0 - ((1.0 - darken) * intensity);\n\tgl_FragColor = vec4(pixel.rgb * darken, 1.0);\n}\n";
            return c
        },
        inPlace: !0,
        inputs: {
            source: {
                type: "image",
                uniform: "source"
            },
            lines: {
                type: "number",
                uniform: "lines",
                defaultValue: 60
            },
            size: {
                type: "number",
                uniform: "size",
                defaultValue: 0.2,
                min: 0,
                max: 1
            },
            intensity: {
                type: "number",
                uniform: "intensity",
                defaultValue: 0.1,
                min: 0,
                max: 1
            }
        },
        title: "Scan Lines",
        description: ""
    })
});
glfx.addFilter({
    type: "tron",
    param: [glfx.param("amount", "float(0,2)", 0.2), glfx.param("opacity", "float(0,1)", 1), glfx.param("colorIntensity", "float(1,100)", 5), glfx.param("alphaCutoff", "float(0,0.025)", 0), glfx.param("variation", "float(0,6.28)", 3), glfx.param("distance", "float(0,50)", 3), glfx.param("speed", "float(0,10)", 3)],
    shaderCode: "uniform sampler2D texture0;\nuniform vec2 texSize;\nvarying vec2 texCoord;\nuniform float time;\nuniform float alphaCutoff;\nuniform float colorIntensity;\nuniform float amount;\nuniform float opacity;\nuniform float speed;\nuniform float distance;\nuniform float variation;\nfloat luma(vec2 p, float dx, float dy) {\n\tvec4 c = texture2D(texture0, (p + vec2(dx * amount, dy * amount)) / texSize);\n\treturn 0.212656 * c.r + 0.715158 * c.g + 0.072186 * c.b;\n}\nvoid main(void) {\n\tvec2 wave = gl_FragCoord.xy;\n\twave.x = wave.x - 1.0 * sin(wave.y * variation + time * speed) * distance;\n  \twave.y = wave.y + sin(wave.y * variation + time * (speed * 0.66)) * distance;\n\tfloat t1 = luma(wave, -1.0, -1.0);\n\tfloat t3 = luma(wave, -1.0, 1.0);\n\tfloat t4 = luma(wave, 1.0, -1.0);\n\tfloat t6 = luma(wave, 1.0, 1.0);\n\tfloat H = -t1 - luma(wave, -1.0, 0.0) * 2.0 - t3 + t4 + luma(wave, 1.0, 0.0) * 2.0 + t6;\n\tfloat V = -t1 - luma(wave, 0.0, -1.0) * 2.0 - t4 + t3 + luma(wave, 0.0, 1.0) * 2.0 + t6;\n\tfloat sobel = H * H + V * V;\n\tvec2 p = gl_FragCoord.xy / texSize;\n\tvec4 edgeGradient = vec4(p.x * sobel, p.y * sobel, sobel, 1.0);\n\tvec4 original = texture2D(texture0, p);\n\tif (sobel < alphaCutoff) {\n\t\tedgeGradient *= 1.0 / colorIntensity;\n\t}\n\tif (amount < 0.0) {\n\t\tgl_FragColor = original * opacity - edgeGradient * colorIntensity;\n\t} else {\n\t\tgl_FragColor = original * opacity + edgeGradient * colorIntensity;\n\t}\n}",
    shader: function (a, g, d, c, b, f, h) {
        var e = glfx.filters.tron;
        e.dirty && delete gl.tron;
        gl.tron = gl.tron || new Shader(null, e.shaderCode);
        glfx.simpleShader.call(this, gl.tron, {
            time: (this.now - this.startTime) / 1E3,
            amount: a || 0,
            opacity: g || 0,
            alphaCutoff: c || 0,
            colorIntensity: d || 0,
            variation: b || 0,
            distance: f || 0,
            speed: h || 0,
            texSize: [this.width, this.height]
        });
        return this
    }
});
(function (a, g) {
    if ("object" === typeof exports) g(a.require("seriously"));
    else if ("function" === typeof a.define && a.define.amd) a.define(["seriously"], g);
    else {
        var d = a.Seriously;
        d || (d = {
            plugin: function (a, b) {
                this[a] = b
            }
        });
        g(d)
    }
})(this, function (a, g) {
    a.plugin("tvglitch", function () {
        return {
            initialize: function (d) {
                var c, b, f, g = this.gl,
                    e;
                this.lastHeight = this.height;
                e = [];
                b = 0.3 - 0.02;
                f = 0.8 - 0.2;
                for (c = 0; 20 > c; c++) e.push(2 * Math.random() - 1), e.push(Math.random() * f + 0.2), e.push(Math.random() * b + 0.02), e.push(0.2 * Math.random());
                this.particleBuffer = g.createBuffer();
                g.bindBuffer(g.ARRAY_BUFFER, this.particleBuffer);
                g.bufferData(g.ARRAY_BUFFER, new Float32Array(e), g.STATIC_DRAW);
                this.particleBuffer.itemSize = 4;
                this.particleBuffer.numItems = 20;
                this.particleShader = new a.util.ShaderProgram(g, "#ifdef GL_ES\nprecision mediump float;\n#endif \n\nattribute vec4 particle;\n\nuniform float time;\nuniform float height;\n\nvarying float intensity;\n\nvoid main(void) {\n\tfloat y = particle.x + time * particle.y;\n\ty = fract((y + 1.0) / 2.0) * 4.0 - 2.0;\n\tintensity = particle.w;\n\tgl_Position = vec4(0.0, -y , 1.0, 2.0);\n\tgl_PointSize = height * particle.z;\n}\n",
                    "#ifdef GL_ES\n\nprecision mediump float;\n\n#endif\n\n\nvarying float intensity;\n\nvoid main(void) {\n\tgl_FragColor = vec4(1.0);\n\tgl_FragColor.a = 2.0 * intensity * (1.0 - abs(gl_PointCoord.y - 0.5));\n}\n");
                this.particleFrameBuffer = new a.util.FrameBuffer(g, 1, this.height / 2);
                d()
            },
            shader: function (d, c) {
                c.fragment = "#ifdef GL_ES\n\nprecision mediump float;\n\n#endif\n\n\n#define HardLight(top, bottom)  (1.0 - 2.0 * (1.0 - top) * (1.0 - bottom))\n\nvarying vec2 vTexCoord;\nvarying vec4 vPosition;\n\nuniform sampler2D source;\nuniform sampler2D particles;\nuniform float time;\nuniform float scanlines;\nuniform float lineSync;\nuniform float lineHeight;\nuniform float distortion;\nuniform float vsync;\nuniform float bars;\nuniform float frameSharpness;\nuniform float frameShape;\nuniform float frameLimit;\nuniform vec4 frameColor;\n\n" +
                    a.util.shader.noiseHelpers + a.util.shader.snoise2d + "\nvoid main(void) {\n\tvec2 texCoord = vTexCoord;\n\tfloat drandom = snoise(vec2(time * 50.0, texCoord.y /lineHeight));\n\tfloat distortAmount = distortion * (drandom - 0.25) * 0.5;\n\tvec4 particleOffset = texture2D(particles, vec2(0.0, texCoord.y));\n\tdistortAmount -= lineSync * (2.0 * particleOffset.a - 0.5);\n\ttexCoord.x -= distortAmount;\n\ttexCoord.x = mod(texCoord.x, 1.0);\n\tfloat roll;\n\tif (vsync != 0.0) {\n\t\troll = fract(time / vsync);\n\t\ttexCoord.y = mod(texCoord.y - roll, 1.0);\n\t}\n\tvec4 pixel = texture2D(source, texCoord);\n\tfloat barsAmount = particleOffset.r;\n\tif (barsAmount > 0.0) {\n\t\tpixel = vec4(pixel.r + bars * barsAmount,pixel.g + bars * barsAmount,pixel.b + bars * barsAmount,pixel.a);\n\t}\n\tif (mod(texCoord.y / lineHeight, 2.0) < 1.0 ) {\n\t\tpixel.rgb *= (1.0 - scanlines);\n\t}\n\tfloat f = (1.0 - vPosition.x * vPosition.x) * (1.0 - vPosition.y * vPosition.y);\n\tfloat frame = clamp( frameSharpness * (pow(f, frameShape) - frameLimit), 0.0, 1.0);\n\tgl_FragColor = mix(frameColor, pixel, frame); //vec4(vec3(particleOffset), 1.0);\n}\n";
                return c
            },
            draw: function (a, c, b, f, g) {
                var e = this.lastTime !== this.inputs.time,
                    l, m = this.gl;
                this.lastHeight !== this.height && (this.lastHeight = this.height, e = !0);
                b.lineHeight = 1 / this.height;
                this.inputs.verticalSync ? (l = 0.2 / this.inputs.verticalSync, b.vsync = l) : (l = 1, b.vsync = 0);
                b.time = this.inputs.time % (1E4 * l) / 1E3;
                b.distortion = Math.random() * this.inputs.distortion;
                e && (this.inputs.lineSync || this.inputs.bars) && (this.particleShader.useProgram(), m.viewport(0, 0, 1, this.height / 2), m.bindFramebuffer(m.FRAMEBUFFER, this.particleFrameBuffer.frameBuffer),
                    m.clear(m.COLOR_BUFFER_BIT | m.DEPTH_BUFFER_BIT), m.enableVertexAttribArray(this.particleShader.location_particle), m.bindBuffer(m.ARRAY_BUFFER, this.particleBuffer), m.vertexAttribPointer(this.particleShader.location_particle, this.particleBuffer.itemSize, m.FLOAT, !1, 0, 0), m.enable(m.BLEND), m.blendFunc(m.SRC_ALPHA, m.ONE), this.particleShader.set_time(b.time), this.particleShader.set_height(this.height), m.drawArrays(m.POINTS, 0, 20), this.lastTime = this.inputs.time);
                b.particles = this.particleFrameBuffer.texture;
                g(a, c, b, f)
            },
            destroy: function () {
                delete this.particleBuffer;
                this.particleFrameBuffer && this.particleFrameBuffer.destroy()
            },
            inPlace: !1,
            inputs: {
                source: {
                    type: "image",
                    uniform: "source",
                    shaderDirty: !1
                },
                time: {
                    type: "number",
                    defaultValue: 0
                },
                distortion: {
                    type: "number",
                    defaultValue: 0.1,
                    min: 0,
                    max: 1
                },
                verticalSync: {
                    type: "number",
                    defaultValue: 0.1,
                    min: 0,
                    max: 1
                },
                lineSync: {
                    type: "number",
                    uniform: "lineSync",
                    defaultValue: 0.2,
                    min: 0,
                    max: 1
                },
                scanlines: {
                    type: "number",
                    uniform: "scanlines",
                    defaultValue: 0.3,
                    min: 0,
                    max: 1
                },
                bars: {
                    type: "number",
                    uniform: "bars",
                    defaultValue: 0,
                    min: 0,
                    max: 1
                },
                frameShape: {
                    type: "number",
                    uniform: "frameShape",
                    min: 0,
                    max: 2,
                    defaultValue: 0.27
                },
                frameLimit: {
                    type: "number",
                    uniform: "frameLimit",
                    min: -1,
                    max: 1,
                    defaultValue: 0.34
                },
                frameSharpness: {
                    type: "number",
                    uniform: "frameSharpness",
                    min: 0,
                    max: 40,
                    defaultValue: 8.4
                },
                frameColor: {
                    type: "color",
                    uniform: "frameColor",
                    defaultValue: [0, 0, 0, 1]
                }
            },
            description: "",
            title: "TV Glitch"
        }
    }())
});
glfx.addFilter({
    type: "vignette",
    param: [glfx.param("size", "float", 0.5), glfx.param("blur", "float", 1)],
    shaderCode: "uniform sampler2D texture;\nuniform float size;\nuniform float blur;\nvarying vec2 texCoord;\nvoid main() {\n\tvec4 color = texture2D(texture, texCoord);\n\t\n\tfloat dist = distance(texCoord, vec2(0.5, 0.5));\n\tcolor.rgb *= smoothstep(0.8, blur * 0.799, dist * (size + blur));\n\t\n\tgl_FragColor = color;\n}",
    shader: function (a, g) {
        var d = glfx.filters.vignette;
        d.dirty && delete gl.vignette;
        gl.vignette = gl.vignette || new Shader(null, d.shaderCode);
        glfx.simpleShader.call(this, gl.vignette, {
            size: clamp(0, a, 1),
            blur: clamp(0, 1 - g, 1)
        });
        return this
    }
});
glfx.addFilter({
    type: "lensBlur",
    param: [glfx.param("radius", "px", 10), glfx.param("brightness", "float(-1,1)", 0.75), glfx.param("angle", "radian", 0)],
    shader: function (a, g, d) {
        gl.lensBlurPrePass = gl.lensBlurPrePass || new Shader(null, "\t\t\tuniform sampler2D texture;\t\t\tuniform float power;\t\t\tvarying vec2 texCoord;\t\t\tvoid main() {\t\t\t\tvec4 color = texture2D(texture, texCoord);\t\t\t\tcolor = pow(color, vec4(power));\t\t\t\tgl_FragColor = vec4(color);\t\t\t}\t\t");
        var c = "\t\t\tuniform sampler2D texture0;\t\t\tuniform sampler2D texture1;\t\t\tuniform vec2 delta0;\t\t\tuniform vec2 delta1;\t\t\tuniform float power;\t\t\tvarying vec2 texCoord;\t\t\t" +
            randomShaderFunc + "\t\t\tvec4 sample(vec2 delta) {\t\t\t\t/* randomize the lookup values to hide the fixed number of samples */\t\t\t\tfloat offset = random(vec3(delta, 151.7182), 0.0);\t\t\t\t\t\t\t\tvec4 color = vec4(0.0);\t\t\t\tfloat total = 0.0;\t\t\t\tfor (float t = 0.0; t <= 30.0; t++) {\t\t\t\t\tfloat percent = (t + offset) / 30.0;\t\t\t\t\tcolor += texture2D(texture0, texCoord + delta * percent);\t\t\t\t\ttotal += 1.0;\t\t\t\t}\t\t\t\treturn color / total;\t\t\t}\t\t";
        gl.lensBlur0 = gl.lensBlur0 ||
            new Shader(null, c + "\t\t\tvoid main() {\t\t\t\tgl_FragColor = sample(delta0);\t\t\t}\t\t");
        gl.lensBlur1 = gl.lensBlur1 || new Shader(null, c + "\t\t\tvoid main() {\t\t\t\tgl_FragColor = (sample(delta0) + sample(delta1)) * 0.5;\t\t\t}\t\t");
        gl.lensBlur2 = gl.lensBlur2 || (new Shader(null, c + "\t\t\tvoid main() {\t\t\t\tvec4 color = (sample(delta0) + 2.0 * texture2D(texture1, texCoord)) / 3.0;\t\t\t\tgl_FragColor = pow(color, vec4(power));\t\t\t}\t\t")).textures({
            texture1: 1
        });
        for (var c = [], b = 0; 3 > b; b++) {
            var f = d + 2 *
                b * Math.PI / 3;
            c.push([a * Math.sin(f) / this.width, a * Math.cos(f) / this.height])
        }
        a = Math.pow(10, clamp(-1, g, 1));
        glfx.simpleShader.call(this, gl.lensBlurPrePass, {
            power: a
        });
        this._.extraTexture.ensureFormat(this._.texture);
        glfx.simpleShader.call(this, gl.lensBlur0, {
            delta0: c[0]
        }, this._.texture, this._.extraTexture);
        glfx.simpleShader.call(this, gl.lensBlur1, {
            delta0: c[1],
            delta1: c[2]
        }, this._.extraTexture, this._.extraTexture);
        glfx.simpleShader.call(this, gl.lensBlur0, {
            delta0: c[1]
        });
        this._.extraTexture.use(1);
        glfx.simpleShader.call(this,
            gl.lensBlur2, {
                power: 1 / a,
                delta0: c[2]
            });
        return this
    }
});
glfx.addFilter({
    type: "tiltShift",
    param: [glfx.param("startX", "float", 0.1), glfx.param("startY", "float", 0.1), glfx.param("endX", "float", 0.9), glfx.param("endY", "float", 0.9), glfx.param("blurRadius", "px(0,100)", 15), glfx.param("gradientRadius", "px(0,width)", 200)],
    shaderCode: ["uniform sampler2D texture;\nuniform float blurRadius;\nuniform float gradientRadius;\nuniform vec2 start;\nuniform vec2 end;\nuniform vec2 delta;\nuniform vec2 texSize;\nvarying vec2 texCoord;", randomShaderFunc, "void main() {\n\tvec4 color = vec4(0.0);\n\tfloat total = 0.0;\n\t\n\t/* randomize the lookup values to hide the fixed number of samples */\n\tfloat offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n\t\n\tvec2 normal = normalize(vec2(start.y - end.y, end.x - start.x));\n\tfloat radius = smoothstep(0.0, 1.0, abs(dot(texCoord * texSize - start, normal)) / gradientRadius) * blurRadius;\n\tfor (float t = -30.0; t <= 30.0; t++) {\n\t\tfloat percent = (t + offset - 0.5) / 30.0;\n\t\tfloat weight = 1.0 - abs(percent);\n\t\tvec4 sample = texture2D(texture, texCoord + delta / texSize * percent * radius);\n\t\t\n\t\t/* switch to pre-multiplied alpha to correctly blur transparent images */\n\t\tsample.rgb *= sample.a;\n\t\t\n\t\tcolor += sample * weight;\n\t\ttotal += weight;\n\t}\n\t\n\tgl_FragColor = color / total;\n\t\n\t/* switch back from pre-multiplied alpha */\n\tgl_FragColor.rgb /= gl_FragColor.a + 0.00001;\n}"].join("\n"),
    shader: function (a, g, d, c, b, f) {
        gl.tiltShift = gl.tiltShift || new Shader(null, glfx.filters.tiltShift.shaderCode);
        a *= this.width;
        g *= this.height;
        d *= this.width;
        var h = c * this.height,
            e = d - a;
        c -= g;
        var l = Math.sqrt(e * e + c * c);
        glfx.simpleShader.call(this, gl.tiltShift, {
            blurRadius: b,
            gradientRadius: f,
            start: [a, g],
            end: [d, h],
            delta: [-c / l, e / l],
            texSize: [this.width, this.height]
        });
        return this
    }
});
glfx.addFilter({
    type: "triangleBlur",
    param: [glfx.param("radiusX", "px(0,250)", 50), glfx.param("radiusY", "px(0,250)", 50)],
    shaderCode: ["uniform sampler2D texture;\nuniform vec2 delta;\nvarying vec2 texCoord;", randomShaderFunc, "void main() {\n\tvec4 color = vec4(0.0);\n\tfloat total = 0.0;\n\t\n\t/* randomize the lookup values to hide the fixed number of samples */\n\tfloat offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n\t\n\tfor (float t = -30.0; t <= 30.0; t++) {\n\t\tfloat percent = (t + offset - 0.5) / 30.0;\n\t\tfloat weight = 1.0 - abs(percent);\n\t\tvec4 sample = texture2D(texture, texCoord + delta * percent);\n\t\t\n\t\t/* switch to pre-multiplied alpha to correctly blur transparent images */\n\t\tsample.rgb *= sample.a;\n\t\t\n\t\tcolor += sample * weight;\n\t\ttotal += weight;\n\t}\n\t\n\tgl_FragColor = color / total;\n\t/* switch back from pre-multiplied alpha */\n\tgl_FragColor.rgb /= gl_FragColor.a + 0.00001;\n}"].join("\n"),
    shader: function (a, g) {
        var d = glfx.filters.triangleBlur;
        d.dirty && delete gl.triangleBlur;
        gl.triangleBlur = gl.triangleBlur || new Shader(null, d.shaderCode);
        glfx.simpleShader.call(this, gl.triangleBlur, {
            delta: [a / this.width, 0]
        });
        glfx.simpleShader.call(this, gl.triangleBlur, {
            delta: [0, (g || a) / this.height]
        });
        return this
    }
});
glfx.addFilter({
    type: "zoomBlur",
    param: [glfx.param("centerX", "float", 0.5), glfx.param("centerY", "float", 0.5), glfx.param("strength", "float", 0.3)],
    ondrag: glfx.dragCenterPoint,
    shader: function (a, g, d) {
        gl.zoomBlur = gl.zoomBlur || new Shader(null, "\t\t\tuniform sampler2D texture;\t\t\tuniform vec2 center;\t\t\tuniform float strength;\t\t\tuniform vec2 texSize;\t\t\tvarying vec2 texCoord;\t\t\t" + randomShaderFunc + "\t\t\tvoid main() {\t\t\t\tvec4 color = vec4(0.0);\t\t\t\tfloat total = 0.0;\t\t\t\tvec2 toCenter = center - texCoord * texSize;\t\t\t\t\t\t\t\t/* randomize the lookup values to hide the fixed number of samples */\t\t\t\tfloat offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\t\t\t\t\t\t\t\tfor (float t = 0.0; t <= 40.0; t++) {\t\t\t\t\tfloat percent = (t + offset) / 40.0;\t\t\t\t\tfloat weight = 4.0 * (percent - percent * percent);\t\t\t\t\tvec4 sample = texture2D(texture, texCoord + toCenter * percent * strength / texSize);\t\t\t\t\t\t\t\t\t\t/* switch to pre-multiplied alpha to correctly blur transparent images */\t\t\t\t\tsample.rgb *= sample.a;\t\t\t\t\t\t\t\t\t\tcolor += sample * weight;\t\t\t\t\ttotal += weight;\t\t\t\t}\t\t\t\t\t\t\t\tgl_FragColor = color / total;\t\t\t\t\t\t\t\t/* switch back from pre-multiplied alpha */\t\t\t\tgl_FragColor.rgb /= gl_FragColor.a + 0.00001;\t\t\t}\t\t");
        glfx.simpleShader.call(this, gl.zoomBlur, {
            center: [this.width * (1 - a), this.height * g],
            strength: d,
            texSize: [this.width, this.height]
        });
        return this
    }
});
glfx.addFilter({
    type: "bleachBypass",
    param: [glfx.param("opacity", "float(0,2)", 1)],
    shaderCode: "uniform sampler2D texture;\nvarying vec2 texCoord;\nuniform float opacity;\nvoid main() {\n\tvec4 base = texture2D( texture, texCoord );\n\tvec3 lumCoeff = vec3( 0.25, 0.65, 0.1 );\n\tfloat lum = dot( lumCoeff, base.rgb );\n\tvec3 blend = vec3( lum );\n\tfloat L = min( 1.0, max( 0.0, 10.0 * ( lum - 0.45 ) ) );\n\tvec3 result1 = 2.0 * base.rgb * blend;\n\tvec3 result2 = 1.0 - 2.0 * ( 1.0 - blend ) * ( 1.0 - base.rgb );\n\tvec3 newColor = mix( result1, result2, L );\n\tfloat A2 = opacity * base.a;\n\tvec3 mixRGB = A2 * newColor.rgb;\n\tmixRGB += ( ( 1.0 - A2 ) * base.rgb );\n\tgl_FragColor = vec4( mixRGB, base.a );\n}",
    shader: function (a) {
        var g =
            glfx.filters.bleachBypass;
        g.dirty && delete gl.bleachBypass;
        gl.bleachBypass = gl.bleachBypass || new Shader(null, g.shaderCode);
        glfx.simpleShader.call(this, gl.bleachBypass, {
            opacity: a
        });
        return this
    }
});
glfx.addFilter({
    type: "brightnessContrast",
    param: [glfx.param("brightness", "float(-1,1)", 0), glfx.param("contrast", "float(-1,1)", 0)],
    shaderCode: "uniform sampler2D texture;\nuniform float brightness;\nuniform float contrast;\nvarying vec2 texCoord;\nvoid main() {\n\tvec4 color = texture2D(texture, texCoord);\n\tcolor.rgb += brightness;\n\tif (contrast > 0.0) {\n\t\tcolor.rgb = (color.rgb - 0.5) / (1.0 - contrast) + 0.5;\n\t} else {\n\t\tcolor.rgb = (color.rgb - 0.5) * (1.0 + contrast) + 0.5;\n\t}\n\tgl_FragColor = color;\n}",
    shader: function (a,
        g) {
        var d = glfx.filters.brightnessContrast;
        d.dirty && delete gl.brightnessContrast;
        gl.brightnessContrast = gl.brightnessContrast || new Shader(null, d.shaderCode);
        glfx.simpleShader.call(this, gl.brightnessContrast, {
            brightness: clamp(-1, a, 1),
            contrast: clamp(-1, g, 1)
        });
        return this
    }
});
glfx.addFilter({
    type: "colorify",
    param: [glfx.param("amount", "float(0,2)", 0.2), glfx.param("color", "color", [255, 0, 0])],
    shaderCode: "uniform vec3 color;\nuniform float amount;\nuniform sampler2D texture;\nvarying vec2 texCoord;\nvoid main() {\nvec4 point = texture2D( texture, texCoord );\nvec3 luma = vec3( 0.299, 0.587, 0.114 );\nfloat v = dot( point.xyz, luma );\ngl_FragColor = vec4( v * color, point.w ) * amount + (1.0 - amount) * point;\n}",
    shader: function (a, g) {
        var d = glfx.filters.colorify;
        d.dirty &&
            delete gl.colorify;
        gl.colorify = gl.colorify || new Shader(null, d.shaderCode);
        glfx.simpleShader.call(this, gl.colorify, {
            amount: a,
            color: g
        });
        return this
    }
});
glfx.addFilter({
    type: "colorIsolation",
    param: [glfx.param("hueStart", "int(0,360)", 180), glfx.param("hueEnd", "int(0,360)", 260)],
    shaderCode: ["uniform sampler2D texture;\nuniform float hueStart;\nuniform float hueEnd;\nvarying vec2 texCoord;", glfx.helper.RGB_HSL, "void main(void) {\n\tvec3 color = texture2D(texture, texCoord).rgb;\n\tvec3 hsl = RGB_HSL(color);\n\tfloat gray = 0.299 * color.r + 0.587 * color.g + 0.114 * color.b;\n\tgl_FragColor.a = 1.0;\n\tif (hsl.x >= hueStart && hsl.x <= hueEnd) {\n\t\tgl_FragColor.rgb = color;\n\t} else {\n\t\tgl_FragColor.rgb = vec3(gray, gray, gray);\n\t}\n}"].join("\n"),
    shader: function (a,
        g) {
        var d = glfx.filters.colorIsolation;
        d.dirty && delete gl.colorIsolation;
        gl.colorIsolation = gl.colorIsolation || new Shader(null, d.shaderCode);
        glfx.simpleShader.call(this, gl.colorIsolation, {
            hueEnd: (g || 1E-4) / 360,
            hueStart: (a || 1E-4) / 360
        });
        return this
    }
});
(function () {
    var a = "bgy black-white blues color-negative funky-contrast googley high-contrast-bw hue-minus-60 hue-plus-60 hue-plus-180 infrared inverse monochrome nightvision posterize radioactive red-to-cyan saturated sepia thermal".split(" ");
    glfx.addFilter({
        type: "colormap",
        textures: a,
        construct: function () {
            for (var g = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAICAYAAABJYvnfAAAETklEQVRIS22TW2gcdRTGv5nd2czeN8mmm1vVFR/WxocYKVEQrII3qC+2FaSKbcEqpoJCKdRKIFgQfOhDH7y8BHwVoQ/iW60taY1tUxtSrbdoQpo0lybbzWZnd2Zvf8/5z+zsrpuFgWW+Pd/5fuecVSDeEfjmNnB8ErgD+gToCUFVYlDQgUrmEWDsCnDmb3rfRk+Q3kegkK4qnShfDwIf/AhMGKT57VpESW+nh/TP14GPpoC0KmuBsOvN9aVDpI0vOt4h8g7LWtZUJY7iwDlgptTgTbkcb6n7vgYKmpPb9uZaBZ3wqF0wy1+RpstcnFttqFWVLnqX9ArMMbgT3gGXAdQ4rOo4UPW1gNcbfOk2qIN3UKMuGaBQOtsUjoda8/bSb4zSGSdcMzjDeak+V/zMGWoNvO7t14eQ3nrPWRgNvNGbaiOdr2N5ec+24BqxxXrfJw1hUd9ah9yax2nuD+/Bevqgs5XmyXrJINp1BEtLw04DDshbI3B6NE8fNTiKhblU08Z5qAwejL6EttAgFucH3Wti6Bp4LPE2quS8cocA5Nbq4Lo2gHBiP4rmItZWXmsBD7fvg6YnYRq3sLHxoXNNdjYeanvPCCoVA4XNn6CoyqNCgX2uDM5bC4SeQSD6NKzCLO6tHW46KRv8MOAJwdy6gUxmtB5OgvdK8JK1hnxmArnCeNPGg9EXCfxxWMYfMLIXYJV+cM+Vw9XAza3rMPNTKJZvyKFwrjZtFyKJAxI8n7lE2r8EMisvlWsbwfPZCZSrKxBiwx1qHXwSpjWDCumKV90rag0CgWEE258n8DkYmxdQrixRg3nZQOOTir8BVesk8Gnkc5PUYBkQWdmA9VjvMZRLaRQyV2AVb9sNFIU2Hoc//Bz8kSdh5WfJ+zxpqzKgl7Yrh7rjCKDqcqgF4xppq6iSrnkehs+TRLTnLRStuyjcvwyr/Jesr4oV6J4hhGKvwBfcRRv/DfnsJcq9gopgfRUB77OIdb9L38swN3+GaU7LvlVZvwbFr50QAf9uBDteIPB55Am8VFmU4dnA732KwA8SeJzC3ZTgrNkBVhHUXibwkRZwDiCoQWfHp9DDu1vAuVaIe+jt+57AfeT9C4FfdcE5nBDr2JmkK7CWCXyiCZxrebv9D00T+O8EfrEJnGv56d05ReDXCPxmE7jUcR/KA8msKBYWYGQuEvi8C2YHoAYPUoPcDPJbl5vABbhBGj39V+V/ybJ+dXU7HDfIIJE4T950TdW7zlDX5OTZG9ikAX2LQo7B61uR9RSO9WjgC/qb/Ck3Zg+17g3kEGz7ZBtw2xswEPCNbgsOZNHdXYES1s+KUmWhBdw2yJHBWAM4BZfg3CALXTehVE86OkPZW2Nw1lMpFfP/HPsfeJo01g3sO7AD35171T3HRvBIpIjjJ1M4/fHwtuBDT/gwenoI+/f2OwO1L6IG/uahPpwaG8RjSa87cAHubYOfODWAoyMp/AcbUr3EZfSLKAAAAABJRU5ErkJggg== data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAICAYAAABJYvnfAAAAcklEQVRIS+2VwQ7AIAhD4f8/GiUZxjBK3DjswEg8vbRiJcpEJHO1Lf4D+HACRISY9Q7iqnDVaiH/xdEEHBuAA2R6Y6jBCt+1kf+N+wAeG7gAMr1nvsEKj7S7P+QWwGuDK4BMj5g1WOHV15vn5r1/ge4BDJuRXu/4rz6bAAAAAElFTkSuQmCC data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAICAYAAABJYvnfAAAAeklEQVRIS2NkYGD4D8RYwX8GYQYZ4Yu4pBmevGVk4GSdiFP++28mBkaGDpzyIPMZGd7SVJ6ZUROn+X//swDtHw2A0RQwmgVGy4DRQnAk1wL/g3GWAf/+MzMwMc7EU00xAquReTjl//1nBOo/gkceZP5fGssL4DGfiQEAQpWPHrbb0F0AAAAASUVORK5CYII= data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAICAYAAABJYvnfAAABbElEQVRIS+2TvU4CQRDHZwGNNja+iU9oiImFiTZamegj2EDQeKAJH4FGVCz8iIlUEhotFBG4HX+7d8DhC1yhkwx7e7+dY+Y/s0axiYg08TK+Kcrv3FSeZMy2hZ/j+QUqYvXY86ZRz7d+xVt9SXCFO5v/h9VsqtxoP1QbF1gxIoc8d5MC6KOECX5A8r0kt0cy4V2L2DLrNmy4EP8MR0AEcjyPu+9NTREgTW50Z+jbcU2CNdYzCikkEwwf/K7N+xpeooDSAt/3uyviq3gR7iZhVqBtx9xKVawU/aTMJ0Dtcqrc6Manz6aTFWngF3Gh0y69Du59go7X8QoFuDOua87ePvb8eptDwIxKgJ/AZwIMLv3jTW5M/EQCE8LdzEWmX2upcsqJBLijEY1Vilty95m7HRfR7UcT0KFrjRUE4FwtI7Mx7r3vRgLQ3TqrG/NT+HccPw4DVyZ8BB9JgHQFzo6mAsh6qvxfgP8J+ONX4Adw0T2ZvsIGMgAAAABJRU5ErkJggg== data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAICAYAAABJYvnfAAAFIklEQVRISy2VyW8cRRTGv+q9p6vtWew4Hs/m8Y6dsd3eZmwCSUjuRBFCkTjkwok7/wpnJMQBLogDnBAIFBQWkUgBQhSQyCEocgyOkYCIKG5+PdjWN6+6vlre+6reKyMp9/hJwQRYl6OL8jRQqCUFMjpULF9l+qbAOu1zcNtws0P+VyWyOg1aipSBPZUYF6tD2+iGRlTRpKpaABk7bTO2B6Zou+YzjZqqGif84LiqDfoX4SewpeAHeMaC53KrnadW28epZli7CsbTIyXGVx1flvNQ/aeBsicBfMC+vtqnKirlwj9p5VjMl9aeGHX/FV4K/zzlgSONekaTrtG66+gCE3eOQy0882WeHqnkeaqBpuspcwOdNYE280BdYP56IOtFqgepprGZGyFeSasmRJCSzOObrG3VCCpaDAnOSbVlUi07VpO03UfXVfYRz69qOayp71W1DjcPxl0E2L+jMms2Q6sVxg28VBmYdkJV6B/bP1Lqumr4gXo+AuDfmodvXqgEf1uPRrHSFKe8SozbtHugw3ccFAKUnTzioww5FTtaDz2dDwJth6FmAwS4+1g28jXuO2phN8JAe3AZtsM48/1DjcSxpqJIMyALY+1EMc5EakQIcOtHlaNEzYgA0hq8ZY1US9jTWPPtNxqDb0WpehYBkopWac/CjTEnvPGTxlmzydqrFgESq7UkVZvvMvtUrh+qgs9NsJaEGliESPDNhirh79TnViOhmM/t5sh3Em6CNWolRmyLAPNBHgZGE4HLKTrKmPwCkzexM1jz5YEiFm3BF8jYZJf+NfraBf/pvko20qyN1Q08bdiStvhexjbSWObje0pxfA4spym81bod0Tzt0wRjPrypCn3z4IxNNajVhnYajDHGvH9HE0nEeEQFgwrpUxtRiz1G2dN790B16zPfQyBf/WqglVqkVpUbwPfo26HGCXSWoDMrDapGi6AB4ppBgFdO5SLwJpgOXa0S5FmCK4SYSTnhr/6gQBS3wdECAfbgBwTeg2sjhvnid/gIVWOthD68r03aS6ABzCf3JYLLCCbDrnF7egQ+VwiQjsh8dHvI7xDwFn2bJ0J1GDMU4IO7w/X3WKuPABuIcWZsZLh2uRD4vQM5icehedpNi719LSFAAwFs6sm847G80V5qODhxAEYLVUd1gi8NBXirl4vrL8/Reeym52qLOrAee1xDFrj/j0SO1OCfBxl8gRWuVycmRe79DR+pG4Xao05kvq8Vcm+RvkZMEbxzAJ9oAVyMOX3yc5Fc7ZICk1xxc/tnkhFhaL8EdmIKHGPatGuMMbd+gS/SKmJ+rK0w0hztepECfJuvOQD8OIuPl/B5i0Po4ludQytS19wg4UmBi7HRpYgaQCp0sKcQogSMvruQU/glgj7noBLYAsvG0RwBmz+fST6LOI4u09/H9sAC/DQBmyNKLA67nq9rjqdNsOS46hrykkJkDhHIK1GEEl2lGGaOr1knUAM7ybf5/QG81SJjrriWImjVppDVGVMr+H1uUFFcWeuyxy2g3QHj7DOKNQ8P4Tl98DI+9EH7pGgnHIZ5gO/UuAvgsv9/EWxw0JWiCIaFAPkVIij+DNVfenH4FJInueGZI27DDL4LvAp2wQro5o7aWIcXAYWGeEMuTxzCYZu5O3w2HVPMjXiUSnoTbNJqM7YOxnlFHEOK0d/hMX0d7IIhx7FVsEa/wZM2rHEN2wdN2sWzbIHREXzxbHt67cTWsWXmIj//hf/cAHCVr/7Jcz86nCX9B+yIwCAYJ6H7AAAAAElFTkSuQmCC data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAICAYAAABJYvnfAAAA/klEQVRIS6WVLQ7CQBCFZw2Cy6CxKASSIyAIByBBI0h6AAwW1wtwARSKHgDbhAOQoJa2YZtheLPdn8p+eV9n325bQ+urJXDZzaG7a447hCmHu6zm93HOUD6aywKiBaIgX14yuYAcjrLcr3JXQLLgW4Avr7LLi+ix70+TPGomgNv5GJ7QLttcQ9zYagFfgVDB0AMQd25twBzOs8gv+V8BsQK5QF9eMjlgDkdZ7td4X0CqwBWA8u/tnUbVlFR3wymR2zbbfqSLCf5Ih3IqZvgvECoAA6xuNZ3KpzqgG15bgI9zhvLRXBYQLWAFLKsnlef6Z0f4Dkm3XICPI8bzqfwD3FHc1cBpDLIAAAAASUVORK5CYII= data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAICAYAAABJYvnfAAABa0lEQVRIS7WV4a1FQBCFKQEloAS0QAsoAS3QAkpAC7pCCd6bm5zNWLv25iYkfsiZ3Znz7eywLcs6/1/tE8fxR9v3Xbw8uKoq8YmYbdtE7DiOl70phutt295yc70sS21ttJfruk/lGzX7GwA687Q7ASCdQ4KB4ziseZ6FjhhusO/7i04xXG+aRmkCNQVBYDT5FGAEQAm4QXkzAOCQyACZpwcA+B7c4DRNt87ietd1Ai7PjXzo0F8pGAFQi6F4VZI8zy8G0OIqANwY4tZ1FetJlzsJVwiGUQPWZ1mm9X6ep2XbZFH/GAGYyKZpqjxBABiG4dGgDEDupGVZLlDkTiqKQlsiAfU8710AURQphyMA0JBTzRCcIL8C/JShqwDwTqrr+maQd1IYhu8C8H3/YxCG5WxUoG6IUqEYgqoY0gkA1wAGV0UHAGuSJHkXgOM4WvOUmVqU/x7laniH4GR5DM0A1e8VMRwA3XkZpAnAHyu6DAchzeRWAAAAAElFTkSuQmCC data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAICAYAAABJYvnfAAAE4klEQVRIS0WUTWhcVRiG3zMzmWSSpklTU1MzM5lkfjNJmoptBFMQrZYkTREVYzcilKJWGom4qYgiglD8qa0ibpS6UBD8wULtzoVVxI0IFrXJTGpEqtid9DftzFyf79xJXZycyX2/c+73Pue9x0kKChpSQdnmsN85xpD6mV1uq1y1oYJDt9Gsy/s5p+Suh6XluqLL8nouwnNGkd/5SE737D8kVeuMQPFzgXJRnjNsLlL3xCsf+PWqNLweX5EGY1llGQVqXvvoG/SG123upKblTymFnmN8/v159jbN9gjUthxo3e+BYn9L/eg/XmgP37+2B+t76CWxEij6j/CXiweR6nXlMVzEkBkrMuz/pAdwB38HeGY6z4O1OatkkJUrbkPNKE4TZjqEGQL0gKb2agN6Fw3GabDgmnpzvvfpF+hiULfQ5HqDgIGCYz16nvnJIx9yRBlvcjP6unMNtVCTt3cB+PUvv0UfbBqsK4XWgcEWIOQB/MUZXArdH0JD7Yw+atoZVuOmpnqCSOWS3PKNm8ZDADSPifTUPo2oT5FKqBcAUMB4odEEUL5bafQyGEreNIACAzAYAizs0Hp+bTdIlbrXSzzPNYGmpx+jwbR2ACGB3mIg/fvDFO08+DKABjROfRd6G7rVWBJNf+rox6wf0K1ASqJ3olkKYgzb582TP6ADkH5S6H3onaShDUhW4w7OZ4IoAAyCgGCNhzG3BGR1//w7NNyjaGVVkSV0A9AIISTrWXU9tKAJzniY6uhSLQTgk8ILAeFKs1rH+jvRy+xdZJSa+6csQfmdNLdZk0DYgtbCSa3p1kd6ej96v8YwOUEqWtFjJGEtkfcdfBVAaXWxfpb6BHorRmMYLAHowNFPPCAbD9BbJ3q7/9wASSLdW8fGgpgBWCIFS1fkVgxC5uYJHjh2moY6AXAVSKvU1FQ0AHUAAWDy0HEaX09Nn2IAilSB4FNiADC450XdxfoxTFpKouhFSxBm06YX9tJcJzWb2WcAkBmfJDM4gCGXn0XfpFEATvBkxCBhcA1AZvqAB9SG/iApGke3pMU4adtn1/wbXjcAe9h7G8/agBBvgnQnv5oMYtVLnN5FucplucVr0h8GIeU/gSOn/qXhDqhf8RAc94X77YbydQzWstp3/Cea6tBw0OtTEjXdkgCEFJ/J2HOf8tIODGzyKYlVaoA0HQDs73YfRuvgE+llTlEDJK8P0S56wRLQAbxeUpSixiCFSRoyQLlH0HsU0W2aY8dxD2noZpIGp59F72MktRvdPsUx9Dh3UgxQ7uzilE9AFAiOFERIgX4Fwl81j+DEUlqlIAHRy0AiIdVriiyuUoNeG9Th7+o0lwDSRhJw1QOIVEIIKUzMvVfR7ZzPsDaqHPR7Pcp9YhDS6G7hlB5l/Rb0UUyUaDJMUj0EMPM2zScwt1Fb0cvoZRRL0pCtzz/jdYOwl5Mep2tLSYkau8hd/nG0bg9hxt9FA7wr4yFakly9MecvQVUuMpirADjLOIPJC3X90thJcSsNX5aWGKZXALR4Xfq5ps8ulDHWygs3hPBMw6SAoLM1vfR1AuIGoJs6u0zZ1zQMCEgz754nIa3UbPCX7XCQJIn/627htKbQJ1g/ymcygklLiQOgzMDM+5hro6abhPSxj9014ackalz+ea8bhGn07ej2qRlEg/AfgMD6H2ekyGsAAAAASUVORK5CYII= data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAICAYAAABJYvnfAAAEyklEQVRIS1WVW2xUVRSG/zOdzkynM5SmpdDSM5dzzp7Ti4gSuYghvsjlSY3RGkMCPpiIIbxI4oUHjAZjTNQQ35UQEwyRN2J4NzEx0Wh8I1GghSqoeEOjIdA5fmvPacGHxaZ7rVmz/2//e00gKUuifiVRTS6uK2nXe2v+t1v9rQqaV9IsqhPX7tRFdUXU7XlAKpIX0WkU5Np5H2pb1Bx6ZqNKukL+kg+3VnKOGvo3qDn+2j5VtEjuYh4L6owGcklVIXWffvSOqvrR5zJdyGuuyFUyhRuqOv/lOdV0Ld//Pl/nqV1UyL9LWlCffsr3lz9v32VnXlSAokwcsJ3UNOVWKU0IZxBsXaWw+BUlBaKfvTKABlir/D3IOqhk6DpgAgUZANp97JfZH2CtAmgQQBPqRIGK2QKoAdAAQFxRQk2LmoN7dyttSaUMSNkFjmwgqWmXATSg468fVtoMVOkuKiNvPZRdlFsPAFfW2VMf+nx1CUhd8l1A+bp5heGSzn/9hdJQCpauSksIt7A63+cSAPY8AgAOp+uaQPBMUte0B1FXh3XX9J9qcsAASClfmHIzqRtUJ7Goq125prgVKAaSi4sIL3G7gIoqHoQb6vL/wEPqOcnqSh5UBIjdW2fUacrnPSRzCYKSdr9a5A/uexIBvc+XyGcIMze4sAugko4fOwoMKeU7yhlOAo7MKYgLJ7s6e+ZjpRP0bwfsWd6E5wDoE+jQ8zmAH/jgDQlRD+GAGZwwzfri42Na3cjU5fBlXdU9yQD7Jt4cU9OeDXU1aZ4AoQDITlICUIXVoqqp2m21EBRR42JzSJGVJ9cGFI6Kh3EDABwCUlfwPVyr57gIgbu2bVIHAD6f3IGU4JIWfV54dq8XuJzvOaln8Uajq/feekOddQBsAyEp5BDuBvD+25k8+cuEvZV/6YYLALEFB5x8abuElcxSvZrr2gaAWRwwA4DDT9yvYW5/tkkb6PbzXqdwSgdQU66qR+9tKkR8HHPzHtJlnNW/AmrDUFmTiDFAvafWlzsJULipMzqkaJJ7IW8CLJadFOG4XTu2yY3bkwEQLrF8X+6kFmAPPrdfyVr2cbHlEw/BdPSeUqBzZ3AA4vymueBX4qZ3ggCgD/ZL62/1hoZvbAPpd4bUoDYD4NSrc5y+oI1A6gKgi8AqQ2nWO2VALz+1U2vscNSkLYM0z9Bc9ACmcMrcplmNczuRF0+sOAlIgNoCgPH1AfOCI5GP2/aElp1UVLpmRM0cgMMhDtDLTopw0u6HtysZYx8AzgDZReC0nhabAd99AwCb0ADwEMwFfxCIxgn67Jg0AZAVADbRGSj6m3xNOnHEAxgF0k363KTxbQQ29Iu24oDTRw70AJlLGksegA26CpDMKa88/ZjGsXeCMH+43EkGacqVtH/zJo0CpZU75P9OKmrHuhGtYQbYM4sRaLPobifNrhtTyC+PzSmbIwmRJgA0J3COQNmNHMDyM7Ab/pn4i7gNj9PSWp5F/lNnvxg9p1jNP9LnJ7xAjRskA3l3n9+kk+/6/DACd0ze8rPEAHTpUwP2J0cP+/x95Gfs9iaBRJ+MPmXc9ubeOY1w+LYN2VycQbLzFOlx4MGtGuZ2GzaI+fwKgNxJO8MxjYwHCnkOMaB93upyJ/0HOBGQJypfZzsAAAAASUVORK5CYII= data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAICAYAAABJYvnfAAAElUlEQVRIS02V22tdRRTG125NCYoiliRNT25nn71PbkYRLOINXyxpUkEpBd+rUsWTFlPEB198FjRNpLSC/4AXBGljowUfpVopatKanHPS9GKorYqapiTNuYy/b/ZO0sAwOfOtWTPrN9/MDszMWRSZb/nYLEcfp7/j2KK40cqEWJRjHF294tRHse0Z2mUX0K+RyOIuxrL0m7GFQ6/YLPqPyEs+TwadmDRubGLM5tB+RfteOXyeHejt9KGd+nrK5gJnMwyfI0a9/4ua0dtstjhvs4HZb2jnGf5ca2zkabKaq6Chk0Nr/MT/p72exAV5C11JPzc2LQCbIPJxg9WBU6EtMf7POhwB4/dw1Gh15l4kx79oSx6QAApSZIeHnrBa3O4hnCVmOQpTQAnkj0ZeRW9FvwuCB6S40KYmxq1KsSpyJi3AQ0gBlSe/sWrc5CHpIH5B+nQDQJu54gL72+7Xv0COafpz6FNpTPCC7XYlhDKtpqJy6emlQPbu6fUbLTKhQmHL/P+XiktB7I23mWNOnd8VgNyhv0X/B2M36N+K7kULfROkVQ8ysqvk/488xwaftHq+DQhZf1LTNOllAKwy/0zhNQ+oFndyiuaL/IGYWXStuTA+jtYMpHZ/ylpDED7TCbOmm/yWvonYjF1E1xoCKUcKQjBqr7vSlgTAPE0A1jyI5CqMjrzo7V5EE4Qq/6+w8espoNGhfg9ADpKVq8y5w8ZvM3aTfn++0SxkI+g1rk6V3Gv0AiGYg9n7zXV3miNvDcDa4Bo5VmjSDw8+xdyMB1TL57xT5IAV4m8Rc+zNg+g7OLyORPdOkJsEMmeTRyc2rks9n/VOki6QghCcsPcBEFhxKwAAcVWDYc4qYWSrbOj42BFghCZIglBGr7GwCvib9oEAEe9YXADkpiqFrwHgNv2B4X6zbKLXyechAkCQlePp+D5z2S6uTaLLhZpfEUhAP9P1oLmedorMcooxa+cSSAAQ6AO7n7V6904AdnkA67reBDnovcIbCQAAWT45CDlFOQQp+M6+9A4oNlAcEC5RwCJtSwcbwgVfnDzuARQFKb0qZRJI00l9cvQIBST33rsETb0Kkf7uyEtmndznnggICQCdQo0CKhT48vCA1123IMX+PVl3kq7U4/EDZh0A6CEm1WuMy0nSd2W2m/Vl0ABE/rp3UuydIoj7nn/OrJtHVQ80V0IPtPYhXdcl+N1+diquvM1sDghywQIbvEHb2pazs9PcIU64BJxielV0ygLlgHD65Im0wJDCAu+A9abH8+NxHARMFWDdsQcwl14nWf6dAoBYx/UKQswJRR6AYuS0/UOPmMvwKPYlG9e9v9tJj0YPme3ky9KXZf6mvu6k3pYWs4FW1pbLdK31xiXXWy7gvJbdIgBKXNVSg/MuEITLbOBP2pWbl7BwaIv34ADG/XtBm2fmAgnOz5zxBVpvzq6peMWoT6/DV6dwUAadAowNKkYOUYxgfDj+tlkrcPoTQNrkFcblJIEoHNpn1oL2MPN70s1zwpe9kxyf4cfMmiluQPP1KU8/43pIiYnyAGjCAQPE4EIPQJ/x9A37H9Jl4SYYwSaSAAAAAElFTkSuQmCC data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAICAYAAABJYvnfAAACYElEQVRIS51Vu1JUQRQ8s+wuS1laBgSKhQr8AJGvn/EH+AJ/wBwDM80slKJICYgMzC1U1BL/Qk2wlu57pu85d3ZNDC5z7+np091nBihmNl/Hj008Ozaya1hXu6d06779tdtY7+F7s9aITVGbYX1pl3YH71t4X6/1jL8Cfhf1HTyz2ldc9n8D/D6wjdp7mjSIHwPfgq+bjS9pnMDfdsOlL2qQ/x74rSW+hJddDGAbAtcrgQZoVEZO0YABnOBD0craB+AMrrrCaf9H4GtdP+fJnL4/Adf7kOseiLN364vf3O/4oi/tP+v6O54H47Vi5amN5mEugrcCy8yxqQf4l4FiZzjBbDAPUgGHNQ04ArZDzQOj/mIwz8F9n9OA+O2DKTaph1L2bGWeT1xEXbH/ERCXvb7UAYR4mJsAP683IIbgxvlkXD1zb4YgXzdEq7SIf+37D4PTG/uXZzbubkA+RYlzlcG49m6QZHLOu4Diy7wmXGDgsj+N1jy/yc/afjJujjrfml8R1TOeg6vuPZwfuuFbGcpzm/S/Ajn4sMHw1HRLFgUiOHuNYeJ7cwMioJv5AYO6jjk4a8KzrzyAMfZc1AG1wanN2kU34MXg5HJPeWHT/gZQlNPi6g1cIJvWYNice35CoD01x1yUuDhDrtkDqB3Z78GJh3axR0AO7U8KEL6o/QT8dx1ft8Zxaj8Etob3t8BjaO6Je9ibeHltq/NlwXex4Qb+O1CgPTU14B+ToUAEfwz+DPwD+9UPQINhcIpz2Ac1gIKzt3PdqALqQBSc3BGCcoDBjeActuE5hr4OIwdfqfgVGtt+FRgQnlgAAAAASUVORK5CYII= data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAICAYAAABJYvnfAAADXUlEQVRIS12V8U4TQRDG56gan8On8WV8GZ9CY2KMRvEPE0PUPxBFQQXaQu8OegUhIK0Vabnu+H0zu9fWJpM97rezM/PN7JEpfnsiQvsG2xSVZ1jTT6UEU9mN/DPW5ws8GJcFrvJikeuR7GVz/w2c9XKJD8Dpr7KN959gc64S9NT4Djjz24C9wnP6BR1Z/B3EcK7g81/QmwWu8hFo1bCfkWm31gMKYEFchDXAw3iGaiH75BbE+Rvwk8RDKft4T/6DReD5NZ4vFng3chbBIingGO8sjdCXrsVX+Ivxp7BJTFL1ZIlv4YwnYLMmv0twtfwZfwvvH2NNEikEcM7znT9aEmB1ihJF2thgRcK+wqiU4FCd5ZJj7eDP3SjSJp45CV5AAa7SJqc/9pB9SQVAoByB29ZlJuldolDufyS9GH/OXWh2ScNAetjb5hTGIpnb9yb+BTjjk7uI63jm6udPwcOS/7rlkSbg4bWy250YhIlSBG4a8wAIcBgFoMoMxMPfNgEKXAKN/j5JTG4tcfiX9I8C21XD3+8aXjqPXUxX7X1MUEMF7gWyi/TnlHxo4p/9x33K5vwa+UEA8/UztrEmnumDv9rHS44pi+c4spsshFdD61zIOQHkXNN1oXDkR8k/7knfk4HxHngUOJ7DKeEonhovzd8aECeJDeCUXXAC68PIvXgKSc5vxaU16CcaFJC/F+gNVPtWjIxfOYcIe5wE8/dvwW9YpvevtGIBK54kBaAYHMsKdj7pSQXWCBSL4XeBe67B+5HTnwnaymSZwNQF5PkMbgKDsxgTeFqYf+OXrhP25MZLb8BKOtfvOyelMH4M/wB/FMc9jQhik6nTMfjMecaVIgWbYjYw03t/dHALBTIJ2D4Njrz37FB/lEtF3mISYBSJAsHY4TPjKKzl/mQMcoCVAUZD8NvOmWASmgJyz+SyMN5BDBbpQs0nUYcQiP6IYSLERpnAiKPDATg63EKByJGTQKFTM3U4BK/hPwPHChGcsxkKAQQCMPG7sJjoAf4ukMQZrDzNUWhM/A73uEgU6AR2/AsTwqlhQiwAnMX2sMcmaJy4XyMTAJwxSo7hBAKZv39IuSahTaAaAvGdWeRxSil2jf8iFca7Y+ZF8Xth+cACLkolN3iuzbr4/+GcH0aRfyr+o1L6Opf/AAAAAElFTkSuQmCC data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAICAYAAABJYvnfAAAB00lEQVRIS32V4W3CMBCFkxGSjEBnoCOgroC6AVJHQOoGtIUFQKQL0BIWACVdgLZhASroBBU9O3nmcr7kB3LE8V587z6bMAiCSxzHQRxFQZIk3vo0ndJPgtb6fJnaekgfTf+WZa6u+WzzolGXPp9l6dW5z/F0Vuvw+bPVan/qSs1fuho0AdiA6JMo6+RlSo3H1lyrL9JXq8XLpc9qnTk9Nsl9dsVHQy999t+lp+c+P+dfVQ+fsHfTswG0TXC+XFJjSWuDEwoIG9ZCep7NiB4TYFR7EGX0bDzNagKCHhvnPu+bTUMvQzIBST0P6etwUPWOiP5t3wWgkWAQ7ppgNeHIvsRSQDSYZ6w2AH7EBEkgCE1LkkAQjqgkAARxPQ8JBEm9I2BwN2gEIEnY5rkjQEN0RQF1TXCRpvW0qyMkG+QEaSRxgkBN5eETpO2DE8T1joDh/dALgJNgLiFOgJxAlfCVABmS3QAjQOo5QaCGk+QRhMu6JskRBOrq7xG0JEiSEI4eRmoAIOF4OnkE8Cb3FFDXGdwVhUcA13OCtAleCcK90SRJI4iTpBHUIGH8OG4NwKRo/kY0AjDJ6pb1CUCT9hJSCICeE8QJgF4SJCeoEcR9WgmqSfoHqy297CyhZKsAAAAASUVORK5CYII= data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAICAYAAABJYvnfAAAD0ElEQVRIS+WU+28UVRSAv9lOd7ZPiu3WtpTaLLSNfVg3tKDQEiovixAjgmLQgCRqMLXxxSKgBEJYiQH5xUfib4YEkgYiakyIxMQQDE0U67NQ7FKxRR59bLfd7mN2dsa7s6W1drf8AZ5kktl8Z+/c+91zjgQY4vnfhmSdm2mwwI7l+hh6fwB9REUf0zAiBoYedyNnp6IHNXRN/E6gKyUrlehoJKnElEzB/TNxWXAt+f8zBBd7ShaWdBk9MANPE1zsP1FIuOuNOU1luIpW0hHw8MNoH795+6HHB13DWD7uRFrvIPr0PLgyDJe8KJ5RuB3E8IZRbwaRLBJKvR19IITuEwL9KoY6KRAJbHX5RDqH0MNRjJjIf8c4V38XPNFBYtyZh3p5OClXHswlctmX9KBx7kUP6VM//VLXfmOzvZmarApy5Gx0QyeghxjR/AyogyzasJr73atoLVxD0+xF3FBvcy34N53Bq3T4e/jygaMoNfcQPvwwrzoa+Gmsl299N+CaFzwjsP9H84PWgjTUPU4h0Yftkg/jVgBjKIR6PWDy1Pw0Im87sR3rxhgIEvWFzUrUw/ENm3xXrcljIoyYyOikSNluQ3PVohzvJtIlRPxHpJyrxPkJT5yPV4T0Z6DPmGsrxCJZEpfI+Y1cqNlNdWYFmSnpU3LEHZPmmEX4YD0nml6jIaeOIls+oajKSHSUQdVLtRAr51jRXq7Ete1ZNthXmgJ/Dfwhnr/4rPqwuaYlVUJ+rJTF+5rjAvtEBcYqblxgjKeuKqHuwKN8d7bDrE6le5TwOZErQpIlrCuKcbqbaT/TgdJ2FWNQVGivf4IrjxRTJS7z4pmfsbX1oF7xIhkiZpqAZwfPsyJ3iahiUYcJQvpgCR8+vp3n52wkzaJMy0jJEPNjk4NNb6zn6PzXudeaN2UtSRIrixayNhRQ8t5yTlbupiLDgV8bY1AbFu+i9cZDKRey313IF40uPMFevh/r5nile5LPF/zQQk4v3cGhvpO0j9yCZZ9PcOu8bFR3PaeWuXD3tnHx61/uLkAzNGRJTupop+cIu+57wWyfRGFbW4rzwGo+rdhJebpjWoo5P2pzCR9ZzDnnOzTOrp+SExNktkCRaIG9C/hkbQtbCp/AarHGb3acx97NYby1nJaWZ9hXun2aQHMYbynjxdanOFj6Ct8MXbi7gJmqI8Zuqv0UWO1J04rbN/NV1R5qsyoTC6rIMW/1dOMO1uUtn9aKsQOa/dtaxd7ntvJmyTayUjIm1rojwKJYkJ50sOatdXxU5qLYVjBN0J1hHHp/qdnWD81y8g/5bJgXFalsYwAAAABJRU5ErkJggg== data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAICAYAAABJYvnfAAABTklEQVRIS+WUTU4CQRCFq3oYTZANG+LChKUnYKsuNCbyM5PIMIAbjHoWr+CGC3g3d8Zo4swI9d7AwhQXmAU8ur9+3Z1XRauIVJuPLCRsReZyZDqRE1OVD1OPx+HCeFaabPxKP/aLQ3GQd9uJ8SGWSf4DHXOfbtuu5/J+LzV+xfOzb5w/+sQ+/R78Ht+ubngAGSKaMvGHMrLE0gKdoPGXqc8HxjMELssKFUgLdIC22AEej0dGcvIF/UmBfbSF0nq8c4wOSlBoyakT+jsxJjyu0vgA3gcW0TUr8FKhcjOqhl8b+/zc+A39z+ykWckO4Bvg8ujWnPgWeWIFM3aCBky4PBobH9K34vlTjmu/y6XxAVT3dVaW5JoJPrICQfk8c/4/P2Pt8J9dc7T383ne+bFgzy9tjBdH5I3rVrxVUPzw+Z3xU/pfa//uVvAf4M0O4A92eNe5n4UIVQAAAABJRU5ErkJggg== data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAICAYAAABJYvnfAAAD10lEQVRIS21TS2hUZxT+buZ9J2Ym87p3HomvuHHluosuXbhQQ2uT+qC1Ig0KQVwr7hTaTSlIN4VCV+5KcaeYqK21D9CFoPRBaRcWkWhijKkzk8z1fOf//8lknMAlmXz3fK9zxgMQbRnxUCjGUQlTCOs+6o0samNZ1Md8fHr4V+TyQyiVE6jUMqgSF6zW8NGoZ/HJ9F2MFmIoVZIIBa/1zNZrPj56/w6KRcHDtMFkzs3Xqj6OTt5CUWaDKmd9fYe6deGuyv+OHLyJUpBCINy9vjhbDTOYPjgvvtPqSz2TnzqCB0Ea05Pzhpv4OHF55G/OVsppeFu3xSOaC8UshY0BEkhYeWnqwJwSdAUoQgIRCCtpTE3O6awWYwVq/GwFPnxvXkt1wTlLM0Elg3IxhcNTN/VzVXQbMs9ZalcEL+WTOHb0tmJaOH1Zbs4Wckl8fPxHwU2pDfmtvgKZHU0iP5zAyZm7qLJQF5zFlFMoymzOj8PbN1mO3GacAAlUYCSB4yfumM1ocFNM4ASycZw89fNG8xIklOCBNEtzuUwMp87+1sW5lVC2Qu7RLQn4iSGcPX/fbI3B5OEszeeyCQiMc5ceKK7BWUyR3AmMpGNyvMDFLx8pzsKr9FUw3Om4p/gXX/9huBlcFlaUUvMSfIjwegTvwme7I3cyNO+CZ5OiLj+ff/V7dyu9wZMxYYiAy9/+pXh/cJVfi/DNd//arWwOruTNDq5c/0+D9QdHB/D+X8f3vzzVjVZKm4OT21tZw7VHSxqsLMHzEjxjg+N1B97LNn54/EpPncG5cYXJvboGLLfhXZ17N9oInsRwygRHmwJt3Phz2ZijwHAcKRvce70OvFzDT09WVYBbyWfkpFyzq4K/aOPearu7cVcqWmJOzGOpjYdxmI2LOVcqg9McFlv4u5DUS+Q16Q+DvzLm8byFx+M+RsVXhudiS2VwchNf2D2iG48RtqU6bjxrwvvn6YGoIM31B6d5PGvhycTwwOA0R4LFPXkx93Zwh6+8U8Kg4HjeBBZaaO4Noccm16TBaV6M6yP60f7awOCc5TvRocbA4JxV/Mj4wOCKL8oFdDofiLTdOJvV4GLOEUyNGQF7UtrsguDWZHRsq/ku0TxntRgbgAZObIdunNx2Kzov4nw3mtm5EZy403b46Ql7rjKvmqY4nV+S+dld5pr6fBtcnjO7TKl9vhSTx+s0D0VqjgQkd+YdwewEYM+1txhHoAL2XHuDK/5CeM/IvHL3FEMzxPh/4gOCY0lw6s7uNGGdN1sMlqVw+j69YzM3ufiOfD3BpczIAnoW0vW9Iph8jd8AGXkDBBF2wzEAAAAASUVORK5CYII= data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAICAYAAABJYvnfAAACoklEQVRIS32UTWgTQRTHXxCF1pa6CYiIYt1sJIpeetngrUoRNnoWqyl4EMFLcvJSvKTgQY9JLoooIR8IpeAhJDlJhUpIDqLXJApFEISQ+gGStFjfm+YNs7uzLgzDzv+9NzO/+c+EAGAfrLMgWiyKjfrJv2VCOBLHEICZE3OwfdU6iDtnYj+PzQQrtix0+iKRCBw6MwvvlzHuwkEtO/FU6hxDcX/NKSjfjoKT2XTpHBMOh0W9brfr02mA9cFgoNW5TqA4EUJYaF8tSJPuXDwGvfh1+L6wAOErl8VkY9z4z5gJOwIQASBIBMAWOn1TJw3YXESN9AlEO/FA6jzPkdMz8JIgXTLBSb4AwzC0kMaxadiuf/LpKqRer+eqrxaidQ2HQ20+x4UsyxIA1NMhCEy4WCzKCdTxHwjp2/kb8PnuLaFT28WNjxDML3TIV+wHCMhOXJM6zTF7fA62lqLwJTYPv1F3kqtigQyR13H41FFYvWNB6t6GT1cPrN1ui1wvRK7T7/e1+RKAbdsSgAqBAdRqNd8JEgiGUSqVXBvkPOpH8WlYf/Rc6jS2h2DGCOgP9gRgL3lTLlB10sdFBIlAjZUnPl110tbGWwlAhch76XQ62nwJwHEcFwDvHWy1WoEWpQnr9br2BBlEuVz2LUB1Ui6Xc+kCEm58F6/QCAH1Vu77dHbShyUThplnLgBeJzWbTW2+BJBKpXwAVIvRIxRkL5qMLOi1sJrfaDQCT5BAVCoV7QIZYD6f9+nsJLpy7zIPfQBUJ7159VqbLwGk02ktAHYCvbJea3EyjfMjFARJvaM6ixIgvsP8lqhvEgHy6lyHABIgnc5OWl97rAXANULZbDYQAC9EtznW+JUNgqQ+QroY7x31xugsrMZUq9X/brBQKATqVOcfWDzWBBi0sj0AAAAASUVORK5CYII= data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAICAYAAABJYvnfAAAE10lEQVRIS1WVz28VVRTHv3fmta9A6e8f0J/vzcx7ry2lVWmxYEAiRqkCGlkQEzf+ZAHEf8CF7tyyMCYm7vwbXLiUBApUFrIw8Jo2mjRSKKWEtrZ9pePnzLwKTnI6b+73nHvP+dxzb52kuMifgpyK8jAfy/CdUa9qGGnkt+lSCZ/nfk49qBmvR1GMjj2fx36b7pTN5BSgmU9xO12nVF2vh/febF59vEO04jP07bg6j0d8rNb6UF3E2hwF9KhCHsk8Qpf2N4fqRMvbGjaOXti0tWJ1s1Z/R6g2tBxma0S2RoU61onHxymqiSMrHodS7JGAzwK+ClsAqGTkGhsUsdDpmTkSZxwwBsjgqH2fXFOXaucCXdyyomfRV/F7RnKs1tFGfE71fwU6wefpSoz+EL9V9A2ps07ZJvT5QKPor5P8Mayox+j/UN2mGhrz2rMQkps0TvKHCTu6acU9lboX1d4YaPfDQP3k+DJzHKK4MUKHWEt9s+ppCNWBlsOimHINUtV6tgzAqea4F/GA7QwORSAYiGLsqxcQrnYPkWu6iD50d03Fp7FK6069Gz4JdqLvZ8ZIp8oz+vyXaY1tb7KjwGntlEbzcllSiwPt+61V363FGl+dBt4D4NVKIy3E51SzEqj1TqCPgPjlSkzxd4DzUBp2xOfVtByooZxCPLfhdBYfdd+WBpe0Kxuq6RHzw+MQw4epYYJ5RgxAYVat6F3UF1jX2dDOm7l6+Xa63BfX8zqMMFSFMMAkBdq7HxDO3w2ALU2gnzcIf2+o9HRb/WsM7GpGp9DIumFeP+H/2rVF5ebJINsMhD65DA0e0kPtbbp8fUqfXr2l0XmyPcieDNB7GQDVk95qoKM3Hut7S37+Fsms0pIN6Ggu0J4HeRXhcuGZ04V16/cpWmUNPS9tBCqRT2mJDkIyUGOYolm5mjApfsA6fOcoV49kXwLgyjAv2gobqZ7PwW07px7nhh3w65jIHNkd/p5k7MCjTeVXCdvYJee1p4ePLjmPz9dAGLj9RFrI8MUR8brRGhOIWv5D122HrtEBK8TtzaEDIAoxFlle1pWpG/ri1ynVdaAXAeRRYAslZIFwX3p/6rF+NL5t0+hskAfIulBZjsZxuB64H+sMqb1hAApz6BwRkrcNHLJ7rAqiSB52bJx+PpIAMPFVPgftN6J1QZgAoFUj2r3aASd5H2e89IQsFjgifksVAN88PzDHJ0Dwb7Ili43oNGCUTQDJLegrfL5B966S1cp+EuQqi9owOk2PFC7/rpvoLdfpKlJ0zgABx8w5jQDpWzpp8u4MALhSHQA6AERnjHL5jXM8RsvbukSOilIA9oxT5UsMWZ0DCQgn0JLtvbcSADsFjiYwDEDq5DwDYLspHcHOoh3DJtD8cgW9KQXgKsmt/LF1ifmge/dq0bkjIlZ2bBGX3yX+nkF/M9GbAGQAuGdE9lrT21rSZ+gfmF7uIJ4jFO1D4wZURZP4jOtPOo3cyl3PAQHHnjPYGPEflsvJeU/L5LxjJ7Bh/BIIdgwSPT5XBcB9mASnR2GQUQPhOys+ndz0cezg//SGRNvR7S4ZfqGTfGd3cPpMvhjPb1vDd3ZF2eP0zn/royU6EJylnj7v4mP5HTStal7yTzR9Tifxrqqn3eyS+z993sNeYWT4hfh/ASIGdLzkBWWRAAAAAElFTkSuQmCC data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAICAYAAABJYvnfAAACGUlEQVRIS41UzytEURS+L2yMhcdojEfKno218gco/gNZSFmQzSyU8qP8KMKCWfgxmiz8SKZJyUIWM0pKShIWrGxIVtbMd59z577z7n05det1v3vvO9/3nXMcIcRPaYn2xgrR5iVEazJeWnXCa6gtLVd0jWUAW/HhhazEEab7i7tnCscHf//w/CaA+2fK/79+eA3h2KD83j6+jLh/xrViBDj/EUAXpyXhCiw8Hqv3RH9qThInchyfWt2WpCk4vnOQl+/pob9/UShKsjzo/8+P91aiyO/7803maQunRE5WgM1BOBxFkAQASSTejPUnTizuidTEjBSASHJ8bT2t7lEe+v2T433ltk4CpPD+bfFMmcFJAn9/upYC4NsUTm9nkxKAXNRLECUc5SA5bCOoC6A7i4Rq4k1iYXoiIBxyoISB720sKwF0J+l+IZdRAnCSuP9ymQu8x0VwRno6AgL4IpR7ED0aVaJUwnDW5KDuMJzlBLkAinx9Ugq0OZ8KCEAka/7w063ZgADYp8D9u3w6IICO45yzNNgdEgAADRkMoagepB7lA4eI6CVscpA7zAmaBAAxEKmuTYijpdGQAMARwK+ykyEBsE/h7I33GQXwRXAFpqxtmoIQDSHToOE9aipRXsLcQZPDOkGbACBZWZcUxZUhowDAZAUUlgesApBKUVOUpqxtyOhDiBLX+5D3KC9RUwnrDtocJoLRAlSJXzPjvXzSk6dAAAAAAElFTkSuQmCC data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAICAYAAABJYvnfAAAFmklEQVRIS22VaXBTZRSGn6RNmqQtTbc0TRcEBRQUlUVBUAuyuMDoiCJWGdfxB/4RR0cdl9Hxh6PiuAwD6kABgY6yKVbBUVlkp6VQUBFq9422aW1paZM2aa7vbS1U8f7M991z3uc977mxGCQbDH1muiA3He7y0uSJIc22+9Kp1QqPu2GRD6alcNJu5fqh52NtOvPAAh/B0fHsMgzuse+59P68OHhIte/0Uue28W13mCUJ+wbO41X7sSR40IcxJYXiKPiyuYdlvoMD5xNi4NE0mJ9O5xWx/NQXYV1NgO2jj+rQAverdm4GzPRQER/N9gshPq4MUDXhGGREw8OqvTAD48ZEDuj6l+eCrKjqwXLRgOlOeMQLd3tp8Tn5IRQhr6qb3WMLBxosThCcGtyWymmHlW3ne3m9MogxWQ1GmeAp8EAGobHD2Ks38usDrK3qxcgphrmxAldtmdqYEkNBsI+86gBH6g2M+3S+OHEAfLpMtVnY1NLDOxJHix3jNdU3Tb3XR9dVceyWqSb41poQdCdgrCoaMHVWGtUytUCmrhT46XPSbPFi/HikfyDG5CSOyONNTUE+ki7aZKjrShkwNcPgYTk7L532LBc/hiOslbiddX3Qk4SxUQ4v1MRneCh1RfFNR4h3qwL81aQRRcvRXw7L/XT6xrvZp55fNQT4zGzQIej4URilSoDA/WkOdvQIXOL31Sl04WRIHo/RvgME/rvStLmtl7eqguCXofYs8E7CsG7uT5OZow213eTXhOFCPCSM0WRvwYj7nIZEOwWBsPoGONGgi4Z4UsdD9mwiCW/3p2mzv4f3TFNb7eAcCemTdGeODKicZ7RnOvvB10jcD7UmuCaSOE4FcjCGfUip83JwPBMkYA4h98vs/xe4VihuFPhuUo05NLmfZmevaWo3e4eAk5UDtkmcci9i6/+A450tsV6+H5lLfl2AjYPgw0ZD5jSZezsUBVg5/Rk+vwx8FkSkP/8sLyx6hWXVg+AjLoJTr1XOK8SyJbjAWG/ukgke1I/uayDrVrmkJnta+WDWsyyvDlLZqPxYFTXPjRIgccErYfVJljz1JiuqNfF2B8RepQaTNdk5UKYpri1k5nPL2F0XgV7tYPK1qi3h9pthRz18fQL7q5/S26wdtWm9vBP1vmqf1/RXHyf6l1LC76yHTu230kTGFE3+DjipFGw8huNQBcFPvhFsqmpfp4HpLOoGxbAMdv6Kq7iO7lW7wJHdnybS5kKzkre6CNv+Muxn/FruXXMNgtpv99gh4H/B1uO4jlbRvUIRjTLBVThTYCb4mlNY9pzFdaqBrnX7Ba7fzEglq0G5IibwmIPl2Mva6NxaMpAmEzxmELwE17EaEv1B6gvKJU5pMsE7JHR1MdF7S4k53cSobij5uUVp0nuD4PkCP1iBs6qDaYad7w7oW5A9Qxo1mE0C3/GbwGtJVarm98Wz/KS+bR7V9sukVYUD4Gf9jAtayQ0ly4ADbxj9kYrV1A91qkgxzsOVxNZ3MSPiYPNR7WuWIhXSzq0/DT/9QWxJPb7OMPf1JfD+r5pOihrUaC/zjmI/VI6ttJWJoWge703lyVpBOabCrmbYIlOLqhnWGGBWxMnSUBYT/UpF1xUytQSrTHX+1sjICxHVdvNS33Di/II/o73+okjgMrXiPLdE7DzR62Eh6Vj80r29GgpOqXYtSa1B7u6LZWk4i6uJx3JGbHkydd+fxPzRzJiAvpnhJJ6PZBNNlAzwBwwOdyg2/wZfEvKRgxyqV4MNAv9Z4Ccugb8QzsaDA0uRBK4rwn6w7CL4YyY4irTKW/K1FttO/Ac8kwlo3cwbr8VilTjn742M6BwCjlbIPH86jEMDsZe3M1XgT/4DPvjfapnfhut4HUktA+DPCfwagQ8+tik1Avf3gz8QTuTFyPB+8MHnb+qTbKvji/PkAAAAAElFTkSuQmCC".split(" "),
                    d = glfx.filters.colormap.textures, c = 0; c < a.length; c++) glfx.loadResource(d, c, null, g[c], 64, 8, "colormap/" + a[c])
        },
        output: function () {
            for (var g = a.length, d = [], c = 0; c < a.length; c++)!1 === glfx.filters.colormap.loadResource(c, function () {
                if (!--g)
                    for (var b = 0; b < a.length; b++) {
                        var c = glfx.filters.colormap.textures[b].toDataURL();
                        d.push(c)
                    }
            }) && --g
        },
        loadResource: function (a, d) {
            var c = glfx.filters.colormap.textures;
            return "string" !== typeof c[a] ? !1 : glfx.loadResource(c, a, d, "./media/colormap/" + c[a] + ".png", 64, 8)
        },
        param: [glfx.param("amount",
            "float(0,1)", 1), glfx.param("mapId", "int(0," + (a.length - 1) + ")", 1)],
        shaderCode: "uniform sampler2D texture0;\nuniform sampler2D texture1;\nuniform vec2 texSize;\nvarying vec2 texCoord;\nuniform float time;\nuniform float amount;\nvec4 sampleAs3DTexture(sampler2D tex, vec3 texCoord, float size) {\n\tfloat sliceSize = 1.0 / size;\n\tfloat slicePixelSize = sliceSize / size;\n\tfloat sliceInnerSize = slicePixelSize * (size - 1.0);\n\tfloat zSlice0 = min(floor(texCoord.z * size), size - 1.0);\n\tfloat zSlice1 = min(zSlice0 + 1.0, size - 1.0);\n\tfloat xOffset = slicePixelSize * 0.5 + texCoord.x * sliceInnerSize;\n\tfloat s0 = xOffset + (zSlice0 * sliceSize);\n\tfloat s1 = xOffset + (zSlice1 * sliceSize);\n\tvec4 slice0Color = texture2D(tex, vec2(s0, texCoord.y));\n\tvec4 slice1Color = texture2D(tex, vec2(s1, texCoord.y));\n\tfloat zOffset = mod(texCoord.z * size, 1.0);\n\treturn mix(slice0Color, slice1Color, zOffset);\n}\nvoid main(void) {\n\tvec2 imageWarp = gl_FragCoord.xy;\n\tvec2 uv = imageWarp / texSize;\n\tvec4 point = texture2D(texture0, uv);\n\tvec4 colorMap = sampleAs3DTexture(texture1, point.rgb, 8.0);\n\tgl_FragColor = amount * colorMap + point * (1.0 - amount);\n}",
        shader: function (a, d) {
            var c = glfx.filters.colormap;
            c.dirty && delete gl.colormap;
            gl.colormap = gl.colormap || new Shader(null, c.shaderCode);
            c = glfx.filters.colormap.textures;
            if ("string" === typeof c[d]) return console.log("string");
            this._.extraTexture.loadContentsOf(c[d]);
            this._.extraTexture.use(1);
            gl.colormap.textures({
                texture0: 0,
                texture1: 1
            });
            glfx.simpleShader.call(this, gl.colormap, {
                time: (this.now - this.startTime) / 1E3,
                amount: Math.max(0, isFinite(a) ? a : 1),
                texSize: [this.width, this.height]
            });
            this._.extraTexture.unuse(1);
            return this
        }
    })
})();
glfx.addFilter({
    type: "colorMatrixOld",
    param: [glfx.param("hue", "int(0,360)", 100)],
    shaderCode: "\t\tuniform sampler2D texture;\n\t\tuniform mat4 matrix;\n\t\tuniform float hue;\n\t\tvarying vec2 texCoord;\n\t\tvoid main() {\n\t\t\tvec3 z = texture2D(texture, texCoord).rgb;\n\t\t\tfloat n = hue * 0.01745;\n\t\t\tfloat r = 0.212671, g = 0.715160, b = 0.072169, c = cos(n), s = sin(n);\n\t\t\tfloat m0 = (r+(c*(1.0-r)))+(s*(-r)), m1 = (g+(c*(-g)))+(s*(-g)), m2 = (b+(c*(-b)))+(s*(1.0-b)), m3 = 0.0, m4 = 0.0,\n\t\t\t\t  m5 = (r+(c*(-r)))+(s*0.143), m6 = (g+(c*(1.0-g)))+(s*0.14), m7 = (b+(c*(-b)))+(s*-0.283), m8 = 0.0, m9 = 0.0,\n\t\t\t\t  m10 = (r+(c*(-r)))+(s*(-(1.0-r))), m11 = (g+(c*(-g)))+(s*g), m12 = (b+(c*(1.0-b)))+(s*b), m13 = 0.0, m14 = 0.0,\n\t\t\t\t  m15 = 0.0, m16 = 0.0, m17 = 0.0, m18 = 1.0, m19 = 0.0,\n\t\t\t\t  m20 = 0.0, m21 = 0.0, m22 = 0.0, m23 = 0.0, m24 = 1.0;\n\t\t\tz.r = clamp((z.r * m0) + (z.g * m1) + (z.b * m2) + (1.0 * m3) + m4, 0.0, 1.0);\n\t\t\tz.g = clamp((z.r * m5) + (z.g * m6) + (z.b * m7) + (1.0 * m8) + m9, 0.0, 1.0);\n\t\t\tz.b = clamp((z.r * m10) + (z.g * m11) + (z.b * m12) + (1.0 * m13) + m14, 0.0, 1.0);\n\t\t\tgl_FragColor = vec4(z, 1.0);\n\t\t}",
    shader: function (a) {
        var g =
            glfx.filters.colorMatrixOld;
        g.dirty && delete gl.colorMatrixOld;
        gl.colorMatrixOld = gl.colorMatrixOld || new Shader(null, g.shaderCode);
        glfx.simpleShader.call(this, gl.colorMatrixOld, {
            hue: clamp(0, a, 100)
        });
        return this
    }
});
glfx.addFilter({
    type: "hueSaturation",
    param: [glfx.param("hue", "float(-1,1)", 0), glfx.param("saturation", "float(-1,1)", 0)],
    shaderCode: "uniform sampler2D texture;\nuniform float hue;\nuniform float saturation;\nvarying vec2 texCoord;\nvoid main() {\n\tvec4 color = texture2D(texture, texCoord);\n\t\n\t/* hue adjustment, wolfram alpha: RotationTransform[angle, {1, 1, 1}][{x, y, z}] */\n\tfloat angle = hue * 3.14159265;\n\tfloat s = sin(angle), c = cos(angle);\n\tvec3 weights = (vec3(2.0 * c, -sqrt(3.0) * s - c, sqrt(3.0) * s - c) + 1.0) / 3.0;\n\tfloat len = length(color.rgb);\n\tcolor.rgb = vec3(\n\t\tdot(color.rgb, weights.xyz),\n\t\tdot(color.rgb, weights.zxy),\n\t\tdot(color.rgb, weights.yzx)\n\t);\n\t\n\t/* saturation adjustment */\n\tfloat average = (color.r + color.g + color.b) / 3.0;\n\tif (saturation > 0.0) {\n\t\tcolor.rgb += (average - color.rgb) * (1.0 - 1.0 / (1.001 - saturation));\n\t} else {\n\t\tcolor.rgb += (average - color.rgb) * (-saturation);\n\t}\n\t\n\tgl_FragColor = color;\n}",
    shader: function (a,
        g) {
        var d = glfx.filters.hueSaturation;
        d.dirty && delete gl.hueSaturation;
        gl.hueSaturation = gl.hueSaturation || new Shader(null, d.shaderCode);
        glfx.simpleShader.call(this, gl.hueSaturation, {
            hue: clamp(-1, a, 1),
            saturation: clamp(-1, g, 1)
        });
        return this
    }
});
glfx.addFilter({
    type: "invert",
    param: [],
    shaderCode: "uniform sampler2D texture;\nvarying vec2 texCoord;\nvoid main() {\n\tgl_FragColor = texture2D(texture, texCoord);\n\tgl_FragColor = vec4(1.0 - gl_FragColor.rgb, gl_FragColor.a);\n}",
    shader: function (a) {
        a = glfx.filters.invert;
        a.dirty && delete gl.invert;
        gl.invert = gl.invert || new Shader(null, a.shaderCode);
        glfx.simpleShader.call(this, gl.invert, {});
        return this
    }
});
glfx.addFilter({
    type: "lumaKey",
    param: [glfx.param("clipBlack", "float(0,2)", 0.9), glfx.param("clipWhite", "float(0,1)", 1)],
    shaderCode: "varying vec2 texCoord;\nuniform sampler2D texture;\nuniform float threshold;\nuniform float clipBlack;\nuniform float clipWhite;\nconst vec3 lumcoeff = vec3(0.2125, 0.7154, 0.0721);\nvoid main (void) {\n\tvec4 pixel = texture2D(texture, texCoord);\n\tfloat luma = dot(pixel.rgb, lumcoeff);\n\tfloat alpha = 1.0 - smoothstep(clipBlack, clipWhite, luma);\n\tgl_FragColor = vec4(pixel.rgb, min(pixel.a, alpha) );\n}",
    shader: function (a, g) {
        var d = glfx.filters.lumaKey;
        d.dirty && delete gl.lumaKey;
        gl.lumaKey = gl.lumaKey || new Shader(null, d.shaderCode);
        glfx.simpleShader.call(this, gl.lumaKey, {
            clipBlack: a,
            clipWhite: g
        });
        return this
    }
});
glfx.addFilter({
    type: "sepia",
    param: [glfx.param("amount", "float", 0.8)],
    shaderCode: "uniform sampler2D texture;\nuniform float amount;\nvarying vec2 texCoord;\nvoid main() {\n\tvec4 color = texture2D(texture, texCoord);\n\tfloat r = color.r;\n\tfloat g = color.g;\n\tfloat b = color.b;\n\t\n\tcolor.r = min(1.0, (r * (1.0 - (0.607 * amount))) + (g * (0.769 * amount)) + (b * (0.189 * amount)));\n\tcolor.g = min(1.0, (r * 0.349 * amount) + (g * (1.0 - (0.314 * amount))) + (b * 0.168 * amount));\n\tcolor.b = min(1.0, (r * 0.272 * amount) + (g * 0.534 * amount) + (b * (1.0 - (0.869 * amount))));\n\t\n\tgl_FragColor = color;\n}",
    shader: function (a) {
        var g =
            glfx.filters.sepia;
        g.dirty && delete gl.sepia;
        gl.sepia = gl.sepia || new Shader(null, g.shaderCode);
        glfx.simpleShader.call(this, gl.sepia, {
            amount: clamp(0, a, 1)
        });
        return this
    }
});
glfx.addFilter({
    type: "vibrance",
    param: [glfx.param("amount", "float(-1,1)", 0)],
    shaderCode: "uniform sampler2D texture;\nuniform float amount;\nvarying vec2 texCoord;\nvoid main() {\n\tvec4 color = texture2D(texture, texCoord);\n\tfloat average = (color.r + color.g + color.b) / 3.0;\n\tfloat mx = max(color.r, max(color.g, color.b));\n\tfloat amt = (mx - average) * (-amount * 3.0);\n\tcolor.rgb = mix(color.rgb, vec3(mx), amt);\n\tgl_FragColor = color;\n}",
    shader: function (a) {
        var g = glfx.filters.vibrance;
        g.dirty && delete gl.vibrance;
        gl.vibrance = gl.vibrance || new Shader(null, g.shaderCode);
        glfx.simpleShader.call(this, gl.vibrance, {
            amount: clamp(-1, a, 1),
            resolution: [1 / this.width, 1 / this.height]
        });
        return this
    }
});
"undefined" === typeof sketch && (sketch = {});
"undefined" === typeof sketch.media && (sketch.media = {});
sketch = function (a) {
    var g = a.media.text = {};
    g.thumbnail = {
        width: 197,
        height: 40,
        columns: 4,
        rows: 5,
        padding: 4
    };
    g.path = "./media/font";
    g.tree = {};
    mergeObject({
        "Sans Serif": [{
            name: "Arial",
            category: "Sans Serif"
        }, {
            name: "Abel",
            filename: "abel/Abel-Regular",
            category: "Sans Serif"
        }, {
            name: "Acme",
            filename: "acme/Acme-Regular",
            category: "Sans Serif"
        }, {
            name: "Droid Sans",
            filename: "droidsans/DroidSans"
        }, {
            name: "Economica",
            filename: "economica/Economica-Regular",
            category: "Sans Serif"
        }, {
            name: "Lato",
            filename: "lato/Lato-Regular",
            category: "Sans Serif"
        }, {
            name: "Open Sans",
            filename: "opensans/OpenSans-Regular"
        }, {
            name: "Oswald",
            filename: "oswald/Oswald-Regular",
            category: "Sans Serif"
        }, {
            name: "PT Sans Narrow",
            filename: "ptsansnarrow/PT_Sans-Narrow-Web-Regular",
            category: "Sans Serif"
        }, {
            name: "PT Sans",
            filename: "ptsans/PT_Sans-Web-Regular",
            category: "Sans Serif"
        }, {
            name: "PT Mono",
            filename: "ptmono/PTM55FT",
            category: "Sans Serif"
        }, {
            name: "Ubuntu Condensed",
            filename: "ubuntucondensed/UbuntuCondensed-Regular"
        }],
        Serif: [{
            name: "Andada",
            filename: "andada/Andada-Regular",
            category: "Serif"
        }, {
            name: "Droid Serif",
            filename: "droidserif/DroidSerif"
        }, {
            name: "Gentium Book Basic",
            filename: "gentiumbookbasic/GenBkBasR",
            category: "Serif"
        }, {
            name: "Josefin Slab",
            filename: "josefinsans/JosefinSans-Regular",
            category: "Serif"
        }, {
            name: "IM Fell English",
            filename: "imfellenglish/IMFeENrm28P",
            category: "Serif"
        }, {
            name: "Merriweather",
            filename: "merriweather/Merriweather-Regular",
            category: "Serif"
        }, {
            name: "Old Standard TT",
            filename: "oldstandardtt/OldStandard-Regular",
            category: "Serif"
        }, {
            name: "PT Serif",
            filename: "ptserif/PT_Serif-Web-Regular",
            category: "Serif"
        }, {
            name: "Playfair Display",
            filename: "playfairdisplay/PlayfairDisplay-Regular",
            category: "Serif"
        }, {
            name: "Vollkorn",
            filename: "vollkorn/Vollkorn-Regular",
            category: "Serif"
        }],
        Display: [{
            name: "Abril Fatface",
            filename: "abrilfatface/AbrilFatface-Regular",
            category: "Display"
        }, {
            name: "Bubblegum Sans",
            filename: "bubblegumsans/BubblegumSans-Regular",
            category: "Display"
        }, {
            name: "Cabin Sketch",
            filename: "cabinsketch/CabinSketch-Regular",
            category: "Display"
        }, {
            name: "Chelsea Market",
            filename: "chelseamarket/ChelseaMarket-Regular",
            category: "Display"
        }, {
            name: "Codystar",
            filename: "codystar/Codystar-Regular",
            category: "Display"
        }, {
            name: "Comfortaa",
            filename: "comfortaa/Comfortaa-Regular",
            category: "Display"
        }, {
            name: "Emilys Candy",
            filename: "emilyscandy/EmilysCandy-Regular",
            category: "Display"
        }, {
            name: "Gravitas One",
            filename: "gravitasone/GravitasOne",
            category: "Display"
        }, {
            name: "Jolly Lodger",
            filename: "jollylodger/JollyLodger-Regular",
            category: "Display"
        }, {
            name: "Lobster",
            filename: "lobster/Lobster",
            category: "Display"
        }, {
            name: "Londrina Shadow",
            filename: "londrinashadow/LondrinaShadow-Regular",
            category: "Display"
        }, {
            name: "Londrina Solid",
            filename: "londrinasolid/LondrinaSolid-Regular",
            category: "Display"
        }, {
            name: "Love Ya Like a Sister",
            filename: "loveyalikeasister/LoveYaLikeASister",
            category: "Display"
        }, {
            name: "Mystery Quest",
            filename: "mysteryquest/MysteryQuest-Regular",
            category: "Display"
        }, {
            name: "Supermercado One",
            filename: "supermercadoone/SupermercadoOne-Regular",
            category: "Display"
        }],
        Handwriting: [{
            name: "Aladin",
            filename: "aladin/Aladin-Regular",
            category: "Handwriting"
        }, {
            name: "Amatic SC",
            filename: "amaticsc/AmaticSC-Regular",
            category: "Handwriting"
        }, {
            name: "Architects Daughter",
            filename: "architectsdaughter/ArchitectsDaughter",
            category: "Handwriting"
        }, {
            name: "Arizonia",
            filename: "arizonia/Arizonia-Regular",
            category: "Handwriting"
        }, {
            name: "Bilbo Swash Caps",
            filename: "bilboswashcaps/BilboSwashCaps-Regular",
            category: "Handwriting"
        }, {
            name: "Delius Swash Caps",
            filename: "deliusswashcaps/DeliusSwashCaps-Regular",
            category: "Handwriting"
        }, {
            name: "Italianno",
            filename: "italiana/Italiana-Regular",
            category: "Handwriting"
        }, {
            name: "Maiden Orange",
            filename: "maidenorange/MaidenOrange"
        }, {
            name: "Ruge Boogie",
            filename: "rugeboogie/RugeBoogie-Regular",
            category: "Handwriting"
        }]
    }, g.tree);
    a.media.textById = {};
    a.media.text.paths = [];
    var d = function (a, b, f) {
        switch (f) {
            default: return g.tree[b].sort(function (a, b) {
                return a.name.localeCompare(b.name)
            })
        }
    };
    (function () {
        for (var c in g.tree) {
            d("text", c);
            for (var b = c, f = g.tree[b], h = 0; h < f.length; h++) {
                var e = f[h];
                e.type = "text";
                e.path = g.path + "/" + e.filename;
                e.thumbnail = g.path + "-preview/" + e.name + ".png";
                e.folder = b;
                a.media.textById[e.name] = e;
                a.media.text.paths.push(e)
            }
        }
    })();
    return a
}(sketch);
(function (a) {
    a.register("text", function (g, d) {
        d.id = "text";
        g.defaultWidth = g.defaultWidth || 300;
        g.defaultHeight = g.defaultHeight || 100;
        g.minWidth = g.minWidth || 15;
        g.minHeight = g.minHeight || 15;
        d.container = document.createElement("div");
        d.container.className = "textareaWrapper";
        d.loadResource = function (b, c, g) {
            b.dirty = !0;
            b.render = function (b, c, e) {
                if (!a.__editing || a.feature.gradientTextBeta) b = clone(this.bbox), b.x = 0, b.y = 0, b.rotate = 0, this.breaks = a.vector.text.drawLineBreaks({
                    ctx: this.ctx,
                    opacity: this.opacity,
                    composite: this.composite,
                    fill: this.fill,
                    fontStyle: this.fontStyle,
                    fontVariant: this.fontVariant,
                    fontWeight: this.fontWeight,
                    fontSize: this.fontSize,
                    fontFamily: this.fontFamily,
                    letterSpacing: this.letterSpacing,
                    lineHeight: this.lineHeight,
                    textAlign: this.textAlign,
                    textDecoration: this.textDecoration,
                    textTransform: this.textTransform,
                    blur: this.blur,
                    content: this.content,
                    breaks: this.breaks,
                    bbox: b
                })
            };
            g = b.fontFamily;
            var e = b.bbox;
            e.owidth || (e.owidth = e.width);
            e.oheight || (e.oheight = e.height);
            d.loadFont({
                fontFamily: g,
                onload: function () {
                    c && c(b)
                },
                onerror: function (a) {
                    c && c(b, a)
                }
            })
        };
        d.loadFont = function (b) {
            var c = b.onload,
                d = b.onerror,
                e = b.fontFamily;
            b = function (a) {
                a ? (a = "&ldquo;" + e + "&rdquo; font-family unavailable.", d && d(a)) : c && c()
            };
            if (a.vector.text.detectFont(e)) c && c();
            else if (a.media.textById[e]) {
                var g = clone(a.media.textById[e]);
                g.useLoader = !0;
                a.vector.text.attach(g, b)
            } else a.vector.text.attachFromGoogleAPI(e, b)
        };
        d.renderCurrent = function (b, c) {
            c = c || a.actions.data[a.actions.idx];
            c.dirtyControl = !0;
            c.dirtyControl && (a.active.canvas.width = a.active.canvas.width);
            a.render.actions("root.toolkit.text." + b)
        };
        d.keydown = function (a) {
            86 !== a.keyCode && 88 !== a.keyCode && 90 !== a.keyCode || !Event.proxy.metaKey || setTimeout(function () {
                d.updateActionSize();
                d.renderCurrent("keydown")
            }, 25)
        };
        d.keyup = function (b) {
            if (27 === b.keyCode) a.actions.deselectAll(), d.renderCurrent("keyup.1");
            else if (Event.proxy.metaKey && (88 === b.keyCode || 86 === b.keyCode)) d.updateActionSize(), d.renderCurrent("keyup.2");
            else if (8 === b.keyCode) {
                b = d.textarea;
                var c = d.cleanText(d.textarea.innerHTML),
                    g = a.vector.text.getRange(),
                    e = c.substr(0, g.startOffset),
                    c = c.substr(g.endOffset);
                d.textarea.innerHTML = a.vector.text.entities(e + c);
                (e = e.length) && a.vector.text.setRange(b, e, e);
                d.updateActionSize();
                d.renderCurrent("keyup.3")
            }
        };
        var c = {
            65: !0,
            97: !0,
            67: !0,
            99: !0,
            120: !0,
            88: !0,
            118: !0,
            86: !0
        };
        d.keypress = function (b) {
            var f = a.actions.data[a.actions.idx];
            if ("undefined" !== typeof f && 0 !== b.which && !(8 === b.keyCode || Event.proxy.metaKey && c[b.charCode])) {
                Event.prevent(b);
                var g = d.textarea,
                    e = d.cleanText(d.textarea.innerHTML);
                b = d.cleanText(String.fromCharCode(b.charCode ||
                    b.keyCode));
                var l = a.vector.text.getRange(d.textarea),
                    m = e.substr(0, l.startOffset),
                    e = e.substr(l.endOffset);
                d.textarea.innerHTML = a.vector.text.entities(m + b + e);
                (e = (m + b).length) && a.vector.text.setRange(g, e, e);
                d.updateActionSize();
                d.renderCurrent("keypress", f)
            }
        };
        d.record = function (b, c, h) {
            var e = d.style;
            if (!a.colorPicker || "eyeDropper" !== a.colorPicker.state)
                if ("undefined" === typeof e.render) c.pause(), d.loadResource(d.style, function () {
                    c.resume();
                    d.record(b, c)
                });
                else {
                    "down" === c.state && a.area.show(d.style);
                    var l =
                        a.canvas2d,
                        l = l.scale / l.pixelRatio,
                        m = (l - 1) / l,
                        k = a.project.scrollLeft * m,
                        q = a.project.scrollTop * m,
                        m = c.start.x / l + k,
                        p = c.start.y / l + q;
                    c.y = c.y / l + q;
                    c.x = c.x / l + k;
                    l = e.bbox;
                    l.x = Math.min(m, c.x);
                    l.y = Math.min(p, c.y);
                    l.width = Math.abs(m - c.x) || 1;
                    l.height = Math.abs(p - c.y) || 1;
                    l.units = "objectBoundingBox";
                    if ("down" === c.state) h = a.actions.fromConfigure(a.configure.tools.text), e = a.actions.add({
                        type: "text",
                        fill: clone(h.fill),
                        opacity: h.opacity || 100,
                        composite: h.composite,
                        blur: c.blur || h.blur || 0,
                        fontStyle: c.fontStyle || h.fontStyle,
                        fontVariant: c.fontVariant || h.fontVariant,
                        fontWeight: c.fontWeight || h.fontWeight,
                        fontSize: c.fontSize || h.fontSize,
                        fontFamily: c.fontFamily || h.fontFamily,
                        lineHeight: c.lineHeight || h.lineHeight,
                        letterSpacing: c.letterSpacing || h.letterSpacing,
                        textAlign: c.textAlign || h.textAlign,
                        textDecoration: c.textDecoration || h.textDecoration,
                        textTransform: c.textTransform || h.textTransform,
                        render: d.style.render,
                        content: c.content || "",
                        bbox: clone(l)
                    }, e, !0), d.textarea.innerHTML = e.content, a.area.updateBBox(), a.active.canvas.width =
                        a.active.canvas.width, a.actions.constrain(e), a.actions.updateTransform(e), a.render.action(a.active, e), a.area.renderControls(a.actions.idx);
                    else if (e = a.actions.data[a.actions.idx]) {
                        e.type = "text";
                        e.bbox.x = l.x;
                        e.bbox.y = l.y;
                        e.bbox.width = l.width;
                        e.bbox.height = l.height;
                        e.bbox.viewBox = [0, 0, l.width, l.height];
                        e.dirty = !0;
                        e.dirtyTransform = !0;
                        d.dragging = !0;
                        c.bbox && !c.bbox.border && mergeObject(c.bbox, e.bbox);
                        if ("up" === c.state) {
                            d.dragging = !1;
                            if (e.bbox.width < g.minWidth || e.bbox.height < g.minHeight)
                                if (a.feature.placement.click) e.bbox.width =
                                    g.defaultWidth, e.bbox.height = g.defaultHeight, e.bbox.viewBox = [0, 0, g.defaultWidth, g.defaultHeight];
                                else {
                                    a.area.hide();
                                    a.actions.data.pop();
                                    d.renderCurrent("record", e);
                                    return
                                }
                            setTimeout(function () {
                                d.textarea.blur();
                                d.textarea.focus()
                            }, 10);
                            a.area.inGenesis = !0;
                            e.bbox.owidth = e.bbox.width;
                            e.bbox.oheight = e.bbox.height;
                            d.updateActionSize()
                        }
                        a.area.updateBBox();
                        a.active.canvas.width = a.active.canvas.width;
                        a.actions.constrain(e);
                        a.actions.updateTransform(e);
                        a.render.action(a.active, e);
                        a.area.renderControls(a.actions.idx);
                        "up" === c.state && h && h()
                    }
                }
        };
        d.updateBBox = function () {
            var b = a.actions.data[a.actions.idx];
            "undefined" !== typeof b && (b.content && (d.textarea.innerHTML = d.cleanText(b.content)), d.updateCSS(b), d.renderCurrent("updateBBox", b))
        };
        d.updateActionSize = function (b) {
            var c = b ? a.__editing && b.id === a.actions.data[a.actions.idx] ? d.cleanText(d.textarea.innerHTML) : b.content : d.cleanText(d.textarea.innerHTML);
            b = b || a.actions.data[a.actions.idx];
            if ("undefined" !== typeof b) {
                a.vector.text.getFontStyle(b);
                c || (c = " ");
                var g = (2 * (b.blur ||
                    0) + (b.diameter || 0) + (b.lineWidth || 0)) * (b.scale ? b.scale.max : 1),
                    e = a.vector.text.drawLineBreaks({
                        fillStyle: b.fillStyle,
                        fontStyle: b.fontStyle || "normal",
                        fontVariant: b.fontVariant || "normal",
                        fontWeight: b.fontWeight || "normal",
                        fontSize: b.fontSize || 0,
                        fontFamily: b.fontFamily || "Arial",
                        letterSpacing: b.letterSpacing || 0,
                        lineHeight: b.lineHeight || 1,
                        textAlign: b.textAlign || "center",
                        textDecoration: b.textDecoration || "none",
                        textTransform: b.textTransform || "none",
                        blur: b.blur || 0,
                        content: c || " ",
                        bbox: b.bbox
                    });
                a.feature.gradientTextBeta &&
                    b.content !== c && (b.dirty = !0);
                b.content = c;
                b.breaks = e;
                c = b.bbox.owidth + g / 2;
                g = e.height + g / 2;
                e = {
                    x: b.bbox.x,
                    y: b.bbox.y,
                    owidth: b.bbox.owidth,
                    oheight: b.bbox.oheight,
                    width: c,
                    height: g,
                    units: b.bbox.units,
                    scale: b.bbox.scale,
                    rotate: b.bbox.rotate,
                    viewBox: [0, 0, c, g]
                };
                b.bbox.height !== g && (b.bbox = e, b.dirty = !0, b.dirtyControl = !0, d.container.style.height = e.height + "px");
                d.updateCSS(b)
            }
        };
        d.cleanText = function (a) {
            return a.split("&nbsp;").join(" ").split("<br>").join("\n").split("<div>").join("\n").split("\r").join("\n").replace(/&lt;/g,
                "<").replace(/&gt;/g, ">").replace(/&quot;/g, '"').replace(/&amp;/g, "&").replace(/(<([a-z/]+)>)/ig, "")
        };
        d.createTextarea = function () {
            if (d.textarea) {
                var b = d.textarea.style.cssText,
                    c = d.textarea.innerHTML;
                d.textarea.parentNode.removeChild(d.textarea);
                d.styleCode.parentNode.removeChild(d.styleCode)
            } else c = b = "";
            a.toolkit.text && (d.styleCode = document.createElement("style"), d.styleCode.type = "text/css", d.container.appendChild(d.styleCode), d.textarea = document.createElement("div"), d.textarea.className = "textarea",
                d.textarea.setAttribute("contentEditable", "true"), d.textarea.style.cssText = b + ";" + a.vector.text.CSSWhiteSpace, d.textarea.innerHTML = c, d.container.appendChild(d.textarea), b = a.toolkit.text) && (Event.add(d.textarea, "drag", Event.stop), Event.add(d.textarea, "keydown", b.keydown), Event.add(d.textarea, "keypress", b.keypress), Event.add(d.textarea, "keyup", b.keyup))
        };
        d.updateCSS = function (b) {
            if ("undefined" === typeof b && (b = a.actions.data[a.actions.idx], "undefined" === typeof b)) return;
            if (b.id > INFINITY_255 || a.actions.selection[b.zIndex]) {
                var c =
                    a.canvas2d,
                    c = c.scale / c.pixelRatio,
                    d = c - 1,
                    e = a.project.scrollLeft * d,
                    d = a.project.scrollTop * d,
                    g = "undefined" !== typeof b.bbox ? b.bbox : b,
                    m = this.container.style,
                    k = a.area.padding / 2,
                    q = b.blur || 0,
                    p = sketch.render.cache.padding / 2;
                m.padding = q / 2 + "px";
                m.left = (g.x - k) * c - e + "px";
                m.top = (g.y - k) * c - d + 3 + "px";
                m.width = Math.max(0, g.width - q) * c + "px";
                m.height = Math.max(0, g.height - p - q) * c + "px";
                a.vector.text.setFontStyle(b, this.container, c);
                "color" === b.fill.type && (m.color = b.fill.color);
                m.transform = m.msTransform = m.OTransform = m.MozTransform =
                    m.WebkitTransform = "rotate(" + g.rotate + "deg) scale(" + g.scale.x + "," + g.scale.y + ")";
                m.transformOrigin = m.msTransformOrigin = m.OTransformOrigin = m.MozTransformOrigin = m.WebkitTransformOrigin = "objectBoundingBox" === g.units ? "50% 50%" : "0 0";
                m.opacity = (isFinite(b.opacity) ? b.opacity : 100) / 100;
                a.toolkit.text && (c = b.fill.color, "undefined" !== typeof c && ("undefined" !== typeof c.H && (c = Color.Space.HSLA_W3(c)), a.area.blur = b.blur || 0, a.area.updateColor(c)))
            }
        };
        d.set;
        d.changeColor = function (a) {
            d.style.fillStyle = a
        };
        d.style = {
            fontStyle: "normal",
            fontVariant: "normal",
            fontWeight: "bold",
            fontSize: 41,
            fontFamily: "Arial",
            letterSpacing: 0,
            lineHeight: 1,
            textAlign: "center",
            textDecoration: "none",
            textTransform: "none",
            blur: 0,
            bbox: {
                x: 200,
                y: 18,
                width: 400,
                height: 470,
                rotate: 0,
                scale: {
                    x: 1,
                    y: 1
                }
            }
        };
        d.createTextarea();
        d.textarea && d.container.appendChild(d.textarea);
        a.canvas2d.container.appendChild(d.container)
    })
})(sketch);
if ("undefined" === typeof Vector) var Vector = {};
Vector.Text = function (a) {
    function g(b) {
        var c = document.body;
        a.element || (a.parent = document.createElement("span"), a.text = document.createElement("span"), a.parent.appendChild(a.text), a.image = document.createElement("img"), a.image.style.cssText = "vertical-align: baseline; background: #000; width: 10px; height: 1px; display: inline;", a.image.src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQIW2NkAAIAAAoAAggA9GkAAAAASUVORK5CYII=", a.parent.appendChild(a.image), a.element = document.createElement("div"),
            a.element.id = "DOMMetrics", a.element.appendChild(a.parent), c.insertBefore(a.element, c.firstChild));
        a.text.innerHTML = b.text;
        a.element.style.cssText = "display: block;";
        if (b.marginReset) {
            b.setup && 1 !== b.setup || (h = c.style.padding, e = c.style.margin, c.style.padding = 0, c.style.margin = 0);
            if (!b.setup) var d = b.callback(a.parent);
            b.setup && 2 !== b.setup || (c.style.padding = h, c.style.margin = e, a.element.style.display = "none");
            if (!b.setup) return d
        } else return d = b.callback(a.parent), a.element.style.display = "none", d
    }

    function d() {
        var b =
            document.createElement("span");
        b.style.cssText = a.CSSWhiteSpace;
        document.body.appendChild(b);
        a.elementContent = b
    }

    function c(b) {
        var c = a.elementContent;
        c.style.display = "block";
        c.style.width = b.width + "px";
        c.style.font = b.font;
        c.style.letterSpacing = (b.letterSpacing || 0) + "px";
        c.style.textAlign = b.textAlign || "left";
        c.style.textDecoration = b.textDecoration || "none";
        c.style.textTransform = b.textTransform || "none";
        c.innerHTML = a.entities(b.content);
        b = c.firstChild || c;
        var e = document.createRange();
        e.setStart(b, 0);
        e.setEnd(b,
            0);
        var d = 1,
            f = b.textContent,
            g = f.length,
            h = [],
            k = 0,
            l = e.getClientRects();
        if (0 === l.length) return {
            data: h,
            lines: h.length,
            height: 1,
            width: 1
        };
        for (var p = l[l.length - 1].top, q = a.spaceOffset, r = a.mOffset, m = c.offsetHeight, z = c.offsetWidth; f;) {
            if (d > g) {
                h.push(f);
                break
            }
            e.setStart(b, k);
            e.setEnd(b, d);
            d++;
            l = e.getClientRects();
            l = l[l.length - 1].top;
            p !== l && (d--, h.push(f.substr(0, d - k - q + r)), f = f.substr(d - k - q + r), k = d - q + r, p = l)
        }
        f && 10 === f[f.length - 1].charCodeAt() && h.push("");
        c.style.display = "none";
        return {
            data: h,
            lines: h.length,
            height: m,
            width: z
        }
    }

    function b(b) {
        var c = a.elementContent;
        c.style.display = "block";
        c.style.width = b.width + "px";
        c.style.font = b.font;
        c.style.letterSpacing = (b.letterSpacing || 0) + "px";
        c.style.textAlign = b.textAlign || "left";
        c.style.textDecoration = b.textDecoration || "none";
        c.style.textTransform = b.textTransform || "none";
        c.innerHTML = b.content;
        b = document.body.createTextRange();
        for (var e = 1, d = target.innerText, f = d.length, g = [], h = 0, k = c.offsetHeight, l = c.offsetWidth; d;) {
            if (e > f) {
                g.push(d);
                break
            }
            b.moveToElementText(target);
            b.collapse(!0);
            b.moveEnd("character", e);
            b.moveStart("character", h);
            b.select();
            e++;
            1 < b.getClientRects().length && (e--, g.push(d.substr(0, e - h - 1)), d = d.substr(e - h - 1), h = e - 1)
        }
        c.style.display = "none";
        return {
            data: g,
            lines: g.length,
            height: k,
            width: l
        }
    }

    function f(b) {
        function c(e) {
            f.push(e);
            e = a.measureText(e, b.font);
            p += e.height;
            l = Math.max(e.width, l)
        }

        function e() {
            if (!(a.measureTextWidth(g, b.font) <= b.width)) {
                for (var d = g.length, f = 0, h = 0, k = 0; k < d; k++) {
                    var l = g.substr(f, ++h).replace(q, "");
                    a.measureTextWidth(l, b.font) > b.width && (l = l.substr(0,
                        l.length - 1).replace(q, ""), l.match(m) ? (f = l.split(m), l = l[f[0].length], k -= f[1].length, c(f[0] + l)) : l.match(" ") ? (f = l.split(" "), k -= f.pop().length, c(f.join(" "))) : c(l), f = k, h = 1)
                }
                return g.substr(f, h + 1)
            }
        }
        for (var d = b.content.split("\n"), f = [], g = "", h, l = 0, p = 0, r = 0; r <= d.length; r++) {
            if (g) {
                c(g);
                if (r === d.length) break;
                g = ""
            }
            for (var B = d[r], F = B.split(k), G = 0, z = 0; z < F.length + 2; z++) {
                var J = 0 > G - 1 ? "" : B.substr(G - 1, 1),
                    O = F[z] || "";
                if (a.measureTextWidth(g + J + O, b.font) <= b.width) g += J + O;
                else if (h = e()) g = h + J + O;
                else {
                    h = J.match(m) ? J : "";
                    if (g ||
                        J) a.measureTextWidth(g + h, b.font) > b.width ? "\u2013" === h ? O = g + h + O : (c(g), O = h + O) : c(g + h);
                    g = O
                }
                G += O.length + 1
            }
        }
        return {
            data: f,
            lines: f.length,
            height: p,
            width: l
        }
    }
    a.entities = function (a) {
        return a.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
    };
    a.getMetrics = function (b, c) {
        var e = "ltr";
        window.getComputedStyle && (e = window.getComputedStyle(document.body, "").direction);
        var d = a.measureTextHeight(b, c),
            f = a.measureTextWidth(b, c);
        return g({
            marginReset: !0,
            text: b,
            callback: function (b) {
                b.style.cssText =
                    "font: " + c + "; white-space: nowrap; display: block;";
                var g = a.image.offsetTop,
                    h = g - d;
                b.style.cssText = "font: " + c + "; white-space: nowrap; line-height: 0; display: block;";
                return {
                    font: c,
                    direction: e,
                    ascent: g,
                    descent: -h,
                    height: d,
                    width: f,
                    textBaseline: {
                        alphabetic: 0,
                        top: g,
                        hanging: 8 * g / 10,
                        middle: a.image.offsetTop,
                        ideographic: h,
                        bottom: h
                    },
                    textAlign: {
                        left: 0,
                        start: -("ltr" === e) ? 0 : f,
                        end: -("ltr" === e) ? f : 0,
                        right: -f,
                        center: -f / 2
                    }
                }
            }
        })
    };
    a.measureText = function (b, c) {
        return {
            width: a.measureTextWidth(b, c),
            height: a.measureTextHeight(b,
                c)
        }
    };
    a.measureTextWidth = function (a, b) {
        return g({
            text: a + a + a,
            callback: function (a) {
                a.style.cssText = "font: " + b + "; white-space: nowrap; display: inline;";
                return a.offsetWidth / 3
            }
        })
    };
    a.measureTextHeight = function (a, b) {
        return g({
            text: "1<br>2<br>3<br>4<br>5<br>6<br>7",
            callback: function (a) {
                a.style.cssText = "font: " + b + "; white-space: nowrap; display: inline;";
                return a.offsetHeight / 7 + 0.5 >> 0
            }
        })
    };
    a.textAlign = function (b, c) {
        var e = window.getComputedStyle(document.body, "").direction,
            d = a.measureTextWidth(b, c);
        return g({
            text: b,
            callback: function (a) {
                return {
                    left: 0,
                    start: -("ltr" === e) ? 0 : d,
                    end: -("ltr" === e) ? d : 0,
                    right: -d,
                    center: -d / 2
                }
            }
        })
    };
    a.textBaseline = function (b, c) {
        var e = a.measureTextHeight(b, c);
        return g({
            marginReset: !0,
            text: b,
            callback: function (b) {
                b.style.cssText = "font: " + c + "; white-space: nowrap; display: block;";
                var d = a.image.offsetTop + 1,
                    f = d - e;
                b.style.cssText = "font: " + c + "; white-space: nowrap; line-height: 0; display: block;";
                return {
                    alphabetic: 0,
                    top: d,
                    hanging: 8 * d / 10,
                    middle: a.image.offsetTop + 1,
                    ideographic: f,
                    bottom: f
                }
            }
        })
    };
    a.textBaselineTop =
        function (b, c) {
            return g({
                text: b,
                callback: function (b) {
                    b.style.cssText = "font: " + c + "; white-space: nowrap; display: block;";
                    return 1.315 * a.image.offsetTop
                }
            })
    };
    var h, e;
    a.getFontStyle = function (a) {
        var b = [];
        a.fontStyle && b.push(a.fontStyle);
        a.fontVariant && b.push(a.fontVariant);
        a.fontWeight && b.push(a.fontWeight);
        a.fontSize && b.push(a.fontSize + "px");
        a.fontFamily && b.push('"' + a.fontFamily + '"');
        return b.join(" ")
    };
    a.setFontStyle = function (a, b, c) {
        b = b.style;
        b.fontStyle = a.fontStyle || "normal";
        b.fontVariant = a.fontVariant ||
            "normal";
        b.fontWeight = a.fontWeight || "normal";
        b.fontSize = (a.fontSize || 30) * (c || 1) + "px";
        b.fontFamily = a.fontFamily || "Arial";
        b.letterSpacing = (a.letterSpacing || 0) + "px";
        b.lineHeight = (a.lineHeight || 1) + "em";
        b.textAlign = a.textAlign || "center";
        b.textDecoration = a.textDecoration || "none";
        b.textTransform = a.textTransform || "none"
    };
    var l = 1 / (180 / Math.PI),
        m = /[\u2014\u2013-]/,
        k = /[ \u2014\u2013-]/,
        q = /^\s+|\s+$/g;
    a.getTextTransform = function (a, b) {
        switch (b) {
        case "uppercase":
            return a.toUpperCase();
        case "lowercase":
            return a.toLowerCase();
        case "capitalize":
            return a.replace(/^(.)|\s(.)/g, function (a) {
                return a.toUpperCase()
            });
        default:
            return a
        }
    };
    a.drawLineBreaks = function (b) {
        var c = b.content;
        if (c) {
            var e = a.getFontStyle(b),
                d = b.ctx,
                f = b.bbox,
                g = b.breaks,
                h = b.fontSize || 0,
                k = b.textAlign || "left",
                p = b.textDecoration || "none",
                r = b.textTransform || "none",
                q = b.lineHeight || 1,
                m = b.letterSpacing || 0,
                c = a.getTextTransform(c, r);
            g && g.data ? q *= h : (q *= h, g = a.getLineBreaks({
                font: e,
                content: c,
                textTransform: r,
                textDecoration: p,
                letterSpacing: m,
                lineHeight: q,
                width: f.width
            }));
            c =
                g.data;
            if (d) {
                d.font = e;
                d.save();
                r = f.scale.x;
                m = f.scale.y;
                h = f.rotate * l;
                d.translate(f.x, f.y);
                h && d.rotate(h);
                d.translate(-f.x * r, -f.y * m);
                1 === r && 1 === m || d.scale(r, m);
                d.fillStyle = sketch.style.createGradient(d, 0, 0, f.width, 0, b);
                b.clip && (d.rect(f.x, f.y, f.width, f.height), d.clip());
                (r = (b.blur || 0) / 2) ? (h = b.fontSize, b = f.y + r, m = f.x - g.width - h, d.shadowOffsetX = g.width + h, d.shadowOffsetY = 0, d.shadowBlur = r, d.shadowColor = "#000") : (b = f.y, m = f.x);
                h = 0;
                switch (k) {
                case "right":
                    h = f.width;
                    break;
                case "center":
                    h = f.width / 2
                }
                for (var e = a.textBaseline("test",
                    e), G = 0, z = c.length; G < z; G++) {
                    var J = c[G].replace("\n", ""),
                        O = G * q + b,
                        K = m + h;
                    d.textBaseline = "top";
                    d.textAlign = k;
                    d.fillText(J, K, O);
                    switch (p) {
                    case "underline":
                        d.fillRect(0, O + e.top + 1, f.width, 1);
                        break;
                    case "overline":
                        d.fillRect(0, O + e.alphabetic, f.width, 1);
                        break;
                    case "line-through":
                        d.fillRect(0, O + 2 * e.middle, f.width, 1)
                    }
                }
                d.globalCompositeOperation = "source-atop";
                d.fillRect(0, 0, g.width + r, g.height + r);
                d.restore()
            }
            return {
                data: c,
                lineHeight: q,
                height: g.height,
                width: g.width,
                x: f.x,
                y: f.y
            }
        }
    };
    a.getLineBreaks = function (e) {
        if (document.createRange) {
            d();
            var g = document.createElement("span");
            document.body.appendChild(g);
            a.spaceOffset = 1;
            var h = a,
                k = document.createRange();
            g.textContent = "d\u2014d";
            g.className = "wrap";
            g.style.cssText = "display: block; width: 1.55555em; " + a.CSSWhiteSpace + " font-size: bold 22px arial;";
            k.setStart(g.firstChild, 0);
            k.setEnd(g.firstChild, g.textContent.length);
            k = 2 < k.getClientRects().length ? 1 : 0;
            h.mOffset = k;
            document.body.removeChild(g);
            return (a.getLineBreaks = c)(e)
        }
        return document.body.createTextRange ? (d(), (a.getLineBreaks = b)(e)) : (a.getLineBreaks =
            f)(e)
    };
    a.CSSWhiteSpace = "white-space: pre-wrap;white-space: -moz-pre-wrap !important;white-space: -pre-wrap;white-space: -o-pre-wrap;word-wrap: break-word;";
    a.getPixelBoundingBox = function (a) {
        var b = a.ctx,
            c = a.height >> 0,
            e = a.width >> 0,
            d = a.x >> 0;
        a = a.y >> 0;
        var f = b.getImageData(d, a, e, c).data,
            g = {}, h = 0,
            k = 0,
            l = 0;
        for (b.save(); k <= c && l <= e;) {
            if (f[4 * (k * e + l) + 3]) {
                h = l + d;
                break
            }
            k++;
            0 === k % c && (k = 0, l++)
        }
        g.x1 = h;
        for (var p = 0, k = 0, l = e; k <= c && 0 <= l;) {
            if (f[4 * (k * e + l) + 3]) {
                p = l + d + 1;
                break
            }
            k++;
            0 === k % c && (k = 0, l--)
        }
        g.x2 = p;
        g.width = p - h;
        for (d = c =
            0; d < f.length;) {
            if (f[d + 3]) {
                d -= d % e;
                c = d / 4 / e;
                c += a;
                break
            }
            d += 4
        }
        g.y1 = c;
        h = 0;
        for (d = f.length; 0 <= d;) {
            if (f[d + 3]) {
                d += e - d % e;
                h = d / 4 / e;
                h += a;
                break
            }
            d -= 4
        }
        g.height = h - c;
        g.y2 = g.height + g.y1;
        b.restore();
        return g
    };
    a.range = {};
    a.range.selectAll = function (a) {
        if (document.selection) {
            var b = document.body.createTextRange();
            b.moveToElementText(a);
            b.select()
        } else if (window.getSelection) {
            var c = window.getSelection();
            0 < c.rangeCount && c.removeAllRanges();
            b = document.createRange();
            b.selectNode(a);
            c.addRange(b)
        }
    };
    a.getRange = function (b) {
        var c =
            window.getSelection();
        return null === c ? (b = a.getCursorPos(b), {
            startOffset: b,
            endOffset: b
        }) : c.getRangeAt(0)
    };
    a.setRange = function (a, b, c) {
        var e = document.createRange();
        a = a.firstChild || a;
        e.setStart(a, b);
        e.setEnd(a, c);
        a = window.getSelection();
        a.removeAllRanges();
        a.addRange(e)
    };
    a.getCursorPos = function (a) {
        var b = 0;
        if (window.getSelection) {
            var c = window.getSelection();
            c.rangeCount && (c = c.getRangeAt(0), c.commonAncestorContainer.parentNode === a && (b = c.endOffset))
        } else document.selection && document.selection.createRange &&
            (c = document.selection.createRange(), c.parentElement() === editableDiv && (a = document.createElement("span"), editableDiv.insertBefore(a, editableDiv.firstChild), b = c.duplicate(), b.moveToElementText(a), b.setEndPoint("EndToEnd", c), b = b.text.length));
        return b
    };
    a.fontDetector = function (b) {
        b = b || {};
        var c = this;
        this.metrics = void 0;
        this.test = b.test || "Thequickbrownfox";
        this.font = this.missing = this.arial = this.ctx = this.canvas = void 0;
        this.createHash = function (a) {
            c.canvas.width = c.canvas.width;
            c.ctx.font = c.font;
            c.ctx.fillText(a,
                0, c.metrics.textBaseline.top);
            return c.ctx.canvas.toDataURL()
        };
        this.getHash = function (b) {
            c.metrics || (c.metrics = a.getMetrics(c.test, "16px Arial, Helvetica"), c.canvas = document.createElement("canvas"), c.canvas.width = c.metrics.width, c.canvas.height = c.metrics.height, c.font = "16px Arial, Helvetica", c.ctx = c.canvas.getContext("2d"), c.ctx.font = "16px Arial, Helvetica", c.arial = c.createHash(c.test), c.missing = c.createHash(""));
            c.font = "16px '" + b + "', Arial, Helvetica";
            return c.createHash(c.test)
        };
        this.detectFont =
            function (b) {
                "string" === typeof b && (b = {
                    family: b
                });
                if (!b) return console.log("missing conf");
                if (!b.family) return console.log("missing family", b);
                var e = b.family,
                    d = b.callback,
                    f = a.supports[e];
                if ("boolean" === typeof f) return d && d(), f;
                if ("arial" === e.toLowerCase()) return a.supports[b.family] = !0, d && d(), !0;
                e = c.getHash(e);
                return e !== c.missing && e !== c.arial ? (a.supports[b.family] = !0, d && d(), !0) : !1
        };
        this.waitForFont = function (b) {
            if (!c.detectFont(b)) {
                var e = (new Date).getTime(),
                    d = b.timeout || 2E4,
                    f = setInterval(function () {
                        var g =
                            c.getHash(b.family);
                        (new Date).getTime() - e > d && (b.link && b.link.setAttribute("data-error", "timeout"), b.callback("timeout"), clearInterval(f));
                        g !== c.missing && g !== c.arial && (a.supports[b.family] = !0, sketch && (sketch.loader && r[b.family]) && sketch.loader.remove(r[b.family]), clearInterval(f), b.callback())
                    }, 10);
                sketch && (sketch.loader && b.useLoader) && !r[b.family] && (r[b.family] = sketch.loader.add("loading &ldquo;" + b.family + "&rdquo;"))
            }
        }
    };
    var p = new a.fontDetector,
        r = {};
    a.supports = {};
    a.detectFont = p.detectFont;
    a.waitForFont =
        p.waitForFont;
    a.attach = function (b, c) {
        b.callback = c || b.callback;
        b.family = b.family || b.name;
        var e = new a.fontDetector(b);
        if (!e.detectFont(b)) {
            var d = b.family,
                f = "./media/font/" + b.filename,
                g = document.createElement("style");
            g.type = "text/css";
            document.getElementsByTagName("head")[0].appendChild(g);
            d = "@font-face {\t\tfont-family: '" + d + "';\t\tsrc: url('" + f + ".eot');\t\tsrc: url('" + f + ".eot?#iefix') format('embedded-opentype'),\t\t\turl('" + f + ".woff') format('woff'),\t\t\turl('" + f + ".ttf') format('truetype'),\t\t\turl('" +
                f + ".svg#" + d + "') format('svg');\t\tfont-weight: normal;\t\tfont-style: normal;\t}";
            g.styleSheet ? g.styleSheet.cssText = d : g.innerHTML = d;
            b.callback && e.waitForFont(b)
        }
    };
    a.attachFromCSS = function (b, c) {
        b.callback = c || b.callback;
        var e = new a.fontDetector(b);
        if (!e.detectFont(b)) {
            var d = b.href.replace(/[^a-zA-Z 0-9]+/g, ""),
                f = document.getElementById(d);
            if (f) return e = f.getAttribute("data-error"), b.callback ? b.callback(e) : e;
            b.link = f = document.createElement("link");
            f.href = b.href;
            f.id = d;
            f.setAttribute("rel", "stylesheet");
            f.setAttribute("type", "text/css");
            f.onerror = function () {
                b.callback && b.callback("404");
                f.setAttribute("data-error", "404")
            };
            document.body.appendChild(f);
            e.waitForFont(b)
        }
    };
    a.attachFromGoogleAPI = function (b, c) {
        a.attachFromCSS({
            family: b,
            href: window.location.protocol + "//fonts.googleapis.com/css?family=" + b + ":regular",
            callback: function (a) {
                a && (a = "&ldquo;" + b + "&rdquo; font-family unavailable.");
                c && c(a)
            }
        })
    };
    return a
}({});
"undefined" === typeof sketch && (sketch = {});
"undefined" === typeof sketch.media && (sketch.media = {});
sketch = function (a) {
    var g = a.media.clipart = {};
    g.path = "./media/clipart";
    g.thumbnail = {
        width: 44,
        height: 44,
        columns: 4,
        rows: 3,
        padding: 3
    };
    g.defaultCategory = "animals";
    g.tree = {
        yourFiles: {}
    };
    mergeObject({
        animals: {
            "animals/1216139760278927551lemmling_Cartoon_cow.svg": "1216139760278927551lemmling_Cartoon_cow.svg",
            "animals/Anonymous_Architetto_--_Dinosauri_05.svg": "Anonymous_Architetto_--_Dinosauri_05.svg",
            "animals/Anonymous_Architetto_--_Dinosauri_06.svg": "Anonymous_Architetto_--_Dinosauri_06.svg",
            "animals/antontw_BlackCat_with_White_Sockets.svg": "antontw_BlackCat_with_White_Sockets.svg",
            "animals/conejo.svg": "conejo.svg",
            "animals/FunDraw_dot_com_Coloring_Book_Octopus.svg": "FunDraw_dot_com_Coloring_Book_Octopus.svg",
            "animals/Gerald_G_Cartoon_Cat_Sitting.svg": "Gerald_G_Cartoon_Cat_Sitting.svg",
            "animals/gth.svg": "gth.svg",
            "animals/JazzyNico_Dino_Simple_T-REX.svg": "JazzyNico_Dino_Simple_T-REX.svg",
            "animals/Lucky_Beckoning_Cat.svg": "Lucky_Beckoning_Cat.svg",
            "animals/monster_truck.svg": "monster_truck.svg",
            "animals/MrBordello_Chimpzilla.svg": "MrBordello_Chimpzilla.svg",
            "animals/qilin.svg": "qilin.svg",
            "animals/rg1024_Little_octopus.svg": "rg1024_Little_octopus.svg",
            "animals/stone-giant.svg": "stone-giant.svg",
            "animals/StudioFibonacci_Cartoon_peacock.svg": "StudioFibonacci_Cartoon_peacock.svg",
            "animals/StudioFibonacci_Cartoon_Pterodactyl.svg": "StudioFibonacci_Cartoon_Pterodactyl.svg",
            "animals/StudioFibonacci_Cartoon_triceratops.svg": "StudioFibonacci_Cartoon_triceratops.svg"
        },
        people: {
            "people/1300463358.svg": "1300463358.svg",
            "people/archer.svg": "archer.svg",
            "people/burglar.svg": "burglar.svg",
            "people/centaur.svg": "centaur.svg",
            "people/dwarf.svg": "dwarf.svg",
            "people/girl_with_lantern.svg": "girl_with_lantern.svg",
            "people/johnny_automatic_geisha_playing_shamisen.svg": "johnny_automatic_geisha_playing_shamisen.svg",
            "people/ninja.svg": "ninja.svg"
        },
        plants: {
            "plants/1313071007.svg": "1313071007.svg",
            "plants/automne.svg": "automne.svg",
            "plants/baronchon_palm_trees_1.svg": "baronchon_palm_trees_1.svg",
            "plants/ete.svg": "ete.svg",
            "plants/mekonee_29_vegetables_set_1.svg": "mekonee_29_vegetables_set_1.svg",
            "plants/mekonee_29_vegetables_set_2.svg": "mekonee_29_vegetables_set_2.svg",
            "plants/mekonee_29_vegetables_set_7.svg": "mekonee_29_vegetables_set_7.svg",
            "plants/molumen_fern.svg": "molumen_fern.svg",
            "plants/rg1024_country_landscape_.svg": "rg1024_country_landscape_.svg",
            "plants/spring.svg": "spring.svg",
            "plants/treehouse.svg": "treehouse.svg"
        }
    }, g.tree);
    g.process = function () {
        this.paths = [];
        for (var a in this.tree) {
            var c = this.tree[a];
            if ("object" === typeof c)
                for (var b in c) {
                    var f = 0 === b.indexOf("#") ? b : this.path + "-preview/" + b.replace(".svg", ".png");
                    this.paths.push(c[b] = {
                        type: "clipart",
                        filename: c[b],
                        path: this.path + "/" + b,
                        thumbnail: f,
                        folder: a
                    })
                }
        }
    };
    g.process();
    return a
}(sketch);
"undefined" === typeof Vector && (Vector = {});
Vector = function (a) {
    var g = {}, d = {}, c = Math.PI / 180,
        b = a.SVG = function (a) {
            a = a || {};
            this.convertMetrics = this.convertMetrics || FiniteMath.getScreenMetrics();
            this.cors = a.cors || !1;
            this.debug = a.debug || !1;
            this.debugSVG = a.debugSVG || !1;
            this.debugBBox = a.debugBBox || !1;
            this.placement = a.placement || "bbox";
            this.defaultStroke = this.defaultFill = "#000000";
            this.state = {
                fillStyle: "#000000"
            };
            this.defs = {};
            this.vob = {
                type: "svg"
            };
            this.batch = 0;
            this.skipRender = a.skipRender || !1;
            this.useCache = a.useCache || !1;
            a.src && (this.src = a.src);
            a.srcs &&
                (this.srcs = a.srcs);
            a.cache && (this.cache = a.cache);
            a.ctx && (this.ctx = a.ctx);
            a.onerror && (this.onerror = a.onerror);
            a.onload && (this.onload = a.onload);
            return a.src ? this.load() : this
        };
    b.prototype.load = function () {
        var a = this,
            b = this.src;
        if ("string" !== typeof b) {
            if (this.onerror) this.onerror("not string");
            return this
        }
        this.__id = b.replace(this.rxAlphaNumeric, "");
        if (0 === b.indexOf("data:image/svg") || 0 === b.indexOf("<?xml")) return this.fromString(b), this;
        this.document = document.getElementById(this.__id);
        if (d[b]) {
            if (this.onerror) this.onerror("404")
        } else if (this.document)
            if (g[this.__id] &&
                g[this.__id].loaded || this.srcs && this.srcs[b]) this.onParseReady();
            else this.document.addEventListener("load", function () {
                a.onParseReady()
            }, !1);
            else this.srcs && this.srcs[b] ? this.fromString(this.srcs[b]) : DOMLoader.sendRequest({
                url: b,
                onerror: function () {
                    d[b] = !0;
                    if (a.onerror) a.onerror("404")
                },
                onload: function (b) {
                    a.fromString(b.responseText)
                }
            });
        return this
    };
    b.decodeDataURL = function (a) {
        return atob(STRING.decode_utf8(a.split(",").pop()))
    };
    b.prototype.fromString = function (a, c) {
        var e = new DOMParser;
        this.document =
            document.createElement("object");
        this.document.style.cssText = "position: absolute; top: 0; left: 0;";
        0 === a.indexOf("data:image/svg") && (a = b.decodeDataURL(a));
        this.document.appendChild(e.parseFromString(a, "text/xml").documentElement);
        this.document.id = this.__id;
        document.body.appendChild(this.document);
        this.onParseReady(c);
        this.debugSVG || (this.document.style.visibility = "hidden", this.document.style.opacity = 0, this.document.style.zIndex = -1, this.document.style.width = "1px", this.document.style.height = "1px")
    };
    b.prototype.onParseReady = function (a) {
        if (g[this.__id]) {
            if (this.onload) this.onload(g[this.__id])
        } else {
            var b = this,
                c = (new Date).getTime(),
                e = this.document.contentDocument || this.document;
            this.loaded = !0;
            this.element = e;
            this.svg = this.document;
            this.parse({
                document: e,
                skipRender: this.skipRender,
                onload: function (e) {
                    if (e) {
                        b.vob = e[0];
                        b.viewBox = b.getBoundingBox();
                        b.debug && console.log("parseTime", (new Date).getTime() - c);
                        b.useCache && (g[b.__id] = b);
                        a && a(b);
                        if (b.onload) b.onload(b);
                        if (!b.debug) try {
                            document.body.removeChild(b.document)
                        } catch (d) {}
                    }
                },
                node: {
                    childNodes: []
                }
            })
        }
    };
    b.prototype.rxSplitByUppercase = /([A-Z]?[^A-Z]*)/g;
    b.prototype.rxAlphaNumeric = /[^A-Z0-9]+/gi;
    b.prototype.rxNumeric = /[0-9.-]*/g;
    b.prototype.parse = function (b) {
        if (b.node) {
            if (b.document && b.document.childNodes && b.document.childNodes.length) var c = b.document.childNodes;
            else {
                var e = String(b.document),
                    e = e.substr(11, e.length - 19);
                if (m[e]) c = [b.document];
                else {
                    if (b.onload) b.onload([]);
                    return
                }
            }
            b.defs && (this.defs = b.defs);
            for (var d = this, f = a.Shapes, g = b.node.childNodes, h = b.svg || d.svg, l = b.skipRender || !1, w = b.ctx || this.ctx, v = [], x = 0, A = c.length; x < A; x++) {
                var C = c[x],
                    e = String(C),
                    e = e.substr(11, e.length - 19);
                if ("" === e)
                    if (e = C.nodeName, 0 === e.indexOf("sketchjs:")) e = e.substr(9);
                    else continue;
                C.type = e;
                v.push(C)
            }
            var D = v.length,
                B = -1,
                F = function () {
                    if (0 === ++d.batch % 250) window.setTimeout(F, 0);
                    else if (++B === D) {
                        if (b.onload) b.onload(g)
                    } else {
                        var c = v[B],
                            e = c.type,
                            p = "";
                        w && w.save();
                        switch (e) {
                        case "SVG":
                            d.currentNode = p = d.getAttributes(c, "id,x,y,width,height,viewBox,version,metadata,brush");
                            p.matrix = a.Transform.getIdentity();
                            p.type = "svg";
                            if ("undefined" !== typeof a.Typeface) {
                                e = d.element.getElementsByTagName("font");
                                !d.vob.type && e.length && (d.vob = p, w && (d.debug && (w.canvas.style.border = "1px solid rgba(0,0,0,0.1)", d.document.style.left = p.width + "px"), w.canvas.width = p.width || 0, w.canvas.height = p.height || 0, d.typeface = new a.Typeface(w)), d.document.width = p.width || 0, d.document.height = p.height || 0, h = p);
                                for (var m = 0; m < e.length; m++) d.typeface.loadFont(d.typeface.load(e[m].cloneNode(!0)))
                            }
                            if (p.viewBox) {
                                var e = p.width,
                                    m = p.height,
                                    q = p.viewBox[2] -
                                        p.viewBox[0],
                                    x = p.viewBox[3] - p.viewBox[1];
                                if (e !== q || m !== x) q = Math.min(e / q, m / x), w && (w.translate(e / 2, m / 2), w.scale(q, q), w.translate(1 * (-e / 2) / q, 1 * (-m / 2) / q)), x = new a.Transform, x.translate(e / 2, m / 2), x.scale(q, q), x.translate(1 * (-e / 2) / q, 1 * (-m / 2) / q), p.matrix = x.matrix, p.transform = x.matrix, p.transform.type = "transform";
                                w && (w.canvas.width = e, w.canvas.height = m)
                            }
                            g.push(p);
                            p.childNodes = [];
                            d.parse({
                                skipRender: b.skipRender,
                                document: c,
                                node: p,
                                svg: h,
                                onload: function (a) {
                                    p.childNodes = a;
                                    w && w.restore();
                                    F()
                                }
                            });
                            return;
                        case "Title":
                            if (!h) break;
                            h.title = c.textContent;
                            break;
                        case "Desc":
                            if (!h) break;
                            h.desc = c.textContent;
                            break;
                        case "A":
                        case "Switch":
                        case "G":
                            if (d.currentNode = p = d.getAttributes(c, "id,labels"), p.parentNode = b.node, p.type = "g", w && w.beginPath(), d.parseTransform(c, !0), d.parseClipPath(c, !0), p.style = d.parseStyle(w, c, !l), c.hasChildNodes) {
                                g.push(p);
                                p.childNodes = [];
                                d.parse({
                                    skipRender: b.skipRender,
                                    document: c,
                                    node: p,
                                    svg: h,
                                    onload: function (a) {
                                        p.childNodes = a;
                                        w && w.restore();
                                        F()
                                    }
                                });
                                return
                            }
                        case "Use":
                            if (e = c.getAttribute("xlink:href") || c.getAttribute("href"))
                                if (d.currentNode =
                                    p = {}, p.parentNode = b.node, p.type = "use", e = e.substr(1), !d.defs[e]) {
                                    var A = d.getElementById(e);
                                    w && w.beginPath();
                                    d.parseTransform(c, !0);
                                    d.parseClipPath(c, !0);
                                    d.parseTransform(A, !0);
                                    d.parseClipPath(A, !0);
                                    g.push(p);
                                    p.childNodes = [];
                                    d.parse({
                                        skipRender: b.skipRender,
                                        document: A,
                                        node: p,
                                        svg: h,
                                        onload: function (a) {
                                            p.childNodes = a;
                                            w && w.restore();
                                            F()
                                        }
                                    });
                                    return
                                }
                            break;
                        case "FEGaussianBlur":
                            d.currentNode = p = d.getAttributes(c, "id,stdDeviation");
                            p.parentNode = b.node;
                            p.type = "GaussianBlur";
                            g.push(p);
                            break;
                        case "Image":
                            if (e = c.getAttribute("xlink:href")) {
                                if (!h.cors &&
                                    "http" === e.substr(0, 4)) break;
                                d.currentNode = p = d.getAttributes(c, "id,x,y,width,height,preserveAspectRatio,labels", !0);
                                p.parentNode = b.node;
                                p.type = "image";
                                p.x = p.x || 0;
                                p.y = p.y || 0;
                                w && w.beginPath();
                                d.parseTransform(c, !0);
                                d.parseClipPath(c, !0);
                                c = d.svg.data.split("/");
                                c.pop();
                                c = c.join("/") + "/";
                                p.image = new Image;
                                p.image.node = p;
                                p.image.onload = function () {
                                    var a = this.width,
                                        b = this.height,
                                        c = this.node.matrix;
                                    w && w.setTransform(c.a, c.b, c.c, c.d, c.x, c.y);
                                    if (this.node.preserveAspectRatio && "none" !== this.node.preserveAspectRatio) {
                                        var e =
                                            this.node.preserveAspectRatio.split(" ")[0],
                                            c = e.substr(1, 3),
                                            e = e.substr(5, 3);
                                        a > this.node.width && (b *= this.node.width / a, a = this.node.width);
                                        b > this.node.height && (a *= this.node.height / b, b = this.node.height);
                                        switch (c) {
                                        case "Min":
                                            c = 0;
                                            break;
                                        case "Mid":
                                            c = (this.node.width - a) / 2;
                                            break;
                                        case "Max":
                                            c = this.node.width - a
                                        }
                                        switch (e) {
                                        case "Min":
                                            e = 0;
                                            break;
                                        case "Mid":
                                            e = (this.node.height - b) / 2;
                                            break;
                                        case "Max":
                                            e = this.node.height - b
                                        }
                                        w && w.drawImage(this, c, e, a, b);
                                        p.x = c;
                                        p.y = e;
                                        p.width = a;
                                        p.height = b
                                    } else w && w.drawImage(this, this.node.x,
                                        this.node.y, this.node.width, this.node.height);
                                    w && w.restore();
                                    g.push(p);
                                    F()
                                };
                                p.image.onerror = function () {
                                    w && w.restore();
                                    F()
                                }; - 1 !== e.indexOf("base64") || "http" === e.substr(0, 4) ? (p.href = e, p.image.src = e) : (p.href = c + e, p.image.src = c + e);
                                return
                            }
                        case "Text":
                            d.currentNode = p = d.getAttributes(c, "id,x,y,dx,dy,labels", !0);
                            p.parentNode = b.node;
                            p.type = "text";
                            p.childNodes = [];
                            w && w.beginPath();
                            d.parseTransform(c, !0);
                            d.parseClipPath(c, !0);
                            p.style = d.parseStyle(w, c, !l);
                            for (var x = q = Infinity, C = -Infinity, aa = -Infinity, da = p.dx ||
                                    0 + (p.x || 0), X = p.dy || 0 + (p.y || 0), c = c.childNodes, m = e = 0, la = c.length; m < la; m++) {
                                A = c[m];
                                if ("[object Text]" === String(A)) {
                                    var V = {}, U = document.createElement("tspan");
                                    U.textContent = A.textContent;
                                    A = U
                                } else V = d.getAttributes(A, "id,x,y,dx,dy", !0);
                                "undefined" !== typeof V.x && (da = 0);
                                "undefined" !== typeof V.y && (X = 0);
                                da = 0 !== (V.dy || 0) ? V.dx || 0 : da + (V.dx || 0);
                                X += V.dy || 0;
                                V.x = da + (V.x || 0);
                                V.y = X + (V.y || 0);
                                V.parentNode = p;
                                V.type = "tspan";
                                V.content = A.textContent.trim();
                                d.currentNode = V;
                                V.style = d.parseStyle(w, A, !l);
                                p.childNodes.push(V);
                                U = d.fontStyleToString(w, V.style);
                                A = a.Text.measureText(A.textContent, U);
                                q > V.x && (q = V.x);
                                x > V.y && (x = V.y - V.style.fontSize);
                                aa < V.y + A.height && (aa = V.y + A.height - V.style.fontSize);
                                C < V.x + A.width && (C = V.x + A.width);
                                da += A.width;
                                e += A.width
                            }
                            switch (p.style.textAnchor) {
                            case "middle":
                                q -= e / 2;
                                C -= e / 2;
                                break;
                            case "end":
                                q -= e, C -= e
                            }
                            e = [q, x, C, aa];
                            p.bbox = new a.BBox(e, p.matrix);
                            g.push(p);
                            break;
                        case "Rect":
                            d.currentNode = p = d.getAttributes(c, "id,x,y,rx,ry,width,height,labels");
                            p.parentNode = b.node;
                            p.type = "rect";
                            p.x || (p.x = 0);
                            p.y || (p.y =
                                0);
                            w && w.beginPath();
                            d.parseTransform(c, !0);
                            d.parseClipPath(c, !0);
                            e = [p.x, p.y, p.x + p.width, p.y + p.height];
                            p.bbox = new a.BBox(e, p.matrix);
                            "undefined" === typeof p.rx && "undefined" !== typeof p.ry && (p.rx = p.ry);
                            "undefined" === typeof p.ry && "undefined" !== typeof p.rx && (p.ry = p.rx);
                            w && f && ("undefined" === typeof p.rx ? f.rect(w, p.x, p.y, p.width + p.x, p.height + p.y) : f.roundRect(w, p.x, p.y, p.width, p.height, p.rx, p.ry));
                            p.style = d.parseStyle(w, c, !l);
                            g.push(p);
                            break;
                        case "Circle":
                            d.currentNode = p = d.getAttributes(c, "id,cx,cy,r,labels");
                            p.parentNode = b.node;
                            p.type = "circle";
                            w && w.beginPath();
                            d.parseTransform(c, !0);
                            d.parseClipPath(c, !0);
                            e = [p.cx - p.r, p.cy - p.r, p.cx + p.r, p.cy + p.r];
                            p.bbox = new a.BBox(e, p.matrix);
                            p.cx = p.cx || 0;
                            p.cy = p.cy || 0;
                            w && f.ellipse(w, p.cx, p.cy, p.r, p.r);
                            p.style = d.parseStyle(w, c, !l);
                            g.push(p);
                            break;
                        case "Ellipse":
                            d.currentNode = p = d.getAttributes(c, "id,cx,cy,rx,ry,labels");
                            p.parentNode = b.node;
                            p.type = "ellipse";
                            w && w.beginPath();
                            d.parseTransform(c, !0);
                            d.parseClipPath(c, !0);
                            p.cx = p.cx || 0;
                            p.cy = p.cy || 0;
                            e = [p.cx - p.rx, p.cy - p.ry, p.cx + p.rx,
                                p.cy + p.ry
                            ];
                            p.bbox = new a.BBox(e, p.matrix);
                            w && f && f.ellipse(w, p.cx, p.cy, p.rx, p.ry);
                            p.style = d.parseStyle(w, c, !l);
                            g.push(p);
                            break;
                        case "Line":
                            d.currentNode = p = d.getAttributes(c, "id,x1,y1,x2,y2,labels");
                            p.parentNode = b.node;
                            p.type = "line";
                            p.x1 = p.x1 || 0;
                            p.y1 = p.y1 || 0;
                            p.x2 = p.x2 || 0;
                            p.y2 = p.y2 || 0;
                            w && w.beginPath();
                            d.parseTransform(c, !0);
                            d.parseClipPath(c, !0);
                            e = [p.x1, p.y1, p.x2, p.y2];
                            p.bbox = new a.BBox(e, p.matrix);
                            w && f && (w.moveTo(p.x1, p.y1), w.lineTo(p.x2, p.y2));
                            p.style = d.parseStyle(w, c, !l);
                            g.push(p);
                            break;
                        case "pencil":
                        case "Polyline":
                        case "Polygon":
                            m =
                                d.parsePoints(c, e);
                            q = m.points;
                            d.currentNode = p = d.getAttributes(c, "id,labels");
                            p.parentNode = b.node;
                            p.type = e.toLowerCase();
                            p.points = q;
                            w && w.beginPath();
                            d.parseTransform(c, !0);
                            d.parseClipPath(c, !0);
                            p.data = m.data;
                            p.bbox = new a.BBox(p.data, p.matrix);
                            w && f && f.VOBPath(w, p.data);
                            p.style = d.parseStyle(w, c, !l);
                            g.push(p);
                            break;
                        case "Path":
                            d.currentNode = p = d.getAttributes(c, "id,d,labels"), p.parentNode = b.node, p.type = "path", w && w.beginPath(), d.parseTransform(c, !0), d.parseClipPath(c, !0), p.data = a.SVGPath.toVOBPath(p.d),
                            p.bbox = new a.BBox(p.data, p.matrix), p.element = c, w && f && f.VOBPath(w, p.data), p.style = d.parseStyle(w, c, !l), g.push(p)
                        }
                        w && w.restore();
                        F()
                    }
                };
            F();
            return g
        }
    };
    b.prototype.parseAttribute = function (a, b, c) {
        "undefined" === typeof a && (a = c);
        "inherit" === a && (a = this.currentNode, a = a.parentNode && a.parentNode.style && a.parentNode.style[b] ? a.parentNode.style[b] : c);
        return a
    };
    b.prototype.parseStyleAttribute = function (a, b, c) {
        a = b[c] || a.getAttribute(c);
        b = "color" === c ? "color" : c + "Style";
        if (a) {
            if (Color.WebColors && Color.WebColors[a]) a =
                "#" + Color.WebColors[a];
            else if ("none" === a) a = "rgba(0,0,0,0)";
            else if ("currentColor" === a) a = this.state.color;
            else if ("url" === a.substr(0, 3)) {
                a = a.substr(5, a.indexOf(")") - 5);
                var e = this.ctx,
                    d = this.parseDefs(e, a, c);
                d ? e && this.setStyle(e, d, b) : a = ""
            }
            "inherit" === a && (e = this.currentNode, e.parentNode && e.parentNode.style && e.parentNode.style[b] ? a = e.parentNode.style[b] : "stroke" !== c && (a = "#000000"));
            return a
        }
    };
    b.prototype.parseStyle = function (b, c, e) {
        var d = this.currentNode,
            g = this.state = l(d.parentNode.style || this.state),
            h = f(c);
        b && b.save();
        var m = this.getAttributes(c, "opacity,fill-rule,fill-opacity,stroke-width,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-dasharray,stroke-dashoffset,stroke-opacity,font-size,font-family,font-weight,font-style,line-height,text-anchor", !0);
        "undefined" !== typeof m.opacity ? (g.opacity = m.opacity, b && (b.globalAlpha = g.opacity)) : d.parentNode.style ? (g.opacity = d.parentNode.style.opacity, b && (b.globalAlpha = g.opacity)) : (g.opacity = 1, b && (b.globalAlpha = 1));
        var y = c.attributes,
            w = y.length;
        w &&
            "undefined" === typeof d.attributes && (d.attributes = {});
        for (var v = 0; v < w; v++) {
            var x = y[v];
            if ("data-" === x.name.substr(0, 5)) {
                var A = x.name.substr(5).split("-");
                A[1] && (A[1] = A[1][0].toUpperCase() + A[1].substr(1));
                A = A.join("");
                d.attributes[A] = x.value
            }
        }(y = h.filter || c.getAttribute("filter")) ? (w = y.substr(5, y.length - 6), !this.defs[w] && (y = this.getElementById(w)) && (this.defs[w] = this.getAttributes(y, "id,x,y,width,height"), this.defs[w].type = "filter", this.defs[w].filter = this.parse({
                document: y,
                node: {
                    childNodes: []
                }
            })), g.filter =
            w) : delete g.filter;
        m.fontSize && (g.fontSize = m.fontSize);
        if (m.fontFamily)
            for (g.fontFamily = m.fontFamily, y = m.fontFamily.split(",");;) {
                w = y.shift();
                if (!w) break;
                if (this.typeface && this.typeface.packages[w]) {
                    g.fontRenderer = "SVG";
                    break
                }
                if (a.Text && a.Text.detectFont(w)) {
                    g.fontRenderer = "native";
                    break
                }
            }
        m.fontWeight && (g.fontWeight = m.fontWeight);
        m.fontStyle && (g.fontStyle = m.fontStyle);
        m.lineHeight && (g.lineHeight = m.lineHeight);
        m.textAnchor && (g.textAnchor = m.textAnchor);
        b && (b.font = this.fontStyleToString(b, g));
        if (y = this.parseStyleAttribute(c,
            h, "color")) g.color = y;
        if (y = this.parseStyleAttribute(c, h, "fill")) m.fillStyle = y;
        else if (y = d.parentNode, y.style) {
            y = l(y.style);
            for (A in m) y[A] = m[A];
            m = y
        } else m.fillStyle = "default";
        g.fillStyle = this.parseAttribute(m.fillStyle, "fillStyle", "#000000");
        g.fillRule = this.parseAttribute(m.fillRule, "fillRule", "nonzero");
        g.fillOpacity = Math.max(0, this.parseAttribute(m.fillOpacity, "fillOpacity", 1));
        e && (g && b) && ("default" === g.fillStyle ? b.fillStyle = this.defaultFill : g.fillStyle && (b.fillStyle = g.fillStyle), b.save(), b.globalAlpha *=
            g.fillOpacity, d.content ? "SVG" === g.fontRenderer ? (this.typeface.setFont(b.font), this.typeface.fillText(d.content, d.x, d.y)) : b.fillText(d.content, d.x, d.y) : b.fill(), b.restore());
        if (y = this.parseStyleAttribute(c, h, "stroke")) m.strokeStyle = y;
        else if (y = d.parentNode, y.style) {
            y = l(y.style);
            for (A in m) y[A] = m[A];
            m = y
        }
        g.strokeWidth = this.parseAttribute(m.strokeWidth, "strokeWidth", 1);
        g.strokeStyle = this.parseAttribute(m.strokeStyle, "strokeStyle", "none");
        g.strokeLinecap = this.parseAttribute(m.strokeLinecap, "strokeLinecap",
            "butt");
        g.strokeLinejoin = this.parseAttribute(m.strokeLinejoin, "strokeLinejoin", "miter");
        g.strokeMiterlimit = Math.max(1, this.parseAttribute(m.strokeMiterlimit, "strokeMiterlimit", 4));
        g.strokeDasharray = this.parseAttribute(m.strokeDasharray, "strokeDasharray", "none");
        g.strokeDashoffset = this.parseAttribute(m.strokeDashoffset, "strokeDashoffset", 0);
        g.strokeOpacity = Math.max(0, this.parseAttribute(m.strokeOpacity, "strokeOpacity", 1));
        e && (g && b) && (b.lineWidth = 0 === g.strokeWidth ? 1E-10 : g.strokeWidth || 1, b.lineCap = g.strokeLinecap ||
            "butt", b.lineJoin = g.strokeLinejoin || "miter", b.miterLimit = g.strokeMiterlimit || b.lineWidth, g.strokeStyle && "none" !== g.strokeStyle && (b.strokeStyle = g.strokeStyle, b.save(), b.globalAlpha *= g.strokeOpacity, d.content ? "SVG" === g.fontRenderer ? (this.typeface.setFont(b.font), this.typeface.strokeText(d.content, d.x, d.y)) : b.strokeText(d.content, d.x, d.y) : b.stroke(), b.restore()));
        b && b.restore();
        return g
    };
    b.prototype.parseDefs = function (a, b, c) {
        if (!this.defs[b]) {
            var e = this.getElementById(b);
            if (!e) return {};
            c = String(e);
            switch (c =
                c.substr(11, c.length - 19)) {
            case "Pattern":
                c = document.createElement("canvas").getContext("2d");
                var d = this.parsePattern(a, e);
                d.childNodes = this.parse({
                    ctx: c,
                    document: e,
                    node: {
                        childNodes: []
                    }
                });
                e = this.getBoundingBox(d.childNodes);
                e[0] += 0.5;
                e[1] += 0.5;
                e[2] -= 0.5;
                e[3] -= 0.5;
                this.render({
                    ctx: c,
                    childNodes: d.childNodes,
                    viewBox: e,
                    placement: "crop"
                });
                c.canvas.width && (d.pattern = a.createPattern(c.canvas, "repeat"));
                this.defs[b] = d;
                break;
            case "LinearGradient":
            case "RadialGradient":
                this.defs[b] = this.parseGradient(a, e, c)
            }
        }
        return this.defs[b]
    };
    b.prototype.parseGradient = function (a, b, c) {
        if ("LinearGradient" === c) {
            var e = this.getAttributes(b, "id,x1,y1,x2,y2,spreadMethod,gradientUnits,gradientTransform");
            e.type = "linearGradient"
        } else e = this.getAttributes(b, "id,cx,cy,r,fx,fy,spreadMethod,gradientUnits,gradientTransform"), e.type = "radialGradient", "undefined" === typeof e.fx && (e.fx = e.cx, e.fy = e.cy);
        "undefined" === typeof e.gradientUnits && (e.gradientUnits = "objectBoundingBox");
        var d = [],
            g = b.childNodes;
        if (b.getAttribute("xlink:href")) return d = b.getAttribute("xlink:href").substr(1),
        d = this.parseDefs(a, d, c), e.stops = d.stops, e;
        var h = f(b);
        a = h.color || b.getAttribute("color") || this.state.color;
        b = 0;
        for (var l in g) {
            var m = g[l];
            c = String(m);
            "Stop" === c.substr(11, c.length - 19) && (h = f(m), c = h["stop-color"] || m.getAttribute("stop-color")) && (Color.WebColors && Color.WebColors[c] ? c = "#" + Color.WebColors[c] : "none" === c ? c = "rgba(0,0,0,0)" : "currentColor" === c ? c = a || "#000000" : "inherit" === c && (c = a || "#000000"), (h = h["stop-opacity"] || m.getAttribute("stop-opacity")) && "1" !== h && ("inherit" === h && (h = 1), "#" === c.substr(0,
                1) ? (c = Color.Space(c.substr(1), "W3>HEX24>RGB"), c.A = 255 * parseFloat(h)) : "rgba" === c.substr(0, 4) ? (c = Color.Space(c, "W3>RGBA"), c.A *= parseFloat(h)) : "rgb" === c.substr(0, 3) && (c = Color.Space(c, "W3>RGB"), c.A = 255 * parseFloat(h)), c = Color.Space.RGBA_W3(c)), m = m.getAttribute("offset") || "0", h = -1 !== m.indexOf("%") ? 100 : 1, m = parseFloat(m) / h, m < b && (m = b), d.push({
                offset: m,
                color: c
            }), b = m)
        }
        e.stops = d;
        return e
    };
    b.prototype.parsePattern = function (a, b) {
        var c = this.getAttributes(b, "patternUnits,patternContentUnits,patternTransform,x,y,width,height,preserveAspectRatio,href");
        c.type = "pattern";
        c.id = b.id;
        return c
    };
    b.prototype.parseTransform = function (b, e, d) {
        var f = this.ctx,
            g = this.currentNode;
        if (b) {
            b = b.getAttribute(d || "transform");
            if (e)
                if (g.parentNode.matrix) {
                    var l = g.parentNode.matrix;
                    d = g.matrix = {
                        a: l.a,
                        b: l.b,
                        c: l.c,
                        d: l.d,
                        x: l.x,
                        y: l.y
                    }
                } else d = g.matrix = a.Transform.getIdentity();
                else d = a.Transform.getIdentity();
            if (b) {
                var l = new a.Transform(d),
                    m = new a.Transform;
                if ("matrix" === b.substr(0, 6)) b = b.substr(7, b.length - 8), b = h(b), e && (f && f.transform(b[0], b[1], b[2], b[3], b[4], b[5]), m.transform(b[0],
                    b[1], b[2], b[3], b[4], b[5])), l.transform(b[0], b[1], b[2], b[3], b[4], b[5]);
                else if (-1 !== b.indexOf("(")) {
                    b = b.substr(0, b.length - 1).split(")");
                    for (var y = 0, w = b.length; y < w; y++) {
                        var v = b[y].replace(/^\s+|\s+$/, "").split("(");
                        d = v[0].replace(/^\s+|\s+$/, "");
                        v = h(v[1]);
                        switch (d) {
                        case "translate":
                            2 === v.length ? (e && (f && f.translate(v[0], v[1]), m.translate(v[0], v[1])), l.translate(v[0], v[1])) : (e && (f && f.translate(v[0], 0), m.translate(v[0], 0)), l.translate(v[0]));
                            break;
                        case "scale":
                            2 === v.length ? (e && (f && f.scale(v[0], v[1]), m.scale(v[0],
                                v[1])), l.scale(v[0], v[1])) : (e && (f && f.scale(v[0], v), m.scale(v[0], v[0])), l.scale(v[0], v[0]));
                            break;
                        case "rotate":
                            d = v[0] * c;
                            3 === v.length ? (e && (f && (f.translate(v[1], v[2]), f.rotate(d), f.translate(-v[1], -v[2])), m.translate(v[1], v[2]), m.rotate(d), m.translate(-v[1], -v[2])), l.translate(v[1], v[2]), l.rotate(d), l.translate(-v[1], -v[2])) : (e && (f && f.rotate(d), m.rotate(d)), l.rotate(d));
                            break;
                        case "skewX":
                            d = v[0] * c;
                            e && (f && f.transform(1, 0, Math.tan(d), 1, 0, 0), m.skew(d, 0));
                            l.skew(d, 0);
                            break;
                        case "skewY":
                            d = v[0] * c, e && (f &&
                                f.transform(1, Math.tan(d), 0, 1, 0, 0), m.skew(0, d)), l.skew(0, d)
                        }
                    }
                }
                e && (g.transform = m.matrix, g.transform.type = "transform", g.matrix = l.matrix);
                return l.matrix
            }
        }
    };
    b.prototype.parseClipPath = function (a, b) {
        var c = this.ctx,
            e = this.currentNode;
        if (a) {
            var d = a.getAttribute("clip-path");
            if (d) {
                d = d.substr(5, d.length - 6);
                if (this.defs[d]) return b && (e.clipPath = this.defs[d].d), c && (this.renderChildNodes(c, {}, e.clipPath, !0), c.clip(), c.beginPath()), this.defs[d];
                var f = this.getElementById(d);
                if (f) return this.defs[d] = this.getAttributes(f,
                    "id,x,y,width,height,clipPathUnits"), this.defs[d].type = "clipPath", f = this.parse({
                    document: f,
                    matrix: this.vob.matrix,
                    node: {
                        childNodes: []
                    },
                    skipRender: !0
                }), c && (c.clip(), c.beginPath()), f.id = d, this.defs[d].d = f, b && (e.clipPath = f), this.defs[d]
            }
        }
    };
    b.prototype.parsePoints = function (a, b) {
        var c = a.getAttribute("points");
        if (c) {
            var e = c.replace(/[\s,]+/g, " ").trim().split(/[, ]/);
            if (!(2 > e.length)) {
                for (var d = [], c = [], f = 0, g = e.length; f < g; f += 2) {
                    var h = e[f],
                        l = e[f + 1];
                    d.push({
                        cmd: c.length ? "L" : "M",
                        x: parseFloat(h),
                        y: parseFloat(l)
                    });
                    c.push([h, l])
                }
                e = c.length - 1;
                f = c[e];
                isFinite(f[1]) || (d[e].y = f[1] = c[0][1]);
                "Polygon" === b ? (c = "" + c.join(" ") + "", d.push({
                    cmd: "Z",
                    x: d[0].x,
                    y: d[0].y
                })) : c = "" + c.join(" ");
                return {
                    points: c,
                    data: d
                }
            }
        }
    };
    b.prototype.getAttributes = function (a, b, c) {
        var e = {};
        if (!a || !a.getAttribute) return {};
        var d = f(a),
            g = 0;
        b = b.split(",");
        for (var l = b.length; g < l; g++) {
            var m = b[g],
                w = this.__attributes[m],
                v = !1;
            if (!w)
                if (w = this.__attributesNS[m]) m = this.__namepace + ":" + m, v = !0;
                else if (m = m.match(this.rxSplitByUppercase).slice(0, -1).join("-").toLowerCase(),
                w = this.__attributes[m], !w) {
                console.log(m);
                continue
            }
            w = w.format;
            if (c) {
                var x = d[m] || a.getAttribute(m); - 1 !== m.indexOf("-") && (m = m.split("-"), m[1] && (m[1] = m[1][0].toUpperCase() + m[1].substr(1)), m = m.join(""))
            } else x = a.getAttribute(m) || d[m], "id" !== m || x || (x = a.getAttribute("xml:id")); if (x)
                if ("inherit" === x) v = this.currentNode, v.parentNode && (v.parentNode.style && v.parentNode.style[m]) && (e[m] = v.parentNode.style[m]);
                else if ("none" === x) e[m] = x;
            else switch (v && (m = m.replace(this.__namepace + ":", "")), w) {
            case "numarray":
                e[m] =
                    h(x);
                break;
            case "coordinate":
                e[m] = parseFloat(x);
                (w = x.replace(this.rxNumeric, "")) && "px" !== w && (e[m] *= this.convertMetrics[w + ">px"]); - 1 !== x.indexOf("%") && (e[m] *= 3);
                Infinity === e[m] && (e[m] = 4294967295); - Infinity === e[m] && (e[m] = -4294967295);
                break;
            case "float":
                e[m] = parseFloat(x);
                Infinity === e[m] && (e[m] = 4294967295); - Infinity === e[m] && (e[m] = -4294967295);
                break;
            case "transform":
            case "patternTransform":
            case "gradientTransform":
                e[m] = this.parseTransform(a, !1, w);
                break;
            case "string":
                e[m] = x
            }
        }
        return e
    };
    b.prototype.getBoundingBox =
        function (a) {
            var b = Infinity,
                c = Infinity,
                e = -Infinity,
                d = -Infinity,
                f = function (a) {
                    for (var g = 0, h = a.length; g < h; g++) {
                        var k = a[g];
                        if (k) {
                            if (k.bbox) {
                                if (k.style.strokeStyle) var l = k.style.strokeWidth || 0,
                                m = k.bbox.x1 - l, C = k.bbox.x2 + l, D = k.bbox.y1 - l, l = k.bbox.y2 + l;
                                else m = k.bbox.x1, C = k.bbox.x2, D = k.bbox.y1, l = k.bbox.y2;
                                m < b && (b = m);
                                D < c && (c = D);
                                C > e && (e = C);
                                l > d && (d = l)
                            }
                            k.childNodes && f(k.childNodes)
                        }
                    }
                };
            f(a || [this.vob]);
            return [b, c, e, d]
    };
    b.prototype.getElementById = function (a) {
        if (this.element.ownerDocument) {
            var b = this.element.ownerDocument.getElementById(a);
            b || (b = e(this.element.ownerDocument, a))
        } else(b = this.element.getElementById(a)) || (b = e(this.element, a));
        return b
    };
    b.prototype.getLayerById = function (a) {
        var b = function (c) {
            for (var e = 0; e < c.length; e++) {
                var d = c[e];
                if (d.id === a || d.childNodes && (d = b(d.childNodes))) return d
            }
        };
        return b(this.vob.childNodes)
    };
    b.prototype.fontStyleToString = function (a, b) {
        if (a) {
            var c = b.textAnchor || "left";
            "middle" === c && (c = "center");
            a.textAlign = c;
            return (b.fontStyle || "normal") + " " + (b.fontWeight || "normal") + " " + (b.fontSize || "normal") + "px " +
                (b.fontFamily || "sans-serif")
        }
    };
    b.prototype.createCanvas = function () {
        var a = document.createElement("canvas");
        a.ctx = a.getContext("2d");
        return a
    };
    var f = function (a) {
        a = a.getAttribute("style");
        if (!a) return {};
        a = a.split(";");
        for (var b = {}, c = 0, e = a.length; c < e; c++) {
            var d = a[c].split(":");
            d[0] && d[1] && (b[d[0].trim()] = d[1].trim())
        }
        return b
    }, h = function (a) {
            var b = [];
            if (!a) return [];
            for ("string" === typeof a && (a = -1 !== a.indexOf(",") ? a.split(",") : a.split(" ")); a.length;) {
                var c = parseFloat(a.shift());
                b.push(c)
            }
            return b
        }, e = function (a,
            b) {
            return window.XPathResult ? a.evaluate('//*[@xml:id="' + b + '"]', a, function () {
                return "http://www.w3.org/XML/1998/namespace"
            }, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue : a.getElementById ? a.getElementById(b) : null
        }, l = function (a) {
            if (!a || "object" !== typeof a) return a;
            var b = new a.constructor,
                c;
            for (c in a) b[c] = a[c] && "object" === typeof a[c] ? l(a[c]) : a[c];
            return b
        }, m = {
            Text: !0,
            Rect: !0,
            Circle: !0,
            Ellipse: !0,
            Line: !0,
            Polyline: !0,
            Polygon: !0,
            Path: !0
        };
    return a
}(Vector);
"undefined" === typeof Vector && (Vector = {});
Vector = function (a) {
    var g = a.SVG;
    g.prototype.__dtd = "https://sketch.io/dtd/";
    g.prototype.__namepace = "sketchjs";
    g.prototype.__version = "3.0";
    g.prototype.__attributesNS = {
        labels: {
            param: "labels",
            format: "string",
            value: ""
        },
        version: {
            param: "version",
            format: "string",
            value: ""
        },
        metadata: {
            param: "metadata",
            format: "string",
            value: ""
        },
        brush: {
            param: "brush",
            format: "string",
            value: ""
        }
    };
    g.prototype.__attributes = {
        id: {
            param: "id",
            format: "string",
            value: ""
        },
        src: {
            param: "src",
            format: "string",
            value: ""
        },
        href: {
            param: "href",
            format: "xlink:href",
            value: ""
        },
        display: {
            param: "display",
            format: "string",
            valid: "inline | block | list-item | run-in | compact | marker | table | inline-table | table-row-group | table-header-group | table-footer-group | table-row | table-column-group | table-column | table-cell | table-caption | none | inherit",
            value: "inline"
        },
        visibility: {
            param: "visibility",
            format: "string",
            valid: "visible | hidden | collapse | inherit",
            value: "visible"
        },
        viewBox: {
            param: "viewBox",
            format: "numarray",
            value: 0
        },
        preserveAspectRatio: {
            param: "preserveAspectRatio",
            format: "string",
            valid: "[defer] <align> [<meetOrSlice>]",
            value: "xMidYMid meet"
        },
        x: {
            param: "x",
            format: "coordinate",
            value: ""
        },
        y: {
            param: "y",
            format: "coordinate",
            value: ""
        },
        width: {
            param: "width",
            format: "coordinate",
            value: ""
        },
        height: {
            param: "height",
            format: "coordinate",
            value: ""
        },
        transform: {
            param: "transform",
            format: "transform",
            value: "matrix(1,0,0,1,0,0)"
        },
        dx: {
            param: "dx",
            format: "coordinate",
            value: ""
        },
        dy: {
            param: "dy",
            format: "coordinate",
            value: ""
        },
        cx: {
            param: "cx",
            format: "coordinate",
            value: ""
        },
        cy: {
            param: "cy",
            format: "coordinate",
            value: ""
        },
        rx: {
            param: "rx",
            format: "float",
            value: ""
        },
        ry: {
            param: "ry",
            format: "float",
            value: ""
        },
        r: {
            param: "r",
            format: "coordinate",
            value: ""
        },
        x1: {
            param: "x1",
            format: "float",
            value: ""
        },
        y1: {
            param: "y1",
            format: "float",
            value: ""
        },
        x2: {
            param: "x2",
            format: "float",
            value: ""
        },
        y2: {
            param: "y2",
            format: "float",
            value: ""
        },
        d: {
            param: "d",
            format: "string",
            value: ""
        },
        points: {
            param: "points",
            format: "string",
            value: ""
        },
        "font-size": {
            param: "font-size",
            format: "float",
            valid: "<absolute-size> | <relative-size> | <length> | <percentage> | inherit",
            value: "medium"
        },
        "font-style": {
            param: "font-style",
            format: "string",
            valid: "normal | italic | oblique | inherit",
            value: "normal"
        },
        "font-family": {
            param: "font-family",
            format: "string",
            valid: "[[ <family-name> | <generic-family> ],]* [<family-name> | <generic-family>] | inherit",
            value: "sans-serif"
        },
        "font-weight": {
            param: "font-weight",
            format: "string",
            valid: "normal | bold | bolder | lighter | 100 | 200 | 300 | 400 | 500 | 600 | 700 | 800 | 900 | inherit",
            value: "normal"
        },
        "line-height": {
            param: "line-height",
            format: "float",
            valid: "normal | <number> | <length> | <percentage> | inherit",
            value: "normal"
        },
        "text-decoration": {
            param: "text-decoration",
            format: "string",
            valid: "none | [ underline || overline || line-through || blink ] | inherit",
            value: "none"
        },
        "text-anchor": {
            param: "text-anchor",
            format: "string",
            valid: "start | middle | end | inherit",
            value: "start"
        },
        kerning: {
            param: "kerning",
            format: "float",
            valid: "auto | <length> | inherit",
            value: "auto"
        },
        "letter-spacing": {
            param: "letter-spacing",
            format: "float",
            valid: "normal | <length> | inherit",
            value: "normal"
        },
        "word-spacing": {
            param: "word-spacing",
            format: "float",
            valid: "normal | <length> | inherit",
            value: "normal"
        },
        "clip-path": {
            param: "clip-path",
            format: "string",
            value: ""
        },
        clipPathUnits: {
            param: "clipPathUnits",
            format: "string",
            value: "userSpaceOnUse"
        },
        opacity: {
            param: "opacity",
            format: "float",
            value: 1
        },
        fill: {
            param: "fill",
            format: "string",
            value: "black"
        },
        "fill-rule": {
            param: "fill-rule",
            format: "string",
            valid: "nonzero | evenodd | inherit",
            value: "nonzero"
        },
        "fill-opacity": {
            param: "fill-opacity",
            format: "float",
            valid: "<opacity-value> | inherit",
            value: 1
        },
        stroke: {
            param: "stroke",
            format: "string",
            value: "black"
        },
        "stroke-width": {
            param: "stroke-width",
            format: "coordinate",
            valid: "<percentage> | <length> | inherit",
            value: 1
        },
        "stroke-linecap": {
            param: "stroke-linecap",
            format: "string",
            valid: "butt | round | square | inherit",
            value: "butt"
        },
        "stroke-linejoin": {
            param: "stroke-linejoin",
            format: "string",
            valid: "miter | round | bevel | inherit",
            value: "miter"
        },
        "stroke-miterlimit": {
            param: "stroke-miterlimit",
            format: "float",
            valid: "<miterlimit> | inherit",
            value: 4
        },
        "stroke-dasharray": {
            param: "stroke-dasharray",
            format: "numarray",
            valid: "none | <dasharray> | inherit",
            value: "none"
        },
        "stroke-dashoffset": {
            param: "stroke-dashoffset",
            format: "coordinate",
            valid: "<percentage> | <length> | inherit",
            value: 0
        },
        "stroke-opacity": {
            param: "stroke-opacity",
            format: "float",
            valid: "<opacity-value> | inherit",
            value: 1
        },
        stops: {
            param: "stops",
            format: "string",
            value: ""
        },
        gradientUnits: {
            param: "gradientUnits",
            format: "string",
            valid: "userSpace | userSpaceOnUse | objectBoundingBox",
            value: "userSpace"
        },
        gradientTransform: {
            param: "gradientTransform",
            format: "transform",
            value: "matrix(1,0,0,1,0,0)"
        },
        spreadMethod: {
            param: "spreadMethod",
            format: "string",
            valid: "pad | reflect | repeat",
            value: "pad"
        },
        fx: {
            param: "fx",
            format: "coordinate",
            value: ""
        },
        fy: {
            param: "fy",
            format: "coordinate",
            value: ""
        },
        patternUnits: {
            param: "patternUnits",
            format: "string",
            value: ""
        },
        patternContentUnits: {
            param: "patternContentUnits",
            format: "string",
            value: ""
        },
        patternTransform: {
            param: "patternTransform",
            format: "transform",
            value: "matrix(1,0,0,1,0,0)"
        },
        stdDeviation: {
            param: "stdDeviation",
            format: "float",
            value: 0
        },
        filter: {
            param: "filter",
            format: "string",
            value: ""
        },
        color: {
            param: "color",
            format: "string",
            value: ""
        },
        "color-interpolation-filters": {
            param: "color-interpolation-filters",
            format: "string",
            valid: "auto | sRGB | linearRGB | inherit",
            value: "sRGB"
        }
    };
    return a
}(Vector);
"undefined" === typeof Vector && (Vector = {});
Vector = function (a) {
    var g = a.SVG;
    g.prototype.toImage = function () {
        var a = new Image;
        a.src = this.toDataURL();
        a.width = this.vob.width;
        a.height = this.vob.height;
        return a
    };
    g.prototype.toBlob = function () {
        return new Blob([this.stringify()], {
            type: "image/svg+xml"
        })
    };
    g.prototype.toDataURL = function () {
        return "data:image/svg+xml;base64," + this.btoa()
    };
    g.prototype.btoa = function () {
        return btoa(this.stringify())
    };
    g.prototype.toString = g.prototype.stringify = function () {
        var a = this,
            d = function (e, g) {
                for (var k in g) switch (k) {
                case "href":
                    var l =
                        c("xlink:href", g[k], a);
                    l && (e += l);
                    break;
                case "clipPath":
                    (l = c("clip-path", "url(#" + g[k].id + ")", a)) && (e += l);
                    break;
                case "viewBox":
                    (l = c(k, g[k].join(" "), a)) && (e += l);
                    break;
                case "transform":
                case "gradientTransform":
                case "patternTransform":
                    l = g[k];
                    if (!l) break;
                    (l = c(k, "matrix(" + l.a + "," + l.b + "," + l.c + "," + l.d + "," + l.x + "," + l.y + ")", a)) && (e += l);
                    break;
                case "fillStyle":
                case "fill":
                    (l = b("fill", g[k], a)) && (e += l);
                    break;
                case "strokeStyle":
                case "stroke":
                    (l = b("stroke", g[k], a)) && (e += l);
                    break;
                case "style":
                    e += d("", g.style);
                    break;
                case "element":
                case "attributes":
                    break;
                default:
                    (l = c(k, g[k], a)) && (e += l)
                }
                return e
            }, e = "",
            g;
        for (g in this.defs) {
            var m = this.defs[g];
            switch (m.type) {
            case "linearGradient":
            case "radialGradient":
                for (var e = e + ("<" + m.type), e = d(e, m), e = e + ">\n", k = m.stops, q = 0; q < k.length; q++) {
                    var p = k[q],
                        r = p.color;
                    if ("rgba" === r.substr(0, 4)) var r = Color.Space(r, "W3>RGBA"),
                    t = r.A / 255, r = Color.Space(r, "RGB>W3"), e = e + ('\t<stop offset="' + p.offset + '" style="stop-color:' + r + ";stop-opacity:" + t + ';"/>\n');
                    else e += '\t<stop offset="' + p.offset + '" style="stop-color:' +
                        p.color + ';"/>\n'
                }
                e += "</" + m.type + ">\n";
                break;
            case "pattern":
                e += "";
                break;
            case "filter":
                e += "<filter";
                e = d(e, m);
                e += ">\n";
                m = m.filter;
                for (q = 0; q < m.length; q++) k = m[q], e += "\t<fe" + k.type, e = d(e, k), e += "/>\n";
                e += "</filter>\n";
                break;
            case "clipPath":
                e += "<clipPath";
                e = d(e, m);
                e += ">\n";
                m = m.d;
                for (q = 0; q < m.length; q++) k = m[q], e += "\t<" + k.type, e = d(e, k), e += "/>\n";
                e += "</clipPath>\n"
            }
        }
        var s = "",
            u = function (b, c) {
                if (b && b.length)
                    for (var g = 0, k = b.length; g < k; g++) {
                        var l = b[g],
                            p = l.type;
                        switch (p) {
                        case "circle":
                        case "ellipse":
                        case "image":
                        case "line":
                        case "path":
                        case "polyline":
                        case "polygon":
                        case "rect":
                            s +=
                                c + "<" + p;
                            s = d(s, l);
                            s += "></" + p + ">\n";
                            break;
                        case "stamp":
                        case "eraser":
                        case "pencil":
                            p = a.__namepace + ":" + p;
                            s += c + "<" + p;
                            s = d(s, l);
                            s += "></" + p + ">\n";
                            break;
                        case "text":
                            s += c + "<text";
                            s = d(s, l);
                            s += ">";
                            if (l = l.childNodes)
                                for (var p = 0, m = l.length; p < m; p++) s += "<tspan", s = d(s, l[p]), s += ">" + l[p].content + "</tspan>";
                            s += "</text>\n";
                            break;
                        case "g":
                            s += c + "<g";
                            s = d(s, l);
                            s += ">\n";
                            u(l.childNodes, c + "\t");
                            s += c + "</g>\n";
                            break;
                        case "svg":
                            s += '<?xml version="1.0" encoding="utf-8"?>\n';
                            s += "\x3c!-- Generator: sketch.js " + a.__version + " <https://sketch.io/api/> --\x3e\n";
                            s += '<svg version="1.1" xmlns="http://www.w3.org/2000/svg"';
                            s += " xmlns:" + a.__namepace + '="' + a.__dtd + '"';
                            s += " " + a.__namepace + ':version="' + a.__version + '"';
                            s = d(s, l);
                            s += ">\n";
                            e && (s += "<defs>" + e + "</defs>");
                            u(l.childNodes, c + "\t");
                            s += "</svg>";
                            break;
                        default:
                            u(l.childNodes, c + "\t")
                        }
                    }
            };
        u([this.vob], "");
        return s
    };
    var d = {
        type: !0,
        childNodes: !0,
        parentNode: !0,
        matrix: !0,
        data: !0,
        bbox: !0
    }, c = function (a, b, c) {
            if (!d[a]) {
                var g = c.__attributes[a];
                if (!g)
                    if (g = c.__attributesNS[a]) a = c.__namepace + ":" + a;
                    else if (a = a.match(c.rxSplitByUppercase).slice(0, -1).join("-").toLowerCase(), g = c.__attributes[a], !g) return console.log(a, b);
                if (g.value !== b) switch (g.format) {
                case "string":
                case "transform":
                    if ("string" !== typeof b) break;
                    return " " + a + '="' + b + '"';
                case "coordinate":
                case "float":
                case "int":
                    if (!isFinite(b)) break;
                    return " " + a + '="' + b + '"';
                default:
                    console.log(g.format)
                }
            }
        }, b = function (a, b, c) {
            var d = c.__attributes[a];
            if (d && d.value !== b) {
                "default" === b && (b = "fill" === a ? c.defaultFill : c.defaultStroke);
                if (c.defs[b]) return " " + a + '="url(#' + b + ')"';
                if (b) return " " + a + '="' + b + '"'
            }
        };
    return a
}(Vector);
"undefined" === typeof Vector && (Vector = {});
var entityRe = /&(quot|apos|lt|gt|amp|#x[^;]+|#\d+);/g,
    decodeEntitySequence = function (a) {
        if (!a.match(entityRe)) return a;
        for (var g = {
            amp: "&",
            apos: "'",
            quot: '"',
            lt: "<",
            gt: ">"
        }, d, c = ""; null !== (d = entityRe.exec(a));) c = "x" === d[1].charAt(1) ? c + String.fromCharCode(d[1].slice(2), 16) : isNaN(parseInt(d[1].slice(1), 10)) ? c + g(d[1]) : c + String.fromCharCode(d[1].slice(1));
        return c
    };
Vector.fonts = {};
Vector.Typeface = function (a) {
    var g = {}, d = "",
        c = ["\t", "\n", "\x0B", "\f", "\r"],
        b = {
            direction: "ltr",
            fontFamily: "sans-serif",
            fontSize: "40px",
            fontStyle: "normal",
            fontWeight: "normal",
            fontVariant: "normal",
            textAlign: "start",
            textBaseline: "alphabetic",
            lineHeight: "1em",
            ctx: a,
            packages: {}
        }, f = b.scaleFactor = 1;
    b.load = function (a, c) {
        var d = function (a) {
            a = b.loadFont(b.parseSVG(a));
            c && c(a)
        };
        "string" === typeof a && -1 === a.indexOf("<svg") ? DOMLoader.sendRequest({
            url: a,
            onload: function (a) {
                d(a.responseText)
            },
            onerror: function (a) {},
            onprogress: function (a) {}
        }) :
            d(a)
    };
    b.parseSVG = function (a) {
        var b = document.createElement("div");
        "string" === typeof a ? b.innerHTML = a : b.appendChild(a);
        var c = null,
            d = b.getElementsByTagName("font")[0],
            f = b.getElementsByTagName("font-face")[0];
        a = f.getAttribute("font-family");
        var g = (c = f.getElementsByTagName("font-face-name")[0]) ? c.getAttribute("name") : a,
            h = f.getAttribute("font-style") || "all",
            t = f.getAttribute("font-variant") || "normal",
            s = f.getAttribute("font-weight") || "all",
            u = f.getAttribute("font-stretch") || "normal",
            y = f.getAttribute("unicode-range") ||
                "U+0-10FFFF",
            w = f.getAttribute("panose-1") || "0 0 0 0 0 0 0 0 0 0",
            v = f.getAttribute("cap-height") || 0,
            x = f.getAttribute("x-height") || 0,
            A = parseFloat(f.getAttribute("units-per-em") || 1E3, 10),
            c = b.getElementsByTagName("missing-glyph")[0],
            C = {
                x: parseFloat(d.getAttribute("horiz-adv-x"), 10),
                y: parseFloat(d.getAttribute("vert-adv-y") || 0, 10) || A
            };
        parseFloat(c ? c.getAttribute("horiz-adv-x") : C.x, 10);
        var d = {
            horiz: {
                x: parseFloat(d.getAttribute("horiz-origin-x") || 0, 10),
                y: parseFloat(d.getAttribute("horiz-origin-y") || 0, 10)
            },
            vert: {
                x: parseFloat(d.getAttribute("vert-origin-x") || 0, 10),
                y: parseFloat(d.getAttribute("vert-origin-y") || 0, 10)
            }
        }, D = parseFloat(f.getAttribute("ascent") || A - d.vert.y, 10),
            B = parseFloat(f.getAttribute("descent") || d.vert.y, 10),
            F = {}, G = ["alphabetic", "ideographic", "mathematical", "hanging"],
            z;
        for (z in G)(c = f.getAttribute(z = G[z])) && (F[z] = parseFloat(c, 10));
        f = {};
        b = b.getElementsByTagName("glyph");
        for (z in b)
            if ((c = b[z]).getAttribute) {
                var J = c.getAttribute("unicode"),
                    G = J.match(entityRe) ? decodeEntitySequence(J).charCodeAt() :
                        J.charCodeAt(),
                    O = parseFloat(c.getAttribute("horiz-adv-x") || C.x, 10),
                    K = Vector.SVGPath.toVOBPath(c.getAttribute("d")) || [],
                    K = new Vector.BBox(K);
                f[G] = {
                    unicode: J,
                    name: c.getAttribute("glyph-name"),
                    xadv: O,
                    width: K.x2 - K.x1,
                    height: K.y2 - K.y1,
                    path: c.getAttribute("d"),
                    data: Vector.SVGPath.toVOBPath(c.getAttribute("d")) || []
                }
            }
        return {
            family: a,
            name: g,
            style: h,
            variant: t,
            weight: s,
            stretch: u,
            range: y,
            panose: w.split(" ").map(parseFloat),
            capHeight: v,
            unitsPerEm: A,
            origin: d,
            advance: C,
            ascent: D,
            descent: B,
            xheight: x,
            baseline: F,
            glyphs: f
        }
    };
    b.measureText = function (a) {
        if (a) {
            a = "" + a;
            for (var b = g.glyphs, c = a.length, d = 0, h = g.advance.y, p = 0, r = 0; r < c; r++) {
                var t = b[a.charCodeAt(r)];
                t && (d += t.xadv, p += t.width)
            }
            return {
                width: d * f,
                height: h * f,
                actualWidth: p * f,
                actualHeight: 0 * f
            }
        }
    };
    b.strokeText = function (a, c, d, f) {
        if (a && isFinite(c) && isFinite(d)) return a = this.drawText(a, c, d, f), b.ctx.stroke(), b.ctx.beginPath(), a
    };
    b.fillText = function (a, c, d, f) {
        if (a && isFinite(c) && isFinite(d)) return a = this.drawText(a, c, d, f), b.ctx.fill(), b.ctx.beginPath(), a
    };
    b.getBaseline = function (a) {
        switch (a ||
            this.textBaseline) {
        case "alphabetic":
            break;
        case "top":
            return g.ascent * f;
        case "hanging":
            return 8 * g.ascent / 10 * f;
        case "absmiddle":
            return ((g.ascent - g.descent) / 2 + g.descent) * f;
        case "middle":
            return g.xheight / 2 * f;
        case "ideographic":
            return g.descent * f;
        case "bottom":
            return g.descent * f;
        default:
            return 0
        }
    };
    b.getPackage = function () {
        return g
    };
    b.calcScaleFactor = function () {
        var a = b.fontSize.toLowerCase(),
            c = c = parseFloat(a),
            d = a.replace(c, "");
        2 < d.length ? c = ScreenMetrics[a + "_px"] : "px" !== d && (c = ScreenMetrics[d + "_px"] * (isNaN(c) ?
            1 : c));
        isNaN(c) || (b.scaleFactor = f = c / g.unitsPerEm)
    };
    b.drawText = function (a, d, h, k) {
        var q = b.ctx;
        if (a.length) {
            for (var p = 0; p < c.length; p++) a = a.split(c[p]).join(" ");
            b.calcScaleFactor();
            d = d || 0;
            p = h || 0;
            switch (this.textAlign) {
            case "start":
                d -= "ltr" === this.direction ? 0 : this.measureText(a).width;
                break;
            case "end":
                d -= "ltr" === this.direction ? this.measureText(a).width : 0;
                break;
            case "right":
                d -= this.measureText(a).width;
                break;
            case "center":
                d -= this.measureText(a).width / 2
            }
            switch (this.textBaseline) {
            case "top":
                p += g.ascent * f;
                break;
            case "hanging":
                p += 8 * g.ascent / 10 * f;
                break;
            case "absmiddle":
                p += ((g.ascent - g.descent) / 2 + g.descent) * f;
                break;
            case "middle":
                p += g.xheight / 2 * f;
                break;
            case "ideographic":
                p += g.descent * f;
                break;
            case "bottom":
                p += g.descent * f
            }
            var r, t, s, u, y;
            "object" === typeof k && (r = k, t = r.minWidth, k = r.maxWidth, s = r.maxHeight, y = r.targetWidth, u = r.targetHeight, r = r.getData);
            q.save();
            q.beginPath();
            h = this.measureText(a);
            var w = h.width,
                v = h.height;
            h = r ? new Vector.Transform : q;
            isFinite(y) ? (h.scale(y / w, 1), d = d * w / y) : (isFinite(k) && w > k && (h.scale(k /
                w, 1), d = d * w / k), isFinite(t) && w < t && (h.scale(t / w, 1), d = d * w / t));
            isFinite(u) ? (h.scale(1, u / v), p = p * v / u) : isFinite(s) && v > s && (h.scale(1, s / v), p = p * v / s);
            (d || p) && h.translate(d, p);
            h.scale(f, -f);
            k = g.glyphs;
            s = [];
            "number" === typeof a && (a = String(a));
            u = 0;
            for (y = a.length; u < y; u++) t = k[d = a.charCodeAt(u)], 10 !== d && 13 !== d && (t || (t = k["?".charCodeAt()]), t.data || (t.data = Vector.SVGPath.toVOBPath(t.path) || []), d = t.data, r ? s.push({
                d: t.path,
                data: h.flatten(t.data, !0, !1)
            }) : (q.beginPath(), Vector.Shapes.VOBPath(q, d), q.fill()), h.translate(t.xadv,
                0));
            q.restore();
            if (r) return {
                childNodes: s
            }
        }
    };
    var h = {
        normal: 400,
        bold: 700,
        lighter: 300,
        bolder: 500
    };
    b.setFont = function (a) {
        if (d !== a) {
            for (var c = a.trim().split(" "), f = c.length, g = 0, q = 0, p = Math.min(3, f); g < p;) {
                var r = c[g];
                if (0 === (q & 1) && -1 !== " normal italic oblique ".indexOf(" " + r + " ")) b.fontStyle = c[g++], q |= 1;
                else if (0 === (q & 2) && -1 !== " normal small-caps ".indexOf(" " + r + " ")) b.fontVariant = c[g++], q |= 2;
                else if (0 === (q & 4) && (-1 !== " normal bold bolder lighter ".indexOf(" " + r + " ") || 3 === r.length && "1" <= r.charAt(0) && "9" >=
                    r.charAt(0) && "0" === r.charAt(1) && "0" === r.charAt(2))) b.fontWeight = h[c[g++]], q |= 4;
                else break
            }
            g < f && (q = c[g], p = q.indexOf("/"), -1 === p ? g++ : (q = q.substring(0, p), c[g] = c[g].substring(p)), b.fontSize = q);
            g < f && "/" === c[g].substr(0, 1) && ("/" !== c[g] ? b.lineHeight = c[g++].substring(1) : ++g < f && (b.lineHeight = c[g++]));
            if (g < f) {
                for (q = c[g++]; g < f;) q += " " + c[g++];
                b.fontFamily = q;
                b.loadFont(q)
            }
            d = a
        }
    };
    b.loadFont = function (a) {
        if ("string" === typeof a) {
            var c = a;
            a = Vector.fonts[c]
        } else c = a.family, Vector.fonts[c] = a;
        g.family !== c && (a ? g = b.packages[c] =
            a : c in b.packages && (g = b.packages[c]));
        return a
    };
    Vector.font && (b.loadFont(Vector.font), b.fontFamily = Vector.name);
    return b
};
"undefined" === typeof Vector && (Vector = {});
Vector.SVGPath = function (a) {
    var g = {
        m: 2,
        l: 2,
        h: 1,
        v: 1,
        c: 6,
        s: 4,
        q: 4,
        t: 2,
        a: 7,
        z: 0
    };
    a.fromVOBPath = function (a) {
        for (var b = "", d = {}, g = 0, e = a.length; g < e; g++) switch ((d = a[g]).cmd) {
        case "M":
            b += "M" + d.x + " " + d.y + " ";
            break;
        case "L":
            b += "L" + d.x + " " + d.y + " ";
            break;
        case "C":
            b += "C" + d.x1 + " " + d.y1 + ", " + d.x2 + " " + d.y2 + ", " + d.x + " " + d.y + " ";
            break;
        case "Q":
            b += "Q" + d.x1 + " " + d.y1 + ", " + d.x + " " + d.y + " ";
            break;
        case "Z":
            b += "Z "
        }
        return b.substr(0, b.length - 1)
    };
    a.fromVOBPolygon = function (a) {
        for (var b = "", d = {}, g = 0, e = a.length; g < e; g++) switch ((d = a[g]).cmd) {
        case "M":
        case "L":
            b +=
                d.x + "," + d.y + " "
        }
        return b.substr(0, b.length - 1)
    };
    a.toVOBPath = function (a) {
        if (a) {
            a = a.replace(/([^e])([+-])/g, "$1 $2");
            a = a.match(/([mlhvcsqtaz])|[0-9.\-e]*/gi);
            for (var b = [], f = 0, h = a.length; f < h; f++) a[f] && b.push(a[f]);
            a = b;
            for (var b = "", e = f = 0, l = 0, m = 0, k = 0, q, p, r = "", t = 0, s = []; b = a[f];) {
                var u = g[b.toLowerCase()] + 1;
                if (u) {
                    for (var y = 1, h = u, w = []; y < h; y++) w.push(parseFloat(a[f + y]));
                    t = u;
                    f += u
                } else {
                    y = 0;
                    h = t - 1;
                    for (w = []; y < h; y++) w.push(parseFloat(a[f + y]));
                    b = "m" === r ? "l" : "M" === r ? "L" : r;
                    f += t - 1
                } if (b) {
                    switch (b) {
                    case "M":
                        e = w[0];
                        l = w[1];
                        m = e;
                        k = l;
                        q = p = null;
                        s.push({
                            cmd: "M",
                            x: e,
                            y: l
                        });
                        break;
                    case "m":
                        e += w[0];
                        l += w[1];
                        m = e;
                        k = l;
                        q = p = null;
                        s.push({
                            cmd: "M",
                            x: e,
                            y: l
                        });
                        break;
                    case "L":
                        e = w[0];
                        l = w[1];
                        q = p = null;
                        s.push({
                            cmd: "L",
                            x: e,
                            y: l
                        });
                        break;
                    case "l":
                        e += w[0];
                        l += w[1];
                        q = p = null;
                        s.push({
                            cmd: "L",
                            x: e,
                            y: l
                        });
                        break;
                    case "H":
                        e = w[0];
                        q = p = null;
                        s.push({
                            cmd: "L",
                            x: e,
                            y: l
                        });
                        break;
                    case "h":
                        e += w[0];
                        q = p = null;
                        s.push({
                            cmd: "L",
                            x: e,
                            y: l
                        });
                        break;
                    case "V":
                        l = w[0];
                        q = p = null;
                        s.push({
                            cmd: "L",
                            x: e,
                            y: l
                        });
                        break;
                    case "v":
                        l += w[0];
                        q = p = null;
                        s.push({
                            cmd: "L",
                            x: e,
                            y: l
                        });
                        break;
                    case "C":
                        e = w[4];
                        l =
                            w[5];
                        q = w[2];
                        p = w[3];
                        s.push({
                            cmd: "C",
                            x1: w[0],
                            y1: w[1],
                            x2: w[2],
                            y2: w[3],
                            x: w[4],
                            y: w[5]
                        });
                        break;
                    case "c":
                        0 === w[4] && 0 === w[5] && (w[4] += 1E-4, w[5] += 1E-4);
                        s.push({
                            cmd: "C",
                            x1: w[0] + e,
                            y1: w[1] + l,
                            x2: w[2] + e,
                            y2: w[3] + l,
                            x: w[4] + e,
                            y: w[5] + l
                        });
                        q = e + w[2];
                        p = l + w[3];
                        e += w[4];
                        l += w[5];
                        break;
                    case "S":
                        null !== q && r.match(/[sc]/i) || (q = e, p = l);
                        s.push({
                            cmd: "C",
                            x1: e - (q - e),
                            y1: l - (p - l),
                            x2: w[0],
                            y2: w[1],
                            x: w[2],
                            y: w[3]
                        });
                        q = w[0];
                        p = w[1];
                        e = w[2];
                        l = w[3];
                        break;
                    case "s":
                        0 === w[2] && 0 === w[3] && (w[2] += 1E-4, w[3] += 1E-4);
                        null !== q && r.match(/[sc]/i) || (q = e, p = l);
                        s.push({
                            cmd: "C",
                            x1: e - (q - e),
                            y1: l - (p - l),
                            x2: e + w[0],
                            y2: l + w[1],
                            x: e + w[2],
                            y: l + w[3]
                        });
                        q = e + w[0];
                        p = l + w[1];
                        e += w[2];
                        l += w[3];
                        break;
                    case "Q":
                        q = w[0];
                        p = w[1];
                        e = w[2];
                        l = w[3];
                        s.push({
                            cmd: "Q",
                            x1: w[0],
                            y1: w[1],
                            x: w[2],
                            y: w[3]
                        });
                        break;
                    case "q":
                        0 === w[2] && 0 === w[3] && (w[2] += 1E-4, w[3] += 1E-4);
                        s.push({
                            cmd: "Q",
                            x1: w[0] + e,
                            y1: w[1] + l,
                            x: w[2] + e,
                            y: w[3] + l
                        });
                        q = e + w[0];
                        p = l + w[1];
                        e += w[2];
                        l += w[3];
                        break;
                    case "T":
                        null !== q && r.match(/[qt]/i) ? (q = e - (q - e), p = l - (p - l)) : (q = e, p = l);
                        s.push({
                            cmd: "Q",
                            x1: q,
                            y1: p,
                            x: w[0],
                            y: w[1]
                        });
                        e = w[0];
                        l = w[1];
                        break;
                    case "t":
                        0 === w[0] && 0 === w[1] &&
                            (w[0] += 1E-4, w[1] += 1E-4);
                        null !== q && r.match(/[qt]/i) ? (q = e - (q - e), p = l - (p - l)) : (q = e, p = l);
                        s.push({
                            cmd: "Q",
                            x1: q,
                            y1: p,
                            x: e + w[0],
                            y: l + w[1]
                        });
                        e += w[0];
                        l += w[1];
                        break;
                    case "A":
                        h = d(w[5], w[6], w[0], w[1], w[3], w[4], w[2], e, l);
                        for (e = 0; e < h.length; e++) s.push(h[e]);
                        e = w[5];
                        l = w[6];
                        break;
                    case "a":
                        w[5] += e;
                        w[6] += l;
                        h = d(w[5], w[6], w[0], w[1], w[3], w[4], w[2], e, l);
                        for (e = 0; e < h.length; e++) s.push(h[e]);
                        e = w[5];
                        l = w[6];
                        break;
                    case "Z":
                        s.push({
                            cmd: "Z",
                            x: m,
                            y: k
                        });
                        k = m = 0;
                        break;
                    case "z":
                        s.push({
                            cmd: "Z",
                            x: m,
                            y: k
                        }), e = m, l = k
                    }
                    r = b
                }
            }
            return s
        }
    };
    var d = function (a,
        b, d, g, e, l, m, k, q) {
        var p = Math.PI,
            r = m * (p / 180);
        m = Math.sin(r);
        var r = Math.cos(r),
            t = [];
        d = Math.abs(d);
        g = Math.abs(g);
        var s = 0.5 * r * (k - a) + 0.5 * m * (q - b),
            u = 0.5 * r * (q - b) - 0.5 * m * (k - a),
            s = s * s / (d * d) + u * u / (g * g);
        1 < s && (s = Math.sqrt(s), d *= s, g *= s);
        var s = r / d,
            u = m / d,
            y = -m / g,
            w = r / g,
            v = s * k + u * q;
        q = y * k + w * q;
        k = s * a + u * b;
        a = y * a + w * b;
        s = 1 / ((k - v) * (k - v) + (a - q) * (a - q)) - 0.25;
        0 > s && (s = 0);
        s = Math.sqrt(s);
        l === e && (s = -s);
        e = 0.5 * (v + k) - s * (a - q);
        b = 0.5 * (q + a) + s * (k - v);
        v = Math.atan2(q - b, v - e);
        q = Math.atan2(a - b, k - e) - v;
        0 > q && 1 === l ? q += 2 * p : 0 < q && 0 === l && (q -= 2 * p);
        l = Math.ceil(Math.abs(q /
            (0.5 * p + 0.0010)));
        for (p = 0; p < l; p++) {
            a = v + p * q / l;
            var x = v + (p + 1) * q / l,
                s = r * d,
                u = -m * g,
                y = m * d,
                w = r * g;
            k = 0.5 * (x - a);
            var A = 8 / 3 * Math.sin(0.5 * k) * Math.sin(0.5 * k) / Math.sin(k);
            k = e + Math.cos(a) - A * Math.sin(a);
            a = b + Math.sin(a) + A * Math.cos(a);
            var C = e + Math.cos(x),
                D = b + Math.sin(x),
                B = C + A * Math.sin(x),
                x = D - A * Math.cos(x);
            t[p] = {
                cmd: "C",
                x1: s * k + u * a,
                y1: y * k + w * a,
                x2: s * B + u * x,
                y2: y * B + w * x,
                x: s * C + u * D,
                y: y * C + w * D
            }
        }
        return t
    };
    return a
}({});
"undefined" === typeof Vector && (Vector = {});
var Vector = function (a) {
    var g = a.SVG;
    g.prototype.render = function (d) {
        if (this.vob) {
            d = d || {};
            var c = d.viewBox || this.viewBox,
                b = d.placement || this.placement;
            if ("[object CanvasRenderingContext2D]" === String(d)) var f = d,
            g = a.Transform.getIdentity();
            else f = d.ctx || this.ctx, f || (f = this.ctx = this.createCanvas().ctx), g = d.matrix || a.Transform.getIdentity();
            f.save();
            switch (b) {
            case "svgsize":
                var c = this.vob.viewBox || c,
                    g = c[2] - c[0],
                    e = c[3] - c[1];
                f.canvas.width = c[2];
                f.canvas.height = c[3];
                var b = new a.Transform,
                    l = b.translate(c[0],
                        c[1]).matrix;
                break;
            case "crop":
                g = c[2] - c[0];
                e = c[3] - c[1];
                b = new a.Transform;
                l = b.translate(-c[0], -c[1]).matrix;
                if (d.width && d.height) {
                    var b = d.width - c[0],
                        m = d.height - c[1],
                        k = Math.min(b / g, m / e);
                    l.a *= k;
                    l.d *= k;
                    l.x += (b + c[0] - g * k) / 2;
                    l.y += (m + c[1] - e * k) / 2;
                    f.canvas.width = d.width;
                    f.canvas.height = d.height
                } else f.canvas.width = g >> 0, f.canvas.height = e >> 0;
                f.transform(l.a, l.b, l.c, l.d, l.x, l.y);
                break;
            case "bbox":
                e = c[2] * g.a;
                b = e - c[0] * g.a;
                b = g.a * (e / b - 1);
                this.vob.matrix = g;
                this.vob.matrix.a += b;
                this.vob.matrix.d += b;
                this.vob.matrix.x -=
                    c[0] * this.vob.matrix.a;
                this.vob.matrix.y -= c[1] * this.vob.matrix.d;
                l = this.vob.matrix;
                f.transform(l.a, l.b, l.c, l.d, l.x, l.y);
                break;
            case "none":
                f.canvas.width = this.ctx.canvas.width, f.canvas.height = this.ctx.canvas.height
            }
            d.defaultFill && (this.defaultFill = d.defaultFill);
            c = d.childNodes || [this.vob];
            this.activeAreas = [];
            this.renderChildNodes(f, d, c);
            f.restore();
            return this.activeAreas
        }
    };
    g.prototype.renderChildNodes = function (d, c, b, f) {
        var g;
        if (b && b.length) {
            var e = b.length,
                l = a.Shapes;
            this.typeface && (this.typeface.ctx =
                d);
            for (var m = 0; m < e; m++) {
                var k = b[m];
                this.currentNode = k;
                d && (d.save(), d.beginPath(), d.save());
                k.matrix && (g = k.matrix, d && d.transform(g.a, g.b, g.c, g.d, g.x, g.y));
                k.clipPath && k.clipPath.length && (this.renderChildNodes(d, c, k.clipPath, !0), d && (d.clip(), d.beginPath()));
                switch (k.type) {
                case "image":
                    d.drawImage(k.image, k.x, k.y, k.width, k.height);
                    break;
                case "line":
                    d.moveTo(k.x1, k.y1);
                    d.lineTo(k.x2, k.y2);
                    break;
                case "polyline":
                case "polygon":
                case "path":
                    l.VOBPath(d, k.data);
                    break;
                case "ellipse":
                    l.ellipse(d, k.cx, k.cy, k.rx,
                        k.ry);
                    break;
                case "circle":
                    l.ellipse(d, k.cx, k.cy, k.r, k.r);
                    break;
                case "rect":
                    isFinite(k.rx) ? l.roundRect(d, k.x, k.y, k.width, k.height, k.rx, k.ry) : l.rect(d, k.x, k.y, k.width + k.x, k.height + k.y)
                }
                c.point && d.isPointInPath(c.point.x, c.point.y) && this.activeAreas.push(k);
                this.debugBBox && (k.bbox && !f) && (g = k.bbox, d.save(), d.setTransform(1, 0, 0, 1, 0, 0), d.strokeRect(g.x1, g.y1, g.x2 - g.x1, g.y2 - g.y1), d.restore());
                (g = k.style) && !f && (d.save(), "undefined" !== typeof g.opacity && (d.globalAlpha = g.opacity), g.fillStyle && (this.setStyle(d,
                    this.defs[g.fillStyle] || g, "fillStyle", this.defaultFill), d.save(), d.globalAlpha *= g.fillOpacity, k.content ? (d.font = this.fontStyleToString(d, g), "SVG" === g.fontRenderer ? (this.typeface.setFont(d.font), this.typeface.fillText(k.content, k.x, k.y)) : d.fillText(k.content, k.x, k.y)) : d.fill(), d.restore()), d.lineWidth = 0 === g.strokeWidth ? 1E-10 : g.strokeWidth || 1, d.lineCap = g.strokeLinecap || "butt", d.lineJoin = g.strokeLinejoin || "miter", d.miterLimit = g.strokeMiterlimit || d.lineWidth, g.strokeStyle && "none" !== g.strokeStyle && (this.setStyle(d,
                    this.defs[g.strokeStyle] || g, "strokeStyle", this.defaultStroke), d.save(), d.globalAlpha *= g.strokeOpacity, k.content ? (d.font = this.fontStyleToString(d, g), "SVG" === g.fontRenderer ? (this.typeface.setFont(d.font), this.typeface.strokeText(k.content, k.x, k.y)) : d.strokeText(k.content, k.x, k.y)) : d.stroke(), d.restore()), d.restore());
                d.restore();
                k.childNodes && k.childNodes.length && this.renderChildNodes(d, c, k.childNodes, f);
                d.restore()
            }
        }
    };
    g.prototype.setStyle = function (d, c, b, f) {
        "undefined" !== typeof c.strokeWidth && (d.lineWidth =
            c.strokeWidth || 1E-10);
        "undefined" !== typeof c.strokeLinecap && (d.lineCap = c.strokeLinecap);
        "undefined" !== typeof c.strokeLinejoin && (d.lineJoin = c.strokeLinejoin);
        "undefined" !== typeof c.strokeMiterlimit && (d.miterLimit = c.strokeMiterlimit);
        var g;
        if (c.gradientTransform) {
            var e = c.gradientTransform;
            if (this.currentNode && this.currentNode.matrix) {
                var l = new a.Transform;
                (g = this.vob.matrix) && l.scale(g.a, g.d);
                g = this.currentNode.matrix;
                l.transform(g.a, g.b, g.c, g.d, g.x, g.y);
                l.transform(e.a, e.b, e.c, e.d, e.x, e.y);
                g = l.matrix
            }
        }
        switch (c.type) {
        case "linearGradient":
            "undefined" ===
                String(c.x1) && (c.x1 = 0);
            "undefined" === String(c.y1) && (c.y1 = 0);
            "undefined" === String(c.x2) && (c.x2 = 0);
            "undefined" === String(c.y2) && (c.y2 = 0);
            if (!d) break;
            g && d.setTransform(g.a, g.b, g.c, g.d, g.x, g.y);
            if ("objectBoundingBox" === c.gradientUnits) {
                0 === c.x1 && (0 === c.y1 && 0 === c.x2 && 0 === c.y2) && (c.x2 = 1);
                var m = this.currentNode;
                if (!m.bbox) break;
                f = m.bbox;
                var k = f.x1 + (f.x2 - f.x1) * c.x1,
                    q = f.y1 + (f.y2 - f.y1) * c.y1,
                    p = f.x1 + (f.x2 - f.x1) * c.x2,
                    r = f.y1 + (f.y2 - f.y1) * c.y2,
                    l = d.createLinearGradient(k, q, p, r),
                    l = (new a.Transform(m.matrix)).invert(),
                    k = l.point2d(k, q),
                    l = l.point2d(p, r),
                    l = d.createLinearGradient(k.x, k.y, l.x, l.y)
            } else l = d.createLinearGradient(c.x1, c.y1, c.x2, c.y2);
            f = 0;
            for (e = c.stops.length; f < e; f++) g = c.stops[f], l.addColorStop(g.offset, g.color);
            d[b] = l;
            break;
        case "radialGradient":
            "undefined" === typeof c.cx && (c.cx = 0.5);
            "undefined" === typeof c.cy && (c.cy = 0.5);
            "undefined" === typeof c.fx && (c.fx = 0.5);
            "undefined" === typeof c.fy && (c.fy = 0.5);
            "undefined" === typeof c.r && (c.r = 0.5);
            if (!d) break;
            g && d.setTransform(g.a, g.b, g.c, g.d, g.x, g.y);
            if ("objectBoundingBox" ===
                c.gradientUnits) {
                m = this.currentNode;
                f = m.bbox;
                if (!m.bbox) break;
                e = f.x2 - f.x1;
                g = f.y2 - f.y1;
                var k = f.x1 + e * c.cx,
                    q = f.y1 + g * c.cy,
                    p = f.x1 + e * c.fx,
                    r = f.y1 + g * c.cy,
                    t = 1.6 * Math.max(e, g) * c.r,
                    l = (new a.Transform(m.matrix)).invert(),
                    k = l.point2d(k, q),
                    l = l.point2d(p, r),
                    l = d.createRadialGradient(k.x, k.y, 0, l.x, l.y, t);
                g < e && (e = g / e, d.translate(0, f.y2), d.scale(1, e))
            } else l = d.createRadialGradient(c.cx, c.cy, 0, c.fx, c.fy, c.r);
            f = 0;
            for (e = c.stops.length; f < e; f++) g = c.stops[f], l.addColorStop(g.offset, g.color);
            d[b] = l;
            break;
        case "pattern":
            d.translate(c.x ||
                0, c.y || 0);
            d[b] = c.pattern || "none";
            break;
        default:
            d[b] = "default" === c[b] ? f || this.defaultFill : c[b]
        }
    };
    return a
}(Vector),
    menyInit = function () {
        function a(a, b) {
            g(a);
            Event.add(document, "mousemove", g);
            Event.add(document, "mouseup", d);
            p = !0
        }

        function g(a) {
            a = Event.proxy.getCoord(a);
            document.querySelector(".avgrund-active") || p || (a = a.x - l, a > k ? (!0 === q && (q = !1, a = document.documentElement, a.className = a.className.replace("meny-active", ""), f.style.overflow = "hidden"), Event.remove(document, "mousemove", g)) : a < m && (!1 === q && (q = !0,
                b(document.documentElement, "meny-active"), f.style.overflow = ""), widget.windows.lazyloader(".meny .lazy")))
        }

        function d(a, b) {
            g(a);
            Event.remove(document, "mouseup", g);
            p = !1
        }

        function c(a) {
            window.location.hash.match("fold") && !document.body.className.match("meny-fold") ? (b(document.body, "meny-fold"), a = document.createElement("div"), a.className = "meny right", a.innerHTML = f.innerHTML + '<div class="cover"></div>', document.body.appendChild(a), b(f, "left")) : (a = document.body, a.className = a.className.replace("meny-fold",
                ""), (a = document.querySelector(".meny.right")) && a.parentNode.removeChild(a))
        }

        function b(a, b) {
            a.className = a.className.replace(/\s+$/gi, "") + " " + b
        }
        var f = document.querySelector(".meny"),
            h = document.querySelector(".meny-arrow");
        f.style.overflow = "hidden";
        h.style.display = "block";
        if (f && f.parentNode) {
            var e = f.parentNode;
            e.className += " meny-wrapper";
            var l = e.offsetLeft,
                m = 25,
                k = f.offsetWidth || 400,
                q = !1,
                p = !1,
                e = "WebkitPerspective" in document.body.style || "MozPerspective" in document.body.style || "msPerspective" in document.body.style ||
                    "OPerspective" in document.body.style || "perspective" in document.body.style;
            Event.add([f, h], "mousedown", a);
            c();
            e || (document.documentElement.className += " meny-no-transform");
            document.documentElement.className += " meny-ready";
            window.setTimeout(function () {
                f.style.opacity = 1
            }, 150)
        }
    }, EnableContextMenu = function (a, g) {
        function d(a) {
            setTimeout(a, 0)
        }

        function c(a) {
            var b = 0,
                c = 0;
            if (a.getClientRects) return a.getClientRects()[0];
            do b += a.offsetLeft, c += a.offsetTop, a = a.offsetParent; while (a);
            return {
                left: b,
                top: c
            }
        }

        function b(a) {
            return a.get ?
                a.get(0) : a
        }

        function f(a, b) {
            if (b) throw "no need to fade";
            a.style.display = "none";
            var c = a.launcher;
            c && c.removeAttribute("open")
        }

        function h() {
            var a = R.pop();
            f(a);
            return a
        }

        function e() {
            K.style.opacity = "0.0";
            O = setTimeout(function () {
                for (; R.length;) h(!1);
                K.style.display = "none";
                K.style.opacity = "1.0";
                x()
            }, E)
        }

        function l(a) {
            a.stopPropagation();
            a.preventDefault()
        }

        function m(a, b) {
            return b.nodeName === a ? b : m(a, b.parentNode || {
                nodeName: a
            })
        }

        function k(a) {
            var b = m("CMENU", a.target);
            if (N) {
                if (N === b) {
                    R.push(b);
                    N = void 0;
                    return
                }
                console.error("SHOULD NOT BE A PREVIEW")
            }
            a =
                R.length;
            b = R.indexOf(b);
            for (a -= 1; a > b; a--) h()
        }

        function q(a) {
            if ("CMENU" !== a.target.nodeName || 0 !== a.offsetX) return a.stopPropagation(), a.preventDefault(), !1
        }

        function p(a) {
            da = clearTimeout(da);
            if (m("CMENU", a.toElement) === N) return !1;
            N && (f(N), N = void 0)
        }

        function r(a) {
            da = clearTimeout(da);
            da = setTimeout(function () {
                var b = a.srcElement,
                    d = b._contextMenu;
                d.launcher = b;
                b.setAttribute("open", !0);
                N && N !== d && f(N);
                N = d;
                b = c(b);
                d.style.top = b.top - 5 + "px";
                d.style.left = b.left + b.width - 1 + "px";
                d.style.display = "inline-block"
            }, 200)
        }

        function t(b) {
            var c = b.parentNode,
                d;
            Event.add(b, "mouseover", k, !1);
            Event.add(b, "mousedown", q);
            Event.add(b, "contextmenu", l);
            "CMENU" === c.nodeName ? (d = a.createElement("menuitem"), b.classList.add("submenu"), d.className = b.className, d.innerHTML = b.innerHTML, d._contextMenu = b, Event.add(d, "mouseover", r), Event.add(d, "mouseout", p), c.replaceChild(d, b)) : c.removeChild(b);
            K.appendChild(b)
        }

        function s(a, b, c) {
            c -= 5;
            aa = new Date;
            R.push(a);
            a.style.top = c + "px";
            a.style.left = b + "px";
            a.style.display = "inline-block";
            K.style.display =
                "block";
            X = !1;
            var d = b + a.offsetWidth,
                e = c + a.offsetHeight,
                f = document.body.offsetHeight,
                g = document.body.offsetWidth;
            e > f && (a.style.top = c - (e - f) + "px");
            d > g && (a.style.left = b - (d - g) + "px")
        }

        function u(a, b, d) {
            var e;
            void 0 === d && (d = a.target);
            e = c(d);
            void 0 === b && (b = w(d));
            s(b, e.left, e.top + e.height + 8);
            a && (a.preventDefault(), a.stopPropagation());
            X = !0;
            return !1
        }

        function y(a, b, c) {
            u(a);
            X = !1
        }

        function w(b) {
            if (b && b.hasAttribute) return b._contextMenu ? b._contextMenu : b.hasAttribute("contextmenu") ? (b = a.getElementById(b.getAttribute("contextmenu")),
                b._contextMenu = b) : w(b.parentNode)
        }

        function v(a) {
            var b = w(a.srcElement),
                c = a.clientX,
                d = a.clientY;
            s(b, a.clientX, a.clientY);
            X = !0;
            z = c;
            J = d;
            a.preventDefault();
            a.stopPropagation();
            return !1
        }

        function x() {
            la.forEach(function (a) {
                try {
                    a()
                } catch (b) {
                    setTimeout(function () {
                        throw b;
                    }, 0)
                }
            });
            la = []
        }

        function A() {
            R = [];
            K = a.createElement("div");
            var b = "osx10_7",
                c = 0;
            /Mac/.test(navigator.userAgent) ? b = "osx10_7" : /Win/.test(navigator.userAgent) && (b = "win7");
            a.body.classList && (a.body.classList.add(b), K.className = "_contextmenu_screen_",
                E = 150, aa = 0, a.body.appendChild(K), Event.add(K, "contextmenu", function (a) {
                    a.preventDefault()
                }), Event.add(K, "mousedown", function (a) {
                    e(a)
                }), Event.add(K, "mouseup", function (a) {
                    a.stopPropagation();
                    if (!c) {
                        var b = a.target;
                        if ("MENUITEM" === b.nodeName) {
                            if (b._contextMenu) return !1;
                            if (X) {
                                var d;
                                document.createEvent && (d = document.createEvent("MouseEvents"));
                                b && (b.dispatchEvent && d && d.initMouseEvent) && (d.initMouseEvent("click", !0, !0, document.defaultView, 1, a.screenX, a.screenY, a.clientX, a.clientY, !1, !1, !1, !1, 0, null), b.dispatchEvent(d))
                            }
                        }
                        300 >
                            new Date - aa ? X = !1 : e(a)
                    }
                }), Event.add(K, "mousewheel", function (a) {
                    a.preventDefault();
                    a.stopPropagation();
                    return !1
                }, !0), Event.add(K, "contextmenu", function (b) {
                    K.style.display = "none";
                    var g = a.elementFromPoint(b.clientX, b.clientY),
                        h = w(g),
                        k, l, p;
                    if (h) {
                        K.style.display = "block";
                        clearTimeout(O);
                        b.preventDefault();
                        if (R[0] === h && (g = b.clientX, k = b.clientY, l = g - z, p = k - J, z = g, J = k, 50 > l * l + p * p)) {
                            K.style.opacity = "1.0";
                            K.style.display = "block";
                            clearTimeout(O);
                            d(e);
                            return
                        }
                        c++;
                        setTimeout(function () {
                            for (; R.length;) {
                                var a = R.pop();
                                f(a)
                            }
                            K.style.display = "none";
                            K.style.opacity = "1.0";
                            K.style.display = "block";
                            d(function () {
                                c--;
                                s(h, b.clientX, b.clientY)
                            })
                        }, E);
                        return !1
                    }
                    K.style.opacity = "1.0";
                    K.style.display = "block";
                    clearTimeout(O);
                    d(e)
                }), Event.add(K, "mouseover", function (a) {
                    a.target === K && (da = clearTimeout(da), N && (f(N), N = void 0))
                }))
        }

        function C() {
            var b = a.getElementsByTagName("cmenu"),
                c, d, e = [];
            c = 0;
            for (d = b.length; c < d; c++) e[c] = b[c];
            c = 0;
            for (d = e.length; c < d; c++) t(e[c])
        }

        function D() {
            var b = a.querySelectorAll("[contextmenu]"),
                c, d, e;
            d = 0;
            for (e = b.length; d <
                e; d++) c = b[d], c._contextMenu = a.getElementById(c.getAttribute("contextmenu")), "INPUT" === c.nodeName ? (Event.add(c, "mouseup", y), Event.add(c, "contextmenu", u)) : Event.add(c, "contextmenu", v)
        }

        function B(b) {
            var c = a.createElement("cmenu"),
                d, e, f, g;
            c.setAttribute("type", "context");
            d = 0;
            for (e = b.length; d < e; d++)
                if (f = b[d]) {
                    if (f.children) g = B(f.children), g.setAttribute("label", f.label);
                    else if (f.hr) g = a.createElement("hr");
                    else {
                        g = a.createElement("menuitem");
                        g.innerHTML = f.label;
                        f.onclick && Event.add(g, "mouseup", f.onclick);
                        f.icon && (g.icon = f.icon);
                        f.checked && g.setAttribute("checked", f.checked ? "checked" : "");
                        var h, k = {
                                label: !0,
                                icon: !0,
                                hr: !0,
                                onclick: !0,
                                checked: !0
                            };
                        for (h in f) f.hasOwnProperty(h) && k[h] && g.dataset && (g.dataset[h] = f[h])
                    }
                    c.appendChild(g)
                }
            return c
        }

        function F(b) {
            b = B(b);
            var c, d, e, f;
            a.body.appendChild(b);
            if (G) return b;
            c = b.getElementsByTagName("cmenu");
            d = [b];
            e = 0;
            for (f = c.length; e < f; e++) d.push(c[e]);
            e = 0;
            for (f = d.length; e < f; e++) t(d[e]);
            return b
        }
        var G = !1,
            z, J, O, K, R, N, E, aa, da, X = !1,
            la = [],
            V = g.contextmenu;
        G || (A(), C(), D());
        F.show =
            function (c, d, e, f) {
                if (G) throw "Not supported!";
                c = "string" === typeof c ? a.getElementById(c) : b(c);
                "number" === typeof d ? (s(c, d, e), X = f || X) : (u(null, c, b(d)), X = !1);
                return this
        };
        F.then = function (a) {
            G ? a() : la.push(a)
        };
        F.attach = function (a, c) {
            a = b(a);
            c = b(c);
            a._contextMenu = c;
            "INPUT" === a.nodeName || "BUTTON" === a.nodeName ? (Event.add(a, "mouseup", y), Event.add(a, "contextmenu", u)) : Event.add(a, "contextmenu", v)
        };
        F.noConflict = function () {
            g.contextmenu = V;
            return F
        };
        return g.contextmenu = F
    };
"undefined" === typeof sketch && (sketch = {});
sketch = function (a) {
    a.setup.contextMenu = function () {
        var g = function (b, c, g) {
            if ("string" === typeof g) {
                var e = g;
                g = function () {
                    a.run(e)
                }
            }
            d.push({
                label: "<span class='fontawesome'>&#" + b + ";</span> " + c,
                onclick: g
            })
        }, d = [];
        g("xF15B", "New Project&hellip;", function () {
            a.ui.openProjectWindow(".new-project", !0)
        });
        g("xF07C", "My Projects&hellip;", function () {
            a.ui.openProjectWindow(".open-project", !0)
        });
        g("xF074", "Export&hellip;", function () {
            a.ui.openProjectWindow(".export-project", !0)
        });
        g("xF02F", "Print&hellip;", function () {
            a.print()
        });
        g("xF0E2", "Undo history&hellip;", function () {
            a.run("undo")
        });
        g("xF01e", "Redo history&hellip;", function () {
            a.run("redo")
        });
        globalExists("chrome.app.window") && d.push({
            label: "<span class='fontawesome'>&#xF011;</span> Quit",
            onclick: function () {
                a.confirm({
                    message: "exit-confirm",
                    callback: function (b) {
                        b ? chrome.app.window.current().close() : a.ui.openProjectWindow(".open-project", !0)
                    },
                    labels: {
                        ok: "Quit",
                        cancel: "Cancel"
                    }
                })
            }
        });
        a.ui.menuMain = a.ui.contextMenu(d);
        var c = function (b) {
            var c = b.toLowerCase().replace("google drive",
                "gdrive");
            g("x" + {
                twitter: "F099",
                facebook: "F082",
                gdrive: "F0D4",
                pinterest: "F0D3",
                imgur: "F03E",
                tumblr: "F174",
                stumbleupon: "F0AC",
                gmail: "F0E0",
                myspace: "F183",
                delicious: "F0C1",
                reddit: "F118"
            }[c], b, function () {
                var b = a.configure.fileName,
                    d = a.configure.fileDescription;
                a.api.test(c, a.save.canvas(), b, d)
            })
        }, d = [];
        c("Facebook");
        c("Google Drive");
        c("GMail");
        c("Imgur");
        c("Pinterest");
        c("Tumblr");
        c("Twitter");
        a.ui.menuMainExport = a.ui.contextMenu(d);
        d = [];
        g("xF125", "Save Region&hellip;", "snapshot");
        g("xF019", "Save PNG&hellip;",
            "save");
        a.supports.jpeg && g("xF019", "Save JPEG&hellip;", "save-jpeg");
        a.supports.webp && g("xF019", "Save WebP&hellip;", "save-webp");
        a.supports.blob && g("xF187", "Save PDF&hellip;", "save-pdf");
        a.supports.blob && g("xF187", "Save ZIP&hellip;", "save-zip");
        a.ui.menuMainDownload = a.ui.contextMenu(d);
        d = [];
        d.push({
            label: "<span class='fontawesome'>&#xF004;</span> About",
            onclick: function () {
                a.run("about")
            }
        });
        d.push({
            label: "<span class='fontawesome'>&#xF0D4;</span> Community Page",
            onclick: function () {
                window.open("https://plus.google.com/communities/113561358709619167722")
            }
        });
        d.push({
            label: "<span class='fontawesome'>&#xF11C;</span> Keyboard Shortcuts",
            onclick: function () {
                a.run("help")
            }
        });
        d.push({
            label: "<span class='fontawesome'>&#xF188;</span> Report Bug",
            onclick: function () {
                window.open("http://webapps.stackexchange.com/questions/tagged/sketch.io-bug")
            }
        });
        d.push({
            label: "<span class='fontawesome'>&#xF121;</span> Request Feature",
            onclick: function () {
                window.open("http://webapps.stackexchange.com/questions/tagged/sketch.io-feature")
            }
        });
        a.ui.menuMainAbout = a.ui.contextMenu(d);
        d = [];
        d.push({
            label: "Select all",
            onclick: function () {
                a.run("select-all")
            }
        });
        d.push({
            label: "Copy all",
            onclick: function () {
                a.run("select-all");
                a.run("layer-copy")
            }
        });
        d.push({
            label: "Cut all",
            onclick: function () {
                a.run("select-all");
                a.run("layer-cut")
            }
        });
        d.push({
            label: "Paste",
            onclick: function () {
                a.run("layer-paste")
            }
        });
        d.push({
            label: "Undo",
            onclick: function () {
                a.run("undo")
            }
        });
        d.push({
            label: "Redo",
            onclick: function () {
                a.run("redo")
            }
        });
        a.ui.menuSelectDefault = a.ui.contextMenu(d);
        d = [];
        a.convert && a.convert.blobToABR &&
            d.push({
                label: "Convert to Stamp",
                onclick: function () {
                    a.run("layer-to-stamp")
                }
            });
        d.push({
            label: "Layer To Back",
            onclick: function () {
                a.run("layer-to-back")
            }
        });
        d.push({
            label: "Layer To Front",
            onclick: function () {
                a.run("layer-to-front")
            }
        });
        d.push({
            label: "Layer Backwards",
            onclick: function () {
                a.run("layer-backwards")
            }
        });
        d.push({
            label: "Layer Forwards",
            onclick: function () {
                a.run("layer-forwards")
            }
        });
        d.push({
            label: "Cut",
            onclick: function () {
                a.run("layer-cut")
            }
        });
        d.push({
            label: "Copy",
            onclick: function () {
                a.run("layer-copy")
            }
        });
        d.push({
            label: "Paste",
            onclick: function () {
                a.run("layer-paste")
            }
        });
        d.push({
            label: "Delete",
            onclick: function () {
                a.run("layer-delete")
            }
        });
        a.ui.menuSelect = a.ui.menuSelectMultiple = a.ui.contextMenu(d);
        c = function (b) {
            var c = [];
            b = a.toolkit.__icons[b];
            for (var d in b) c.push({
                label: '<img src="' + b[d] + '" width="24"> ' + STRING.ucwords(d),
                onclick: function (b) {
                    return function () {
                        a.run(b.replace(" ", "_"))
                    }
                }(d.toLowerCase())
            });
            return a.ui.contextMenu(c)
        };
        a.ui.menuBrushTools = c("brushes");
        a.ui.menuShapeTools = c("shapes")
    };
    return a
}(sketch);
(function (a, g) {
    var d = a.document,
        c;
    c = function () {
        var b = {}, c = !1,
            h = [],
            e, l, m, k, q, p, r, t, s, u, y, w;
        w = function () {
            var a, b, c = !1,
                e = d.createElement("fakeelement"),
                f = {
                    WebkitTransition: "webkitTransitionEnd",
                    MozTransition: "transitionend",
                    OTransition: "otransitionend",
                    transition: "transitionend"
                };
            for (a in f)
                if (e.style[a] !== g) {
                    b = f[a];
                    c = !0;
                    break
                }
            return {
                type: b,
                supported: c
            }
        };
        e = function (a) {
            return d.getElementById(a)
        };
        b = {
            labels: {
                ok: "OK",
                cancel: "Cancel"
            },
            delay: 5E3,
            buttonReverse: !1,
            buttonFocus: "ok",
            transition: g,
            addListeners: function (a) {
                var b =
                    "undefined" !== typeof m,
                    c = "undefined" !== typeof l,
                    e = "undefined" !== typeof y,
                    f = "",
                    g = this,
                    h, p, q, s, r;
                h = function (b) {
                    "undefined" !== typeof b.preventDefault && b.preventDefault();
                    q(b);
                    "undefined" !== typeof y && (f = y.value);
                    "function" === typeof a && ("undefined" !== typeof y ? a(!0, f) : a(!0));
                    return !1
                };
                p = function (b) {
                    "undefined" !== typeof b.preventDefault && b.preventDefault();
                    q(b);
                    "function" === typeof a && a(!1);
                    return !1
                };
                q = function (a) {
                    g.hide();
                    g.unbind(d.body, "keyup", s);
                    g.unbind(k, "focus", r);
                    e && g.unbind(u, "submit", h);
                    b && g.unbind(m,
                        "click", h);
                    c && g.unbind(l, "click", p)
                };
                s = function (a) {
                    var b = a.keyCode;
                    32 !== b || e || h(a);
                    27 === b && c && p(a)
                };
                r = function (a) {
                    e ? y.focus() : !c || g.buttonReverse ? m.focus() : l.focus()
                };
                this.bind(k, "focus", r);
                b && this.bind(m, "click", h);
                c && this.bind(l, "click", p);
                this.bind(d.body, "keyup", s);
                e && this.bind(u, "submit", h);
                this.transition.supported || this.setFocus()
            },
            bind: function (a, b, c) {
                "function" === typeof a.addEventListener ? a.addEventListener(b, c, !1) : a.attachEvent && a.attachEvent("on" + b, c)
            },
            handleErrors: function () {
                if ("undefined" !==
                    typeof a.onerror) {
                    var b = this;
                    a.onerror = function (a, c, d) {
                        b.error("[" + a + " on line " + d + " of " + c + "]", 0)
                    };
                    return !0
                }
                return !1
            },
            appendButtons: function (a, b) {
                return this.buttonReverse ? b + a : a + b
            },
            build: function (a) {
                var c = a.type,
                    e = a.message,
                    f = a.cssClass || "";
                a = d.createElement("div");
                a.className = "alertify-dialog";
                if ("none" === b.buttonFocus) {
                    var g = d.createElement("button");
                    g.id = "alertify-noneFocus";
                    g.className = "alertify-hidden";
                    a.appendChild(g)
                }
                if ("prompt" === c) {
                    var h = d.createElement("form");
                    h.id = "alertify-form";
                    a.appendChild(h)
                }
                g =
                    d.createElement("article");
                g.className = "alertify-inner";
                if ("string" === typeof e) {
                    var e = '<p class="alertify-message">{{message}}</p>'.replace("{{message}}", e),
                        k = d.createElement("span");
                    k.innerHTML = e
                } else k = d.createElement("p"), k.className = "alertify-message", k.appendChild(e);
                g.appendChild(k);
                "prompt" === c && (e = d.createElement("div"), e.className = "alertify-text-wrapper", k = d.createElement("input"), k.type = "text", k.className = "alertify-text", k.id = "alertify-text", e.appendChild(k), g.appendChild(e));
                e = d.createElement("nav");
                e.className = "alertify-buttons";
                g.appendChild(e);
                "prompt" === c ? (h.appendChild(g), a.appendChild(h)) : a.appendChild(g);
                g = d.createElement("button");
                g.id = "alertify-resetFocus";
                g.className = "alertify-resetFocus";
                g.innerHTML = "Reset Focus";
                a.appendChild(g);
                switch (c) {
                case "confirm":
                    g = d.createElement("button");
                    g.className = "alertify-button alertify-button-ok";
                    g.id = "alertify-ok";
                    g.innerHTML = this.labels.ok;
                    e.appendChild(g);
                    g = d.createElement("button");
                    g.className = "alertify-button alertify-button-cancel";
                    g.id = "alertify-cancel";
                    g.innerHTML = this.labels.cancel;
                    e.appendChild(g);
                    break;
                case "prompt":
                    g = d.createElement("button");
                    g.className = "alertify-button alertify-button-ok";
                    g.id = "alertify-ok";
                    g.innerHTML = this.labels.ok;
                    e.appendChild(g);
                    g = d.createElement("button");
                    g.type = "submit";
                    g.className = "alertify-button alertify-button-ok";
                    g.id = "alertify-cancel";
                    g.innerHTML = this.labels.ok;
                    e.appendChild(g);
                    break;
                case "alert":
                    g = d.createElement("button"), g.className = "alertify-button alertify-button-ok", g.id = "alertify-ok", g.innerHTML = this.labels.ok,
                    e.appendChild(g)
                }
                t.className = t.className.replace("alertify-isHidden", "");
                setTimeout(function () {
                    t.className = "alertify alertify-" + c + " " + f
                }, 1);
                r.className = "alertify-cover";
                return a
            },
            close: function (a, b) {
                a = a || this.lastItem;
                var c = b && !isNaN(b) ? +b : this.delay,
                    d = this,
                    e, f;
                this.bind(a, "click", function () {
                    e(a)
                });
                f = function (a) {
                    a.stopPropagation();
                    d.unbind(this, d.transition.type, f);
                    s.removeChild(this);
                    s.hasChildNodes() || (s.className += " alertify-logs-hidden")
                };
                e = function (a) {
                    "undefined" !== typeof a && a.parentNode ===
                        s && (d.transition.supported ? (d.bind(a, d.transition.type, f), a.className += " alertify-log-hide") : (s.removeChild(a), s.hasChildNodes() || (s.className += " alertify-logs-hidden")))
                };
                0 !== b && setTimeout(function () {
                    e(a)
                }, c)
            },
            dialog: function (a, b, e, g, k) {
                p = d.activeElement;
                var l = function () {
                    s && null !== s.scrollTop && r && null !== r.scrollTop || l()
                };
                if ("string" !== typeof b) throw Error("type must be a string");
                if ("undefined" !== typeof e && "function" !== typeof e) throw Error("fn must be a function");
                "function" === typeof this.init &&
                    (this.init(), l());
                h.push({
                    type: b,
                    message: a,
                    callback: e,
                    placeholder: g,
                    cssClass: k
                });
                c || this.setup();
                return this
            },
            extend: function (a) {
                if ("string" !== typeof a) throw Error("extend method must have exactly one paramter");
                return function (b, c) {
                    this.log(b, a, c);
                    return this
                }
            },
            hide: function () {
                var a, b = this;
                h.splice(0, 1);
                0 < h.length ? this.setup(!0) : (c = !1, a = function (c) {
                    c.stopPropagation();
                    t.className += " alertify-isHidden";
                    b.unbind(t, b.transition.type, a)
                }, this.transition.supported ? (this.bind(t, this.transition.type, a),
                    t.className = "alertify alertify-hide alertify-hidden") : t.className = "alertify alertify-hide alertify-hidden alertify-isHidden", r.className = "alertify-cover alertify-cover-hidden", p.focus())
            },
            init: function () {
                d.createElement("nav");
                d.createElement("article");
                d.createElement("section");
                r = d.createElement("div");
                r.setAttribute("id", "alertify-cover");
                r.className = "alertify-cover alertify-cover-hidden";
                d.body.appendChild(r);
                t = d.createElement("section");
                t.setAttribute("id", "alertify");
                t.className = "alertify alertify-hidden alertify-isHidden";
                d.body.appendChild(t);
                s = d.createElement("section");
                s.setAttribute("id", "alertify-logs");
                s.className = "alertify-logs alertify-logs-hidden";
                d.body.appendChild(s);
                d.body.setAttribute("tabindex", "0");
                this.transition = w();
                delete this.init
            },
            log: function (a, b, c) {
                var d = function () {
                    s && null !== s.scrollTop || d()
                };
                "function" === typeof this.init && (this.init(), d());
                s.className = "alertify-logs";
                this.notify(a, b, c);
                return {
                    lastItem: this.lastItem,
                    close: this.close,
                    hide: this.hide
                }
            },
            notify: function (a, b, c) {
                var e = d.createElement("article");
                e.className = "alertify-log" + ("string" === typeof b && "" !== b ? " alertify-log-" + b : "");
                e.innerHTML = a;
                s.appendChild(e);
                setTimeout(function () {
                    e.className += " alertify-log-show"
                }, 50);
                this.close(e, c);
                this.lastItem = e
            },
            set: function (a) {
                var b;
                if ("object" !== typeof a && a instanceof Array) throw Error("args must be an object");
                for (b in a) a.hasOwnProperty(b) && (this[b] = a[b])
            },
            setFocus: function () {
                y ? (y.focus(), y.select()) : q.focus()
            },
            setup: function (a) {
                var d = h[0],
                    p = this,
                    s;
                c = !0;
                s = function (a) {
                    a.stopPropagation();
                    p.setFocus();
                    p.unbind(t, p.transition.type, s)
                };
                this.transition.supported && !a && this.bind(t, this.transition.type, s);
                r.onclick = function () {
                    b.hide()
                };
                t.innerHTML = "";
                t.appendChild(this.build(d));
                t.firstChild.onclick = function (a) {
                    a.stopPropagation()
                };
                k = e("alertify-resetFocus");
                m = e("alertify-ok") || g;
                l = e("alertify-cancel") || g;
                q = "cancel" === b.buttonFocus ? l : "none" === b.buttonFocus ? e("alertify-noneFocus") : m;
                y = e("alertify-text") || g;
                u = e("alertify-form") || g;
                "string" === typeof d.placeholder && "" !== d.placeholder && (y.value = d.placeholder);
                a && this.setFocus();
                this.addListeners(d.callback)
            },
            unbind: function (a, b, c) {
                "function" === typeof a.removeEventListener ? a.removeEventListener(b, c, !1) : a.detachEvent && a.detachEvent("on" + b, c)
            }
        };
        return {
            close: function (a, c) {
                b.close(a, 1)
            },
            hide: function (a, c) {
                b.hide()
            },
            alert: function (a, c, d) {
                b.dialog(a, "alert", c, "", d);
                return this
            },
            confirm: function (a, c, d) {
                b.dialog(a, "confirm", c, "", d);
                return this
            },
            extend: b.extend,
            init: b.init,
            log: function (a, c, d) {
                b.log(a, c, d);
                return this
            },
            prompt: function (a, c, d, e) {
                b.dialog(a, "prompt",
                    c, d, e);
                return this
            },
            success: function (a, c) {
                b.log(a, "success", c);
                return this
            },
            error: function (a, c) {
                b.log(a, "error", c);
                return this
            },
            set: function (a) {
                b.set(a)
            },
            labels: b.labels,
            debug: b.handleErrors
        }
    };
    "function" === typeof define ? define([], function () {
        return new c
    }) : "undefined" === typeof a.alertify && (a.alertify = new c)
})(this);
(function () {
    function a(a, c) {
        return (new g(a, c)).beautify()
    }

    function g(a, c) {
        function b(a, b) {
            return {
                mode: b,
                last_text: a ? a.last_text : "",
                last_word: a ? a.last_word : "",
                var_line: !1,
                var_line_tainted: !1,
                var_line_reindented: !1,
                in_html_comment: !1,
                multiline_array: !1,
                if_block: !1,
                do_block: !1,
                do_while: !1,
                in_case_statement: !1,
                in_case: !1,
                case_body: !1,
                indentation_level: a ? a.indentation_level + (a.var_line && a.var_line_reindented ? 1 : 0) : 0,
                ternary_depth: 0
            }
        }

        function f(a) {
            for (a = void 0 === a ? !1 : a; A.length && (" " === A[A.length - 1] || A[A.length -
                1] === G || A[A.length - 1] === ga || a && ("\n" === A[A.length - 1] || "\r" === A[A.length - 1]));) A.pop()
        }

        function g(a) {
            return a.replace(/^\s\s*|\s\s*$/, "")
        }

        function e() {
            return A.length && "\n" === A[A.length - 1]
        }

        function l(a) {
            a = void 0 === a ? !1 : a;
            if (P.wrap_line_length && !a) {
                var b = "",
                    b = 0;
                a: {
                    b = A.length - 1;
                    0 > b && (b += A.length);
                    b > A.length - 1 && (b = A.length - 1);
                    for (b++; 0 < b--;)
                        if (b in A && "\n" === A[b]) break a;
                    b = -1
                }
                b += 1;
                b < A.length && (b = A.slice(b).join(""), b = b.length + C.length + (U ? 1 : 0), b >= P.wrap_line_length && (a = !0))
            }(P.preserve_newlines && la || a) && !e() && (m(!1, !0), r(z.mode) || t(z.mode) || (V = !0))
        }

        function m(a, b) {
            U = V = !1;
            if (!b && ";" !== z.last_text)
                for (; z.mode === T.Statement && !z.if_block;) s();
            z.mode === T.ArrayLiteral && (z.multiline_array = !0);
            A.length && (!a && e() || A.push("\n"))
        }

        function k(a) {
            void 0 === a ? a = 1 : "number" !== typeof a && (a = a ? 1 : 0);
            if ("" !== z.last_text)
                for (var b = 0; b < a; b += 1) A.push(G)
        }

        function q(a) {
            a = a || C;
            if (e())
                if (P.keep_array_indentation && r(z.mode) && la)
                    for (var b = 0; b < pa.length; b += 1) A.push(pa[b]);
                else ga && A.push(ga), k(z.indentation_level), k(z.var_line &&
                    z.var_line_reindented), k(V);
            V = !1;
            U && A.length && (b = A[A.length - 1], e() || (" " === b || b === G) || A.push(" "));
            U = !1;
            A.push(a)
        }

        function p(a) {
            z ? (O.push(z), J = z) : J = b(null, a);
            z = b(J, a)
        }

        function r(a) {
            return a === T.ArrayLiteral
        }

        function t(a) {
            return w(a, [T.Expression, T.ForInitializer, T.Conditional])
        }

        function s() {
            0 < O.length && (J = z, z = O.pop())
        }

        function u() {
            return "do" === z.last_text || "else" === z.last_text && "if" !== C || "TK_END_EXPR" === B && (J.mode === T.ForInitializer || J.mode === T.Conditional) ? (l(), p(T.Statement), z.indentation_level +=
                1, V = !1, !0) : !1
        }

        function y(a) {
            return w(a, "case return do if throw else".split(" "))
        }

        function w(a, b) {
            for (var c = 0; c < b.length; c += 1)
                if (b[c] === a) return !0;
            return !1
        }

        function v() {
            var a;
            ma = 0;
            if (E >= ja) return ["", "TK_EOF"];
            la = !1;
            pa = [];
            var b = x.charAt(E);
            for (E += 1; w(b, K);) {
                "\n" === b ? (ma += 1, pa = []) : ma && (b === G ? pa.push(G) : "\r" !== b && pa.push(" "));
                if (E >= ja) return ["", "TK_EOF"];
                b = x.charAt(E);
                E += 1
            }
            if (w(b, R)) {
                if (E < ja)
                    for (; w(x.charAt(E), R) && (b += x.charAt(E), E += 1, E !== ja););
                if (E !== ja && b.match(/^[0-9]+[Ee]$/) && ("-" === x.charAt(E) ||
                    "+" === x.charAt(E))) {
                    var c = x.charAt(E);
                    E += 1;
                    var d = v(),
                        b = b + (c + d[0]);
                    return [b, "TK_WORD"]
                }
                return "in" === b ? [b, "TK_OPERATOR"] : [b, "TK_WORD"]
            }
            if ("(" === b || "[" === b) return [b, "TK_START_EXPR"];
            if (")" === b || "]" === b) return [b, "TK_END_EXPR"];
            if ("{" === b) return [b, "TK_START_BLOCK"];
            if ("}" === b) return [b, "TK_END_BLOCK"];
            if (";" === b) return [b, "TK_SEMICOLON"];
            if ("/" === b) {
                c = "";
                d = !0;
                if ("*" === x.charAt(E)) {
                    E += 1;
                    if (E < ja)
                        for (; E < ja && ("*" !== x.charAt(E) || !x.charAt(E + 1) || "/" !== x.charAt(E + 1));) {
                            b = x.charAt(E);
                            c += b;
                            if ("\n" === b || "\r" === b) d = !1;
                            E += 1;
                            if (E >= ja) break
                        }
                    E += 2;
                    return d && 0 === ma ? ["/*" + c + "*/", "TK_INLINE_COMMENT"] : ["/*" + c + "*/", "TK_BLOCK_COMMENT"]
                }
                if ("/" === x.charAt(E)) {
                    for (c = b;
                        "\r" !== x.charAt(E) && "\n" !== x.charAt(E) && !(c += x.charAt(E), E += 1, E >= ja););
                    return [c, "TK_COMMENT"]
                }
            }
            if ("'" === b || '"' === b || ("/" === b || P.e4x && "<" === b && x.slice(E - 1).match(/^<[a-zA-Z:0-9]+\s*([a-zA-Z:0-9]+="[^"]*"\s*)*\/?\s*>/)) && ("TK_WORD" === B && y(z.last_text) || "TK_END_EXPR" === B && w(J.mode, [T.Conditional, T.ForInitializer]) || w(B, "TK_COMMENT TK_START_EXPR TK_START_BLOCK TK_END_BLOCK TK_OPERATOR TK_EQUALS TK_EOF TK_SEMICOLON TK_COMMA".split(" ")))) {
                var c =
                    b,
                    e = d = !1;
                a = b;
                if (E < ja)
                    if ("/" === c)
                        for (b = !1; d || b || x.charAt(E) !== c;) {
                            if (a += x.charAt(E), d ? d = !1 : (d = "\\" === x.charAt(E), "[" === x.charAt(E) ? b = !0 : "]" === x.charAt(E) && (b = !1)), E += 1, E >= ja) return [a, "TK_STRING"]
                        } else if (P.e4x && "<" === c) {
                            var d = /<(\/?)([a-zA-Z:0-9]+)\s*([a-zA-Z:0-9]+="[^"]*"\s*)*(\/?)\s*>/g,
                                b = x.slice(E - 1),
                                f = d.exec(b);
                            if (f && 0 === f.index) {
                                c = f[2];
                                for (a = 0; f;) {
                                    var e = !! f[1],
                                        k = !! f[f.length - 1];
                                    f[2] !== c || k || (e ? --a : ++a);
                                    if (0 >= a) break;
                                    f = d.exec(b)
                                }
                                c = f ? f.index + f[0].length : b.length;
                                E += c - 1;
                                return [b.slice(0, c), "TK_STRING"]
                            }
                        } else
                            for (; d ||
                                x.charAt(E) !== c;) {
                                a += x.charAt(E);
                                if (d) {
                                    if ("x" === x.charAt(E) || "u" === x.charAt(E)) e = !0;
                                    d = !1
                                } else d = "\\" === x.charAt(E);
                                E += 1;
                                if (E >= ja) return [a, "TK_STRING"]
                            }
                        E += 1;
                a += c;
                if (e && P.unescape_strings) a: {
                    b = a;
                    d = !1;
                    f = "";
                    a = 0;
                    for (var e = "", k = 0, l; d || a < b.length;)
                        if (l = b.charAt(a), a++, d) {
                            d = !1;
                            if ("x" === l) e = b.substr(a, 2), a += 2;
                            else if ("u" === l) e = b.substr(a, 4), a += 4;
                            else {
                                f += "\\" + l;
                                continue
                            } if (!e.match(/^[0123456789abcdefABCDEF]+$/)) {
                                a = b;
                                break a
                            }
                            k = parseInt(e, 16);
                            if (0 <= k && 32 > k) f = "x" === l ? f + ("\\x" + e) : f + ("\\u" + e);
                            else if (34 === k || 39 ===
                                k || 92 === k) f += "\\" + String.fromCharCode(k);
                            else if ("x" === l && 126 < k && 255 >= k) {
                                a = b;
                                break a
                            } else f += String.fromCharCode(k)
                        } else "\\" === l ? d = !0 : f += l;
                    a = f
                }
                if ("/" === c)
                    for (; E < ja && w(x.charAt(E), R);) a += x.charAt(E), E += 1;
                return [a, "TK_STRING"]
            }
            if ("#" === b) {
                if (0 === A.length && "!" === x.charAt(E)) {
                    for (a = b; E < ja && "\n" !== b;) b = x.charAt(E), a += b, E += 1;
                    return [g(a) + "\n", "TK_UNKNOWN"]
                }
                c = "#";
                if (E < ja && w(x.charAt(E), da)) {
                    do b = x.charAt(E), c += b, E += 1; while (E < ja && "#" !== b && "=" !== b);
                    "#" !== b && ("[" === x.charAt(E) && "]" === x.charAt(E + 1) ? (c += "[]",
                        E += 2) : "{" === x.charAt(E) && "}" === x.charAt(E + 1) && (c += "{}", E += 2));
                    return [c, "TK_WORD"]
                }
            }
            if ("<" === b && "\x3c!--" === x.substring(E - 1, E + 3)) {
                E += 3;
                for (b = "\x3c!--";
                    "\n" !== x.charAt(E) && E < ja;) b += x.charAt(E), E++;
                z.in_html_comment = !0;
                return [b, "TK_COMMENT"]
            }
            if ("-" === b && z.in_html_comment && "--\x3e" === x.substring(E - 1, E + 2)) return z.in_html_comment = !1, E += 2, ["--\x3e", "TK_COMMENT"];
            if ("." === b) return [b, "TK_DOT"];
            if (w(b, N)) {
                for (; E < ja && w(b + x.charAt(E), N) && !(b += x.charAt(E), E += 1, E >= ja););
                return "," === b ? [b, "TK_COMMA"] : "=" === b ? [b,
                    "TK_EQUALS"
                ] : [b, "TK_OPERATOR"]
            }
            return [b, "TK_UNKNOWN"]
        }
        var x, A, C, D, B, F, G, z, J, O, K, R, N, E, aa, da, X, la, V, U, ja, ma, pa, ra, T, P, ga = "";
        K = ["\n", "\r", "\t", " "];
        R = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_$".split("");
        da = "0123456789".split("");
        N = "+ - * / % & ++ -- = += -= *= /= %= == === != !== > < >= <= >> << >>> >>>= >>= <<= && &= | || ! !! , : ? ^ ^= |= ::";
        N += " <%= <% %> <?= <? ?>";
        N = N.split(" ");
        aa = "continue try throw return var if switch case default for while break function".split(" ");
        T = {
            BlockStatement: "BlockStatement",
            Statement: "Statement",
            ObjectLiteral: "ObjectLiteral",
            ArrayLiteral: "ArrayLiteral",
            ForInitializer: "ForInitializer",
            Conditional: "Conditional",
            Expression: "Expression"
        };
        ra = {
            TK_START_EXPR: function () {
                u();
                if ("[" === C) {
                    if ("TK_WORD" === B || ")" === z.last_text) {
                        w(z.last_text, aa) && (U = !0);
                        p(T.Expression);
                        q();
                        P.space_in_paren && (U = !0);
                        return
                    }!r(z.mode) || "[" !== z.last_text && ("," !== z.last_text || "]" !== F && "}" !== F) || P.keep_array_indentation || m()
                } else "for" === z.last_text ? p(T.ForInitializer) :
                    w(z.last_text, ["if", "while"]) ? p(T.Conditional) : p(T.Expression);
                ";" === z.last_text || "TK_START_BLOCK" === B ? m() : "TK_END_EXPR" === B || "TK_START_EXPR" === B || "TK_END_BLOCK" === B || "." === z.last_text ? la && m() : "TK_WORD" !== B && "TK_OPERATOR" !== B ? U = !0 : "function" === z.last_word || "typeof" === z.last_word ? P.jslint_happy && (U = !0) : (w(z.last_text, aa) || "catch" === z.last_text) && P.space_before_conditional && (U = !0);
                "(" === C && ("TK_EQUALS" !== B && "TK_OPERATOR" !== B || z.mode === T.ObjectLiteral || l());
                "[" === C && p(T.ArrayLiteral);
                q();
                P.space_in_paren &&
                    (U = !0);
                z.indentation_level += 1
            },
            TK_END_EXPR: function () {
                for (; z.mode === T.Statement;) s();
                "]" === C && (r(z.mode) && z.multiline_array && !P.keep_array_indentation) && m();
                P.space_in_paren && (U = !0);
                "]" === C && P.keep_array_indentation ? (q(), s()) : (s(), q());
                z.do_while && J.mode === T.Conditional && (J.mode = T.Expression, z.do_block = !1, z.do_while = !1)
            },
            TK_START_BLOCK: function () {
                p(T.BlockStatement);
                var a;
                a: {
                    a = E;
                    for (var b = x.charAt(a); w(b, K) && "}" !== b;) {
                        a++;
                        if (a >= ja) {
                            a = !1;
                            break a
                        }
                        b = x.charAt(a)
                    }
                    a = "}" === b
                }
                a = a && "function" === z.last_word &&
                    "TK_END_EXPR" === B;
                "expand" === P.brace_style ? "TK_OPERATOR" !== B && (a || "TK_EQUALS" === B || y(z.last_text) && "else" !== z.last_text) ? U = !0 : m() : "TK_OPERATOR" !== B && "TK_START_EXPR" !== B ? "TK_START_BLOCK" === B ? m() : U = !0 : r(J.mode) && "," === z.last_text && ("}" === F ? U = !0 : m());
                q();
                z.indentation_level += 1
            },
            TK_END_BLOCK: function () {
                for (; z.mode === T.Statement;) s();
                s();
                var a = "TK_START_BLOCK" === B;
                "expand" === P.brace_style ? a || m() : a || (r(z.mode) && P.keep_array_indentation ? (P.keep_array_indentation = !1, m(), P.keep_array_indentation = !0) : m());
                q()
            },
            TK_WORD: function () {
                u() || !la || (t(z.mode) || "TK_OPERATOR" === B && "--" !== z.last_text && "++" !== z.last_text || "TK_EQUALS" === B || !P.preserve_newlines && "var" === z.last_text) || m();
                if (z.do_block && !z.do_while) {
                    if ("while" === C) {
                        U = !0;
                        q();
                        U = !0;
                        z.do_while = !0;
                        return
                    }
                    m();
                    z.do_block = !1
                }
                if (z.if_block && "else" !== C) {
                    for (; z.mode === T.Statement;) s();
                    z.if_block = !1
                }
                if ("function" === C) z.var_line && "TK_EQUALS" !== B && (z.var_line_reindented = !0), !e() && ";" !== z.last_text && "}" !== z.last_text || ("{" === z.last_text || r(z.mode)) || (e() || m(!0),
                    e() && 0 < A.length - 1 && "\n" === A[A.length - 2] || m(!0)), "TK_WORD" === B ? "get" === z.last_text || "set" === z.last_text || "new" === z.last_text || "return" === z.last_text ? U = !0 : m() : "TK_OPERATOR" === B || "=" === z.last_text ? U = !0 : t(z.mode) || m(), q(), z.last_word = C;
                else if ("case" === C || "default" === C && z.in_case_statement) {
                    m();
                    if (z.case_body || P.jslint_happy) z.indentation_level -= 1, z.case_body = !1;
                    q();
                    z.in_case = !0;
                    z.in_case_statement = !0
                } else X = "NONE", "TK_END_BLOCK" === B ? w(C, ["else", "catch", "finally"]) ? "expand" === P.brace_style || "end-expand" ===
                    P.brace_style ? X = "NEWLINE" : (X = "SPACE", U = !0) : X = "NEWLINE" : "TK_SEMICOLON" === B && z.mode === T.BlockStatement ? X = "NEWLINE" : "TK_SEMICOLON" === B && t(z.mode) ? X = "SPACE" : "TK_STRING" === B ? X = "NEWLINE" : "TK_WORD" === B ? X = "SPACE" : "TK_START_BLOCK" === B ? X = "NEWLINE" : "TK_END_EXPR" === B && (U = !0, X = "NEWLINE"), w(C, aa) && ")" !== z.last_text && (X = "else" === z.last_text ? "SPACE" : "NEWLINE"), "TK_COMMA" !== B && "TK_START_EXPR" !== B && "TK_EQUALS" !== B && "TK_OPERATOR" !== B || z.mode === T.ObjectLiteral || l(), w(C, ["else", "catch", "finally"]) ? "TK_END_BLOCK" !== B ||
                    "expand" === P.brace_style || "end-expand" === P.brace_style ? m() : (f(!0), "}" !== A[A.length - 1] && m(), U = !0) : "NEWLINE" === X ? y(z.last_text) ? U = !0 : "TK_END_EXPR" !== B ? "TK_START_EXPR" === B && "var" === C || ":" === z.last_text || ("if" === C && "else" === z.last_word && "{" !== z.last_text ? U = !0 : (z.var_line = !1, z.var_line_reindented = !1, m())) : w(C, aa) && ")" !== z.last_text && (z.var_line = !1, z.var_line_reindented = !1, m()) : r(z.mode) && "," === z.last_text && "}" === F ? m() : "SPACE" === X && (U = !0), q(), z.last_word = C, "var" === C && (z.var_line = !0, z.var_line_reindented = !1, z.var_line_tainted = !1), "do" === C && (z.do_block = !0), "if" === C && (z.if_block = !0)
            },
            TK_SEMICOLON: function () {
                for (; z.mode === T.Statement && !z.if_block;) s();
                q();
                z.var_line = !1;
                z.var_line_reindented = !1;
                z.mode === T.ObjectLiteral && (z.mode = T.BlockStatement)
            },
            TK_STRING: function () {
                u() ? U = !0 : "TK_WORD" === B ? U = !0 : "TK_COMMA" === B || "TK_START_EXPR" === B || "TK_EQUALS" === B || "TK_OPERATOR" === B ? z.mode !== T.ObjectLiteral && l() : m();
                q()
            },
            TK_EQUALS: function () {
                z.var_line && (z.var_line_tainted = !0);
                U = !0;
                q();
                U = !0
            },
            TK_OPERATOR: function () {
                var a = !0,
                    b = !0;
                y(z.last_text) ? (U = !0, q()) : "*" !== C || "TK_DOT" !== B || F.match(/^\d+$/) ? ":" === C && z.in_case ? (z.case_body = !0, z.indentation_level += 1, q(), m(), z.in_case = !1) : "::" === C ? q() : (!la || "--" !== C && "++" !== C || m(), w(C, ["--", "++", "!"]) || w(C, ["-", "+"]) && (w(B, ["TK_START_BLOCK", "TK_START_EXPR", "TK_EQUALS", "TK_OPERATOR"]) || w(z.last_text, aa) || "," === z.last_text) ? (b = a = !1, ";" === z.last_text && t(z.mode) && (a = !0), "TK_WORD" === B && w(z.last_text, aa) && (a = !0), z.mode !== T.BlockStatement && z.mode !== T.Statement || "{" !== z.last_text && ";" !==
                    z.last_text || m()) : ":" === C ? 0 === z.ternary_depth ? (z.mode === T.BlockStatement && (z.mode = T.ObjectLiteral), a = !1) : z.ternary_depth -= 1 : "?" === C && (z.ternary_depth += 1), U = U || a, q(), U = b) : q()
            },
            TK_COMMA: function () {
                if (z.var_line) {
                    if (t(z.mode) || "TK_END_BLOCK" === B) z.var_line_tainted = !1;
                    z.var_line && (z.var_line_reindented = !0);
                    q();
                    z.var_line_tainted ? (z.var_line_tainted = !1, m()) : U = !0
                } else "TK_END_BLOCK" === B && z.mode !== T.Expression ? (q(), z.mode === T.ObjectLiteral && "}" === z.last_text ? m() : U = !0) : z.mode === T.ObjectLiteral ? (q(), m()) : (q(),
                    U = !0)
            },
            TK_BLOCK_COMMENT: function () {
                for (var a = C, a = a.replace(/\x0d/g, ""), b = [], c = a.indexOf("\n"); - 1 !== c;) b.push(a.substring(0, c)), a = a.substring(c + 1), c = a.indexOf("\n");
                a.length && b.push(a);
                a = !1;
                m(!1, !0);
                if (1 < b.length) {
                    a: {
                        for (var c = b.slice(1), d = 0; d < c.length; d++)
                            if ("*" !== g(c[d]).charAt(0)) {
                                c = !1;
                                break a
                            }
                        c = !0
                    }
                    c && (a = !0)
                }
                q(b[0]);
                for (c = 1; c < b.length; c++) m(!1, !0), a ? q(" " + g(b[c])) : A.push(b[c]);
                m(!1, !0)
            },
            TK_INLINE_COMMENT: function () {
                U = !0;
                q();
                U = !0
            },
            TK_COMMENT: function () {
                la ? m(!1, !0) : f(!0);
                U = !0;
                q();
                m(!1, !0)
            },
            TK_DOT: function () {
                y(z.last_text) ?
                    U = !0 : l(")" === z.last_text && P.break_chained_methods);
                q()
            },
            TK_UNKNOWN: function () {
                q();
                "\n" === C[C.length - 1] && m()
            }
        };
        c = c ? c : {};
        P = {};
        void 0 !== c.space_after_anon_function && void 0 === c.jslint_happy && (c.jslint_happy = c.space_after_anon_function);
        void 0 !== c.braces_on_own_line && (P.brace_style = c.braces_on_own_line ? "expand" : "collapse");
        P.brace_style = c.brace_style ? c.brace_style : P.brace_style ? P.brace_style : "collapse";
        "expand-strict" === P.brace_style && (P.brace_style = "expand");
        P.indent_size = c.indent_size ? parseInt(c.indent_size,
            10) : 4;
        P.indent_char = c.indent_char ? c.indent_char : " ";
        P.preserve_newlines = void 0 === c.preserve_newlines ? !0 : c.preserve_newlines;
        P.break_chained_methods = void 0 === c.break_chained_methods ? !1 : c.break_chained_methods;
        P.max_preserve_newlines = void 0 === c.max_preserve_newlines ? 0 : parseInt(c.max_preserve_newlines, 10);
        P.space_in_paren = void 0 === c.space_in_paren ? !1 : c.space_in_paren;
        P.jslint_happy = void 0 === c.jslint_happy ? !1 : c.jslint_happy;
        P.keep_array_indentation = void 0 === c.keep_array_indentation ? !1 : c.keep_array_indentation;
        P.space_before_conditional = void 0 === c.space_before_conditional ? !0 : c.space_before_conditional;
        P.unescape_strings = void 0 === c.unescape_strings ? !1 : c.unescape_strings;
        P.wrap_line_length = void 0 === c.wrap_line_length ? 0 : parseInt(c.wrap_line_length, 10);
        P.e4x = void 0 === c.e4x ? !1 : c.e4x;
        for (G = ""; 0 < P.indent_size;) G += P.indent_char, P.indent_size -= 1;
        for (; a && (" " === a.charAt(0) || "\t" === a.charAt(0));) ga += a.charAt(0), a = a.substring(1);
        x = a;
        ja = a.length;
        B = "TK_START_BLOCK";
        F = "";
        A = [];
        U = V = !1;
        pa = [];
        O = [];
        p(T.BlockStatement);
        E = 0;
        this.beautify = function () {
            for (var a;;) {
                a = v();
                C = a[0];
                D = a[1];
                if ("TK_EOF" === D) break;
                a = P.keep_array_indentation && r(z.mode);
                la = 0 < ma;
                if (a)
                    for (a = 0; a < ma; a += 1) m(0 < a);
                else if (P.max_preserve_newlines && ma > P.max_preserve_newlines && (ma = P.max_preserve_newlines), P.preserve_newlines && 1 < ma)
                    for (m(), a = 1; a < ma; a += 1) m(!0);
                ra[D]();
                "TK_INLINE_COMMENT" !== D && ("TK_COMMENT" !== D && "TK_UNKNOWN" !== D) && (F = z.last_text, B = D, z.last_text = C)
            }
            return ga + A.join("").replace(/[\r\n ]+$/, "")
        }
    }
    "function" === typeof define ? define(function (d, c, b) {
        c.js_beautify =
            a
    }) : "undefined" !== typeof exports ? exports.js_beautify = a : "undefined" !== typeof window ? window.js_beautify = a : "undefined" !== typeof global && (global.js_beautify = a)
})();
(function (a) {
    var g = a.Uint8Array;
    a = a.HTMLCanvasElement;
    var d = /\s*;\s*base64\s*(?:;|$)/i,
        c;
    g && (c = new g([62, -1, -1, -1, 63, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, -1, -1, -1, 0, -1, -1, -1, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, -1, -1, -1, -1, -1, -1, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51]));
    a && !a.prototype.toBlob && (a.toBlob = a.prototype.toBlob = function (a, f) {
        f || (f = "image/png");
        if (this.mozGetAsFile) a(this.mozGetAsFile("canvas", f));
        else {
            var h = Array.prototype.slice.call(arguments,
                1),
                e = this.toDataURL.apply(this, h),
                l = e.indexOf(","),
                h = e.substring(l + 1),
                e = d.test(e.substring(0, l)),
                m;
            if (Blob.fake) m = new Blob, m.encoding = e ? "base64" : "URI", m.data = h, m.size = h.length;
            else if (g)
                if (e) {
                    m = Blob;
                    for (var e = h.length, l = new g(3 * (e / 4) | 0), k = 0, q = 0, p = [0, 0], r = 0, t = 0, s, u; e--;) u = h.charCodeAt(k++), s = c[u - 43], 255 !== s && void 0 !== s && (p[1] = p[0], p[0] = u, t = t << 6 | s, r++, 4 === r && (l[q++] = t >>> 16, 61 !== p[1] && (l[q++] = t >>> 8), 61 !== p[0] && (l[q++] = t), r = 0));
                    m = new m([l], {
                        type: f
                    })
                } else m = new Blob([decodeURIComponent(h)], {
                    type: f
                });
            a(m)
        }
    });
    a && !a.prototype.toBlobURL && (a.prototype.toBlobURL = function (a) {
        this.toBlob(function (c) {
            a(URL.createObjectURL(c))
        })
    })
})(self);
document.createElementNS || (document.createElementNS = function (a, g) {
    return document.createElement(g)
});
if (!window.chrome || !window.chrome.fileSystem) var saveAs = saveAs || navigator.msSaveOrOpenBlob && navigator.msSaveOrOpenBlob.bind(navigator) || function (a) {
        var g = a.document,
            d = a.URL || a.webkitURL || a,
            c = g.createElementNS("http://www.w3.org/1999/xhtml", "a"),
            b = !a.externalHost && "download" in c,
            f = function (b) {
                var c = g.createEvent("MouseEvents");
                c.initMouseEvent("click", !0, !1, a, 0, 0, 0, 0, 0, !1, !1, !1, !1, 0, null);
                b.dispatchEvent(c)
            }, h = a.webkitRequestFileSystem,
            e = a.requestFileSystem || h || a.mozRequestFileSystem,
            l = function (b) {
                (a.setImmediate ||
                    a.setTimeout)(function () {
                    throw b;
                }, 0)
            }, m = 0,
            k = [],
            q = function (a, b, c) {
                b = [].concat(b);
                for (var d = b.length; d--;) {
                    var e = a["on" + b[d]];
                    if ("function" === typeof e) try {
                        e.call(a, c || a)
                    } catch (f) {
                        l(f)
                    }
                }
            }, p = function (d, g) {
                var l = this,
                    p = d.type,
                    r = !1,
                    v, x, A = function () {
                        var b = (a.URL || a.webkitURL || a).createObjectURL(d);
                        k.push(b);
                        return b
                    }, C = function () {
                        q(l, ["writestart", "progress", "write", "writeend"])
                    }, D = function () {
                        if (r || !v) v = A(d);
                        x ? x.location.href = v : window.open(v, "_blank");
                        l.readyState = l.DONE;
                        C()
                    }, B = function (a) {
                        return function () {
                            if (l.readyState !==
                                l.DONE) return a.apply(this, arguments)
                        }
                    }, F = {
                        create: !0,
                        exclusive: !1
                    }, G;
                l.readyState = l.INIT;
                g || (g = "download");
                if (b) v = A(d), c.href = v, c.download = g, f(c), l.readyState = l.DONE, C();
                else {
                    a.chrome && (p && "application/octet-stream" !== p) && (G = d.slice || d.webkitSlice, d = G.call(d, 0, d.size, "application/octet-stream"), r = !0);
                    h && "download" !== g && (g += ".download");
                    if ("application/octet-stream" === p || h) x = a;
                    e ? (m += d.size, e(a.TEMPORARY, m, B(function (a) {
                        a.root.getDirectory("saved", F, B(function (a) {
                            var b = function () {
                                a.getFile(g, F, B(function (a) {
                                    a.createWriter(B(function (b) {
                                        b.onwriteend =
                                            function (b) {
                                                x.location.href = a.toURL();
                                                k.push(a);
                                                l.readyState = l.DONE;
                                                q(l, "writeend", b)
                                        };
                                        b.onerror = function () {
                                            var a = b.error;
                                            a.code !== a.ABORT_ERR && D()
                                        };
                                        ["writestart", "progress", "write", "abort"].forEach(function (a) {
                                            b["on" + a] = l["on" + a]
                                        });
                                        b.write(d);
                                        l.abort = function () {
                                            b.abort();
                                            l.readyState = l.DONE
                                        };
                                        l.readyState = l.WRITING
                                    }), D)
                                }), D)
                            };
                            a.getFile(g, {
                                create: !1
                            }, B(function (a) {
                                a.remove();
                                b()
                            }), B(function (a) {
                                a.code === a.NOT_FOUND_ERR ? b() : D()
                            }))
                        }), D)
                    }), D)) : D()
                }
            }, r = p.prototype;
        r.abort = function () {
            this.readyState = this.DONE;
            q(this, "abort")
        };
        r.readyState = r.INIT = 0;
        r.WRITING = 1;
        r.DONE = 2;
        r.error = r.onwritestart = r.onprogress = r.onwrite = r.onabort = r.onerror = r.onwriteend = null;
        a.addEventListener("unload", function () {
            for (var a = k.length; a--;) {
                var b = k[a];
                "string" === typeof b ? d.revokeObjectURL(b) : b.remove()
            }
            k.length = 0
        }, !1);
        return function (a, b) {
            return new p(a, b)
        }
    }(self);
(function (a) {
    function g() {
        var a = -1,
            b = this;
        b.append = function (c) {
            var d, e = b.table;
            for (d = 0; d < c.length; d++) a = a >>> 8 ^ e[(a ^ c[d]) & 255]
        };
        b.get = function () {
            return~ a
        }
    }

    function d(a, b, c) {
        if (a.slice) return a.slice(b, b + c);
        if (a.webkitSlice) return a.webkitSlice(b, b + c);
        if (a.mozSlice) return a.mozSlice(b, b + c);
        if (a.msSlice) return a.msSlice(b, b + c)
    }

    function c(a, b) {
        var c, d;
        c = new ArrayBuffer(a);
        d = new Uint8Array(c);
        b && d.set(b, 0);
        return {
            buffer: c,
            array: d,
            view: new DataView(c)
        }
    }

    function b() {}

    function f(a) {
        var b = this,
            c;
        b.size = 0;
        b.init = function (d, f) {
            var g = new Blob([a], {
                type: aa
            });
            c = new e(g);
            c.init(function () {
                b.size = c.size;
                d()
            }, f)
        };
        b.readUint8Array = function (a, b, d, e) {
            c.readUint8Array(a, b, d, e)
        }
    }

    function h(b) {
        var d = this,
            e;
        d.size = 0;
        d.init = function (a) {
            for (var c = b.length;
                "=" == b.charAt(c - 1);) c--;
            e = b.indexOf(",") + 1;
            d.size = Math.floor(0.75 * (c - e));
            a()
        };
        d.readUint8Array = function (d, f, g) {
            var h = c(f),
                k = 4 * Math.floor(d / 3),
                l = 4 * Math.ceil((d + f) / 3),
                l = a.atob(b.substring(k + e, l + e));
            for (d = k = d - 3 * Math.floor(k / 4); d < k + f; d++) h.array[d - k] = l.charCodeAt(d);
            g(h.array)
        }
    }

    function e(a) {
        this.size = 0;
        this.init = function (b) {
            this.size = a.size;
            b()
        };
        this.readUint8Array = function (b, c, e, f) {
            var g = new FileReader;
            g.onload = function (a) {
                e(new Uint8Array(a.target.result))
            };
            g.onerror = f;
            g.readAsArrayBuffer(d(a, b, c))
        }
    }

    function l() {}

    function m(a) {
        var b;
        this.init = function (a) {
            b = new Blob([], {
                type: aa
            });
            a()
        };
        this.writeUint8Array = function (a, c) {
            b = new Blob([b, X ? a : a.buffer], {
                type: aa
            });
            c()
        };
        this.getData = function (c, d) {
            var e = new FileReader;
            e.onload = function (a) {
                c(a.target.result)
            };
            e.onerror =
                d;
            e.readAsText(b, a)
        }
    }

    function k(b) {
        var c = "",
            d = "";
        this.init = function (a) {
            c += "data:" + (b || "") + ";base64,";
            a()
        };
        this.writeUint8Array = function (b, e) {
            var f, g = d.length,
                h = d;
            d = "";
            for (f = 0; f < 3 * Math.floor((g + b.length) / 3) - g; f++) h += String.fromCharCode(b[f]);
            for (; f < b.length; f++) d += String.fromCharCode(b[f]);
            2 < h.length ? c += a.btoa(h) : d = h;
            e()
        };
        this.getData = function (b) {
            b(c + a.btoa(d))
        }
    }

    function q(a) {
        var b;
        this.init = function (c) {
            b = new Blob([], {
                type: a
            });
            c()
        };
        this.writeUint8Array = function (c, d) {
            b = new Blob([b, X ? c : c.buffer], {
                type: a
            });
            d()
        };
        this.getData = function (a) {
            a(b)
        }
    }

    function p(a, b, c, d, e, f, g, h, k, l) {
        function p(b) {
            b = b.data;
            var d = b.data;
            b.onappend && (r += d.length, c.writeUint8Array(d, function () {
                f(!1, d);
                m()
            }, l));
            b.onflush && (d ? (r += d.length, c.writeUint8Array(d, function () {
                f(!1, d);
                a.removeEventListener(da, p, !1);
                h(r)
            }, l)) : (a.removeEventListener(da, p, !1), h(r)));
            b.progress && g && g(s + b.current, e)
        }

        function m() {
            s = q * R;
            s < e ? b.readUint8Array(d + s, Math.min(R, e - s), function (b) {
                a.postMessage({
                    append: !0,
                    data: b
                });
                q++;
                g && g(s, e);
                f(!0, b)
            }, k) : a.postMessage({
                flush: !0
            })
        }
        var q = 0,
            s, r;
        r = 0;
        a.addEventListener(da, p, !1);
        m()
    }

    function r(a, b, c, d, e, f, g, h, k, l) {
        function p() {
            var r;
            q = m * R;
            q < e ? b.readUint8Array(d + q, Math.min(R, e - q), function (b) {
                var h = a.append(b, function () {
                    g && g(d + q, e)
                });
                s += h.length;
                f(!0, b);
                c.writeUint8Array(h, function () {
                    f(!1, h);
                    m++;
                    setTimeout(p, 1)
                }, l);
                g && g(q, e)
            }, k) : (r = a.flush()) ? (s += r.length, c.writeUint8Array(r, function () {
                f(!1, r);
                h(s)
            }, l)) : h(s)
        }
        var m = 0,
            q, s = 0;
        p()
    }

    function t(b, c, d, e, f, h, k, l, m) {
        function q(a, b) {
            f && !a && u.append(b)
        }

        function s(a) {
            h(a, u.get())
        }
        var t, u = new g;
        a.zip.useWebWorkers ? (t = new Worker(a.zip.workerScriptsPath + N), p(t, b, c, d, e, q, k, s, l, m)) : r(new a.zip.Inflater, b, c, d, e, q, k, s, l, m);
        return t
    }

    function s(b, c, d, e, f, h, k) {
        function l(a, b) {
            a && t.append(b)
        }

        function m(a) {
            e(a, t.get())
        }

        function q() {
            s.removeEventListener(da, q, !1);
            p(s, b, c, 0, b.size, l, f, m, h, k)
        }
        var s, t = new g;
        a.zip.useWebWorkers ? (s = new Worker(a.zip.workerScriptsPath + E), s.addEventListener(da, q, !1), s.postMessage({
            init: !0,
            level: d
        })) : r(new a.zip.Deflater, b, c, 0, b.size, l, f, m, h, k);
        return s
    }

    function u(a, b, c, d, e,
        f, h, k, l) {
        function p() {
            var g = m * R;
            g < d ? a.readUint8Array(c + g, Math.min(R, d - g), function (a) {
                e && q.append(a);
                h && h(g, d, a);
                b.writeUint8Array(a, function () {
                    m++;
                    p()
                }, l)
            }, k) : f(d, q.get())
        }
        var m = 0,
            q = new g;
        p()
    }

    function y(a) {
        var b, c = "",
            d, e = "\u00c7\u00fc\u00e9\u00e2\u00e4\u00e0\u00e5\u00e7\u00ea\u00eb\u00e8\u00ef\u00ee\u00ec\u00c4\u00c5\u00c9\u00e6\u00c6\u00f4\u00f6\u00f2\u00fb\u00f9\u00ff\u00d6\u00dc\u00f8\u00a3\u00d8\u00d7\u0192\u00e1\u00ed\u00f3\u00fa\u00f1\u00d1\u00aa\u00ba\u00bf\u00ae\u00ac\u00bd\u00bc\u00a1\u00ab\u00bb___\u00a6\u00a6\u00c1\u00c2\u00c0\u00a9\u00a6\u00a6++\u00a2\u00a5++--+-+\u00e3\u00c3++--\u00a6-+\u00a4\u00f0\u00d0\u00ca\u00cb\u00c8i\u00cd\u00ce\u00cf++__\u00a6\u00cc_\u00d3\u00df\u00d4\u00d2\u00f5\u00d5\u00b5\u00fe\u00de\u00da\u00db\u00d9\u00fd\u00dd\u00af\u00b4\u00ad\u00b1_\u00be\u00b6\u00a7\u00f7\u00b8\u00b0\u00a8\u00b7\u00b9\u00b3\u00b2_ ".split("");
        for (b = 0; b < a.length; b++) d = a.charCodeAt(b) & 255, c = 127 < d ? c + e[d - 128] : c + String.fromCharCode(d);
        return c
    }

    function w(a) {
        var b, c = "";
        for (b = 0; b < a.length; b++) c += String.fromCharCode(a[b]);
        return c
    }

    function v(a, b, c, d, e) {
        a.version = b.view.getUint16(c, !0);
        a.bitFlag = b.view.getUint16(c + 2, !0);
        a.compressionMethod = b.view.getUint16(c + 4, !0);
        a.lastModDateRaw = b.view.getUint32(c + 6, !0);
        var f;
        a: {
            var g = a.lastModDateRaw,
                h = (g & 4294901760) >> 16,
                g = g & 65535;
            try {
                f = new Date(1980 + ((h & 65024) >> 9), ((h & 480) >> 5) - 1, h & 31, (g & 63488) >> 11, (g & 2016) >>
                    5, 2 * (g & 31), 0);
                break a
            } catch (k) {}
            f = void 0
        }
        a.lastModDate = f;
        if (1 === (a.bitFlag & 1)) e(B);
        else {
            if (d || 8 != (a.bitFlag & 8)) a.crc32 = b.view.getUint32(c + 10, !0), a.compressedSize = b.view.getUint32(c + 14, !0), a.uncompressedSize = b.view.getUint32(c + 18, !0);
            4294967295 === a.compressedSize || 4294967295 === a.uncompressedSize ? e(F) : (a.filenameLength = b.view.getUint16(c + 22, !0), a.extraFieldLength = b.view.getUint16(c + 24, !0))
        }
    }

    function x(a, b) {
        function d() {}

        function e(d, f) {
            a.readUint8Array(a.size - d, d, function (a) {
                a = c(a.length, a).view;
                1347093766 !=
                    a.getUint32(0) ? e(d + 1, f) : f(a)
            }, function () {
                b(G)
            })
        }
        d.prototype.getData = function (d, e, f, g) {
            function h(a, b) {
                s && s.terminate();
                s = null;
                a && a(b)
            }

            function k(a) {
                var b = c(4);
                b.view.setUint32(0, a);
                return q.crc32 == b.view.getUint32(0)
            }

            function l(a, b) {
                g && !k(b) ? p() : d.getData(function (a) {
                    h(e, a)
                })
            }

            function p() {
                h(b, O)
            }

            function m() {
                h(b, J)
            }
            var q = this,
                s;
            a.readUint8Array(q.offset, 30, function (e) {
                e = c(e.length, e);
                var h;
                1347093252 != e.view.getUint32(0) ? b(D) : (v(q, e, 4, !1, b), h = q.offset + 30 + q.filenameLength + q.extraFieldLength, d.init(function () {
                    0 ===
                        q.compressionMethod ? u(a, d, h, q.compressedSize, g, l, f, p, m) : s = t(a, d, h, q.compressedSize, g, l, f, p, m)
                }, m))
            }, p)
        };
        return {
            getEntries: function (f) {
                22 > a.size ? b(D) : e(22, function (e) {
                    var g, h;
                    g = e.getUint32(16, !0);
                    h = e.getUint16(8, !0);
                    a.readUint8Array(g, a.size - g, function (a) {
                        var e = 0,
                            g = [],
                            k, l, p = c(a.length, a);
                        for (a = 0; a < h; a++) {
                            k = new d;
                            if (1347092738 != p.view.getUint32(e)) {
                                b(D);
                                return
                            }
                            v(k, p, e + 6, !0, b);
                            k.commentLength = p.view.getUint16(e + 32, !0);
                            k.directory = 16 == (p.view.getUint8(e + 38) & 16);
                            k.offset = p.view.getUint32(e + 42, !0);
                            l = w(p.array.subarray(e +
                                46, e + 46 + k.filenameLength));
                            k.filename = 2048 === (k.bitFlag & 2048) ? decodeURIComponent(escape(l)) : y(l);
                            k.directory || "/" != k.filename.charAt(k.filename.length - 1) || (k.directory = !0);
                            l = w(p.array.subarray(e + 46 + k.filenameLength + k.extraFieldLength, e + 46 + k.filenameLength + k.extraFieldLength + k.commentLength));
                            k.comment = 2048 === (k.bitFlag & 2048) ? decodeURIComponent(escape(l)) : y(l);
                            g.push(k);
                            e += 46 + k.filenameLength + k.extraFieldLength + k.commentLength
                        }
                        f(g)
                    }, function () {
                        b(G)
                    })
                })
            },
            close: function (a) {
                a && a()
            }
        }
    }

    function A(a) {
        var b,
            c = [];
        for (b = 0; b < a.length; b++) c.push(a.charCodeAt(b));
        return c
    }

    function C(a, b, d) {
        function e(a, b) {
            h && h.terminate();
            h = null;
            a && a(b)
        }

        function f() {
            e(b, z)
        }

        function g() {
            e(b, O)
        }
        var h, k = {}, l = [],
            p = 0;
        return {
            add: function (m, q, r, t, y) {
                function w(b) {
                    var e;
                    F = y.lastModDate || new Date;
                    z = c(26);
                    k[m] = {
                        headerArray: z.array,
                        directory: y.directory,
                        filename: C,
                        offset: p,
                        comment: A(unescape(encodeURIComponent(y.comment || "")))
                    };
                    z.view.setUint32(0, 335546376);
                    y.version && z.view.setUint8(0, y.version);
                    d || (0 === y.level || y.directory) || z.view.setUint16(4,
                        2048);
                    z.view.setUint16(6, (F.getHours() << 6 | F.getMinutes()) << 5 | F.getSeconds() / 2, !0);
                    z.view.setUint16(8, (F.getFullYear() - 1980 << 4 | F.getMonth() + 1) << 5 | F.getDate(), !0);
                    z.view.setUint16(22, C.length, !0);
                    e = c(30 + C.length);
                    e.view.setUint32(0, 1347093252);
                    e.array.set(z.array, 4);
                    e.array.set(C, 30);
                    p += e.array.length;
                    a.writeUint8Array(e.array, b, f)
                }

                function v(b, d) {
                    var g = c(16);
                    p += b || 0;
                    g.view.setUint32(0, 1347094280);
                    "undefined" != typeof d && (z.view.setUint32(10, d, !0), g.view.setUint32(4, d, !0));
                    q && (g.view.setUint32(8, b, !0),
                        z.view.setUint32(14, b, !0), g.view.setUint32(12, q.size, !0), z.view.setUint32(18, q.size, !0));
                    a.writeUint8Array(g.array, function () {
                        p += 16;
                        e(r)
                    }, f)
                }

                function x() {
                    y = y || {};
                    m = m.trim();
                    y.directory && "/" != m.charAt(m.length - 1) && (m += "/");
                    k.hasOwnProperty(m) ? b(K) : (C = A(unescape(encodeURIComponent(m))), l.push(m), w(function () {
                        q ? d || 0 === y.level ? u(q, a, 0, q.size, !0, v, t, g, f) : h = s(q, a, y.level, v, t, g, f) : v()
                    }, f))
                }
                var z, C, F;
                q ? q.init(x, g) : x()
            },
            close: function (b) {
                var d, g = 0,
                    h = 0,
                    m, q;
                for (m = 0; m < l.length; m++) q = k[l[m]], g += 46 + q.filename.length +
                    q.comment.length;
                d = c(g + 22);
                for (m = 0; m < l.length; m++) q = k[l[m]], d.view.setUint32(h, 1347092738), d.view.setUint16(h + 4, 5120), d.array.set(q.headerArray, h + 6), d.view.setUint16(h + 32, q.comment.length, !0), q.directory && d.view.setUint8(h + 38, 16), d.view.setUint32(h + 42, q.offset, !0), d.array.set(q.filename, h + 46), d.array.set(q.comment, h + 46 + q.filename.length), h += 46 + q.filename.length + q.comment.length;
                d.view.setUint32(h, 1347093766);
                d.view.setUint16(h + 8, l.length, !0);
                d.view.setUint16(h + 10, l.length, !0);
                d.view.setUint32(h + 12,
                    g, !0);
                d.view.setUint32(h + 16, p, !0);
                a.writeUint8Array(d.array, function () {
                    e(function () {
                        a.getData(b)
                    })
                }, f)
            }
        }
    }
    var D = "File format is not recognized.",
        B = "File contains encrypted entry.",
        F = "File is using Zip64 (4gb+ file size).",
        G = "Error while reading zip file.",
        z = "Error while writing zip file.",
        J = "Error while writing file data.",
        O = "Error while reading file data.",
        K = "File already exists.",
        R = 524288,
        N = "inflate.js",
        E = "deflate.js",
        aa = "text/plain",
        da = "message",
        X;
    try {
        X = 0 === (new Blob([new DataView(new ArrayBuffer(0))])).size
    } catch (la) {}
    g.prototype.table =
        function () {
            var a, b, c, d = [];
            for (a = 0; 256 > a; a++) {
                c = a;
                for (b = 0; 8 > b; b++) c = c & 1 ? c >>> 1 ^ 3988292384 : c >>> 1;
                d[a] = c
            }
            return d
    }();
    f.prototype = new b;
    f.prototype.constructor = f;
    h.prototype = new b;
    h.prototype.constructor = h;
    e.prototype = new b;
    e.prototype.constructor = e;
    l.prototype.getData = function (a) {
        a(this.data)
    };
    m.prototype = new l;
    m.prototype.constructor = m;
    k.prototype = new l;
    k.prototype.constructor = k;
    q.prototype = new l;
    q.prototype.constructor = q;
    a.zip = {
        Reader: b,
        Writer: l,
        BlobReader: e,
        Data64URIReader: h,
        TextReader: f,
        BlobWriter: q,
        Data64URIWriter: k,
        TextWriter: m,
        createReader: function (a, b, c) {
            a.init(function () {
                b(x(a, c))
            }, c)
        },
        createWriter: function (a, b, c, d) {
            a.init(function () {
                b(C(a, c, d))
            }, c)
        },
        workerScriptsPath: "inc/File/Zip/",
        useWebWorkers: !! window.ArrayBuffer
    }
})(this);
(function () {
    function a(a) {
        function b(e) {
            c.data ? e() : a.getData(new y, function (a) {
                c.data = a;
                d = new x(a);
                e()
            }, null, c.checkCrc32)
        }
        var c = this,
            d;
        c.size = 0;
        c.init = function (b) {
            this.size = a.uncompressedSize;
            b()
        };
        c.readUint8Array = function (a, c, e, f) {
            b(function () {
                d.readUint8Array(a, c, e, f)
            }, f)
        }
    }

    function g(a) {
        function b(a) {
            c += a.uncompressedSize || 0;
            a.children.forEach(b)
        }
        var c = 0;
        b(a);
        return c
    }

    function d(a, b, c) {
        function e() {
            g++;
            g < a.children.length ? f(a.children[g]) : b()
        }

        function f(a) {
            a.directory ? d(a, e, c) : (a.reader = new a.Reader(a.data,
                c), a.reader.init(function () {
                a.uncompressedSize = a.reader.size;
                e()
            }))
        }
        var g = 0;
        a.children.length ? f(a.children[g]) : b()
    }

    function c(a) {
        var b = a.parent.children;
        b.forEach(function (c, d) {
            c.id == a.id && b.splice(d, 1)
        })
    }

    function b(a, b, c, d, e) {
        function f(a, b, c, d, e) {
            function h() {
                var l = b.children[k];
                l ? a.add(l.getFullname(), l.reader, function () {
                    g += l.uncompressedSize || 0;
                    f(a, l, function () {
                        k++;
                        h()
                    }, d, e)
                }, function (a) {
                    d && d(g + a, e)
                }, {
                    directory: l.directory,
                    version: l.zipVersion
                }) : c()
            }
            var k = 0;
            h()
        }
        var g = 0;
        f(a, b, c, d, e)
    }

    function f(a,
        b, c, d) {
        function e(a, b) {
            a.isDirectory && a.createReader().readEntries(b);
            a.isFile && b([])
        }

        function f(a, b, c) {
            e(b, function (b) {
                function e(b) {
                    function c(a) {
                        f(a, b, function () {
                            h++;
                            g()
                        })
                    }
                    b.isDirectory && c(a.addDirectory(b.name));
                    b.isFile && b.file(function (d) {
                        var e = a.addBlob(b.name, d);
                        e.uncompressedSize = d.size;
                        c(e)
                    }, d)
                }

                function g() {
                    var a = b[h];
                    a ? e(a) : c()
                }
                var h = 0;
                g()
            })
        }
        b.isDirectory ? f(a, b, c) : b.file(function (d) {
            a.addBlob(b.name, d);
            c()
        }, d)
    }

    function h(a, b, c, d, e, f, g) {
        function h(a, b, c, d, e, f) {
            function l(b) {
                function c(a) {
                    k +=
                        b.uncompressedSize || 0;
                    h(a, b, function () {
                        m++;
                        p()
                    }, d, e, f)
                }
                b.directory ? a.getDirectory(b.name, {
                    create: !0
                }, c, e) : a.getFile(b.name, {
                    create: !0
                }, function (a) {
                    b.getData(new zip.FileWriter(a, zip.getMimeType(b.name)), c, function (a) {
                        d && d(k + a, f)
                    }, g)
                }, e)
            }

            function p() {
                var a = b.children[m];
                a ? l(a) : c()
            }
            var m = 0;
            p()
        }
        var k = 0;
        b.directory ? h(a, b, c, d, e, f) : b.getData(new zip.FileWriter(a, zip.getMimeType(b.name)), c, d, g)
    }

    function e(a) {
        a.entries = [];
        a.root = new r(a)
    }

    function l(a, b, c, d, e) {
        function f() {
            var h = g * s;
            d && d(h, a.size);
            h < a.size ?
                a.readUint8Array(h, Math.min(s, a.size - h), function (a) {
                    b.writeUint8Array(new Uint8Array(a), function () {
                        g++;
                        f()
                    })
                }, e) : b.getData(c)
        }
        var g = 0;
        f()
    }

    function m(a, b, c, d) {
        var e = this;
        !a || a.constructor == e.Writer && e.data ? b(e.data) : (e.reader || (e.reader = new e.Reader(e.data, d)), e.reader.init(function () {
            a.init(function () {
                l(e.reader, a, b, c, d)
            }, d)
        }))
    }

    function k(a, b, c, d) {
        if (a.directory) return d ? new r(a.fs, b, c, a) : new p(a.fs, b, c, a);
        throw "Parent entry is not a directory.";
    }

    function q() {}

    function p(a, b, c, d) {
        q.prototype.init.call(this,
            a, b, c, d);
        this.Reader = c.Reader;
        this.Writer = c.Writer;
        this.data = c.data;
        this.getData = c.getData || m
    }

    function r(a, b, c, d) {
        q.prototype.init.call(this, a, b, c, d);
        this.directory = !0
    }

    function t() {
        e(this)
    }
    var s = 524288,
        u = zip.TextWriter,
        y = zip.BlobWriter,
        w = zip.Data64URIWriter,
        v = zip.TextReader,
        x = zip.BlobReader,
        A = zip.Data64URIReader,
        C = zip.createReader,
        D = zip.createWriter;
    a.prototype = new zip.Reader;
    a.prototype.constructor = a;
    a.prototype.checkCrc32 = !1;
    q.prototype = {
        init: function (a, b, c, d) {
            if (a.root && d && d.getChildByName(b)) throw "Entry filename already exists.";
            c || (c = {});
            this.fs = a;
            this.name = b;
            this.id = a.entries.length;
            this.parent = d;
            this.children = [];
            this.zipVersion = c.zipVersion || 20;
            this.uncompressedSize = 0;
            a.entries.push(this);
            d && this.parent.children.push(this)
        },
        getFileEntry: function (a, b, c, e, f) {
            var k = this;
            d(k, function () {
                h(a, k, b, c, e, g(k), f)
            }, e)
        },
        moveTo: function (a) {
            if (a.directory) {
                if (a.isDescendantOf(this)) throw "Entry is a ancestor of target entry.";
                if (this != a) {
                    if (a.getChildByName(this.name)) throw "Entry filename already exists.";
                    c(this);
                    this.parent = a;
                    a.children.push(this)
                }
            } else throw "Target entry is not a directory.";
        },
        getFullname: function () {
            for (var a = this.name, b = this.parent; b;) a = (b.name ? b.name + "/" : "") + a, b = b.parent;
            return a
        },
        isDescendantOf: function (a) {
            for (var b = this.parent; b && b.id != a.id;) b = b.parent;
            return !!b
        }
    };
    q.prototype.constructor = q;
    var B;
    p.prototype = B = new q;
    B.constructor = p;
    B.getText = function (a, b, c, d) {
        this.getData(new u(d), a, b, c)
    };
    B.getBlob = function (a, b, c, d) {
        this.getData(new y(a), b, c, d)
    };
    B.getData64URI = function (a, b, c, d) {
        this.getData(new w(a), b, c, d)
    };
    r.prototype = B = new q;
    B.constructor = r;
    B.addDirectory = function (a) {
        return k(this,
            a, null, !0)
    };
    B.addText = function (a, b) {
        return k(this, a, {
            data: b,
            Reader: v,
            Writer: u
        })
    };
    B.addBlob = function (a, b) {
        return k(this, a, {
            data: b,
            Reader: x,
            Writer: y
        })
    };
    B.addData64URI = function (a, b) {
        return k(this, a, {
            data: b,
            Reader: A,
            Writer: w
        })
    };
    B.addFileEntry = function (a, b, c) {
        f(this, a, b, c)
    };
    B.addData = function (a, b) {
        return k(this, a, b)
    };
    B.importBlob = function (a, b, c) {
        this.importZip(new x(a), b, c)
    };
    B.importText = function (a, b, c) {
        this.importZip(new v(a), b, c)
    };
    B.importData64URI = function (a, b, c) {
        this.importZip(new A(a), b, c)
    };
    B.exportBlob =
        function (a, b, c) {
            this.exportZip(new y("application/zip"), a, b, c)
    };
    B.exportText = function (a, b, c) {
        this.exportZip(new u, a, b, c)
    };
    B.exportFileEntry = function (a, b, c, d) {
        this.exportZip(new zip.FileWriter(a, "application/zip"), b, c, d)
    };
    B.exportData64URI = function (a, b, c) {
        this.exportZip(new w("application/zip"), a, b, c)
    };
    B.importZip = function (b, c, d) {
        var e = this;
        C(b, function (b) {
            b.getEntries(function (b) {
                b.forEach(function (b) {
                    var c = e,
                        d = b.filename.split("/"),
                        f = d.pop();
                    d.forEach(function (a) {
                        c = c.getChildByName(a) || new r(e.fs,
                            a, null, c)
                    });
                    b.directory || k(c, f, {
                        data: b,
                        Reader: a
                    })
                });
                c()
            })
        }, d)
    };
    B.exportZip = function (a, c, e, f) {
        var h = this;
        d(h, function () {
            D(a, function (a) {
                b(a, h, function () {
                    a.close(c)
                }, e, g(h))
            }, f)
        }, f)
    };
    B.getChildByName = function (a) {
        var b, c;
        for (b = 0; b < this.children.length; b++)
            if (c = this.children[b], c.name == a) return c
    };
    t.prototype = {
        remove: function (a) {
            c(a);
            this.entries[a.id] = null
        },
        find: function (a) {
            var b = a.split("/"),
                c = this.root;
            for (a = 0; c && a < b.length; a++) c = c.getChildByName(b[a]);
            return c
        },
        getById: function (a) {
            return this.entries[a]
        },
        importBlob: function (a, b, c) {
            e(this);
            this.root.importBlob(a, b, c)
        },
        importText: function (a, b, c) {
            e(this);
            this.root.importText(a, b, c)
        },
        importData64URI: function (a, b, c) {
            e(this);
            this.root.importData64URI(a, b, c)
        },
        exportBlob: function (a, b, c) {
            this.root.exportBlob(a, b, c)
        },
        exportText: function (a, b, c) {
            this.root.exportText(a, b, c)
        },
        exportFileEntry: function (a, b, c, d) {
            this.root.exportFileEntry(a, b, c, d)
        },
        exportData64URI: function (a, b, c) {
            this.root.exportData64URI(a, b, c)
        }
    };
    zip.fs = {
        FS: t,
        ZipDirectoryEntry: r,
        ZipFileEntry: p
    };
    zip.getMimeType =
        function () {
            return "application/octet-stream"
    }
})();
(function (a) {
    function g() {
        var a = this;
        a.build_tree = function (b) {
            var c = a.dyn_tree,
                d = a.stat_desc.static_tree,
                e = a.stat_desc.elems,
                f, g = -1,
                h;
            b.heap_len = 0;
            b.heap_max = r;
            for (f = 0; f < e; f++) 0 !== c[2 * f] ? (b.heap[++b.heap_len] = g = f, b.depth[f] = 0) : c[2 * f + 1] = 0;
            for (; 2 > b.heap_len;) h = b.heap[++b.heap_len] = 2 > g ? ++g : 0, c[2 * h] = 1, b.depth[h] = 0, b.opt_len--, d && (b.static_len -= d[2 * h + 1]);
            a.max_code = g;
            for (f = Math.floor(b.heap_len / 2); 1 <= f; f--) b.pqdownheap(c, f);
            h = e;
            do f = b.heap[1], b.heap[1] = b.heap[b.heap_len--], b.pqdownheap(c, 1), d = b.heap[1],
            b.heap[--b.heap_max] = f, b.heap[--b.heap_max] = d, c[2 * h] = c[2 * f] + c[2 * d], b.depth[h] = Math.max(b.depth[f], b.depth[d]) + 1, c[2 * f + 1] = c[2 * d + 1] = h, b.heap[1] = h++, b.pqdownheap(c, 1);
            while (2 <= b.heap_len);
            b.heap[--b.heap_max] = b.heap[1];
            f = a.dyn_tree;
            for (var g = a.stat_desc.static_tree, k = a.stat_desc.extra_bits, p = a.stat_desc.extra_base, m = a.stat_desc.max_length, q, s, t = 0, e = 0; e <= l; e++) b.bl_count[e] = 0;
            f[2 * b.heap[b.heap_max] + 1] = 0;
            for (h = b.heap_max + 1; h < r; h++) d = b.heap[h], e = f[2 * f[2 * d + 1] + 1] + 1, e > m && (e = m, t++), f[2 * d + 1] = e, d > a.max_code ||
                (b.bl_count[e]++, q = 0, d >= p && (q = k[d - p]), s = f[2 * d], b.opt_len += s * (e + q), g && (b.static_len += s * (g[2 * d + 1] + q)));
            if (0 !== t) {
                do {
                    for (e = m - 1; 0 === b.bl_count[e];) e--;
                    b.bl_count[e]--;
                    b.bl_count[e + 1] += 2;
                    b.bl_count[m]--;
                    t -= 2
                } while (0 < t);
                for (e = m; 0 !== e; e--)
                    for (d = b.bl_count[e]; 0 !== d;) g = b.heap[--h], g > a.max_code || (f[2 * g + 1] != e && (b.opt_len += (e - f[2 * g + 1]) * f[2 * g], f[2 * g + 1] = e), d--)
            }
            f = a.max_code;
            h = b.bl_count;
            b = [];
            d = 0;
            for (e = 1; e <= l; e++) b[e] = d = d + h[e - 1] << 1;
            for (h = 0; h <= f; h++)
                if (k = c[2 * h + 1], 0 !== k) {
                    d = c;
                    e = 2 * h;
                    g = b[k]++;
                    p = 0;
                    do p |= g & 1, g >>>= 1, p <<=
                        1; while (0 < --k);
                    d[e] = p >>> 1
                }
        }
    }

    function d(a, b, c, d, e) {
        this.static_tree = a;
        this.extra_bits = b;
        this.extra_base = c;
        this.elems = d;
        this.max_length = e
    }

    function c(a, b, c, d, e) {
        this.good_length = a;
        this.max_lazy = b;
        this.nice_length = c;
        this.max_chain = d;
        this.func = e
    }

    function b(a, b, c, d) {
        var e = a[2 * b];
        a = a[2 * c];
        return e < a || e == a && d[b] <= d[c]
    }

    function f() {
        function a() {
            var b;
            for (b = 0; b < p; b++) Ja[2 * b] = 0;
            for (b = 0; b < m; b++) Oa[2 * b] = 0;
            for (b = 0; b < k; b++) wa[2 * b] = 0;
            Ja[2 * t] = 1;
            Da = cb = fa.opt_len = fa.static_len = 0
        }

        function c(a, b) {
            var d, e = -1,
                f, g = a[1],
                h = 0,
                k = 7,
                l = 4;
            0 === g && (k = 138, l = 3);
            a[2 * (b + 1) + 1] = 65535;
            for (d = 0; d <= b; d++) f = g, g = a[2 * (d + 1) + 1], ++h < k && f == g || (h < l ? wa[2 * f] += h : 0 !== f ? (f != e && wa[2 * f]++, wa[2 * s]++) : 10 >= h ? wa[2 * u]++ : wa[2 * y]++, h = 0, e = f, 0 === g ? (k = 138, l = 3) : f == g ? (k = 6, l = 3) : (k = 7, l = 4))
        }

        function e(a) {
            fa.pending_buf[fa.pending++] = a
        }

        function f(a) {
            e(a & 255);
            e(a >>> 8 & 255)
        }

        function h(a, b) {
            ta > w - b ? (ya |= a << ta & 65535, f(ya), ya = a >>> w - ta, ta += b - w) : (ya |= a << ta & 65535, ta += b)
        }

        function l(a, b) {
            var c = 2 * a;
            h(b[c] & 65535, b[c + 1] & 65535)
        }

        function r(a, b) {
            var c, d = -1,
                e, f = a[1],
                g = 0,
                k = 7,
                p = 4;
            0 ===
                f && (k = 138, p = 3);
            for (c = 0; c <= b; c++)
                if (e = f, f = a[2 * (c + 1) + 1], !(++g < k && e == f)) {
                    if (g < p) {
                        do l(e, wa); while (0 !== --g)
                    } else 0 !== e ? (e != d && (l(e, wa), g--), l(s, wa), h(g - 3, 2)) : 10 >= g ? (l(u, wa), h(g - 3, 3)) : (l(y, wa), h(g - 11, 7));
                    g = 0;
                    d = e;
                    0 === f ? (k = 138, p = 3) : e == f ? (k = 6, p = 3) : (k = 7, p = 4)
                }
        }

        function E() {
            16 == ta ? (f(ya), ta = ya = 0) : 8 <= ta && (e(ya & 255), ya >>>= 8, ta -= 8)
        }

        function Ta(a, b) {
            var c, d, e;
            fa.pending_buf[Ua + 2 * Da] = a >>> 8 & 255;
            fa.pending_buf[Ua + 2 * Da + 1] = a & 255;
            fa.pending_buf[db + Da] = b & 255;
            Da++;
            0 === a ? Ja[2 * b]++ : (cb++, a--, Ja[2 * (g._length_code[b] + q + 1)]++,
                Oa[2 * g.d_code(a)]++);
            if (0 === (Da & 8191) && 2 < xa) {
                c = 8 * Da;
                d = W - Ea;
                for (e = 0; e < m; e++) c += Oa[2 * e] * (5 + g.extra_dbits[e]);
                if (cb < Math.floor(Da / 2) && c >>> 3 < Math.floor(d / 2)) return !0
            }
            return Da == Qa - 1
        }

        function jb(a, b) {
            var c, d, e = 0,
                f, k;
            if (0 !== Da) {
                do c = fa.pending_buf[Ua + 2 * e] << 8 & 65280 | fa.pending_buf[Ua + 2 * e + 1] & 255, d = fa.pending_buf[db + e] & 255, e++, 0 === c ? l(d, a) : (f = g._length_code[d], l(f + q + 1, a), k = g.extra_lbits[f], 0 !== k && (d -= g.base_length[f], h(d, k)), c--, f = g.d_code(c), l(f, b), k = g.extra_dbits[f], 0 !== k && (c -= g.base_dist[f], h(c, k))); while (e <
                    Da)
            }
            l(t, a);
            Va = a[2 * t + 1]
        }

        function kb() {
            8 < ta ? f(ya) : 0 < ta && e(ya & 255);
            ta = ya = 0
        }

        function lb(a, b, c) {
            h((Ha << 1) + (c ? 1 : 0), 3);
            kb();
            Va = 8;
            f(b);
            f(~b);
            fa.pending_buf.set(L.subarray(a, a + b), fa.pending);
            fa.pending += b
        }

        function Na(b) {
            var e = 0 <= Ea ? Ea : -1,
                f = W - Ea,
                l, p, m = 0;
            if (0 < xa) {
                Wa.build_tree(fa);
                Xa.build_tree(fa);
                c(Ja, Wa.max_code);
                c(Oa, Xa.max_code);
                eb.build_tree(fa);
                for (m = k - 1; 3 <= m && 0 === wa[2 * g.bl_order[m] + 1]; m--);
                fa.opt_len += 3 * (m + 1) + 14;
                l = fa.opt_len + 3 + 7 >>> 3;
                p = fa.static_len + 3 + 7 >>> 3;
                p <= l && (l = p)
            } else l = p = f + 5; if (f + 4 <= l && -1 != e) lb(e,
                f, b);
            else if (p == l) h(($ << 1) + (b ? 1 : 0), 3), jb(d.static_ltree, d.static_dtree);
            else {
                h((Aa << 1) + (b ? 1 : 0), 3);
                e = Wa.max_code + 1;
                f = Xa.max_code + 1;
                m += 1;
                h(e - 257, 5);
                h(f - 1, 5);
                h(m - 4, 4);
                for (l = 0; l < m; l++) h(wa[2 * g.bl_order[l] + 1], 3);
                r(Ja, e - 1);
                r(Oa, f - 1);
                jb(Ja, Oa)
            }
            a();
            b && kb();
            Ea = W;
            qa.flush_pending()
        }

        function ab() {
            var a, b, c, d;
            do {
                d = Q - ha - W;
                if (0 === d && 0 === W && 0 === ha) d = oa;
                else if (-1 == d) d--;
                else if (W >= oa + oa - sa) {
                    L.set(L.subarray(oa, oa + oa), 0);
                    Ra -= oa;
                    W -= oa;
                    Ea -= oa;
                    c = a = Sa;
                    do b = Y[--c] & 65535, Y[c] = b >= oa ? b - oa : 0; while (0 !== --a);
                    c = a = oa;
                    do b = Z[--c] &
                        65535, Z[c] = b >= oa ? b - oa : 0; while (0 !== --a);
                    d += oa
                }
                if (0 === qa.avail_in) break;
                a = qa.read_buf(L, W + ha, d);
                ha += a;
                ha >= na && (ka = L[W] & 255, ka = (ka << Ka ^ L[W + 1] & 255) & La)
            } while (ha < sa && 0 !== qa.avail_in)
        }

        function ob(a) {
            var b = 65535,
                c;
            for (b > bb - 5 && (b = bb - 5);;) {
                if (1 >= ha) {
                    ab();
                    if (0 === ha && a == D) return ma;
                    if (0 === ha) break
                }
                W += ha;
                ha = 0;
                c = Ea + b;
                if (0 === W || W >= c)
                    if (ha = W - c, W = c, Na(!1), 0 === qa.avail_out) return ma;
                if (W - Ea >= oa - sa && (Na(!1), 0 === qa.avail_out)) return ma
            }
            Na(a == G);
            return 0 === qa.avail_out ? a == G ? ra : ma : a == G ? T : pa
        }

        function mb(a) {
            var b = fb,
                c =
                    W,
                d, e = Ca,
                f = W > oa - sa ? W - (oa - sa) : 0,
                g = gb,
                h = ea,
                k = W + va,
                l = L[c + e - 1],
                p = L[c + e];
            Ca >= hb && (b >>= 2);
            g > ha && (g = ha);
            do
                if (d = a, L[d + e] == p && L[d + e - 1] == l && L[d] == L[c] && L[++d] == L[c + 1]) {
                    c += 2;
                    d++;
                    do; while (L[++c] == L[++d] && L[++c] == L[++d] && L[++c] == L[++d] && L[++c] == L[++d] && L[++c] == L[++d] && L[++c] == L[++d] && L[++c] == L[++d] && L[++c] == L[++d] && c < k);
                    d = va - (k - c);
                    c = k - va;
                    if (d > e) {
                        Ra = a;
                        e = d;
                        if (d >= g) break;
                        l = L[c + e - 1];
                        p = L[c + e]
                    }
                } while ((a = Z[a & h] & 65535) > f && 0 !== --b);
            return e <= ha ? e : ha
        }

        function pb(a) {
            for (var b = 0, c, d;;) {
                if (ha < sa) {
                    ab();
                    if (ha < sa && a == D) return ma;
                    if (0 === ha) break
                }
                ha >= na && (ka = (ka << Ka ^ L[W + (na - 1)] & 255) & La, b = Y[ka] & 65535, Z[W & ea] = Y[ka], Y[ka] = W);
                Ca = ua;
                Fa = Ra;
                ua = na - 1;
                0 !== b && (Ca < Za && (W - b & 65535) <= oa - sa) && (Ya != A && (ua = mb(b)), 5 >= ua && (Ya == x || ua == na && 4096 < W - Ra) && (ua = na - 1));
                if (Ca >= na && ua <= Ca) {
                    d = W + ha - na;
                    c = Ta(W - 1 - Fa, Ca - na);
                    ha -= Ca - 1;
                    Ca -= 2;
                    do ++
                    W <= d && (ka = (ka << Ka ^ L[W + (na - 1)] & 255) & La, b = Y[ka] & 65535, Z[W & ea] = Y[ka], Y[ka] = W);
                    while (0 !== --Ca);
                    ca = 0;
                    ua = na - 1;
                    W++;
                    if (c && (Na(!1), 0 === qa.avail_out)) return ma
                } else if (0 !== ca) {
                    if ((c = Ta(0, L[W - 1] & 255)) && Na(!1), W++, ha--, 0 === qa.avail_out) return ma
                } else ca =
                    1, W++, ha--
            }
            0 !== ca && (Ta(0, L[W - 1] & 255), ca = 0);
            Na(a == G);
            return 0 === qa.avail_out ? a == G ? ra : ma : a == G ? T : pa
        }
        var fa = this,
            qa, Ba, bb, Pa, oa, ba, ea, L, Q, Z, Y, ka, Sa, ib, La, Ka, Ea, ua, Fa, ca, W, Ra, ha, Ca, fb, Za, xa, Ya, hb, gb, Ja, Oa, wa, Wa = new g,
            Xa = new g,
            eb = new g;
        fa.depth = [];
        var db, Qa, Da, Ua, cb, Va, ya, ta;
        fa.bl_count = [];
        fa.heap = [];
        Ja = [];
        Oa = [];
        wa = [];
        fa.pqdownheap = function (a, c) {
            for (var d = fa.heap, e = d[c], f = c << 1; f <= fa.heap_len;) {
                f < fa.heap_len && b(a, d[f + 1], d[f], fa.depth) && f++;
                if (b(a, e, d[f], fa.depth)) break;
                d[c] = d[f];
                c = f;
                f <<= 1
            }
            d[c] = e
        };
        fa.deflateInit =
            function (b, c, e, f, g, h) {
                f || (f = Ia);
                g || (g = da);
                h || (h = C);
                b.msg = null;
                c == v && (c = 6);
                if (1 > g || g > aa || f != Ia || 9 > e || 15 < e || 0 > c || 9 < c || 0 > h || h > A) return K;
                b.dstate = fa;
                ba = e;
                oa = 1 << ba;
                ea = oa - 1;
                ib = g + 7;
                Sa = 1 << ib;
                La = Sa - 1;
                Ka = Math.floor((ib + na - 1) / na);
                L = new Uint8Array(2 * oa);
                Z = [];
                Y = [];
                Qa = 1 << g + 6;
                fa.pending_buf = new Uint8Array(4 * Qa);
                bb = 4 * Qa;
                Ua = Math.floor(Qa / 2);
                db = 3 * Qa;
                xa = c;
                Ya = h;
                b.total_in = b.total_out = 0;
                b.msg = null;
                fa.pending = 0;
                fa.pending_out = 0;
                Ba = ia;
                Pa = D;
                Wa.dyn_tree = Ja;
                Wa.stat_desc = d.static_l_desc;
                Xa.dyn_tree = Oa;
                Xa.stat_desc = d.static_d_desc;
                eb.dyn_tree = wa;
                eb.stat_desc = d.static_bl_desc;
                ta = ya = 0;
                Va = 8;
                a();
                Q = 2 * oa;
                for (b = Y[Sa - 1] = 0; b < Sa - 1; b++) Y[b] = 0;
                Za = U[xa].max_lazy;
                hb = U[xa].good_length;
                gb = U[xa].nice_length;
                fb = U[xa].max_chain;
                ha = Ea = W = 0;
                ua = Ca = na - 1;
                ka = ca = 0;
                return z
        };
        fa.deflateEnd = function () {
            if (Ba != ga && Ba != ia && Ba != Ga) return K;
            L = Z = Y = fa.pending_buf = null;
            fa.dstate = null;
            return Ba == ia ? R : z
        };
        fa.deflateParams = function (a, b, c) {
            var d = z;
            b == v && (b = 6);
            if (0 > b || 9 < b || 0 > c || c > A) return K;
            U[xa].func != U[b].func && 0 !== a.total_in && (d = a.deflate(B));
            xa != b && (xa = b, Za = U[xa].max_lazy,
                hb = U[xa].good_length, gb = U[xa].nice_length, fb = U[xa].max_chain);
            Ya = c;
            return d
        };
        fa.deflateSetDictionary = function (a, b, c) {
            a = c;
            var d = 0;
            if (!b || Ba != ga) return K;
            if (a < na) return z;
            a > oa - sa && (a = oa - sa, d = c - a);
            L.set(b.subarray(d, d + a), 0);
            Ea = W = a;
            ka = L[0] & 255;
            ka = (ka << Ka ^ L[1] & 255) & La;
            for (b = 0; b <= a - na; b++) ka = (ka << Ka ^ L[b + (na - 1)] & 255) & La, Z[b & ea] = Y[ka], Y[ka] = b;
            return z
        };
        fa.deflate = function (a, b) {
            var c, f, g;
            if (b > G || 0 > b) return K;
            if (!a.next_out || !a.next_in && 0 !== a.avail_in || Ba == Ga && b != G) return a.msg = ja[O - K], K;
            if (0 === a.avail_out) return a.msg =
                ja[O - N], N;
            qa = a;
            c = Pa;
            Pa = b;
            Ba == ga && (f = Ia + (ba - 8 << 4) << 8, g = (xa - 1 & 255) >> 1, 3 < g && (g = 3), f |= g << 6, 0 !== W && (f |= P), Ba = ia, f += 31 - f % 31, e(f >> 8 & 255), e(f & 255));
            if (0 !== fa.pending) {
                if (qa.flush_pending(), 0 === qa.avail_out) return Pa = -1, z
            } else if (0 === qa.avail_in && b <= c && b != G) return qa.msg = ja[O - N], N;
            if (Ba == Ga && 0 !== qa.avail_in) return a.msg = ja[O - N], N;
            if (0 !== qa.avail_in || 0 !== ha || b != D && Ba != Ga) {
                c = -1;
                switch (U[xa].func) {
                case X:
                    c = ob(b);
                    break;
                case la:
                    a: {
                        for (c = 0;;) {
                            if (ha < sa) {
                                ab();
                                if (ha < sa && b == D) {
                                    c = ma;
                                    break a
                                }
                                if (0 === ha) break
                            }
                            ha >= na && (ka =
                                (ka << Ka ^ L[W + (na - 1)] & 255) & La, c = Y[ka] & 65535, Z[W & ea] = Y[ka], Y[ka] = W);
                            0 !== c && (W - c & 65535) <= oa - sa && Ya != A && (ua = mb(c));
                            if (ua >= na)
                                if (f = Ta(W - Ra, ua - na), ha -= ua, ua <= Za && ha >= na) {
                                    ua--;
                                    do W++, ka = (ka << Ka ^ L[W + (na - 1)] & 255) & La, c = Y[ka] & 65535, Z[W & ea] = Y[ka], Y[ka] = W; while (0 !== --ua);
                                    W++
                                } else W += ua, ua = 0, ka = L[W] & 255, ka = (ka << Ka ^ L[W + 1] & 255) & La;
                                else f = Ta(0, L[W] & 255), ha--, W++;
                            if (f && (Na(!1), 0 === qa.avail_out)) {
                                c = ma;
                                break a
                            }
                        }
                        Na(b == G);
                        c = 0 === qa.avail_out ? b == G ? ra : ma : b == G ? T : pa
                    }
                    break;
                case V:
                    c = pb(b)
                }
                if (c == ra || c == T) Ba = Ga;
                if (c == ma || c == ra) return 0 ===
                    qa.avail_out && (Pa = -1), z;
                if (c == pa) {
                    if (b == B) h($ << 1, 3), l(t, d.static_ltree), E(), 9 > 1 + Va + 10 - ta && (h($ << 1, 3), l(t, d.static_ltree), E()), Va = 7;
                    else if (lb(0, 0, !1), b == F)
                        for (c = 0; c < Sa; c++) Y[c] = 0;
                    qa.flush_pending();
                    if (0 === qa.avail_out) return Pa = -1, z
                }
            }
            return b != G ? z : J
        }
    }

    function h() {
        this.total_out = this.avail_out = this.total_in = this.avail_in = this.next_out_index = this.next_in_index = 0
    }

    function e(a) {
        var b = new h,
            c = D,
            d = new Uint8Array(512);
        "undefined" == typeof a && (a = v);
        b.deflateInit(a);
        b.next_out = d;
        this.append = function (a, e) {
            var f,
                g = [],
                h = 0,
                k = 0,
                l = 0,
                p;
            if (a.length) {
                b.next_in_index = 0;
                b.next_in = a;
                b.avail_in = a.length;
                do {
                    b.next_out_index = 0;
                    b.avail_out = 512;
                    f = b.deflate(c);
                    if (f != z) throw "deflating: " + b.msg;
                    b.next_out_index && (512 == b.next_out_index ? g.push(new Uint8Array(d)) : g.push(new Uint8Array(d.subarray(0, b.next_out_index))));
                    l += b.next_out_index;
                    e && (0 < b.next_in_index && b.next_in_index != h) && (e(b.next_in_index), h = b.next_in_index)
                } while (0 < b.avail_in || 0 === b.avail_out);
                p = new Uint8Array(l);
                g.forEach(function (a) {
                    p.set(a, k);
                    k += a.length
                });
                return p
            }
        };
        this.flush = function () {
            var a, c = [],
                e = 0,
                f = 0,
                g;
            do {
                b.next_out_index = 0;
                b.avail_out = 512;
                a = b.deflate(G);
                if (a != J && a != z) throw "deflating: " + b.msg;
                0 < 512 - b.avail_out && c.push(new Uint8Array(d.subarray(0, b.next_out_index)));
                f += b.next_out_index
            } while (0 < b.avail_in || 0 === b.avail_out);
            b.deflateEnd();
            g = new Uint8Array(f);
            c.forEach(function (a) {
                g.set(a, e);
                e += a.length
            });
            return g
        }
    }
    var l = 15,
        m = 30,
        k = 19,
        q = 256,
        p = q + 1 + 29,
        r = 2 * p + 1,
        t = 256,
        s = 16,
        u = 17,
        y = 18,
        w = 16,
        v = -1,
        x = 1,
        A = 2,
        C = 0,
        D = 0,
        B = 1,
        F = 3,
        G = 4,
        z = 0,
        J = 1,
        O = 2,
        K = -2,
        R = -3,
        N = -5,
        E = [0, 1, 2, 3, 4, 4,
            5, 5, 6, 6, 6, 6, 7, 7, 7, 7, 8, 8, 8, 8, 8, 8, 8, 8, 9, 9, 9, 9, 9, 9, 9, 9, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14,
            14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 0, 0, 16, 17, 18, 18, 19, 19, 20, 20, 20, 20, 21, 21, 21, 21, 22, 22, 22, 22, 22, 22, 22, 22, 23, 23, 23, 23, 23, 23, 23, 23, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26,
            26, 26, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29
        ];
    g._length_code = [0, 1, 2, 3, 4, 5, 6, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 12, 12, 13, 13, 13, 13, 14, 14, 14, 14, 15, 15, 15, 15, 16, 16, 16, 16, 16, 16, 16, 16, 17, 17, 17, 17, 17, 17, 17, 17, 18, 18, 18, 18, 18, 18, 18, 18, 19, 19, 19, 19, 19, 19, 19, 19, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25,
        25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 28
    ];
    g.base_length = [0, 1, 2, 3, 4, 5, 6, 7, 8, 10, 12, 14, 16, 20, 24, 28, 32, 40, 48, 56, 64, 80, 96, 112, 128, 160, 192, 224, 0];
    g.base_dist = [0, 1, 2, 3, 4, 6, 8, 12, 16, 24, 32, 48, 64, 96, 128, 192, 256, 384, 512, 768, 1024, 1536, 2048, 3072, 4096, 6144, 8192, 12288, 16384, 24576];
    g.d_code = function (a) {
        return 256 >
            a ? E[a] : E[256 + (a >>> 7)]
    };
    g.extra_lbits = [0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0];
    g.extra_dbits = [0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13];
    g.extra_blbits = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 3, 7];
    g.bl_order = [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15];
    d.static_ltree = [12, 8, 140, 8, 76, 8, 204, 8, 44, 8, 172, 8, 108, 8, 236, 8, 28, 8, 156, 8, 92, 8, 220, 8, 60, 8, 188, 8, 124, 8, 252, 8, 2, 8, 130, 8, 66, 8, 194, 8, 34, 8, 162, 8, 98, 8, 226, 8, 18, 8, 146, 8, 82, 8, 210, 8, 50, 8, 178, 8, 114, 8, 242, 8, 10, 8, 138, 8,
        74, 8, 202, 8, 42, 8, 170, 8, 106, 8, 234, 8, 26, 8, 154, 8, 90, 8, 218, 8, 58, 8, 186, 8, 122, 8, 250, 8, 6, 8, 134, 8, 70, 8, 198, 8, 38, 8, 166, 8, 102, 8, 230, 8, 22, 8, 150, 8, 86, 8, 214, 8, 54, 8, 182, 8, 118, 8, 246, 8, 14, 8, 142, 8, 78, 8, 206, 8, 46, 8, 174, 8, 110, 8, 238, 8, 30, 8, 158, 8, 94, 8, 222, 8, 62, 8, 190, 8, 126, 8, 254, 8, 1, 8, 129, 8, 65, 8, 193, 8, 33, 8, 161, 8, 97, 8, 225, 8, 17, 8, 145, 8, 81, 8, 209, 8, 49, 8, 177, 8, 113, 8, 241, 8, 9, 8, 137, 8, 73, 8, 201, 8, 41, 8, 169, 8, 105, 8, 233, 8, 25, 8, 153, 8, 89, 8, 217, 8, 57, 8, 185, 8, 121, 8, 249, 8, 5, 8, 133, 8, 69, 8, 197, 8, 37, 8, 165, 8, 101, 8, 229, 8, 21, 8, 149, 8, 85, 8, 213, 8,
        53, 8, 181, 8, 117, 8, 245, 8, 13, 8, 141, 8, 77, 8, 205, 8, 45, 8, 173, 8, 109, 8, 237, 8, 29, 8, 157, 8, 93, 8, 221, 8, 61, 8, 189, 8, 125, 8, 253, 8, 19, 9, 275, 9, 147, 9, 403, 9, 83, 9, 339, 9, 211, 9, 467, 9, 51, 9, 307, 9, 179, 9, 435, 9, 115, 9, 371, 9, 243, 9, 499, 9, 11, 9, 267, 9, 139, 9, 395, 9, 75, 9, 331, 9, 203, 9, 459, 9, 43, 9, 299, 9, 171, 9, 427, 9, 107, 9, 363, 9, 235, 9, 491, 9, 27, 9, 283, 9, 155, 9, 411, 9, 91, 9, 347, 9, 219, 9, 475, 9, 59, 9, 315, 9, 187, 9, 443, 9, 123, 9, 379, 9, 251, 9, 507, 9, 7, 9, 263, 9, 135, 9, 391, 9, 71, 9, 327, 9, 199, 9, 455, 9, 39, 9, 295, 9, 167, 9, 423, 9, 103, 9, 359, 9, 231, 9, 487, 9, 23, 9, 279, 9, 151, 9,
        407, 9, 87, 9, 343, 9, 215, 9, 471, 9, 55, 9, 311, 9, 183, 9, 439, 9, 119, 9, 375, 9, 247, 9, 503, 9, 15, 9, 271, 9, 143, 9, 399, 9, 79, 9, 335, 9, 207, 9, 463, 9, 47, 9, 303, 9, 175, 9, 431, 9, 111, 9, 367, 9, 239, 9, 495, 9, 31, 9, 287, 9, 159, 9, 415, 9, 95, 9, 351, 9, 223, 9, 479, 9, 63, 9, 319, 9, 191, 9, 447, 9, 127, 9, 383, 9, 255, 9, 511, 9, 0, 7, 64, 7, 32, 7, 96, 7, 16, 7, 80, 7, 48, 7, 112, 7, 8, 7, 72, 7, 40, 7, 104, 7, 24, 7, 88, 7, 56, 7, 120, 7, 4, 7, 68, 7, 36, 7, 100, 7, 20, 7, 84, 7, 52, 7, 116, 7, 3, 8, 131, 8, 67, 8, 195, 8, 35, 8, 163, 8, 99, 8, 227, 8
    ];
    d.static_dtree = [0, 5, 16, 5, 8, 5, 24, 5, 4, 5, 20, 5, 12, 5, 28, 5, 2, 5, 18, 5, 10, 5, 26, 5, 6,
        5, 22, 5, 14, 5, 30, 5, 1, 5, 17, 5, 9, 5, 25, 5, 5, 5, 21, 5, 13, 5, 29, 5, 3, 5, 19, 5, 11, 5, 27, 5, 7, 5, 23, 5
    ];
    d.static_l_desc = new d(d.static_ltree, g.extra_lbits, q + 1, p, l);
    d.static_d_desc = new d(d.static_dtree, g.extra_dbits, 0, m, l);
    d.static_bl_desc = new d(null, g.extra_blbits, 0, k, 7);
    var aa = 9,
        da = 8,
        X = 0,
        la = 1,
        V = 2,
        U = [new c(0, 0, 0, 0, X), new c(4, 4, 8, 4, la), new c(4, 5, 16, 8, la), new c(4, 6, 32, 32, la), new c(4, 4, 16, 16, V), new c(8, 16, 32, 32, V), new c(8, 16, 128, 128, V), new c(8, 32, 128, 256, V), new c(32, 128, 258, 1024, V), new c(32, 258, 258, 4096, V)],
        ja = "need dictionary;stream end;;;stream error;data error;;buffer error;;".split(";"),
        ma = 0,
        pa = 1,
        ra = 2,
        T = 3,
        P = 32,
        ga = 42,
        ia = 113,
        Ga = 666,
        Ia = 8,
        Ha = 0,
        $ = 1,
        Aa = 2,
        na = 3,
        va = 258,
        sa = va + na + 1;
    h.prototype = {
        deflateInit: function (a, b) {
            this.dstate = new f;
            b || (b = l);
            return this.dstate.deflateInit(this, a, b)
        },
        deflate: function (a) {
            return this.dstate ? this.dstate.deflate(this, a) : K
        },
        deflateEnd: function () {
            if (!this.dstate) return K;
            var a = this.dstate.deflateEnd();
            this.dstate = null;
            return a
        },
        deflateParams: function (a, b) {
            return this.dstate ? this.dstate.deflateParams(this, a, b) : K
        },
        deflateSetDictionary: function (a, b) {
            return this.dstate ?
                this.dstate.deflateSetDictionary(this, a, b) : K
        },
        read_buf: function (a, b, c) {
            var d = this.avail_in;
            d > c && (d = c);
            if (0 === d) return 0;
            this.avail_in -= d;
            a.set(this.next_in.subarray(this.next_in_index, this.next_in_index + d), b);
            this.next_in_index += d;
            this.total_in += d;
            return d
        },
        flush_pending: function () {
            var a = this.dstate.pending;
            a > this.avail_out && (a = this.avail_out);
            0 !== a && (this.next_out.set(this.dstate.pending_buf.subarray(this.dstate.pending_out, this.dstate.pending_out + a), this.next_out_index), this.next_out_index += a, this.dstate.pending_out +=
                a, this.total_out += a, this.avail_out -= a, this.dstate.pending -= a, 0 === this.dstate.pending && (this.dstate.pending_out = 0))
        }
    };
    var Fa;
    a.zip ? a.zip.Deflater = e : (Fa = new e, a.addEventListener("message", function (b) {
        b = b.data;
        b.init && (Fa = new e(b.level), a.postMessage({
            oninit: !0
        }));
        b.append && a.postMessage({
            onappend: !0,
            data: Fa.append(b.data, function (b) {
                a.postMessage({
                    progress: !0,
                    current: b
                })
            })
        });
        b.flush && a.postMessage({
            onflush: !0,
            data: Fa.flush()
        })
    }, !1))
})(this);
(function (a) {
    function g() {
        function a(b, c, d, l, p, m, t, u, y, w, v) {
            var x, z, C, A, D, za, F, G, E, J;
            F = 0;
            C = d;
            do f[b[c + F]]++, F++, C--; while (0 !== C);
            if (f[0] == d) return t[0] = -1, u[0] = 0, e;
            za = u[0];
            for (A = 1; A <= B && 0 === f[A]; A++);
            D = A;
            za < A && (za = A);
            for (C = B; 0 !== C && 0 === f[C]; C--);
            z = C;
            za > C && (za = C);
            u[0] = za;
            for (u = 1 << A; A < C; A++, u <<= 1)
                if (0 > (u -= f[A])) return q;
            if (0 > (u -= f[C])) return q;
            f[C] += u;
            k[1] = A = 0;
            F = 1;
            for (G = 2; 0 !== --C;) k[G] = A += f[F], G++, F++;
            F = C = 0;
            do 0 !== (A = b[c + F]) && (v[k[A]++] = C), F++; while (++C < d);
            d = k[z];
            F = k[0] = C = 0;
            c = -1;
            E = -za;
            for (J = G = h[0] =
                0; D <= z; D++)
                for (b = f[D]; 0 !== b--;) {
                    for (; D > E + za;) {
                        c++;
                        E += za;
                        J = z - E;
                        J = J > za ? za : J;
                        if ((x = 1 << (A = D - E)) > b + 1 && (x -= b + 1, G = D, A < J))
                            for (; ++A < J && !((x <<= 1) <= f[++G]);) x -= f[G];
                        J = 1 << A;
                        if (w[0] + J > s) return q;
                        h[c] = G = w[0];
                        w[0] += J;
                        0 !== c ? (k[c] = C, g[0] = A, g[1] = za, A = C >>> E - za, g[2] = G - h[c - 1] - A, y.set(g, 3 * (h[c - 1] + A))) : t[0] = G
                    }
                    g[1] = D - E;
                    F >= d ? g[0] = 192 : v[F] < l ? (g[0] = 256 > v[F] ? 0 : 96, g[2] = v[F++]) : (g[0] = m[v[F] - l] + 16 + 64, g[2] = p[v[F++] - l]);
                    x = 1 << D - E;
                    for (A = C >>> E; A < J; A += x) y.set(g, 3 * (G + A));
                    for (A = 1 << D - 1; 0 !== (C & A); A >>>= 1) C ^= A;
                    C ^= A;
                    for (A = (1 << E) - 1;
                        (C & A) != k[c];) c--,
                    E -= za, A = (1 << E) - 1
                }
            return 0 !== u && 1 != z ? r : e
        }

        function b(a) {
            var e;
            c || (c = [], d = [], f = new Int32Array(B + 1), g = [], h = new Int32Array(B), k = new Int32Array(B + 1));
            d.length < a && (d = []);
            for (e = 0; e < a; e++) d[e] = 0;
            for (e = 0; e < B + 1; e++) f[e] = 0;
            for (e = 0; 3 > e; e++) g[e] = 0;
            h.set(f.subarray(0, B), 0);
            k.set(f.subarray(0, B + 1), 0)
        }
        var c, d, f, g, h, k;
        this.inflate_trees_bits = function (e, f, g, h, k) {
            b(19);
            c[0] = 0;
            e = a(e, 0, 19, 19, null, null, g, f, h, c, d);
            if (e == q) k.msg = "oversubscribed dynamic bit lengths tree";
            else if (e == r || 0 === f[0]) k.msg = "incomplete dynamic bit lengths tree",
            e = q;
            return e
        };
        this.inflate_trees_dynamic = function (f, g, h, k, l, m, s, t, u) {
            b(288);
            c[0] = 0;
            m = a(h, 0, f, 257, x, A, m, k, t, c, d);
            if (m != e || 0 === k[0]) return m == q ? u.msg = "oversubscribed literal/length tree" : m != p && (u.msg = "incomplete literal/length tree", m = q), m;
            b(288);
            m = a(h, f, g, 0, C, D, s, l, t, c, d);
            return m != e || 0 === l[0] && 257 < f ? (m == q ? u.msg = "oversubscribed distance tree" : m == r ? (u.msg = "incomplete distance tree", m = q) : m != p && (u.msg = "empty distance tree with lengths", m = q), m) : e
        }
    }

    function d() {
        var a, b = 0,
            c, d = 0,
            f = 0,
            g = 0,
            h = 0,
            p = 0,
            m = 0,
            s = 0,
            r,
            u = 0,
            y, w = 0;
        this.init = function (b, d, e, f, g, h) {
            a = F;
            m = b;
            s = d;
            r = e;
            u = f;
            y = g;
            w = h;
            c = null
        };
        this.proc = function (v, x, C) {
            var A, B, D = 0,
                ba = 0,
                ea = 0,
                L, Q, Z, ea = x.next_in_index;
            L = x.avail_in;
            D = v.bitb;
            ba = v.bitk;
            Q = v.write;
            for (Z = Q < v.read ? v.read - Q - 1 : v.end - Q;;) switch (a) {
            case F:
                if (258 <= Z && 10 <= L) {
                    v.bitb = D;
                    v.bitk = ba;
                    x.avail_in = L;
                    x.total_in += ea - x.next_in_index;
                    x.next_in_index = ea;
                    v.write = Q;
                    a: {
                        C = r;
                        D = u;
                        ba = y;
                        ea = w;
                        L = v;
                        Q = x;
                        var Y = void 0,
                            P = void 0,
                            X = void 0,
                            U = B = A = Z = void 0,
                            V = void 0,
                            T = void 0,
                            $ = void 0,
                            da = void 0,
                            ga = void 0,
                            ca = void 0,
                            W = Y = Y = void 0,
                            U = Q.next_in_index,
                            V = Q.avail_in;
                        A = L.bitb;
                        B = L.bitk;
                        T = L.write;
                        $ = T < L.read ? L.read - T - 1 : L.end - T;
                        da = t[m];
                        ga = t[s];
                        do {
                            for (; 20 > B;) V--, A |= (Q.read_byte(U++) & 255) << B, B += 8;
                            Y = A & da;
                            P = C;
                            X = D;
                            W = 3 * (X + Y);
                            if (0 === (Z = P[W])) A >>= P[W + 1], B -= P[W + 1], L.window[T++] = P[W + 2], $--;
                            else {
                                do {
                                    A >>= P[W + 1];
                                    B -= P[W + 1];
                                    if (0 !== (Z & 16)) {
                                        Z &= 15;
                                        ca = P[W + 2] + (A & t[Z]);
                                        A >>= Z;
                                        for (B -= Z; 15 > B;) V--, A |= (Q.read_byte(U++) & 255) << B, B += 8;
                                        Y = A & ga;
                                        P = ba;
                                        X = ea;
                                        W = 3 * (X + Y);
                                        Z = P[W];
                                        do
                                            if (A >>= P[W + 1], B -= P[W + 1], 0 !== (Z & 16)) {
                                                for (Z &= 15; B < Z;) V--, A |= (Q.read_byte(U++) & 255) << B, B += 8;
                                                Y = P[W +
                                                    2] + (A & t[Z]);
                                                A >>= Z;
                                                B -= Z;
                                                $ -= ca;
                                                if (T >= Y) Y = T - Y, 0 < T - Y && 2 > T - Y ? (L.window[T++] = L.window[Y++], L.window[T++] = L.window[Y++]) : (L.window.set(L.window.subarray(Y, Y + 2), T), T += 2, Y += 2), ca -= 2;
                                                else {
                                                    Y = T - Y;
                                                    do Y += L.end; while (0 > Y);
                                                    Z = L.end - Y;
                                                    if (ca > Z) {
                                                        ca -= Z;
                                                        if (0 < T - Y && Z > T - Y) {
                                                            do L.window[T++] = L.window[Y++]; while (0 !== --Z)
                                                        } else L.window.set(L.window.subarray(Y, Y + Z), T), T += Z;
                                                        Y = 0
                                                    }
                                                } if (0 < T - Y && ca > T - Y) {
                                                    do L.window[T++] = L.window[Y++]; while (0 !== --ca)
                                                } else L.window.set(L.window.subarray(Y, Y + ca), T), T += ca;
                                                break
                                            } else if (0 === (Z & 64)) Y += P[W +
                                            2], Y += A & t[Z], W = 3 * (X + Y), Z = P[W];
                                        else {
                                            Q.msg = "invalid distance code";
                                            ca = Q.avail_in - V;
                                            ca = B >> 3 < ca ? B >> 3 : ca;
                                            V += ca;
                                            U -= ca;
                                            B -= ca << 3;
                                            L.bitb = A;
                                            L.bitk = B;
                                            Q.avail_in = V;
                                            Q.total_in += U - Q.next_in_index;
                                            Q.next_in_index = U;
                                            L.write = T;
                                            C = q;
                                            break a
                                        }
                                        while (1);
                                        break
                                    }
                                    if (0 === (Z & 64)) {
                                        if (Y += P[W + 2], Y += A & t[Z], W = 3 * (X + Y), 0 === (Z = P[W])) {
                                            A >>= P[W + 1];
                                            B -= P[W + 1];
                                            L.window[T++] = P[W + 2];
                                            $--;
                                            break
                                        }
                                    } else {
                                        0 !== (Z & 32) ? (ca = Q.avail_in - V, ca = B >> 3 < ca ? B >> 3 : ca, V += ca, U -= ca, B -= ca << 3, L.bitb = A, L.bitk = B, Q.avail_in = V, Q.total_in += U - Q.next_in_index, Q.next_in_index =
                                            U, L.write = T, C = l) : (Q.msg = "invalid literal/length code", ca = Q.avail_in - V, ca = B >> 3 < ca ? B >> 3 : ca, V += ca, U -= ca, B -= ca << 3, L.bitb = A, L.bitk = B, Q.avail_in = V, Q.total_in += U - Q.next_in_index, Q.next_in_index = U, L.write = T, C = q);
                                        break a
                                    }
                                } while (1)
                            }
                        } while (258 <= $ && 10 <= V);
                        ca = Q.avail_in - V;
                        ca = B >> 3 < ca ? B >> 3 : ca;
                        V += ca;
                        U -= ca;
                        B -= ca << 3;
                        L.bitb = A;
                        L.bitk = B;
                        Q.avail_in = V;
                        Q.total_in += U - Q.next_in_index;
                        Q.next_in_index = U;
                        L.write = T;
                        C = e
                    }
                    ea = x.next_in_index;
                    L = x.avail_in;
                    D = v.bitb;
                    ba = v.bitk;
                    Q = v.write;
                    Z = Q < v.read ? v.read - Q - 1 : v.end - Q;
                    if (C != e) {
                        a = C == l ? N :
                            aa;
                        break
                    }
                }
                f = m;
                c = r;
                d = u;
                a = G;
            case G:
                for (A = f; ba < A;) {
                    if (0 !== L) C = e;
                    else return v.bitb = D, v.bitk = ba, x.avail_in = L, x.total_in += ea - x.next_in_index, x.next_in_index = ea, v.write = Q, v.inflate_flush(x, C);
                    L--;
                    D |= (x.read_byte(ea++) & 255) << ba;
                    ba += 8
                }
                A = 3 * (d + (D & t[A]));
                D >>>= c[A + 1];
                ba -= c[A + 1];
                B = c[A];
                if (0 === B) {
                    g = c[A + 2];
                    a = R;
                    break
                }
                if (0 !== (B & 16)) {
                    h = B & 15;
                    b = c[A + 2];
                    a = z;
                    break
                }
                if (0 === (B & 64)) {
                    f = B;
                    d = A / 3 + c[A + 2];
                    break
                }
                if (0 !== (B & 32)) {
                    a = N;
                    break
                }
                a = aa;
                x.msg = "invalid literal/length code";
                C = q;
                v.bitb = D;
                v.bitk = ba;
                x.avail_in = L;
                x.total_in += ea - x.next_in_index;
                x.next_in_index = ea;
                v.write = Q;
                return v.inflate_flush(x, C);
            case z:
                for (A = h; ba < A;) {
                    if (0 !== L) C = e;
                    else return v.bitb = D, v.bitk = ba, x.avail_in = L, x.total_in += ea - x.next_in_index, x.next_in_index = ea, v.write = Q, v.inflate_flush(x, C);
                    L--;
                    D |= (x.read_byte(ea++) & 255) << ba;
                    ba += 8
                }
                b += D & t[A];
                D >>= A;
                ba -= A;
                f = s;
                c = y;
                d = w;
                a = J;
            case J:
                for (A = f; ba < A;) {
                    if (0 !== L) C = e;
                    else return v.bitb = D, v.bitk = ba, x.avail_in = L, x.total_in += ea - x.next_in_index, x.next_in_index = ea, v.write = Q, v.inflate_flush(x, C);
                    L--;
                    D |= (x.read_byte(ea++) & 255) << ba;
                    ba += 8
                }
                A = 3 *
                    (d + (D & t[A]));
                D >>= c[A + 1];
                ba -= c[A + 1];
                B = c[A];
                if (0 !== (B & 16)) {
                    h = B & 15;
                    p = c[A + 2];
                    a = O;
                    break
                }
                if (0 === (B & 64)) {
                    f = B;
                    d = A / 3 + c[A + 2];
                    break
                }
                a = aa;
                x.msg = "invalid distance code";
                C = q;
                v.bitb = D;
                v.bitk = ba;
                x.avail_in = L;
                x.total_in += ea - x.next_in_index;
                x.next_in_index = ea;
                v.write = Q;
                return v.inflate_flush(x, C);
            case O:
                for (A = h; ba < A;) {
                    if (0 !== L) C = e;
                    else return v.bitb = D, v.bitk = ba, x.avail_in = L, x.total_in += ea - x.next_in_index, x.next_in_index = ea, v.write = Q, v.inflate_flush(x, C);
                    L--;
                    D |= (x.read_byte(ea++) & 255) << ba;
                    ba += 8
                }
                p += D & t[A];
                D >>= A;
                ba -=
                    A;
                a = K;
            case K:
                for (A = Q - p; 0 > A;) A += v.end;
                for (; 0 !== b;) {
                    if (0 === Z && (Q == v.end && 0 !== v.read && (Q = 0, Z = Q < v.read ? v.read - Q - 1 : v.end - Q), 0 === Z && (v.write = Q, C = v.inflate_flush(x, C), Q = v.write, Z = Q < v.read ? v.read - Q - 1 : v.end - Q, Q == v.end && 0 !== v.read && (Q = 0, Z = Q < v.read ? v.read - Q - 1 : v.end - Q), 0 === Z))) return v.bitb = D, v.bitk = ba, x.avail_in = L, x.total_in += ea - x.next_in_index, x.next_in_index = ea, v.write = Q, v.inflate_flush(x, C);
                    v.window[Q++] = v.window[A++];
                    Z--;
                    A == v.end && (A = 0);
                    b--
                }
                a = F;
                break;
            case R:
                if (0 === Z && (Q == v.end && 0 !== v.read && (Q = 0, Z = Q < v.read ?
                    v.read - Q - 1 : v.end - Q), 0 === Z && (v.write = Q, C = v.inflate_flush(x, C), Q = v.write, Z = Q < v.read ? v.read - Q - 1 : v.end - Q, Q == v.end && 0 !== v.read && (Q = 0, Z = Q < v.read ? v.read - Q - 1 : v.end - Q), 0 === Z))) return v.bitb = D, v.bitk = ba, x.avail_in = L, x.total_in += ea - x.next_in_index, x.next_in_index = ea, v.write = Q, v.inflate_flush(x, C);
                C = e;
                v.window[Q++] = g;
                Z--;
                a = F;
                break;
            case N:
                7 < ba && (ba -= 8, L++, ea--);
                v.write = Q;
                C = v.inflate_flush(x, C);
                Q = v.write;
                if (v.read != v.write) return v.bitb = D, v.bitk = ba, x.avail_in = L, x.total_in += ea - x.next_in_index, x.next_in_index = ea,
                v.write = Q, v.inflate_flush(x, C);
                a = E;
            case E:
                return C = l, v.bitb = D, v.bitk = ba, x.avail_in = L, x.total_in += ea - x.next_in_index, x.next_in_index = ea, v.write = Q, v.inflate_flush(x, C);
            case aa:
                return C = q, v.bitb = D, v.bitk = ba, x.avail_in = L, x.total_in += ea - x.next_in_index, x.next_in_index = ea, v.write = Q, v.inflate_flush(x, C);
            default:
                return C = k, v.bitb = D, v.bitk = ba, x.avail_in = L, x.total_in += ea - x.next_in_index, x.next_in_index = ea, v.write = Q, v.inflate_flush(x, C)
            }
        };
        this.free = function () {}
    }

    function c(a, b) {
        var c = this,
            f = X,
            h = 0,
            p = 0,
            m = 0,
            u, v = [0],
            y = [0],
            w = new d,
            x = 0,
            A = new Int32Array(3 * s),
            C = new g;
        c.bitk = 0;
        c.bitb = 0;
        c.window = new Uint8Array(b);
        c.end = b;
        c.read = 0;
        c.write = 0;
        c.reset = function (a, b) {
            b && (b[0] = 0);
            f == pa && w.free(a);
            f = X;
            c.bitk = 0;
            c.bitb = 0;
            c.read = c.write = 0
        };
        c.reset(a, null);
        c.inflate_flush = function (a, b) {
            var d, f, g;
            f = a.next_out_index;
            g = c.read;
            d = (g <= c.write ? c.write : c.end) - g;
            d > a.avail_out && (d = a.avail_out);
            0 !== d && b == r && (b = e);
            a.avail_out -= d;
            a.total_out += d;
            a.next_out.set(c.window.subarray(g, g + d), f);
            f += d;
            g += d;
            g == c.end && (g = 0, c.write == c.end && (c.write =
                0), d = c.write - g, d > a.avail_out && (d = a.avail_out), 0 !== d && b == r && (b = e), a.avail_out -= d, a.total_out += d, a.next_out.set(c.window.subarray(g, g + d), f), f += d, g += d);
            a.next_out_index = f;
            c.read = g;
            return b
        };
        c.proc = function (a, b) {
            var d, s, r, z, B, D, F;
            z = a.next_in_index;
            B = a.avail_in;
            s = c.bitb;
            r = c.bitk;
            D = c.write;
            for (F = D < c.read ? c.read - D - 1 : c.end - D;;) switch (f) {
            case X:
                for (; 3 > r;) {
                    if (0 !== B) b = e;
                    else return c.bitb = s, c.bitk = r, a.avail_in = B, a.total_in += z - a.next_in_index, a.next_in_index = z, c.write = D, c.inflate_flush(a, b);
                    B--;
                    s |= (a.read_byte(z++) &
                        255) << r;
                    r += 8
                }
                d = s & 7;
                x = d & 1;
                switch (d >>> 1) {
                case 0:
                    s >>>= 3;
                    r -= 3;
                    d = r & 7;
                    s >>>= d;
                    r -= d;
                    f = la;
                    break;
                case 1:
                    d = [];
                    var G = [],
                        E = [
                            []
                        ],
                        J = [
                            []
                        ];
                    g.inflate_trees_fixed(d, G, E, J);
                    w.init(d[0], G[0], E[0], 0, J[0], 0);
                    s >>>= 3;
                    r -= 3;
                    f = pa;
                    break;
                case 2:
                    s >>>= 3;
                    r -= 3;
                    f = U;
                    break;
                case 3:
                    return s >>>= 3, r -= 3, f = P, a.msg = "invalid block type", b = q, c.bitb = s, c.bitk = r, a.avail_in = B, a.total_in += z - a.next_in_index, a.next_in_index = z, c.write = D, c.inflate_flush(a, b)
                }
                break;
            case la:
                for (; 32 > r;) {
                    if (0 !== B) b = e;
                    else return c.bitb = s, c.bitk = r, a.avail_in = B, a.total_in +=
                        z - a.next_in_index, a.next_in_index = z, c.write = D, c.inflate_flush(a, b);
                    B--;
                    s |= (a.read_byte(z++) & 255) << r;
                    r += 8
                }
                if ((~s >>> 16 & 65535) != (s & 65535)) return f = P, a.msg = "invalid stored block lengths", b = q, c.bitb = s, c.bitk = r, a.avail_in = B, a.total_in += z - a.next_in_index, a.next_in_index = z, c.write = D, c.inflate_flush(a, b);
                h = s & 65535;
                s = r = 0;
                f = 0 !== h ? V : 0 !== x ? ra : X;
                break;
            case V:
                if (0 === B || 0 === F && (D == c.end && 0 !== c.read && (D = 0, F = D < c.read ? c.read - D - 1 : c.end - D), 0 === F && (c.write = D, b = c.inflate_flush(a, b), D = c.write, F = D < c.read ? c.read - D - 1 : c.end -
                    D, D == c.end && 0 !== c.read && (D = 0, F = D < c.read ? c.read - D - 1 : c.end - D), 0 === F))) return c.bitb = s, c.bitk = r, a.avail_in = B, a.total_in += z - a.next_in_index, a.next_in_index = z, c.write = D, c.inflate_flush(a, b);
                b = e;
                d = h;
                d > B && (d = B);
                d > F && (d = F);
                c.window.set(a.read_buf(z, d), D);
                z += d;
                B -= d;
                D += d;
                F -= d;
                if (0 !== (h -= d)) break;
                f = 0 !== x ? ra : X;
                break;
            case U:
                for (; 14 > r;) {
                    if (0 !== B) b = e;
                    else return c.bitb = s, c.bitk = r, a.avail_in = B, a.total_in += z - a.next_in_index, a.next_in_index = z, c.write = D, c.inflate_flush(a, b);
                    B--;
                    s |= (a.read_byte(z++) & 255) << r;
                    r += 8
                }
                p = d =
                    s & 16383;
                if (29 < (d & 31) || 29 < (d >> 5 & 31)) return f = P, a.msg = "too many length or distance symbols", b = q, c.bitb = s, c.bitk = r, a.avail_in = B, a.total_in += z - a.next_in_index, a.next_in_index = z, c.write = D, c.inflate_flush(a, b);
                d = 258 + (d & 31) + (d >> 5 & 31);
                if (!u || u.length < d) u = [];
                else
                    for (F = 0; F < d; F++) u[F] = 0;
                s >>>= 14;
                r -= 14;
                m = 0;
                f = ja;
            case ja:
                for (; m < 4 + (p >>> 10);) {
                    for (; 3 > r;) {
                        if (0 !== B) b = e;
                        else return c.bitb = s, c.bitk = r, a.avail_in = B, a.total_in += z - a.next_in_index, a.next_in_index = z, c.write = D, c.inflate_flush(a, b);
                        B--;
                        s |= (a.read_byte(z++) & 255) <<
                            r;
                        r += 8
                    }
                    u[da[m++]] = s & 7;
                    s >>>= 3;
                    r -= 3
                }
                for (; 19 > m;) u[da[m++]] = 0;
                v[0] = 7;
                d = C.inflate_trees_bits(u, v, y, A, a);
                if (d != e) return b = d, b == q && (u = null, f = P), c.bitb = s, c.bitk = r, a.avail_in = B, a.total_in += z - a.next_in_index, a.next_in_index = z, c.write = D, c.inflate_flush(a, b);
                m = 0;
                f = ma;
            case ma:
                for (;;) {
                    d = p;
                    if (!(m < 258 + (d & 31) + (d >> 5 & 31))) break;
                    for (d = v[0]; r < d;) {
                        if (0 !== B) b = e;
                        else return c.bitb = s, c.bitk = r, a.avail_in = B, a.total_in += z - a.next_in_index, a.next_in_index = z, c.write = D, c.inflate_flush(a, b);
                        B--;
                        s |= (a.read_byte(z++) & 255) << r;
                        r += 8
                    }
                    d =
                        A[3 * (y[0] + (s & t[d])) + 1];
                    E = A[3 * (y[0] + (s & t[d])) + 2];
                    if (16 > E) s >>>= d, r -= d, u[m++] = E;
                    else {
                        F = 18 == E ? 7 : E - 14;
                        for (G = 18 == E ? 11 : 3; r < d + F;) {
                            if (0 !== B) b = e;
                            else return c.bitb = s, c.bitk = r, a.avail_in = B, a.total_in += z - a.next_in_index, a.next_in_index = z, c.write = D, c.inflate_flush(a, b);
                            B--;
                            s |= (a.read_byte(z++) & 255) << r;
                            r += 8
                        }
                        s >>>= d;
                        r -= d;
                        G += s & t[F];
                        s >>>= F;
                        r -= F;
                        F = m;
                        d = p;
                        if (F + G > 258 + (d & 31) + (d >> 5 & 31) || 16 == E && 1 > F) return u = null, f = P, a.msg = "invalid bit length repeat", b = q, c.bitb = s, c.bitk = r, a.avail_in = B, a.total_in += z - a.next_in_index, a.next_in_index =
                            z, c.write = D, c.inflate_flush(a, b);
                        E = 16 == E ? u[F - 1] : 0;
                        do u[F++] = E; while (0 !== --G);
                        m = F
                    }
                }
                y[0] = -1;
                F = [];
                G = [];
                E = [];
                J = [];
                F[0] = 9;
                G[0] = 6;
                d = p;
                d = C.inflate_trees_dynamic(257 + (d & 31), 1 + (d >> 5 & 31), u, F, G, E, J, A, a);
                if (d != e) return d == q && (u = null, f = P), b = d, c.bitb = s, c.bitk = r, a.avail_in = B, a.total_in += z - a.next_in_index, a.next_in_index = z, c.write = D, c.inflate_flush(a, b);
                w.init(F[0], G[0], A, E[0], A, J[0]);
                f = pa;
            case pa:
                c.bitb = s;
                c.bitk = r;
                a.avail_in = B;
                a.total_in += z - a.next_in_index;
                a.next_in_index = z;
                c.write = D;
                if ((b = w.proc(c, a, b)) != l) return c.inflate_flush(a,
                    b);
                b = e;
                w.free(a);
                z = a.next_in_index;
                B = a.avail_in;
                s = c.bitb;
                r = c.bitk;
                D = c.write;
                F = D < c.read ? c.read - D - 1 : c.end - D;
                if (0 === x) {
                    f = X;
                    break
                }
                f = ra;
            case ra:
                c.write = D;
                b = c.inflate_flush(a, b);
                D = c.write;
                if (c.read != c.write) return c.bitb = s, c.bitk = r, a.avail_in = B, a.total_in += z - a.next_in_index, a.next_in_index = z, c.write = D, c.inflate_flush(a, b);
                f = T;
            case T:
                return b = l, c.bitb = s, c.bitk = r, a.avail_in = B, a.total_in += z - a.next_in_index, a.next_in_index = z, c.write = D, c.inflate_flush(a, b);
            case P:
                return b = q, c.bitb = s, c.bitk = r, a.avail_in = B, a.total_in +=
                    z - a.next_in_index, a.next_in_index = z, c.write = D, c.inflate_flush(a, b);
            default:
                return b = k, c.bitb = s, c.bitk = r, a.avail_in = B, a.total_in += z - a.next_in_index, a.next_in_index = z, c.write = D, c.inflate_flush(a, b)
            }
        };
        c.free = function (a) {
            c.reset(a, null);
            A = c.window = null
        };
        c.set_dictionary = function (a, b, d) {
            c.window.set(a.subarray(b, b + d), 0);
            c.read = c.write = d
        };
        c.sync_point = function () {
            return f == la ? 1 : 0
        }
    }

    function b() {
        function a(b) {
            if (!b || !b.istate) return k;
            b.total_in = b.total_out = 0;
            b.msg = null;
            b.istate.mode = sa;
            b.istate.blocks.reset(b,
                null);
            return e
        }
        var b = this;
        b.mode = 0;
        b.method = 0;
        b.was = [0];
        b.need = 0;
        b.marker = 0;
        b.wbits = 0;
        b.inflateEnd = function (a) {
            b.blocks && b.blocks.free(a);
            b.blocks = null;
            return e
        };
        b.inflateInit = function (d, f) {
            d.msg = null;
            b.blocks = null;
            if (8 > f || 15 < f) return b.inflateEnd(d), k;
            b.wbits = f;
            d.istate.blocks = new c(d, 1 << f);
            a(d);
            return e
        };
        b.inflate = function (a, b) {
            var c, d;
            if (!a || !a.istate || !a.next_in) return k;
            b = b == y ? r : e;
            for (c = r;;) switch (a.istate.mode) {
            case Ga:
                if (0 === a.avail_in) return c;
                c = b;
                a.avail_in--;
                a.total_in++;
                if (((a.istate.method =
                    a.read_byte(a.next_in_index++)) & 15) != ia) {
                    a.istate.mode = Ma;
                    a.msg = "unknown compression method";
                    a.istate.marker = 5;
                    break
                }
                if ((a.istate.method >> 4) + 8 > a.istate.wbits) {
                    a.istate.mode = Ma;
                    a.msg = "invalid window size";
                    a.istate.marker = 5;
                    break
                }
                a.istate.mode = Ia;
            case Ia:
                if (0 === a.avail_in) return c;
                c = b;
                a.avail_in--;
                a.total_in++;
                d = a.read_byte(a.next_in_index++) & 255;
                if (0 !== ((a.istate.method << 8) + d) % 31) {
                    a.istate.mode = Ma;
                    a.msg = "incorrect header check";
                    a.istate.marker = 5;
                    break
                }
                if (0 === (d & ga)) {
                    a.istate.mode = sa;
                    break
                }
                a.istate.mode =
                    Ha;
            case Ha:
                if (0 === a.avail_in) return c;
                c = b;
                a.avail_in--;
                a.total_in++;
                a.istate.need = (a.read_byte(a.next_in_index++) & 255) << 24 & 4278190080;
                a.istate.mode = $;
            case $:
                if (0 === a.avail_in) return c;
                c = b;
                a.avail_in--;
                a.total_in++;
                a.istate.need += (a.read_byte(a.next_in_index++) & 255) << 16 & 16711680;
                a.istate.mode = Aa;
            case Aa:
                if (0 === a.avail_in) return c;
                c = b;
                a.avail_in--;
                a.total_in++;
                a.istate.need += (a.read_byte(a.next_in_index++) & 255) << 8 & 65280;
                a.istate.mode = na;
            case na:
                if (0 === a.avail_in) return c;
                a.avail_in--;
                a.total_in++;
                a.istate.need +=
                    a.read_byte(a.next_in_index++) & 255;
                a.istate.mode = va;
                return m;
            case va:
                return a.istate.mode = Ma, a.msg = "need dictionary", a.istate.marker = 0, k;
            case sa:
                c = a.istate.blocks.proc(a, c);
                if (c == q) {
                    a.istate.mode = Ma;
                    a.istate.marker = 0;
                    break
                }
                c == e && (c = b);
                if (c != l) return c;
                a.istate.blocks.reset(a, a.istate.was);
                a.istate.mode = Fa;
            case Fa:
                return l;
            case Ma:
                return q;
            default:
                return k
            }
        };
        b.inflateSetDictionary = function (a, b, c) {
            var d = 0,
                f = c;
            if (!a || !a.istate || a.istate.mode != va) return k;
            f >= 1 << a.istate.wbits && (f = (1 << a.istate.wbits) -
                1, d = c - f);
            a.istate.blocks.set_dictionary(b, d, f);
            a.istate.mode = sa;
            return e
        };
        b.inflateSync = function (b) {
            var c, d, f;
            if (!b || !b.istate) return k;
            b.istate.mode != Ma && (b.istate.mode = Ma, b.istate.marker = 0);
            if (0 === (c = b.avail_in)) return r;
            d = b.next_in_index;
            for (f = b.istate.marker; 0 !== c && 4 > f;) b.read_byte(d) == nb[f] ? f++ : f = 0 !== b.read_byte(d) ? 0 : 4 - f, d++, c--;
            b.total_in += d - b.next_in_index;
            b.next_in_index = d;
            b.avail_in = c;
            b.istate.marker = f;
            if (4 != f) return q;
            c = b.total_in;
            d = b.total_out;
            a(b);
            b.total_in = c;
            b.total_out = d;
            b.istate.mode =
                sa;
            return e
        };
        b.inflateSyncPoint = function (a) {
            return a && a.istate && a.istate.blocks ? a.istate.blocks.sync_point() : k
        }
    }

    function f() {}

    function h() {
        var a = new f,
            b = u,
            c = new Uint8Array(512),
            d = !1;
        a.inflateInit();
        a.next_out = c;
        this.append = function (f, g) {
            var h, k = [],
                p = 0,
                m = 0,
                q = 0,
                s;
            if (0 !== f.length) {
                a.next_in_index = 0;
                a.next_in = f;
                a.avail_in = f.length;
                do {
                    a.next_out_index = 0;
                    a.avail_out = 512;
                    0 !== a.avail_in || d || (a.next_in_index = 0, d = !0);
                    h = a.inflate(b);
                    if (d && h == r) return -1;
                    if (h != e && h != l) throw "inflating: " + a.msg;
                    if ((d || h == l) && a.avail_in ==
                        f.length) return -1;
                    a.next_out_index && (512 == a.next_out_index ? k.push(new Uint8Array(c)) : k.push(new Uint8Array(c.subarray(0, a.next_out_index))));
                    q += a.next_out_index;
                    g && (0 < a.next_in_index && a.next_in_index != p) && (g(a.next_in_index), p = a.next_in_index)
                } while (0 < a.avail_in || 0 === a.avail_out);
                s = new Uint8Array(q);
                k.forEach(function (a) {
                    s.set(a, m);
                    m += a.length
                });
                return s
            }
        };
        this.flush = function () {
            a.inflateEnd()
        }
    }
    var e = 0,
        l = 1,
        m = 2,
        k = -2,
        q = -3,
        p = -4,
        r = -5,
        t = [0, 1, 3, 7, 15, 31, 63, 127, 255, 511, 1023, 2047, 4095, 8191, 16383, 32767, 65535],
        s = 1440,
        u = 0,
        y = 4,
        w = [96, 7, 256, 0, 8, 80, 0, 8, 16, 84, 8, 115, 82, 7, 31, 0, 8, 112, 0, 8, 48, 0, 9, 192, 80, 7, 10, 0, 8, 96, 0, 8, 32, 0, 9, 160, 0, 8, 0, 0, 8, 128, 0, 8, 64, 0, 9, 224, 80, 7, 6, 0, 8, 88, 0, 8, 24, 0, 9, 144, 83, 7, 59, 0, 8, 120, 0, 8, 56, 0, 9, 208, 81, 7, 17, 0, 8, 104, 0, 8, 40, 0, 9, 176, 0, 8, 8, 0, 8, 136, 0, 8, 72, 0, 9, 240, 80, 7, 4, 0, 8, 84, 0, 8, 20, 85, 8, 227, 83, 7, 43, 0, 8, 116, 0, 8, 52, 0, 9, 200, 81, 7, 13, 0, 8, 100, 0, 8, 36, 0, 9, 168, 0, 8, 4, 0, 8, 132, 0, 8, 68, 0, 9, 232, 80, 7, 8, 0, 8, 92, 0, 8, 28, 0, 9, 152, 84, 7, 83, 0, 8, 124, 0, 8, 60, 0, 9, 216, 82, 7, 23, 0, 8, 108, 0, 8, 44, 0, 9, 184, 0, 8, 12, 0, 8, 140, 0, 8, 76, 0, 9, 248,
            80, 7, 3, 0, 8, 82, 0, 8, 18, 85, 8, 163, 83, 7, 35, 0, 8, 114, 0, 8, 50, 0, 9, 196, 81, 7, 11, 0, 8, 98, 0, 8, 34, 0, 9, 164, 0, 8, 2, 0, 8, 130, 0, 8, 66, 0, 9, 228, 80, 7, 7, 0, 8, 90, 0, 8, 26, 0, 9, 148, 84, 7, 67, 0, 8, 122, 0, 8, 58, 0, 9, 212, 82, 7, 19, 0, 8, 106, 0, 8, 42, 0, 9, 180, 0, 8, 10, 0, 8, 138, 0, 8, 74, 0, 9, 244, 80, 7, 5, 0, 8, 86, 0, 8, 22, 192, 8, 0, 83, 7, 51, 0, 8, 118, 0, 8, 54, 0, 9, 204, 81, 7, 15, 0, 8, 102, 0, 8, 38, 0, 9, 172, 0, 8, 6, 0, 8, 134, 0, 8, 70, 0, 9, 236, 80, 7, 9, 0, 8, 94, 0, 8, 30, 0, 9, 156, 84, 7, 99, 0, 8, 126, 0, 8, 62, 0, 9, 220, 82, 7, 27, 0, 8, 110, 0, 8, 46, 0, 9, 188, 0, 8, 14, 0, 8, 142, 0, 8, 78, 0, 9, 252, 96, 7, 256, 0, 8, 81, 0, 8,
            17, 85, 8, 131, 82, 7, 31, 0, 8, 113, 0, 8, 49, 0, 9, 194, 80, 7, 10, 0, 8, 97, 0, 8, 33, 0, 9, 162, 0, 8, 1, 0, 8, 129, 0, 8, 65, 0, 9, 226, 80, 7, 6, 0, 8, 89, 0, 8, 25, 0, 9, 146, 83, 7, 59, 0, 8, 121, 0, 8, 57, 0, 9, 210, 81, 7, 17, 0, 8, 105, 0, 8, 41, 0, 9, 178, 0, 8, 9, 0, 8, 137, 0, 8, 73, 0, 9, 242, 80, 7, 4, 0, 8, 85, 0, 8, 21, 80, 8, 258, 83, 7, 43, 0, 8, 117, 0, 8, 53, 0, 9, 202, 81, 7, 13, 0, 8, 101, 0, 8, 37, 0, 9, 170, 0, 8, 5, 0, 8, 133, 0, 8, 69, 0, 9, 234, 80, 7, 8, 0, 8, 93, 0, 8, 29, 0, 9, 154, 84, 7, 83, 0, 8, 125, 0, 8, 61, 0, 9, 218, 82, 7, 23, 0, 8, 109, 0, 8, 45, 0, 9, 186, 0, 8, 13, 0, 8, 141, 0, 8, 77, 0, 9, 250, 80, 7, 3, 0, 8, 83, 0, 8, 19, 85, 8, 195, 83, 7, 35,
            0, 8, 115, 0, 8, 51, 0, 9, 198, 81, 7, 11, 0, 8, 99, 0, 8, 35, 0, 9, 166, 0, 8, 3, 0, 8, 131, 0, 8, 67, 0, 9, 230, 80, 7, 7, 0, 8, 91, 0, 8, 27, 0, 9, 150, 84, 7, 67, 0, 8, 123, 0, 8, 59, 0, 9, 214, 82, 7, 19, 0, 8, 107, 0, 8, 43, 0, 9, 182, 0, 8, 11, 0, 8, 139, 0, 8, 75, 0, 9, 246, 80, 7, 5, 0, 8, 87, 0, 8, 23, 192, 8, 0, 83, 7, 51, 0, 8, 119, 0, 8, 55, 0, 9, 206, 81, 7, 15, 0, 8, 103, 0, 8, 39, 0, 9, 174, 0, 8, 7, 0, 8, 135, 0, 8, 71, 0, 9, 238, 80, 7, 9, 0, 8, 95, 0, 8, 31, 0, 9, 158, 84, 7, 99, 0, 8, 127, 0, 8, 63, 0, 9, 222, 82, 7, 27, 0, 8, 111, 0, 8, 47, 0, 9, 190, 0, 8, 15, 0, 8, 143, 0, 8, 79, 0, 9, 254, 96, 7, 256, 0, 8, 80, 0, 8, 16, 84, 8, 115, 82, 7, 31, 0, 8, 112, 0, 8, 48, 0,
            9, 193, 80, 7, 10, 0, 8, 96, 0, 8, 32, 0, 9, 161, 0, 8, 0, 0, 8, 128, 0, 8, 64, 0, 9, 225, 80, 7, 6, 0, 8, 88, 0, 8, 24, 0, 9, 145, 83, 7, 59, 0, 8, 120, 0, 8, 56, 0, 9, 209, 81, 7, 17, 0, 8, 104, 0, 8, 40, 0, 9, 177, 0, 8, 8, 0, 8, 136, 0, 8, 72, 0, 9, 241, 80, 7, 4, 0, 8, 84, 0, 8, 20, 85, 8, 227, 83, 7, 43, 0, 8, 116, 0, 8, 52, 0, 9, 201, 81, 7, 13, 0, 8, 100, 0, 8, 36, 0, 9, 169, 0, 8, 4, 0, 8, 132, 0, 8, 68, 0, 9, 233, 80, 7, 8, 0, 8, 92, 0, 8, 28, 0, 9, 153, 84, 7, 83, 0, 8, 124, 0, 8, 60, 0, 9, 217, 82, 7, 23, 0, 8, 108, 0, 8, 44, 0, 9, 185, 0, 8, 12, 0, 8, 140, 0, 8, 76, 0, 9, 249, 80, 7, 3, 0, 8, 82, 0, 8, 18, 85, 8, 163, 83, 7, 35, 0, 8, 114, 0, 8, 50, 0, 9, 197, 81, 7, 11, 0, 8, 98,
            0, 8, 34, 0, 9, 165, 0, 8, 2, 0, 8, 130, 0, 8, 66, 0, 9, 229, 80, 7, 7, 0, 8, 90, 0, 8, 26, 0, 9, 149, 84, 7, 67, 0, 8, 122, 0, 8, 58, 0, 9, 213, 82, 7, 19, 0, 8, 106, 0, 8, 42, 0, 9, 181, 0, 8, 10, 0, 8, 138, 0, 8, 74, 0, 9, 245, 80, 7, 5, 0, 8, 86, 0, 8, 22, 192, 8, 0, 83, 7, 51, 0, 8, 118, 0, 8, 54, 0, 9, 205, 81, 7, 15, 0, 8, 102, 0, 8, 38, 0, 9, 173, 0, 8, 6, 0, 8, 134, 0, 8, 70, 0, 9, 237, 80, 7, 9, 0, 8, 94, 0, 8, 30, 0, 9, 157, 84, 7, 99, 0, 8, 126, 0, 8, 62, 0, 9, 221, 82, 7, 27, 0, 8, 110, 0, 8, 46, 0, 9, 189, 0, 8, 14, 0, 8, 142, 0, 8, 78, 0, 9, 253, 96, 7, 256, 0, 8, 81, 0, 8, 17, 85, 8, 131, 82, 7, 31, 0, 8, 113, 0, 8, 49, 0, 9, 195, 80, 7, 10, 0, 8, 97, 0, 8, 33, 0, 9, 163, 0,
            8, 1, 0, 8, 129, 0, 8, 65, 0, 9, 227, 80, 7, 6, 0, 8, 89, 0, 8, 25, 0, 9, 147, 83, 7, 59, 0, 8, 121, 0, 8, 57, 0, 9, 211, 81, 7, 17, 0, 8, 105, 0, 8, 41, 0, 9, 179, 0, 8, 9, 0, 8, 137, 0, 8, 73, 0, 9, 243, 80, 7, 4, 0, 8, 85, 0, 8, 21, 80, 8, 258, 83, 7, 43, 0, 8, 117, 0, 8, 53, 0, 9, 203, 81, 7, 13, 0, 8, 101, 0, 8, 37, 0, 9, 171, 0, 8, 5, 0, 8, 133, 0, 8, 69, 0, 9, 235, 80, 7, 8, 0, 8, 93, 0, 8, 29, 0, 9, 155, 84, 7, 83, 0, 8, 125, 0, 8, 61, 0, 9, 219, 82, 7, 23, 0, 8, 109, 0, 8, 45, 0, 9, 187, 0, 8, 13, 0, 8, 141, 0, 8, 77, 0, 9, 251, 80, 7, 3, 0, 8, 83, 0, 8, 19, 85, 8, 195, 83, 7, 35, 0, 8, 115, 0, 8, 51, 0, 9, 199, 81, 7, 11, 0, 8, 99, 0, 8, 35, 0, 9, 167, 0, 8, 3, 0, 8, 131, 0, 8, 67,
            0, 9, 231, 80, 7, 7, 0, 8, 91, 0, 8, 27, 0, 9, 151, 84, 7, 67, 0, 8, 123, 0, 8, 59, 0, 9, 215, 82, 7, 19, 0, 8, 107, 0, 8, 43, 0, 9, 183, 0, 8, 11, 0, 8, 139, 0, 8, 75, 0, 9, 247, 80, 7, 5, 0, 8, 87, 0, 8, 23, 192, 8, 0, 83, 7, 51, 0, 8, 119, 0, 8, 55, 0, 9, 207, 81, 7, 15, 0, 8, 103, 0, 8, 39, 0, 9, 175, 0, 8, 7, 0, 8, 135, 0, 8, 71, 0, 9, 239, 80, 7, 9, 0, 8, 95, 0, 8, 31, 0, 9, 159, 84, 7, 99, 0, 8, 127, 0, 8, 63, 0, 9, 223, 82, 7, 27, 0, 8, 111, 0, 8, 47, 0, 9, 191, 0, 8, 15, 0, 8, 143, 0, 8, 79, 0, 9, 255
        ],
        v = [80, 5, 1, 87, 5, 257, 83, 5, 17, 91, 5, 4097, 81, 5, 5, 89, 5, 1025, 85, 5, 65, 93, 5, 16385, 80, 5, 3, 88, 5, 513, 84, 5, 33, 92, 5, 8193, 82, 5, 9, 90, 5, 2049, 86, 5, 129,
            192, 5, 24577, 80, 5, 2, 87, 5, 385, 83, 5, 25, 91, 5, 6145, 81, 5, 7, 89, 5, 1537, 85, 5, 97, 93, 5, 24577, 80, 5, 4, 88, 5, 769, 84, 5, 49, 92, 5, 12289, 82, 5, 13, 90, 5, 3073, 86, 5, 193, 192, 5, 24577
        ],
        x = [3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31, 35, 43, 51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258, 0, 0],
        A = [0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0, 112, 112],
        C = [1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129, 193, 257, 385, 513, 769, 1025, 1537, 2049, 3073, 4097, 6145, 8193, 12289, 16385, 24577],
        D = [0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12,
            13, 13
        ],
        B = 15;
    g.inflate_trees_fixed = function (a, b, c, d) {
        a[0] = 9;
        b[0] = 5;
        c[0] = w;
        d[0] = v;
        return e
    };
    var F = 0,
        G = 1,
        z = 2,
        J = 3,
        O = 4,
        K = 5,
        R = 6,
        N = 7,
        E = 8,
        aa = 9,
        da = [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15],
        X = 0,
        la = 1,
        V = 2,
        U = 3,
        ja = 4,
        ma = 5,
        pa = 6,
        ra = 7,
        T = 8,
        P = 9,
        ga = 32,
        ia = 8,
        Ga = 0,
        Ia = 1,
        Ha = 2,
        $ = 3,
        Aa = 4,
        na = 5,
        va = 6,
        sa = 7,
        Fa = 12,
        Ma = 13,
        nb = [0, 0, 255, 255];
    f.prototype = {
        inflateInit: function (a) {
            this.istate = new b;
            a || (a = 15);
            return this.istate.inflateInit(this, a)
        },
        inflate: function (a) {
            return this.istate ? this.istate.inflate(this, a) : k
        },
        inflateEnd: function () {
            if (!this.istate) return k;
            var a = this.istate.inflateEnd(this);
            this.istate = null;
            return a
        },
        inflateSync: function () {
            return this.istate ? this.istate.inflateSync(this) : k
        },
        inflateSetDictionary: function (a, b) {
            return this.istate ? this.istate.inflateSetDictionary(this, a, b) : k
        },
        read_byte: function (a) {
            return this.next_in.subarray(a, a + 1)[0]
        },
        read_buf: function (a, b) {
            return this.next_in.subarray(a, a + b)
        }
    };
    var $a;
    a.zip ? a.zip.Inflater = h : ($a = new h, a.addEventListener("message", function (b) {
        b = b.data;
        b.append && a.postMessage({
            onappend: !0,
            data: $a.append(b.data,
                function (b) {
                    a.postMessage({
                        progress: !0,
                        current: b
                    })
                })
        });
        b.flush && ($a.flush(), a.postMessage({
            onflush: !0
        }))
    }, !1))
})(this);
"undefined" === typeof sketch && (sketch = {});
"undefined" === typeof sketch.peer && (sketch.peer = {});
sketch = function (a) {
    var g = {
        "history.undo": !0,
        "history.redo": !0,
        "history.store": !0
    };
    a.peer.registerEvent = function (d) {
        var c = {};
        c.event = d;
        c.sendDataChannel = function (b) {
            var c = JSON.stringify(b),
                h;
            for (h in rtc.dataChannels) {
                var e = rtc.dataChannels[h];
                "open" === e.readyState && e.send(c)
            }
            g[b[0]] && (b.push(!0), a.socket.emit(d, JSON.stringify(b)))
        };
        c.recvDataChannel = function (b, c) {
            a.peer.run(JSON.parse(c))
        };
        c.sendSocket = function (b) {
            if (!a.socket) return console.log("missing socket");
            a.socket.emit(d, JSON.stringify(b))
        };
        c.recvSocket = function (b) {
            a.peer.run(b)
        };
        c.sendGDataChannel = function (a) {
            console.log(a);
            gapi && gapi.hangout.data && gapi.hangout.data.sendMessage(JSON.stringify(a))
        };
        c.recvGDataChannel = function (b) {
            console.log(b.message);
            a.peer.run(JSON.parse(b.message))
        };
        switch (a.feature.stream.tech) {
        case "GDataChannel":
            c.GDataChannel = !0;
            c.sendPriority = c.sendGDataChannel;
            c.send = c.sendGDataChannel;
            c.recv = c.recvGDataChannel;
            break;
        case "RTCDataChannel":
            if (rtc.dataChannelSupport) {
                c.RTCDataChannel = !0;
                c.sendPriority = c.sendSocket;
                c.send = c.sendDataChannel;
                c.recv = c.recvDataChannel;
                break
            } else a.feature.stream.tech = "WebSocket";
        default:
            c.WebSocket = !0, c.sendPriority = c.sendSocket, c.send = c.sendSocket, c.recv = c.recvSocket
        }
        return c
    };
    a.peer.detectGetUserMedia = function () {
        return !!(navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia)
    };
    a.peer.detectPeerConnection = function () {
        return !!(window.PeerConnection || window.webkitPeerConnection00 || window.webkitRTCPeerConnection || window.mozRTCPeerConnection ||
            window.RTCPeerConnection)
    };
    a.peer.detectSupport = function () {
        var d = a.peer.detectGetUserMedia(),
            c = a.peer.detectPeerConnection();
        return d && c ? !0 : !1
    };
    a.peer.saved = ['[["brush","arrow","down,235.5736215500837,144.6618284467461,1441398339:A",{"type":"color","color":"#f00"}],["brush","arrow","move,245,148,1441398339:A"],["brush","arrow","move,236,157,1441398339:A"],["brush","arrow","move,182,213,1441398339:A"],["brush","arrow","move,163,228,1441398339:A"],["brush","arrow","move,152,237,1441398339:A"],["brush","arrow","move,144,243,1441398339:A"],["brush","arrow","move,137,252,1441398339:A"],["brush","arrow","move,131,262,1441398339:A"],["brush","arrow","move,126,273,1441398339:A"],["brush","arrow","move,123,284,1441398339:A"],["brush","arrow","move,118,296,1441398339:A"],["brush","arrow","move,117,303,1441398339:A"],["brush","arrow","move,117,311,1441398339:A"],["brush","arrow","move,117,328,1441398339:A"],["brush","arrow","move,120,348,1441398339:A"],["brush","arrow","move,125,363,1441398339:A"],["brush","arrow","move,132,375,1441398339:A"],["brush","arrow","move,140,385,1441398339:A"],["brush","arrow","move,148,394,1441398339:A"],["brush","arrow","move,156,400,1441398339:A"],["brush","arrow","move,168,405,1441398339:A"],["brush","arrow","move,181,412,1441398339:A"],["brush","arrow","move,192,416,1441398339:A"],["brush","arrow","move,207,421,1441398339:A"],["brush","arrow","move,220,424,1441398339:A"],["brush","arrow","move,230,424,1441398339:A"],["brush","arrow","move,241,424,1441398339:A"],["brush","arrow","move,252,424,1441398339:A"],["brush","arrow","move,260,423,1441398339:A"],["brush","arrow","move,267,417,1441398339:A"],["brush","arrow","move,278,406,1441398339:A"],["brush","arrow","move,290,395,1441398339:A"],["brush","arrow","move,295,390,1441398339:A"],["brush","arrow","move,300,384,1441398339:A"],["brush","arrow","move,305,367,1441398339:A"],["brush","arrow","move,306,352,1441398339:A"],["brush","arrow","move,306,336,1441398339:A"],["brush","arrow","move,302,322,1441398339:A"],["brush","arrow","move,295,302,1441398339:A"],["brush","arrow","move,291,287,1441398339:A"],["brush","arrow","move,285,273,1441398339:A"],["brush","arrow","move,282,265,1441398339:A"],["brush","arrow","move,278,257,1441398339:A"],["brush","arrow","move,275,252,1441398339:A"],["brush","arrow","move,272,247,1441398339:A"],["brush","arrow","move,270,245,1441398339:A"],["brush","arrow","move,266,242,1441398339:A"],["brush","arrow","move,265,240,1441398339:A"],["brush","arrow","up,265,240,1441398339:A"],["history.storeAction","add",[{"id":58,"zIndex":54,"bbox":{"x":225.5736215500837,"y":134.6618284467461,"x_":235.5736215500837,"y_":144.6618284467461,"width":49.426378449916314,"height":115.33817155325389,"boxWidth":49.426378449916314,"boxHeight":115.33817155325389,"padding":-10,"units":"objectBoundingBox","viewBox":[0,0,49.426378449916314,115.33817155325389],"scale":{"x":1,"y":1},"rotate":0},"finger":"1441398339:A","type":"arrow","data":[{"cmd":"M","beginPath":true,"interval":0,"x":0,"y":0},{"cmd":"L","x":29.426378449916314,"y":95.33817155325389},{"cmd":"z","x":29.426378449916314,"y":95.33817155325389}],"interval":-3,"seed":1509479258,"composite":"paint","diameter":15,"opacity":100,"fill":{"type":"color","color":"#f00"},"dataHash":-13033222398}]]]',
        '[["brush","arrow","down,235.5736215500837,144.6618284467461,144139833:A",{"type":"color","color":"#f00"}],["brush","arrow","move,245,148,144139833:A"],["brush","arrow","move,236,157,144139833:A"],["brush","arrow","move,182,213,144139833:A"],["brush","arrow","move,163,228,144139833:A"],["brush","arrow","move,152,237,144139833:A"],["brush","arrow","move,144,243,144139833:A"],["brush","arrow","move,137,252,144139833:A"],["brush","arrow","move,131,262,144139833:A"],["brush","arrow","move,126,273,144139833:A"],["brush","arrow","move,123,284,144139833:A"],["brush","arrow","move,118,296,144139833:A"],["brush","arrow","move,117,303,144139833:A"],["brush","arrow","move,117,311,144139833:A"],["brush","arrow","move,117,328,144139833:A"],["brush","arrow","move,120,348,144139833:A"],["brush","arrow","move,125,363,144139833:A"],["brush","arrow","move,132,375,144139833:A"],["brush","arrow","move,140,385,144139833:A"],["brush","arrow","move,148,394,144139833:A"],["brush","arrow","move,156,400,144139833:A"],["brush","arrow","move,168,405,144139833:A"],["brush","arrow","move,181,412,144139833:A"],["brush","arrow","move,192,416,144139833:A"],["brush","arrow","move,207,421,144139833:A"],["brush","arrow","move,220,424,144139833:A"],["brush","arrow","move,230,424,144139833:A"],["brush","arrow","move,241,424,144139833:A"],["brush","arrow","move,252,424,144139833:A"],["brush","arrow","move,260,423,144139833:A"],["brush","arrow","move,267,417,144139833:A"],["brush","arrow","move,278,406,144139833:A"],["brush","arrow","move,290,395,144139833:A"],["brush","arrow","move,295,390,144139833:A"],["brush","arrow","move,300,384,144139833:A"],["brush","arrow","move,305,367,144139833:A"],["brush","arrow","move,306,352,144139833:A"],["brush","arrow","move,306,336,144139833:A"],["brush","arrow","move,302,322,144139833:A"],["brush","arrow","move,295,302,144139833:A"],["brush","arrow","move,291,287,144139833:A"],["brush","arrow","move,285,273,144139833:A"],["brush","arrow","move,282,265,144139833:A"],["brush","arrow","move,278,257,144139833:A"],["brush","arrow","move,275,252,144139833:A"],["brush","arrow","move,272,247,144139833:A"],["brush","arrow","move,270,245,144139833:A"],["brush","arrow","move,266,242,144139833:A"],["brush","arrow","move,265,240,144139833:A"],["brush","arrow","up,265,240,144139833:A"],["history.storeAction","add",[{"id":58,"zIndex":54,"bbox":{"x":225.5736215500837,"y":134.6618284467461,"x_":235.5736215500837,"y_":144.6618284467461,"width":49.426378449916314,"height":115.33817155325389,"boxWidth":49.426378449916314,"boxHeight":115.33817155325389,"padding":-10,"units":"objectBoundingBox","viewBox":[0,0,49.426378449916314,115.33817155325389],"scale":{"x":1,"y":1},"rotate":0},"finger":"144139833:A","type":"arrow","data":[{"cmd":"M","beginPath":true,"interval":0,"x":0,"y":0},{"cmd":"L","x":29.426378449916314,"y":95.33817155325389},{"cmd":"z","x":29.426378449916314,"y":95.33817155325389}],"interval":-3,"seed":1509479258,"composite":"paint","diameter":15,"opacity":100,"fill":{"type":"color","color":"#f00"},"dataHash":-13033222398}]]]'
    ];
    a.peer.runSaved = function (d) {
        var c = JSON.parse(a.peer.saved[d || 0]);
        d = c.shift();
        a.peer.run(clone(d));
        a.dataChannel.send(clone(d));
        c.pop();
        var b = c.length - 1,
            f = 0;
        window.setInterval(function () {
            var d = f = ++f % b,
                d = c[d];
            a.peer.run(clone(d));
            a.dataChannel.send(clone(d))
        }, 100)
    };
    a.peer.run = function (d) {
        if (d && d.length) {
            var c = d.shift();
            console.log(c, d);
            switch (c) {
            case "take-snapshot":
                a.takeSnapshot(d[0], d[1], d[2], d[3], null, !0);
                break;
            case "actions.reset":
                a.actions.reset(!0);
                break;
            case "actions.update":
                d = d.shift();
                for (var b,
                        f, g = 0; g < d.length; g++)
                    if (b = d[g], f = a.actions.getById(b.id)) mergeObject(b, f), b.fill && (f.fill.color = b.fill.color, f.brush.fill.color = b.fill.color, a.style.getColors(f.brush), f.dirty = !0), b.bbox && (f.dirtyTransform = !0);
                b && isFinite(b.zIndex) && a.actions.reindex();
                a.render.actions("root.peer.run('" + c + "')");
                break;
            case "history.store":
                if (!a.history) break;
                a.history.storeAction(d[0], d[1], !0);
                break;
            case "history.undo":
                if (!a.history) break;
                a.history.undoAction(!0);
                break;
            case "history.redo":
                if (!a.history) break;
                a.history.redoAction(!0);
                break;
            case "session.error":
                a.run("login");
                break;
            case "session.change":
                a.socket.user.room = d[0];
                break;
            case "session.start":
                d[0] ? a.getSketchFile("#sketch=" + d[0], !0) : alertify.log("User has entered the room.");
                break;
            case "session.end":
                d[0] !== userId && (alertify.log("User has left the room."), sketch.colorPalette.container.style.width = window.innerWidth + "px", sketch.colorPalette.redraw(!0));
                break;
            case "laserPointer":
                c = a.toolkit.laserPointer;
                b = d[0].split(",");
                c.mouse(null, {
                    state: b[0],
                    x: parseFloat(b[1]),
                    y: parseFloat(b[2]),
                    identifier: b[3]
                }, d[1]);
                break;
            case "brush":
                var e = d.shift(),
                    c = a.toolkit.brush;
                if (!c) break;
                b = d[0].split(",");
                f = b[3];
                var g = d[1],
                    l = d[2],
                    m = d[3];
                g && (d = c.deviceProxy[f] = c.getDevice(e, function (a, b) {
                    a.brush.interval = m;
                    a.brush.seed = l
                }), d.brush && (d.brush.fill = g, a.style.getColors(d.brush)));
                c.record(null, {
                    state: b[0],
                    x: parseFloat(b[1]),
                    y: parseFloat(b[2]),
                    identifier: f,
                    seed: l,
                    interval: m
                });
                break;
            default:
                console.log(c, d)
            }
        }
    };
    return a
}(sketch);
"undefined" === typeof glfx && (glfx = {});
"undefined" === typeof sketch && (sketch = {});
"undefined" === typeof sketch.peer && (sketch.peer = {});
sketch = function (a) {
    a.setup.webRTC = function (d) {
        "function" === typeof d && (d = {
            onready: d
        });
        d.onerror = d.onerror || function (a) {};
        if (!a.dataChannel) {
            var c = a.feature.stream.video,
                b = a.feature.stream.audio,
                f = a.feature.stream.audio;
            if (c || b) {
                if (!a.peer.detectGetUserMedia()) return d.onerror();
                a.loader.camera = a.loader.message("loading Camera...", function () {
                    var h = document.getElementById("videos");
                    rtc.createStream({
                        audio: b,
                        video: {
                            mandatory: {},
                            optional: []
                        }
                    }, function (a) {
                        e(a, rtc._me.id || "you", !0)
                    }, d.onerror);
                    f && rtc.connect("wss://" +
                        a.location.hostRTC, a.getRoomID());
                    rtc.on("close", function () {
                        a.feature.debug && console.log("connection closed");
                        a.dataChannel = !1
                    });
                    rtc.on("connections", function () {
                        if (document.querySelector("#stream-you")) {
                            var b = rtc._me.id,
                                c = a.rtc.videos,
                                d = c.you;
                            d.element.id = "stream-" + b;
                            d.element.setAttribute("data-id", b);
                            var e = c[b] = {};
                            e.id = b;
                            e.element = d.element;
                            e.parent = d.parent;
                            delete c.you;
                            a.rtc.arrange()
                        }
                    });
                    rtc.on("add remote stream", function (a, b) {
                        e(a, b)
                    });
                    rtc.on("disconnect stream", function (b) {
                        if (b = document.getElementById("stream-" +
                            b)) {
                            var c = b.parentNode;
                            c.parentNode.removeChild(c);
                            delete videos[b.id];
                            a.rtc.arrange()
                        }
                    });
                    a.dataChannel = a.peer.registerEvent("data stream data");
                    rtc.on(a.dataChannel.event, function () {
                        a.dataChannel.recv.apply(this, arguments)
                    });
                    Event.add(window, "resize", function () {
                        a.rtc.arrange()
                    });
                    var e = function (b, e, f) {
                        if (e && b && !document.getElementById("stream-" + e)) {
                            var q = document.createElement("div");
                            q.className = "videoStream";
                            q.style.background = "#000";
                            h.appendChild(q);
                            var p = document.createElement("video");
                            p.style.display =
                                "none";
                            f && (p.volume = 0);
                            p.setAttribute("autoplay", !0);
                            p.setAttribute("data-id", e);
                            p.id = "stream-" + e;
                            q.appendChild(p);
                            rtc.attachStream(b, p);
                            var r = new a.util.videoStateToggle;
                            q.videoStateToggle = r;
                            q.appendChild(r.element);
                            a.feature.stream.spectrumAnalysis && g(b);
                            var t = a.rtc.videos[e] = {
                                id: e,
                                element: p,
                                parent: q
                            }, s = function () {
                                    if (c && glfx.applyShader) {
                                        var b = glfx.applyShader(p),
                                            e = b.canvas = b.canvas || document.createElement("canvas");
                                        e.className = "videoStream";
                                        t.canvas = e;
                                        t.ctx = e.ctx;
                                        p.gl = b;
                                        d.onready && (p.gl.setFilter(glfx.filterStack[glfx.filterId ||
                                            0]), d.onready("effect"))
                                    } else if (d.onready) d.onready("effect");
                                    a.rtc.arrange()
                                }, u = function () {
                                    Event.remove(p, "playing", u);
                                    f && a.loader && a.loader.update(a.loader.camera, "loading Camera", 100);
                                    try {
                                        s()
                                    } catch (b) {
                                        setTimeout(s, 100)
                                    }
                                    a.rtc.arrange()
                                };
                            Event.add(p, "playing", u);
                            return p
                        }
                    }
                })
            }
        }
    };
    a.rtc = function () {
        var d = this;
        this.container = document.getElementById("videos");
        this.arrange = new this.arrange(this);
        this.playing = a.feature.stream.videoAtop;
        this.videos = {};
        this.play = function (a) {
            c(a, !0)
        };
        this.pause = function (a) {
            c(a, !1)
        };
        this.toggle = function (a, f) {
            f = "boolean" === typeof f ? f : !d.playing;
            c(a, f)
        };
        var c = function (a, c) {
            var g = c ? "play" : "pause";
            if ("[object HTMLVideoElement]" === String(a)) {
                var e = {}, l = a.getAttribute("data-id");
                e[l] = a;
                a = e
            } else a = d.videos;
            var e = !1,
                l = d.videos,
                m;
            for (m in l) {
                var k = l[m],
                    q = k.element;
                if (a[k.id] && (c ? k.parent.videoStateToggle.play() : k.parent.videoStateToggle.pause(), q[g](), q.playing = c, q.gl)) q.gl[g]();
                q.playing && (e = !0)
            }
            d.playing = e;
            glfx.animate && glfx.animate(e)
        };
        this.getConnectionCount = function () {
            var a =
                0,
                c;
            for (c in rtc.users) a++;
            return a
        };
        this.getFocusVideo = function (b) {
            if (b && a.rtc.videos[b]) return a.rtc.videos[b].element;
            for (var c in rtc.users)
                if (0 === rtc.users[c].index) {
                    if (b = document.querySelector("#stream-" + c)) return b;
                    console.log("missing stream", c)
                }
            return (b = document.querySelector("#stream-you")) ? b : document.querySelector("#stream-" + rtc._me.id)
        };
        return this
    };
    a.util.videoStateToggle = function () {
        var d = document.createElement("span"),
            c = document.createElement("span");
        c.className = "pause";
        c.innerHTML =
            "&#xf04b;";
        Event.add(c, "click", function () {
            a.rtc.playing ? (c.innerHTML = "&#xf04b;", a.rtc.pause()) : (c.innerHTML = "&#xf04c;", a.rtc.play())
        });
        var b = document.createElement("span");
        b.className = "next";
        Event.add(b, "click", function (b, c) {
            a.util.changeVideoFilter(1)
        });
        var f = document.createElement("span");
        f.className = "prev";
        Event.add(f, "click", function () {
            a.util.changeVideoFilter(-1)
        });
        b.innerHTML = "&#xf105;";
        f.innerHTML = "&#xf104;";
        Event.add([f, b], "mousedown", Event.cancel);
        d.appendChild(c);
        d.appendChild(b);
        d.appendChild(f);
        return {
            element: d,
            play: function () {
                c.innerHTML = "&#xf04c;"
            },
            pause: function () {
                c.innerHTML = "&#xf04b;"
            }
        }
    };
    a.util.changeVideoFilter = function (d, c) {
        rtc._me.id || (rtc._me.id = "you");
        c = c || a.rtc.getFocusVideo(rtc && rtc._me.id);
        var b = glfx.filterStack;
        if (b) {
            var f = b.length,
                f = Math.abs((glfx.filterId + d + f) % f);
            c.filterId = glfx.filterId = f;
            c.gl && (c.gl.setFilter(b[f]), glfx.render());
            document.querySelector("#filters").innerHTML = '<div style="height: 40px;"></div>'
        }
    };
    a.util.toggleVideo = function (d, c) {
        a.rtc.playing ? a.rtc.pause() :
            a.rtc.play()
    };
    var g = function (d) {
        var c = a.audioContext = "AudioContext" in window ? new AudioContext : "webkitAudioContext" in window ? new webkitAudioContext : null;
        if (c) {
            d = c.createMediaStreamSource(d);
            var b = c.createJavaScriptNode(2048, 1, 1);
            b.connect(c.destination);
            b.onaudioprocess = function () {
                var a = new Uint8Array(f.frequencyBinCount);
                f.getByteFrequencyData(a);
                for (var b = 0, c = a.length / 4, d = 0; d < c; d++) b += a[d];
                a = b / c;
                b = glfx.getContextByIndex(0);
                c = sketch.configure.tools.gl_test;
                d = glfx.filters.test && glfx.filters.test.paramIndex;
                b && (b.filters && b.filters.test) && (b.filters.test.values[d.amount] = a / 100);
                c.amount.value = a / 100
            };
            var f = c.createAnalyser();
            f.smoothingTimeConstant = 0.3;
            f.fftSize = 32;
            f.connect(b);
            d.connect(f)
        }
    };
    return a
}(sketch);
"undefined" === typeof sketch && (sketch = {});
sketch = function (a) {
    a.rtc.prototype.arrange = function (g) {
        g.arrange = function (d) {
            var c = a.rtc.videos,
                b;
            for (b in c);
            if (d !== g.arrange.method) {
                c = a.rtc.playing;
                b = window.innerWidth - 200;
                var f = window.innerHeight;
                "string" === typeof d && (g.arrange.method = d);
                "effect" === a.display.mode || a.feature.stream.videoAtop ? (g.container.style.display = "block", g.arrange[g.arrange.method](b, f)) : g.container.style.display = "none";
                a.rtc.toggle(null, c)
            }
        };
        g.arrange.method = "singleBottomRight";
        g.arrange.grid = function (a, c) {};
        g.arrange.split =
            function (d, c) {
                var b = rtc.rooms[a.getRoomID()] || [],
                    f = g.videos,
                    h = b && b[0] || "you",
                    e = b && b[1],
                    l, m;
                for (m in f) {
                    var b = f[m],
                        k = b.parent.style,
                        b = b.element;
                    m === h ? (g.arrange.setSize(b, d, c, 0, !0, !0), g.play(b), k.display = "block") : m === e ? (l = g.arrange.setSize(b, d / 4, c / 4, 1, !0), g.arrange.setPosition(b, d - l.width - 1, c - l.height), g.play(b), k.display = "block") : (g.pause(b), k.display = "none")
                }
                a.colorPalette.container.style.width = (e && l ? window.innerWidth - l.width : window.innerWidth) + "px";
                a.colorPalette.redraw(!0)
        };
        g.arrange.focus = function (d,
            c) {
            var b = (rtc.rooms[a.getRoomID()] || [])[0],
                f = g.videos,
                h;
            for (h in f) {
                var e = f[h],
                    l = e.element,
                    e = e.parent.style;
                h === b ? (g.arrange.setSize(l, d, c, 0, !0, !0), g.play(l), e.display = "block") : (g.pause(l), e.display = "none")
            }
            a.colorPalette && (a.colorPalette.container.style.width = window.innerWidth + "px", a.colorPalette.redraw(!0))
        };
        g.arrange.singleBottomRight = function (d, c) {
            var b = rtc.rooms[a.getRoomID()] || [],
                f = rtc._me.id || "you",
                h, e;
            for (e in g.videos) {
                var b = g.videos[e],
                    l = b.parent.style,
                    b = b.element;
                e === f ? (h = g.arrange.setSize(b,
                    Math.max(200, d / 4), Math.max(200, c / 4), 1, !0), g.arrange.setPosition(b, 0, 0), g.play(b), l.display = "block") : (g.pause(b), l.display = "none")
            }
            h ? (f = window.innerWidth - h.width, g.container.style.width = h.width + "px", g.container.style.height = h.height + "px") : f = window.innerWidth;
            a.colorPalette && (a.colorPalette.container.style.width = f + "px", a.colorPalette.redraw(!0))
        };
        g.arrange.single = function (d, c) {
            var b, f = rtc._me.id || "you",
                h = g.videos,
                e;
            for (e in h) {
                var l = h[e],
                    m = l.element,
                    l = l.parent.style;
                e === f ? (b = g.arrange.setSize(m, d, c,
                    0, !1, !0), g.play(m), l.display = "block") : (g.pause(m), l.display = "none")
            }
            b && (g.container.style.width = b.width + "px", g.container.style.height = b.height + "px");
            a.colorPalette && (a.colorPalette.container.style.width = window.innerWidth + "px", a.colorPalette.redraw(!0))
        };
        g.arrange.setSize = function (a, c, b, f, h, e) {
            var l = c / a.videoWidth,
                m = b / a.videoHeight;
            h = h ? l > m ? l : m : l > m ? m : l;
            h = {
                width: a.videoWidth * h >> 0,
                height: a.videoHeight * h >> 0
            };
            e && g.arrange.toCenter(a, c, b, h.width, h.height);
            c = a.parentNode;
            c.style.zIndex = f || 0;
            c.style.width =
                h.width + "px";
            c.style.height = h.height + "px";
            a.width = h.width;
            a.height = h.height;
            return h
        };
        g.arrange.setPosition = function (a, c, b) {
            a.parentNode.style.right = c + "px";
            a.parentNode.style.bottom = b + "px"
        };
        g.arrange.toCenter = function (a, c, b, f, h) {
            c = (c - f) / 2;
            b = (b - h - 40) / 2;
            0 > b && (b *= 2);
            0 > c && (c *= 2);
            g.arrange.setPosition(a, c, b)
        };
        return g.arrange
    };
    return a
}(sketch);
"undefined" === typeof sketch && (sketch = {});
var sketch = function (a) {
    a.setup.chat = function () {
        if (a.feature.stream.text) {
            var g = document.createElement("div");
            g.className = "chatbox";
            var d = document.createElement("div"),
                c = document.createElement("input");
            c.type = "text";
            c.placeholder = "enter message...";
            g.appendChild(d);
            g.appendChild(c);
            document.body.appendChild(g);
            var b = function (a, b) {
                a = a.replace(/</g, "&lt;");
                d.innerHTML = d.innerHTML + (b ? '<span style="color: ' + b + '; padding-left: 15px">' + a + "</span>" : '<strong style="padding-left: 15px">' + a + "</strong>") + "<br>";
                d.scrollTop = 1E4
            }, f = createClientEvent("chat_message"),
                h = "#" + (16777215 * Math.random() | 0).toString(16);
            c.addEventListener("keydown", function (d) {
                13 === (d.which || d.keyCode) && (f.send(JSON.stringify({
                    eventName: "chat_message",
                    data: {
                        messages: c.value,
                        room: a.getRoomID(),
                        color: h
                    }
                })), b(c.value), c.value = "")
            }, !1);
            rtc.on(f.event, function () {
                var a = f.recv.apply(this, arguments);
                switch (a.type) {
                case "chat_message":
                    b(a.messages, a.color.toString(16));
                    break;
                case "test_message":
                    console.log(a);
                    break;
                default:
                    console.log(a)
                }
            })
        }
    };
    return a
}(sketch),
    PeerConnection = window.PeerConnection || window.webkitPeerConnection00 || window.webkitRTCPeerConnection || window.mozRTCPeerConnection,
    URL = window.URL || window.webkitURL || window.msURL || window.oURL,
    getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia,
    nativeRTCIceCandidate = window.mozRTCIceCandidate || window.RTCIceCandidate,
    nativeRTCSessionDescription = window.mozRTCSessionDescription || window.RTCSessionDescription,
    sdpConstraints = {
        mandatory: {
            OfferToReceiveAudio: !0,
            OfferToReceiveVideo: !0
        }
    };
navigator.webkitGetUserMedia && (webkitMediaStream.prototype.getVideoTracks || (webkitMediaStream.prototype.getVideoTracks = function () {
    return this.videoTracks
}, webkitMediaStream.prototype.getAudioTracks = function () {
    return this.audioTracks
}), webkitRTCPeerConnection.prototype.getLocalStreams || (webkitRTCPeerConnection.prototype.getLocalStreams = function () {
    return this.localStreams
}, webkitRTCPeerConnection.prototype.getRemoteStreams = function () {
    return this.remoteStreams
}));
(function () {
    var a;
    a = "undefined" === typeof module ? this.rtc = {} : module.exports = {};
    a.debug = !1;
    a._socket = null;
    a._me = {};
    a._events = {};
    a.on = function (g, d) {
        a._events[g] = a._events[g] || [];
        a._events[g].push(d)
    };
    a.fire = function (g, d) {
        var c = a._events[g],
            b = Array.prototype.slice.call(arguments, 1);
        if (c)
            for (var f = 0, h = c.length; f < h; f++) c[f].apply(null, b)
    };
    a.SERVER = function () {
        var a = "",
            a = navigator.mozGetUserMedia ? "stun:23.21.150.121" : "stun:stun.l.google.com:19302";
        return {
            iceServers: [{
                url: a
            }]
        }
    };
    a.users = {};
    a.rooms = {};
    a.peerConnections = {};
    a.connections = [];
    a.streams = [];
    a.numStreams = 0;
    a.initializedStreams = 0;
    a.dataChannels = {};
    a.dataChannelConfig = {
        optional: [{
            RtpDataChannels: !0
        }, {
            DtlsSrtpKeyAgreement: !0
        }]
    };
    a.pc_constraints = {
        optional: [{
            DtlsSrtpKeyAgreement: !0
        }]
    };
    a.checkDataChannelSupport = function () {
        try {
            return (new PeerConnection(a.SERVER(), a.dataChannelConfig)).createDataChannel("supportCheck", {
                reliable: !1
            }).close(), !0
        } catch (g) {
            return !1
        }
    };
    a.dataChannelSupport = a.checkDataChannelSupport();
    a.connect = function (g, d) {
        d = d || "";
        a._socket = new WebSocket(g);
        a._socket.onclose = function (c) {
            a.fire("close")
        };
        a._socket.onopen = function () {
            a._socket.send(JSON.stringify({
                eventName: "join_room",
                data: {
                    room: d
                }
            }));
            a._socket.onmessage = function (c) {
                c = JSON.parse(c.data);
                a.fire(c.eventName, c.data)
            };
            a._socket.onerror = function (a) {
                console.error("onerror");
                console.error(a)
            };
            a._socket.onclose = function (c) {
                c = a._socket.id;
                a.fire("disconnect stream", c);
                "undefined" !== typeof a.peerConnections[c] && a.peerConnections[c].close();
                delete a.peerConnections[c];
                delete a.dataChannels[c];
                delete a.connections[c]
            };
            a.storeUserData = function (c) {
                if (!c.room) return console.log(c);
                a.rooms[d] = c.room;
                for (var b = 0; b < c.room.length; b++) {
                    var f = c.room[b];
                    a.users[f] = {
                        index: b
                    };
                    f === c.you && (a._me.id = f, a._me.index = b)
                }
            };
            a.on("get_peers", function (c) {
                a.connections = c.connections;
                a._me.id = c.you;
                a.attemptOffer && (a.createPeerConnections(), a.addStreams(), a.addDataChannels(), a.sendOffers());
                a.storeUserData(c);
                a.fire("connections", a.connections)
            });
            a.on("receive_ice_candidate", function (c) {
                var b = new nativeRTCIceCandidate(c);
                if (c = a.peerConnections[c.socketId]) c.addIceCandidate(b),
                a.fire("receive ice candidate", b)
            });
            a.on("new_peer_connected", function (c) {
                var b = c.socketId;
                a.connections.push(b);
                delete a.attemptOffer;
                for (var b = a.createPeerConnection(b), d = 0; d < a.streams.length; d++) b.addStream(a.streams[d]);
                a.storeUserData(c)
            });
            a.on("remove_peer_connected", function (c) {
                c = c.socketId;
                a.fire("disconnect stream", c);
                "undefined" !== typeof a.peerConnections[c] && a.peerConnections[c].close();
                delete a.peerConnections[c];
                delete a.dataChannels[c];
                delete a.connections[c]
            });
            a.on("receive_offer",
                function (c) {
                    a.receiveOffer(c.socketId, c.sdp);
                    a.fire("receive offer", c)
                });
            a.on("receive_answer", function (c) {
                a.receiveAnswer(c.socketId, c.sdp);
                a.fire("receive answer", c)
            });
            a.fire("connect")
        }
    };
    a.sendOffers = function () {
        for (var g = 0, d = a.connections.length; g < d; g++) a.sendOffer(a.connections[g])
    };
    a.onClose = function (g) {
        a.on("close_stream", function () {
            a.fire("close_stream", g)
        })
    };
    a.createPeerConnections = function () {
        for (var g = 0; g < a.connections.length; g++) a.createPeerConnection(a.connections[g])
    };
    a.createPeerConnection =
        function (g) {
            var d = a.pc_constraints;
            a.dataChannelSupport && (d = a.dataChannelConfig);
            d = a.peerConnections[g] = new PeerConnection(a.SERVER(), d);
            d.onicecandidate = function (c) {
                c.candidate && a._socket.send(JSON.stringify({
                    eventName: "send_ice_candidate",
                    data: {
                        label: c.candidate.sdpMLineIndex,
                        candidate: c.candidate.candidate,
                        socketId: g
                    }
                }));
                a.fire("ice candidate", c.candidate)
            };
            d.onopen = function () {
                a.fire("peer connection opened")
            };
            d.onaddstream = function (c) {
                a.fire("add remote stream", c.stream, g)
            };
            a.dataChannelSupport &&
                (d.ondatachannel = function (c) {
                a.debug && console.log("data channel connecting " + g);
                a.addDataChannel(g, c.channel)
            });
            return d
    };
    a.sendOffer = function (g) {
        var d = a.peerConnections[g],
            c = {
                optional: [],
                mandatory: {
                    MozDontOfferDataChannel: !0
                }
            };
        if (navigator.webkitGetUserMedia)
            for (var b in c.mandatory) - 1 != b.indexOf("Moz") && delete c.mandatory[b];
        c = mergeConstraints(c, sdpConstraints);
        d.createOffer(function (b) {
            b.sdp = preferOpus(b.sdp);
            d.setLocalDescription(b);
            a._socket.send(JSON.stringify({
                eventName: "send_offer",
                data: {
                    socketId: g,
                    sdp: b
                }
            }))
        }, null, sdpConstraints)
    };
    a.receiveOffer = function (g, d) {
        a.sendAnswer(g, d)
    };
    a.sendAnswer = function (g, d) {
        var c = a.peerConnections[g];
        c && (c.setRemoteDescription(new nativeRTCSessionDescription(d)), c.createAnswer(function (b) {
            c.setLocalDescription(b);
            a._socket.send(JSON.stringify({
                eventName: "send_answer",
                data: {
                    socketId: g,
                    sdp: b
                }
            }))
        }, null, sdpConstraints))
    };
    a.receiveAnswer = function (g, d) {
        a.peerConnections[g].setRemoteDescription(new nativeRTCSessionDescription(d))
    };
    a.createStream = function (g, d, c) {
        d = d ||
            function () {};
        c = c || function () {};
        g = {
            video: !! g.video,
            audio: !! g.audio
        };
        getUserMedia ? (a.numStreams++, getUserMedia.call(navigator, g, function (b) {
            a.streams.push(b);
            a.initializedStreams++;
            d(b);
            a.initializedStreams === a.numStreams && a.fire("ready")
        }, function (b) {
            a.debug && console.log("Could not connect stream (try restarting browser).");
            c(b)
        })) : a.debug && console.log("WebRTC is not yet supported in this browser.")
    };
    a.addStreams = function () {
        for (var g = 0; g < a.streams.length; g++) {
            var d = a.streams[g],
                c;
            for (c in a.peerConnections) a.peerConnections[c].addStream(d)
        }
    };
    a.attachStream = function (g, d) {
        "string" === typeof d && (d = document.getElementById(d));
        navigator.mozGetUserMedia ? (a.debug && console.log("Attaching media stream"), d.mozSrcObject = g, d.play()) : window.URL && (d.src = URL.createObjectURL(g))
    };
    a.createDataChannel = function (g, d) {
        if (a.dataChannelSupport) {
            var c, b;
            if ("string" === typeof g) c = g, b = a.peerConnections[g];
            else {
                b = g;
                c = void 0;
                for (var f in a.peerConnections) a.peerConnections[f] === b && (c = f)
            } if (!c) throw Error("attempt to createDataChannel with unknown id");
            if (!(b && b instanceof PeerConnection)) throw Error("attempt to createDataChannel without peerConnection");
            d = d || "fileTransfer";
            f = {
                reliable: !1
            };
            var h;
            try {
                a.debug && console.log("createDataChannel " + c), h = b.createDataChannel(d, f)
            } catch (e) {
                throw a.debug && console.log("seems that DataChannel is NOT actually supported!"), e;
            }
            return a.addDataChannel(c, h)
        }
        a.debug && console.log("webRTC data channel is not yet supported in this browser, or you must turn on experimental flags")
    };
    a.addDataChannel = function (g, d) {
        d.onopen = function () {
            a.debug &&
                console.log("data stream open " + g);
            a.fire("data stream open", d)
        };
        d.onclose = function (c) {
            delete a.dataChannels[g];
            delete a.peerConnections[g];
            delete a.connections[g];
            a.debug && console.log("data stream close " + g);
            a.fire("data stream close", d)
        };
        d.onmessage = function (c) {
            a.debug && console.log("data stream message " + g);
            a.fire("data stream data", d, c.data)
        };
        d.onerror = function (c) {
            a.debug && console.log("data stream error " + g + ": " + c);
            a.fire("data stream error", d, c)
        };
        return a.dataChannels[g] = d
    };
    a.addDataChannels =
        function () {
            if (a.dataChannelSupport)
                for (var g in a.peerConnections) a.createDataChannel(g)
    };
    a.on("ready", function () {
        a.createPeerConnections();
        a.addStreams();
        a.addDataChannels();
        a.sendOffers();
        a.attemptOffer = !0
    })
}).call(this);

function preferOpus(a) {
    for (var g = a.split("\r\n"), d = null, c = 0; c < g.length; c++)
        if (-1 !== g[c].search("m=audio")) {
            d = c;
            break
        }
    if (null === d) return a;
    for (a = 0; a < g.length; a++)
        if (-1 !== g[a].search("opus/48000")) {
            (a = extractSdp(g[a], /:(\d+) opus\/48000/i)) && (g[d] = setDefaultCodec(g[d], a));
            break
        }
    g = removeCN(g, d);
    return a = g.join("\r\n")
}

function extractSdp(a, g) {
    var d = a.match(g);
    return d && 2 == d.length ? d[1] : null
}

function setDefaultCodec(a, g) {
    for (var d = a.split(" "), c = [], b = 0, f = 0; f < d.length; f++) 3 === b && (c[b++] = g), d[f] !== g && (c[b++] = d[f]);
    return c.join(" ")
}

function removeCN(a, g) {
    for (var d = a[g].split(" "), c = a.length - 1; 0 <= c; c--) {
        var b = extractSdp(a[c], /a=rtpmap:(\d+) CN\/\d+/i);
        b && (b = d.indexOf(b), -1 !== b && d.splice(b, 1), a.splice(c, 1))
    }
    a[g] = d.join(" ");
    return a
}

function mergeConstraints(a, g) {
    for (var d in g.mandatory) a.mandatory[d] = g.mandatory[d];
    a.optional.concat(g.optional);
    return a
}
var GIFEncoder = function () {
    for (var a = 0, g = {}; 256 > a; a++) g[a] = String.fromCharCode(a);
    var d = function () {
        this.bin = []
    };
    d.prototype.getData = function () {
        for (var a = "", b = this.bin.length, c = 0; c < b; c++) a += g[this.bin[c]];
        return a
    };
    d.prototype.writeByte = function (a) {
        this.bin.push(a)
    };
    d.prototype.writeUTFBytes = function (a) {
        for (var b = a.length, c = 0; c < b; c++) this.writeByte(a.charCodeAt(c))
    };
    d.prototype.writeBytes = function (a, b, c) {
        c = c || a.length;
        for (b = b || 0; b < c; b++) this.writeByte(a[b])
    };
    var a = {}, c, b, f = null,
        h, e = -1,
        l = 0,
        m = !1,
        k, q,
        p, r, t, s = [],
        u = 7,
        y = -1,
        w = !0,
        v = !1,
        x = 10;
    a.setDelay = function (a) {
        l = Math.round(a / 10)
    };
    a.setDispose = function (a) {
        0 <= a && (y = a)
    };
    a.setRepeat = function (a) {
        0 <= a && (e = a)
    };
    a.setTransparent = function (a) {
        f = a
    };
    a.addFrame = function (a, d) {
        if (null == a || !m || null == k) throw Error("Please call start method before calling addFrame");
        var g = !0,
            A = sketch.perf();
        try {
            d ? q = a : (q = a.getImageData(0, 0, a.canvas.width, a.canvas.height).data, v || C(a.canvas.width, a.canvas.height));
            var O = c,
                K = b;
            p = [];
            for (var R = q, N = 0, E = 0; E < K; E++)
                for (var aa = 0; aa < O; aa++) {
                    var da =
                        4 * E * O + 4 * aa;
                    p[N++] = R[da];
                    p[N++] = R[da + 1];
                    p[N++] = R[da + 2]
                }
            var X = p.length,
                O = X / 3;
            r = [];
            var la = new NeuQuant(p, X, x);
            t = la.process();
            for (K = X = 0; K < O; K++) {
                var V = la.map(p[X++] & 255, p[X++] & 255, p[X++] & 255);
                s[V] = !0;
                r[K] = V
            }
            p = null;
            u = 7;
            if (null != f)
                if (null == t) h = -1;
                else {
                    for (var la = (f & 16711680) >> 16, V = (f & 65280) >> 8, X = f & 255, O = 0, K = 16777216, U = t.length, R = 0; R < U;) {
                        var ja = la - (t[R++] & 255),
                            ma = V - (t[R++] & 255),
                            pa = X - (t[R] & 255),
                            N = ja * ja + ma * ma + pa * pa,
                            E = R / 3;
                        s[E] && N < K && (K = N, O = E);
                        R++
                    }
                    h = O
                }
            w && (B(c), B(b), k.writeByte(240 | u), k.writeByte(0), k.writeByte(0),
                D(), 0 <= e && (k.writeByte(33), k.writeByte(255), k.writeByte(11), k.writeUTFBytes("NETSCAPE2.0"), k.writeByte(3), k.writeByte(1), B(e), k.writeByte(0)));
            k.writeByte(33);
            k.writeByte(249);
            k.writeByte(4);
            var ra, T;
            null == f ? T = ra = 0 : (ra = 1, T = 2);
            0 <= y && (T = y & 7);
            k.writeByte(T << 2 | 0 | ra);
            B(l);
            k.writeByte(h);
            k.writeByte(0);
            k.writeByte(44);
            B(0);
            B(0);
            B(c);
            B(b);
            w ? k.writeByte(0) : k.writeByte(128 | u);
            w || D();
            (new LZWEncoder(c, b, r, 8)).encode(k);
            w = !1
        } catch (P) {
            g = !1
        }
        console.log(A());
        return g
    };
    a.finish = function () {
        if (!m) return !1;
        var a = !0;
        m = !1;
        try {
            k.writeByte(59)
        } catch (b) {
            a = !1
        }
        return a
    };
    var A = function () {
        h = 0;
        t = r = p = q = null;
        w = !0
    };
    a.setFrameRate = function (a) {
        15 != a && (l = Math.round(100 / a))
    };
    a.setQuality = function (a) {
        1 > a && (a = 1);
        x = a
    };
    var C = a.setSize = function (a, d) {
        if (!m || w) c = a, b = d, 1 > c && (c = 320), 1 > b && (b = 240), v = !0
    };
    a.start = function () {
        A();
        var a = !0;
        k = new d;
        try {
            k.writeUTFBytes("GIF89a")
        } catch (b) {
            a = !1
        }
        return m = a
    };
    a.cont = function () {
        A();
        k = new d;
        return m = !0
    };
    var D = function () {
        k.writeBytes(t);
        for (var a = 768 - t.length, b = 0; b < a; b++) k.writeByte(0)
    }, B = function (a) {
            k.writeByte(a &
                255);
            k.writeByte(a >> 8 & 255)
        };
    a.stream = function () {
        return k
    };
    a.setProperties = function (a, b) {
        m = a;
        w = b
    };
    return a
}, LZWEncoder = function () {
        var a = {}, g, d, c, b, f, h, e, l, m = [],
            k = [],
            q = 0,
            p = !1,
            r, t, s, u = 0,
            y = 0,
            w = [0, 1, 3, 7, 15, 31, 63, 127, 255, 511, 1023, 2047, 4095, 8191, 16383, 32767, 65535],
            v, x = [],
            A = a.LZWEncoder = function (a, e, f, h) {
                g = a;
                d = e;
                c = f;
                b = Math.max(2, h)
            }, C = function (a) {
                for (var b = 0; b < a; ++b) m[b] = -1
            }, D = a.compress = function (a, b) {
                var c, d, f, g, h, u;
                r = a;
                p = !1;
                e = r;
                l = (1 << e) - 1;
                t = 1 << a - 1;
                s = t + 1;
                q = t + 2;
                v = 0;
                g = F();
                u = 0;
                for (c = 5003; 65536 > c; c *= 2)++u;
                u =
                    8 - u;
                C(5003);
                G(t, b);
                a: for (; - 1 != (f = F());)
                    if (c = (f << 12) + g, d = f << u ^ g, m[d] == c) g = k[d];
                    else {
                        if (0 <= m[d]) {
                            h = 5003 - d;
                            0 == d && (h = 1);
                            do
                                if (0 > (d -= h) && (d += 5003), m[d] == c) {
                                    g = k[d];
                                    continue a
                                } while (0 <= m[d])
                        }
                        G(g, b);
                        g = f;
                        4096 > q ? (k[d] = q++, m[d] = c) : (c = b, C(5003), q = t + 2, p = !0, G(t, c))
                    }
                G(g, b);
                G(s, b)
            };
        a.encode = function (a) {
            a.writeByte(b);
            f = g * d;
            h = 0;
            D(b + 1, a);
            a.writeByte(0)
        };
        var B = function (a) {
            0 < v && (a.writeByte(v), a.writeBytes(x, 0, v), v = 0)
        }, F = function () {
                if (0 == f) return -1;
                --f;
                return c[h++] & 255
            }, G = function (a, b) {
                u &= w[y];
                u = 0 < y ? u | a << y : a;
                for (y +=
                    e; 8 <= y;) {
                    var c = u & 255,
                        d = b;
                    x[v++] = c;
                    254 <= v && B(d);
                    u >>= 8;
                    y -= 8
                }
                if (q > l || p) p ? (l = (1 << (e = r)) - 1, p = !1) : (++e, l = 12 == e ? 4096 : (1 << e) - 1);
                if (a == s) {
                    for (; 0 < y;) c = u & 255, d = b, x[v++] = c, 254 <= v && B(d), u >>= 8, y -= 8;
                    B(b)
                }
            };
        A.apply(this, arguments);
        return a
    }, NeuQuant = function () {
        var a = {}, g, d, c, b, f, h = [],
            e = [],
            l = [],
            m = [],
            k = a.NeuQuant = function (a, g, h) {
                d = a;
                c = g;
                b = h;
                console.log(256);
                f = Array(256);
                for (a = 0; 256 > a; a++) f[a] = Array(4), g = f[a], g[0] = g[1] = g[2] = (a << 12) / 256, l[a] = 256, e[a] = 0
            };
        a.map = function (a, b, c) {
            var d, e, g, k, l, m, x;
            l = 1E3;
            x = -1;
            d = h[b];
            for (e =
                d - 1; 256 > d || 0 <= e;) 256 > d && (m = f[d], g = m[1] - b, g >= l ? d = 256 : (d++, 0 > g && (g = -g), k = m[0] - a, 0 > k && (k = -k), g += k, g < l && (k = m[2] - c, 0 > k && (k = -k), g += k, g < l && (l = g, x = m[3])))), 0 <= e && (m = f[e], g = b - m[1], g >= l ? e = -1 : (e--, 0 > g && (g = -g), k = m[0] - a, 0 > k && (k = -k), g += k, g < l && (k = m[2] - c, 0 > k && (k = -k), g += k, g < l && (l = g, x = m[3]))));
            return x
        };
        a.process = function () {
            var a, k, r, t, s, u, y, w, v, x, A, C, D, B;
            1509 > c && (b = 1);
            g = 30 + (b - 1) / 3;
            C = d;
            D = 0;
            B = c;
            A = c / (3 * b);
            x = A / 100 | 0;
            w = 1024;
            u = 2048;
            y = u >> 6;
            1 >= y && (y = 0);
            for (a = 0; a < y; a++) m[a] = w * (256 * (y * y - a * a) / (y * y));
            v = 1509 > c ? 3 : 0 != c % 499 ? 1497 :
                0 != c % 491 ? 1473 : 0 != c % 487 ? 1461 : 1509;
            for (a = 0; a < A;) {
                r = (C[D + 0] & 255) << 4;
                t = (C[D + 1] & 255) << 4;
                s = (C[D + 2] & 255) << 4;
                k = r;
                for (var F = t, G = s, z = void 0, J = void 0, O = void 0, K = J = J = void 0, R = void 0, N = void 0, E = void 0, aa = void 0, E = N = 2147483647, R = K = -1, z = 0; 256 > z; z++) aa = f[z], J = aa[0] - k, 0 > J && (J = -J), O = aa[1] - F, 0 > O && (O = -O), J += O, O = aa[2] - G, 0 > O && (O = -O), J += O, J < N && (N = J, K = z), J -= e[z] >> 12, J < E && (E = J, R = z), J = l[z] >> 10, l[z] -= J, e[z] += J << 10;
                l[K] += 64;
                e[K] -= 65536;
                k = R;
                F = w;
                G = t;
                z = s;
                K = f[k];
                K[0] -= F * (K[0] - r) / 1024;
                K[1] -= F * (K[1] - G) / 1024;
                K[2] -= F * (K[2] - z) / 1024;
                if (0 != y)
                    for (E = N = R = K = z = G = F = void 0, z = k - y, -1 > z && (z = -1), K = k + y, 256 < K && (K = 256), F = k + 1, G = k - 1, N = 1; F < K || G > z;) {
                        R = m[N++];
                        if (F < K) {
                            E = f[F++];
                            try {
                                E[0] -= R * (E[0] - r) / 262144, E[1] -= R * (E[1] - t) / 262144, E[2] -= R * (E[2] - s) / 262144
                            } catch (da) {}
                        }
                        if (G > z) {
                            E = f[G--];
                            try {
                                E[0] -= R * (E[0] - r) / 262144, E[1] -= R * (E[1] - t) / 262144, E[2] -= R * (E[2] - s) / 262144
                            } catch (X) {}
                        }
                    }
                D += v;
                D >= B && (D -= c);
                a++;
                0 == x && (x = 1);
                if (0 == a % x)
                    for (w -= w / g, u -= u / 30, y = u >> 6, 1 >= y && (y = 0), k = 0; k < y; k++) m[k] = w * (256 * (y * y - k * k) / (y * y))
            }
            for (a = 0; 256 > a; a++) f[a][0] >>= 4, f[a][1] >>= 4, f[a][2] >>= 4, f[a][3] =
                a;
            for (a = C = A = 0; 256 > a; a++) {
                v = f[a];
                y = a;
                w = v[1];
                for (u = a + 1; 256 > u; u++) x = f[u], x[1] < w && (y = u, w = x[1]);
                x = f[y];
                a != y && (u = x[0], x[0] = v[0], v[0] = u, u = x[1], x[1] = v[1], v[1] = u, u = x[2], x[2] = v[2], v[2] = u, u = x[3], x[3] = v[3], v[3] = u);
                if (w != A) {
                    h[A] = C + a >> 1;
                    for (u = A + 1; u < w; u++) h[u] = a;
                    A = w;
                    C = a
                }
            }
            h[A] = C + 255 >> 1;
            for (u = A + 1; 256 > u; u++) h[u] = 255;
            a = [];
            u = Array(256);
            for (y = 0; 256 > y; y++) u[f[y][3]] = y;
            for (w = y = 0; 256 > w; w++) v = u[w], a[y++] = f[v][0], a[y++] = f[v][1], a[y++] = f[v][2];
            return a
        };
        k.apply(this, arguments);
        return a
    };
"undefined" === typeof Color && (Color = {});
(function () {
    Color.Picker = function (b) {
        "function" === typeof g && (g = g());
        "function" === typeof d && (d = d());
        "function" === typeof c && (c = c(8, "#FFF", "#eee"));
        window.zIndexGlobal || (window.zIndexGlobal = 100);
        var f = this,
            h = b.modules;
        "undefined" === typeof h && (h = {
            hue: !0,
            satval: !0,
            alpha: !0
        });
        "undefined" === typeof b && (b = {});
        this.state = "colorPicker";
        this.callback = b.callback;
        this.color = a(b.color);
        this.container = b.container || document.body;
        this.margin = b.margin || 10;
        this.offset = this.margin / 2;
        this.strokeColor = b.strokeColor || "rgba(255,255,255,0.15)";
        this.recordId = b.recordId;
        this.feature = b.feature || {};
        this.eyeDropper = this.feature.eyeDropper || {};
        this.conf = {};
        h.hue && (this.conf.hue = {
            column: 0,
            enable: !0,
            width: h.hue.width || 30,
            height: h.hue.height || 189
        });
        h.satval && (this.conf.satval = {
            column: 1,
            enable: !0,
            width: h.satval.width || 190,
            height: h.satval.height || 190
        });
        h.alpha && (this.conf.alpha = {
            column: 2,
            enable: !0,
            width: h.alpha.width || 30,
            height: h.alpha.height || 200
        });
        this.onMouseDown = b.onMouseDown || b.onmousedown;
        this.onMouseUp = b.onMouseUp || b.onmousedown;
        var e = document.createElement("div");
        e.id = b.id || "ColorPicker";
        b.className && (e.className = b.className);
        var l = 0,
            m = 0,
            k = -1,
            q;
        for (q in this.conf) l += this.conf[q].width + this.margin + this.offset - 7, k !== this.conf[q].row && (m += this.conf[q].height + 2 * this.margin, k = this.conf[q].row);
        e.style.cssText = b.style;
        e.style.height = m + "px";
        e.style.width = l + "px";
        this.container.appendChild(e);
        this.element = e;
        this.feature.closeButton && (l = document.createElement("div"), l.title = "Close", l.className = "hexClose", l.innerHTML = "x", Event.add(l, "click", function (a) {
            f.close()
        }), e.appendChild(l));
        var p = document.createElement("div");
        c.data && (p.style.backgroundImage = "url(" + c.data + ")");
        p.className = "hexBox";
        p.title = "Eyedropper";
        var r = document.createElement("div");
        p.appendChild(r);
        e.appendChild(p);
        if (f.eyeDropper.target) {
            r.style.cursor = "pointer";
            l = new Image;
            l.src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAFo9M/3AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAkNJREFUeNpi/P//PwMIMIGIxgXH5wEEEDNIRElJSYJh1sZzX0AcgAACizQ0NDC8efMGpNiOAaYJBgACiBFdgAnGiI6Ohsg0LTzBe+nei/8glSDMAhRL11OSYISpBAggDDNAYPLkyfu4ubkdV65cOYUBphWEWxef+Pzwxbv/8goKf5GNZGjYduv3/VcfWFSYGKTlxAWfPbh/H2GcXff1fN9F13qBTA4gFgJicSAWhfIZAAIIxQpkPGHCBDO4Fchg0aJFPIyMjJ8vXrwI9gSKgvjElA7G/3/Knz9/znDv3j1eFCuaFhzvvXr32X+/iOS/QkJCFjBxMNG88PjRl28//u9YeuI9uluAsXRslsvS6//rFxz/gs2xTL//MbHb/flo3JhgCXIcAzpmcJtxExTWzEDMD/U/KBwEYDEHEGBY4wIbWLVqFdvHjx9n/vjxI+Hx48cM796965gzZ04lXgP8/PxsODk5c4yMjFQ4ODiMgZoYrl69yvDq1auz79+/d7t8+fI7nAY0LzqpAPTBra8PjrBeO3uI4fXr1wyfP39e+eHDhzigC37hTE7AIF3Ey8XiF2CtxM/AxMiw6ej9r28/fj/Rme2+8+ePbwuA6l9jpGmgbcDw+n9FUYJbzd1MkeXus/cMu88++/bv3/8pdfEW5fjCBmxA/aJTf09/+c2g9P/nNzEezkuMjEx+QI1viQpdj+7r/EXbXnyY8eafOjRqWKBJlROIuYCYGwlzQOXhWYrlyfsPWpdX39r3ZcYHFSD/NgOJAAAJ9VcdYKUMbwAAAABJRU5ErkJggg==";
            l.style.cssText = "padding: 3px; position: relative; top: 1px; float: right; cursor: pointer;";
            f.feature.closeButton && (l.style.marginRight = "16px");
            e.appendChild(l);
            var t, s = function (a) {
                    Event.prevent(a);
                    a = Event.proxy.getCoord(a);
                    var b = Event.proxy.getBoundingBox(f.eyeDropper.target);
                    a.x += b.scrollLeft - b.x1;
                    a.y += b.scrollTop - b.y1;
                    a = f.eyeDropper.canvas.getContext("2d").getImageData(a.x, a.y, 1, 1);
                    0 !== a.data[3] && (a = Color.Space(a.data, "RGBA>HSVA"), h.alpha || (a.A = 255), f.update(a, "HSVA"))
                }, u = function () {
                    p.className =
                        "hexBox";
                    f.eyeDropper.target.style.cursor = "default";
                    f.eyeDropper.target.title = t;
                    Event.remove(document.body, "mouseup", u);
                    Event.remove(f.eyeDropper.target, "mousemove", s);
                    setTimeout(function () {
                        f.state = "colorPicker"
                    }, 50)
                };
            Event.add([p, l], "click", function (a) {
                if ("eyeDropper" === f.state) return u();
                f.state = "eyeDropper";
                t = f.eyeDropper.target.title;
                p.className = "hexBox active";
                f.eyeDropper.target.style.cursor = "crosshair";
                f.eyeDropper.target.title = "Pick color";
                Event.add(document.body, "mouseup", u);
                Event.add(f.eyeDropper.target,
                    "mousemove", s)
            })
        }
        var y = /[^a-f0-9]/gi,
            w = document.createElement("input");
        w.title = "HEX Code";
        w.className = "hexInput";
        w.size = 6;
        w.type = "text";
        Event.add(w, "mousedown", Event.stop);
        Event.add(w, "keydown change", function (a) {
            Event.stop(a);
            var b = a.keyCode,
                c = w.value.replace(y, "").substr(0, 6),
                c = parseInt("0x" + c, 16);
            if ("keydown" === a.type)
                if (40 === b) c = Math.max(0, c - (a.shiftKey ? 10 : 1)), w.value = Color.Space(c, "HEX24>W3").toUpperCase().substr(1);
                else if (38 === b) c = Math.min(16777215, c + (a.shiftKey ? 10 : 1)), w.value = Color.Space(c,
                "HEX24>W3").toUpperCase().substr(1);
            else return;
            "NaN" !== String(c) && (16777215 < c && (c = 16777215), 0 > c && (c = 0), f.update(Color.Space(c, "HEX24>RGB"), "RGB"), 27 === a.keyCode && this.blur())
        });
        e.appendChild(w);
        e.appendChild(document.createElement("br"));
        var v = document.createElement("canvas"),
            x = v.getContext("2d"),
            m = l = 0;
        for (q in this.conf) m = Math.max(this.conf[q].height + this.margin, m), l += this.conf[q].width + this.margin;
        v.width = l;
        v.height = m;
        v.style.cssText = "left: " + this.offset + "px;";
        e.appendChild(v);
        Event.add(e, "drag",
            Event.stop);
        Event.add(e, "mousedown mousemove mouseup", function (a) {
            var c = "mousedown" === a.type || "touchstart" === a.type,
                d = "mouseup" === a.type || "touchend" === a.type;
            if (c && ("function" === typeof u && u(), f.onMouseDown)) f.onMouseDown(a);
            if (d && f.onMouseDown) f.onMouseUp(a);
            var g = f.margin / 2,
                h = d = 0;
            if (window !== v)
                for (var k = v; null !== k;) d += k.offsetLeft, h += k.offsetTop, k = k.offsetParent;
            k = Event.proxy.getCoord(a);
            d = k.x - d - g;
            g = k.y - h - g;
            h = 0 > d ? 0 : d > v.width ? v.width : d;
            k = 0 > g ? 0 : g > f.conf.satval.height ? f.conf.satval.height : g;
            if ("hexInput" ===
                a.target.className) c && Event.stop(a), e.style.cursor = "text";
            else {
                if (h !== d || k !== g) f.feature.drag ? (e.style.cursor = "move", e.title = "Move", c && Event.proxy.drag({
                    position: "move",
                    event: a,
                    target: e,
                    listener: function (a, c) {
                        var d = window.innerWidth,
                            g = window.innerHeight,
                            h = c.target.offsetWidth,
                            k = c.target.offsetHeight;
                        c.x + h > d && (c.x = d - h);
                        c.y + k > g && (c.y = g - k);
                        0 > c.x && (c.x = 0);
                        0 > c.y && (c.y = 0);
                        e.style.left = c.x + "px";
                        e.style.top = c.y + "px";
                        "down" === c.state ? e.style.zIndex = window.zIndexGlobal++ : "up" === c.state && b.recordWindow && b.recordWindow({
                            id: f.recordId ||
                                e.id,
                            left: c.x / d,
                            top: c.y / g,
                            display: "block"
                        });
                        Event.prevent(a)
                    }
                })) : e.style.cursor = "default";
                else if (h <= f.conf.satval.width) {
                    if (!1 === f.conf.satval.enable) return;
                    c && Event.stop(a);
                    e.style.cursor = "crosshair";
                    e.title = "Saturation + Value";
                    c && Event.proxy.drag({
                        position: "relative",
                        event: a,
                        target: v,
                        listener: function (a, b) {
                            var c = 0 > b.y - f.offset ? 0 : b.y - f.offset > f.conf.satval.height ? f.conf.satval.height : b.y - f.offset;
                            f.color.S = 100 * ((0 > b.x - f.offset ? 0 : b.x - f.offset > f.conf.satval.width ? f.conf.satval.width : b.x - f.offset) /
                                f.conf.satval.width);
                            f.color.V = 100 - 100 * (c / f.conf.satval.height);
                            f.drawSample(b.state, !0);
                            Event.prevent(a)
                        }
                    })
                } else if (h > f.conf.satval.width + f.margin && h <= f.conf.satval.width + f.margin + f.offset + f.conf.hue.width) {
                    if (!1 === f.conf.hue.enable) return;
                    c && Event.stop(a);
                    e.style.cursor = "crosshair";
                    e.title = "Hue";
                    c && Event.proxy.drag({
                        position: "relative",
                        event: a,
                        target: v,
                        listener: function (a, b) {
                            f.color.H = 360 - 360 * Math.min(1, (0 > b.y - f.offset ? 0 : b.y - f.offset > f.conf.satval.height ? f.conf.satval.height : b.y - f.offset) / f.conf.satval.height);
                            f.drawSample(b.state, !0);
                            Event.prevent(a)
                        }
                    })
                } else if (f.conf.alpha && h > f.conf.satval.width + f.conf.alpha.width + 2 * f.margin && h <= f.conf.satval.width + 2 * f.margin + f.offset + 2 * f.conf.alpha.width) {
                    if (!1 === f.conf.alpha.enable) return;
                    c && Event.stop(a);
                    e.style.cursor = "crosshair";
                    e.title = "Alpha";
                    c && Event.proxy.drag({
                        position: "relative",
                        event: a,
                        target: v,
                        listener: function (a, b) {
                            f.color.A = 255 * (1 - Math.min(1, (0 > b.y - f.offset ? 0 : b.y - f.offset > f.conf.satval.height ? f.conf.satval.height : b.y - f.offset) / f.conf.satval.height));
                            f.drawSample(b.state, !0);
                            Event.prevent(a)
                        }
                    })
                } else e.style.cursor = "default";
                return !1
            }
        });
        this.update = function (b, c) {
            b && (f.color = a(b));
            "number" === typeof c && (f.color.A = c);
            f.drawSample("update", !0)
        };
        this.drawSample = function (a, b) {
            x.clearRect(0, 0, v.width, v.height);
            f.drawSquare();
            f.drawHue();
            this.conf.alpha && f.drawAlpha();
            var c = Color.Space(f.color, "HSVA>RGBA"),
                e = Color.Space(c, "RGB>HEX24>W3");
            w.value = e.toUpperCase().substr(1);
            try {
                r.style.backgroundColor = Color.Space(c, "RGBA>W3")
            } catch (h) {
                r.style.backgroundColor = Color.Space(c, "RGB>W3")
            }
            x.save();
            if (this.conf.alpha) {
                x.globalAlpha = this.conf.alpha.enable ? 1 : 0;
                var k = f.conf.satval.width + 2 * f.margin + f.conf.hue.width + f.conf.alpha.width + f.offset,
                    e = (255 - f.color.A) / 255 * f.conf.satval.height - 2;
                x.drawImage(g, k + 2, Math.round(e) + f.offset - 1)
            }
            this.conf.hue && (x.globalAlpha = this.conf.hue.enable ? 1 : 0, k = f.conf.satval.width + f.margin + f.offset + f.conf.hue.width, e = (360 - f.color.H) / 362 * f.conf.satval.height - 2, x.drawImage(g, k + 2, Math.round(e) + f.offset - 1));
            this.conf.satval && (x.globalAlpha = this.conf.satval.enable ? 1 : 0, k = f.color.S /
                100 * f.conf.satval.width, e = (1 - f.color.V / 100) * f.conf.satval.height, k -= d.width / 2, e -= d.height / 2, x.drawImage(d, Math.round(k) + f.offset, Math.round(e) + f.offset));
            x.restore();
            f.callback && (a && b) && (e = f.toString(c), f.callback(c, a, e))
        };
        this.toString = function (a) {
            a = a || f.color;
            isFinite(a.H) && (a = Color.Space(a, "HSVA>RGBA"));
            return 255 === a.A ? Color.Space(a, "RGB>HEX24>W3") : Color.Space(a, "RGBA>W3")
        };
        this.drawSquare = function () {
            var a = Color.Space({
                H: f.color.H,
                S: 100,
                V: 100
            }, "HSV>RGB>HEX24>W3");
            Color.Space.HEX_RGB("0x" + a);
            var b =
                f.offset,
                d = f.conf.satval.width;
            x.save();
            x.fillStyle = c;
            x.fillRect(b, f.offset, f.conf.satval.width, f.conf.satval.height);
            x.globalAlpha = f.color.A / 255;
            x.fillStyle = A(a, "satval");
            x.fillRect(b, b, d, d);
            a = x.createLinearGradient(b, b, d + b, 0);
            a.addColorStop(0, A("rgba(255, 255, 255, 1)", "satval"));
            a.addColorStop(1, A("rgba(255, 255, 255, 0)", "satval"));
            x.fillStyle = a;
            x.fillRect(b, b, d, d);
            a = x.createLinearGradient(0, b, 0, d + b);
            a.addColorStop(0, "rgba(0, 0, 0, 0)");
            a.addColorStop(1, "rgba(0, 0, 0, 1)");
            x.fillStyle = a;
            x.fillRect(b,
                b, d, d);
            x.strokeStyle = A(this.strokeColor, "satval");
            x.strokeRect(b + 0.5, b + 0.5, d - 1, d - 1);
            x.restore()
        };
        var A = function (a, b) {
            if (!0 === f.conf[b].enable) return a;
            a = "rgba" === a.substr(0, 4) ? Color.Space(a, "W3>RGBA") : Color.Space(a, "W3>HEX32>RGBA");
            var c = Math.round(0.33 * a.R + 0.33 * a.G + 0.33 * a.B);
            return "rgba(" + c + "," + c + "," + c + "," + 0.42 * (a.A / 255) + ")"
        };
        this.drawHue = function () {
            var a = f.conf.satval.width + f.margin + f.offset;
            x.fillStyle = c;
            x.fillRect(a, f.offset, f.conf.hue.width, f.conf.hue.height);
            var b = x.createLinearGradient(0, 0,
                0, f.conf.hue.height + f.offset);
            b.addColorStop(0, A("rgba(255, 0, 0, 1)", "hue"));
            b.addColorStop(5 / 6, A("rgba(255, 255, 0, 1)", "hue"));
            b.addColorStop(4 / 6, A("rgba(0, 255, 0, 1)", "hue"));
            b.addColorStop(0.5, A("rgba(0, 255, 255, 1)", "hue"));
            b.addColorStop(2 / 6, A("rgba(0, 0, 255, 1)", "hue"));
            b.addColorStop(1 / 6, A("rgba(255, 0, 255, 1)", "hue"));
            b.addColorStop(1, A("rgba(255, 0, 0, 1)", "hue"));
            x.save();
            x.globalAlpha = f.color.A / 255;
            x.fillStyle = b;
            x.fillRect(a, f.offset, f.conf.hue.width, f.conf.hue.height);
            x.strokeStyle =
                A(this.strokeColor, "hue");
            x.strokeRect(a + 0.5, f.offset + 0.5, f.conf.hue.width - 1, f.conf.hue.height - 1);
            x.restore()
        };
        this.drawAlpha = function () {
            var a = f.conf.satval.width + 2 * f.margin + f.conf.hue.width + f.offset;
            x.fillStyle = c;
            x.fillRect(a, f.offset, f.conf.alpha.width, f.conf.satval.height);
            var b = Color.Space.HSV_RGB({
                H: f.color.H,
                S: f.color.S,
                V: f.color.V
            }),
                d = x.createLinearGradient(0, 0, 0, f.conf.satval.height);
            b.A = 255;
            d.addColorStop(0, A(Color.Space.RGBA_W3(b), "alpha"));
            b.A = 0;
            d.addColorStop(1, A(Color.Space.RGBA_W3(b),
                "alpha"));
            x.fillStyle = d;
            x.fillRect(a, f.offset, f.conf.alpha.width, f.conf.satval.height);
            x.strokeStyle = this.strokeColor;
            x.strokeRect(a + 0.5, f.offset + 0.5, f.conf.alpha.width - 1, f.conf.satval.height - 1)
        };
        this.toggle = function () {
            -1 === (" " + e.className + " ").indexOf(" opened ") ? this.open(id) : this.close(id)
        };
        this.open = function () {
            var a = f.recordId || e.id,
                c = document.getElementById(a);
            b.recordWindow && b.recordWindow && b.recordWindow({
                id: a,
                display: "block"
            }); - 1 === (" " + c.className + " ").indexOf(" opened ") && (c.className =
                (c.className + " opened").trim());
            c.style.display = "block";
            c.style.zIndex = window.zIndexGlobal++;
            window.clearTimeout(c.interval)
        };
        this.close = function () {
            var a = f.recordId || e.id,
                c = document.getElementById(a);
            b.recordWindow && b.recordWindow({
                id: a,
                display: "none"
            });
            c.className = (" " + c.className + " ").replace(" opened ", " ").trim();
            c.interval = window.setTimeout(function () {
                c.style.display = "none"
            }, 250)
        };
        this.destory = function () {
            document.body.removeChild(e);
            for (var a in f) delete f[a]
        };
        this.drawSample("create");
        "undefined" !==
            typeof b.display && (b.display ? this.open() : this.close());
        return this
    };
    var a = function (a) {
        "string" === typeof a ? a = "hsla" === a.substr(0, 4) ? Color.Space(a, "W3>HSLA>RGBA>HSVA") : "rgba" === a.substr(0, 4) ? Color.Space(a, "W3>RGBA>HSVA") : "rgb" === a.substr(0, 3) ? Color.Space(a, "W3>RGB>HSV") : Color.WebColors[a] ? Color.Space(Color.WebColors[a], "W3>HEX24>RGB>HSV") : Color.Space(a, "W3>HEX24>RGB>HSV") : "undefined" !== typeof a.R && (a = Color.Space(a, "RGB>HSV"));
        "undefined" === typeof a.A && (a.A = 255);
        return a
    }, g = function () {
            var a = document.createElement("canvas"),
                c = a.getContext("2d"),
                d = 16 / 3;
            a.width = 16;
            a.height = 16;
            for (var e = 0; 20 > e; e++) c.beginPath(), c.fillStyle = "#fff", c.moveTo(0, 4), c.lineTo(4, 0), c.lineTo(4, 8), c.fill();
            c.translate(-d, -16);
            return a
        }, d = function () {
            var a = document.createElement("canvas");
            a.width = 10;
            a.height = 10;
            var c = a.getContext("2d");
            c.lineWidth = 1;
            c.beginPath();
            var d = a.width / 2,
                e = a.width / 2;
            c.arc(d, e, 4.5, 0, 2 * Math.PI, !0);
            c.strokeStyle = "#000";
            c.stroke();
            c.beginPath();
            c.arc(d, e, 3.5, 0, 2 * Math.PI, !0);
            c.strokeStyle = "#FFF";
            c.stroke();
            return a
        }, c = function (a,
            c, d) {
            var e = document.createElement("canvas").getContext("2d");
            e.canvas.width = 2 * a;
            e.canvas.height = 2 * a;
            e.fillStyle = c;
            e.fillRect(0, 0, a, a);
            e.fillStyle = d;
            e.fillRect(a, 0, a, a);
            e.fillStyle = d;
            e.fillRect(0, a, a, a);
            e.fillStyle = c;
            e.fillRect(a, a, a, a);
            a = e.createPattern(e.canvas, "repeat");
            try {
                a.data = e.canvas.toDataURL()
            } catch (g) {}
            return a
        }
})();
"undefined" === typeof sketch && (sketch = {});
sketch = function (a) {
    a.generate.FontPreview = function (g) {
        var d = a.canvas2d.layers.cache,
            c = d.getContext("2d");
        d.style.cssText = "";
        var b = [],
            f = [],
            h = [];
        if (g) h.push(a.media.textById["Ubuntu Condensed"]), f.push("Ubuntu Condensed");
        else
            for (var e in a.media.textById) f.push(e), h.push(a.media.textById[e]);
        var l = function (e) {
            d.width = 300;
            d.height = 50;
            c.textAlign = "center";
            c.font = "60px '" + e.name + "', Arial, Helvetica";
            c.textBaseline = "middle";
            var f = c.measureText(e.name).width,
                g = a.vector.text.measureTextHeight(e.name, c.font),
                f = Math.min(d.width / (f + 40), d.height / (g + 10));
            1 > f && (c.font = 60 * f + "px '" + e.name + "', Arial, Helvetica");
            c.fillText(e.name, d.width / 2, d.height / 2);
            console.log(e.name);
            d.toBlob(function (a) {
                b.push({
                    filename: e.name + ".png",
                    blob: a
                });
                m.next()
            })
        }, m = new Queue({
                items: h,
                flatten: !0,
                oncomplete: function () {
                    a.io.zip.encode(b, function (b) {
                        a.download.blob(b, "font-preview.zip")
                    })
                },
                onprogress: function (a) {
                    console.log(a)
                },
                next: function (b) {
                    a.vector.text.detectFont(b.name) ? l(b) : a.vector.text.attach({
                        family: b.name,
                        filename: b.filename,
                        timeout: 1E3,
                        callback: function (a) {
                            a && console.log("missing: " + b.name);
                            l(b)
                        }
                    })
                }
            })
    };
    a.generate.preview = function (g, d) {
        g = g || {};
        var c = g.type || "stamp",
            b = g.width || 52,
            f = g.height || 52,
            h = g.oncomplete ? [] : {};
        d = g.src ? [{
            path: g.src
        }] : g.resource ? [{
            resource: g.resource
        }] : d || a.media[c].paths;
        var e = g.canvas || document.createElement("canvas"),
            l = e.getContext("2d");
        a.feature.debugCache && document.body.appendChild(e);
        var m = new widget.Thumbnailer,
            k = function (a, c, d) {
                m.generate({
                    src: a,
                    crop: "edge",
                    width: b,
                    height: f,
                    croparea: !1,
                    onload: function (a) {
                        d ?
                            a.toBlob(function (b) {
                                d.push({
                                    filename: c,
                                    canvas: a,
                                    blob: b
                                });
                                q.next()
                            }) : (h.push && h.push(a), q.next())
                    }
                })
            }, q = new Queue({
                items: d,
                flatten: !0,
                onprogress: function (a) {},
                oncomplete: function () {
                    if (g.oncomplete)
                        if (g.src || g.resource) g.oncomplete(h[0]);
                        else g.oncomplete(h);
                        else a.io.zip && a.io.zip.encode(h, function (b) {
                            a.download.blob(b, c + "-preview.zip")
                        }, function (a) {
                            console.log("zip", a)
                        })
                },
                next: function (a) {
                    if (a.path && "#" === a.path[0]) return q.next();
                    if (!g.src && !g.resource) {
                        var d = a.path.split("/"),
                            m = d[3];
                        h[m] || (h[m] = []);
                        var s = d.pop().replace("svg", "png"),
                            u = h[m]
                    }
                    d = function (c) {
                        c.render ? c.render({
                            ctx: l,
                            placement: "crop",
                            width: b,
                            height: f
                        }) : console.log("missing svg", a);
                        k(e, s, u)
                    };
                    switch (c) {
                    case "clipart":
                        a.resource ? d(a.resource) : new Vector.SVG({
                            ctx: l,
                            src: a.path,
                            useCache: !0,
                            onload: d
                        });
                        break;
                    case "stamp":
                        k(a.path, s, u)
                    }
                }
            })
    };
    a.generate.StampPreview = function (g, d) {
        g = g || {};
        g.type = "stamp";
        a.generate.preview(g, d)
    };
    a.generate.ClipartPreview = function (g, d) {
        g = g || {};
        g.type = "clipart";
        a.generate.preview(g, d)
    };
    return sketch
}(sketch);
if ("undefined" === typeof widget) var widget = {};
widget.Growl = function (a) {
    a = a || this;
    a.close = function () {
        g.style.opacity = 0;
        g.style.bottom = "-" + g.firstChild.offsetHeight + "px";
        setTimeout(function () {
            g.style.display = "none"
        }, 300)
    };
    a.message = function (d) {
        if (!a.timeout) {
            document.body.appendChild(g);
            g.style.display = "block";
            g.firstChild.innerHTML = d;
            var c = window.getComputedStyle(g),
                b = c.getPropertyValue("font").replace("/0px", "");
            d = g.offsetWidth / sketch.vector.text.measureTextWidth(d, b);
            1 > d && (b = c.getPropertyValue("font-size"), c = b.replace(/[0-9.-]*/g, ""), b = parseInt(b),
                c && "px" !== c && (b *= ConvertMetrics[c + ">px"]), d *= a.fontsize || b, a.fontsize || (a.fontsize = b), g.style.fontSize = d + "px");
            a.timeout = setTimeout(function () {
                g.style.opacity = 1;
                g.style.bottom = 0;
                a.timeout = setTimeout(function () {
                    a.close();
                    delete a.timeout
                }, 2E3)
            }, 1)
        }
    };
    var g = document.createElement("div");
    g.onclick = a.close;
    g.id = "growl";
    g.appendChild(document.createElement("div"));
    return a
};
"undefined" === typeof widget && (widget = {});
(function () {
    var a = Math.PI,
        g, d = {
            id: "loader",
            bars: 12,
            radius: 0,
            lineWidth: 17.5,
            lineHeight: 50,
            timeout: 0,
            display: !0
        };
    widget.Loader = function (f) {
        "undefined" === typeof g && (g = !! document.createElement("canvas").getContext);
        if (g) {
            var h = this;
            "string" === typeof f && (f = {
                message: f
            });
            "boolean" === typeof f && (f = {
                display: !1
            });
            "undefined" === typeof f && (f = {});
            f.container = f.container || document.body;
            if (f.container) {
                for (var e in d) "undefined" === typeof f[e] && (f[e] = d[e]);
                var l = document.getElementById(f.id);
                if (l) this.span = l.parentNode.getElementsByTagName("span")[0];
                else {
                    var m = document.createElement("div");
                    e = document.createElement("span");
                    e.className = "message";
                    m.className = d.id;
                    m.style.cssText = c("opacity", 400);
                    this.span = e;
                    this.div = m;
                    l = document.createElement("canvas");
                    l.id = f.id;
                    l.style.cssText = "opacity: 1; position: absolute; z-index: 10000;";
                    m.appendChild(l);
                    m.appendChild(e);
                    var k = document.createElement("div");
                    k.className = "meter";
                    k.style.padding = "10px";
                    e = document.createElement("span");
                    e.style.width = "3%";
                    k.appendChild(e);
                    this.meter = e;
                    this.meterContainer = k;
                    this.span.appendChild(k);
                    f.container.appendChild(m)
                }
                var q = f.bars,
                    p = f.radius,
                    r = 2 * (f.lineHeight + 20) + 2 * f.radius;
                b(f.container);
                var t = window.devicePixelRatio || 1;
                l.width = r * t;
                l.height = r * t;
                var s = 0,
                    u = l.getContext("2d");
                u.globalCompositeOperation = "lighter";
                u.shadowOffsetX = 1;
                u.shadowOffsetY = 1;
                u.shadowBlur = 1;
                u.shadowColor = "rgba(0, 0, 0, 0.5)";
                this.messages = {};
                this.message = function (a, b) {
                    if (!this.interval) return this.start(b, a);
                    this.update(null, a);
                    b && b()
                };
                this.loaded = function (a) {
                    sketch.feature.debug && console.log(a);
                    this.percent += 5
                };
                this.update =
                    function (a, b, c) {
                        if (!isFinite(a))
                            for (a in this.messages);
                        if (a = this.messages[a]) a.message = b = b || a.message, "number" === typeof c && (a.span.innerHTML = c + "%"), "..." === b.substr(-3) ? (a._message = b.substr(0, b.length - 3), a.messageAnimate = [".&nbsp;&nbsp;", "..&nbsp;", "..."].reverse()) : (a._message = b, a.messageAnimate = !1), a.element.innerHTML = b
                };
                this.add = function (a) {
                    "string" === typeof a && (a = {
                        message: a
                    });
                    this.span.style.cssText = "background: " + (f.background ? f.background : "rgba(0,0,0,1)") + ";";
                    this.div.style.cssText = c("opacity",
                        400);
                    this.stopPropagation ? this.div.style.cssText += "background: rgba(0,0,0,0.25);" : (this.div.style.pointerEvents = "none", this.div.style.height = 0);
                    this.div.style.opacity = 1;
                    this.div.style.display = "block";
                    f.background && (this.div.style.background = f.backgrond);
                    var b = (new Date).getTime(),
                        d = Math.abs(b * Math.random() >> 0),
                        e = a.message,
                        g = document.createElement("div");
                    g.style.cssText = c("opacity", 500);
                    var h = document.createElement("span");
                    h.style.cssText = "float: right; width: 50px;";
                    var k = document.createElement("span");
                    k.innerHTML = e;
                    g.appendChild(k);
                    g.appendChild(h);
                    g.appendChild(document.createElement("br"));
                    b = this.messages[d] = {
                        seed: d,
                        container: g,
                        element: k,
                        span: h,
                        message: e,
                        timeout: 1E3 * (a.timeout || f.timeout),
                        timestamp: b,
                        getProgress: a.getProgress
                    };
                    this.span.appendChild(g);
                    this.span.style.display = "block";
                    this.update(b.seed, e);
                    a.onstart && window.setTimeout(a.onstart, 150);
                    this.center();
                    this.interval || a.delay || w();
                    window.clearInterval(this.interval);
                    this.interval = window.setInterval(w, 30);
                    return d
                };
                this.remove = function (a) {
                    s +=
                        0.07;
                    (new Date).getTime();
                    "object" === typeof a && (a = a.join(":"));
                    a && (a = ":" + a + ":");
                    for (var b in this.messages) {
                        var c = this.messages[b];
                        a && -1 === a.indexOf(":" + c.seed + ":") || (delete this.messages[c.seed], c.container.style.color = "#99ff88", y(c), c.getProgress && (c.span.innerHTML = "100%"))
                    }
                };
                this.start = function (a, b) {
                    if (b || f.message) return h.add({
                        message: b || f.message,
                        onstart: a
                    })
                };
                this.stop = function (a) {
                    if (isFinite(a)) this.update(a, null, 100);
                    else {
                        h.remove();
                        window.clearInterval(h.interval);
                        delete h.interval;
                        if (f.oncomplete) f.oncomplete();
                        l && l.style && (window.setTimeout(function () {
                            h.div.style.opacity = 0
                        }, 1), window.setTimeout(function () {
                            h.interval || (h.stopPropagation = !1, m.style.display = "none", u.clearRect(0, 0, r, r))
                        }, 400))
                    }
                };
                this.center = function () {
                    var a = b(f.container),
                        c = a.width - r,
                        a = (document.documentElement && document.documentElement.scrollTop || document.body.scrollTop) + (a.height - r) / 2 - Math.max(70, h.span.offsetHeight / 2);
                    l.style.left = c / 2 + "px";
                    l.style.top = a - r + "px";
                    l.style.width = r + "px";
                    l.style.height = r + "px";
                    h.span.style.top = a + "px"
                };
                e = document.createElement("style");
                document.getElementsByTagName("head")[0].appendChild(e);
                e.styleSheet ? e.styleSheet.cssText = ".loader { color: #fff; position: fixed; left: 0; top: 0; width: 100%; height: 100%; z-index: 100000; opacity: 0; display: none; }.loader span { overflow: hidden; white-space: nowrap; }.loader span.message { margin: auto; opacity: 1; display: none; border-radius: 10px; padding: 0; width: 300px; text-align: center; position: absolute; z-index: 10000; left: 0; right: 0; }.loader span.message div { border-bottom: 1px solid rgba(255,255,255,0.15); padding: 7px 10px; clear: both; text-align: left; opacity: 1; }.loader span.message span { text-overflow: ellipsis; -o-text-overflow: ellipsis; width: 70%; float: left }.loader span.message div:last-child { border-bottom: none; }" :
                    e.innerHTML = ".loader { color: #fff; position: fixed; left: 0; top: 0; width: 100%; height: 100%; z-index: 100000; opacity: 0; display: none; }.loader span { overflow: hidden; white-space: nowrap; }.loader span.message { margin: auto; opacity: 1; display: none; border-radius: 10px; padding: 0; width: 300px; text-align: center; position: absolute; z-index: 10000; left: 0; right: 0; }.loader span.message div { border-bottom: 1px solid rgba(255,255,255,0.15); padding: 7px 10px; clear: both; text-align: left; opacity: 1; }.loader span.message span { text-overflow: ellipsis; -o-text-overflow: ellipsis; width: 70%; float: left }.loader span.message div:last-child { border-bottom: none; }";
                var y = function (a) {
                    window.setTimeout(function () {
                        a.container.style.opacity = 0
                    }, 1);
                    window.setTimeout(function () {
                        a.container.parentNode.removeChild(a.container)
                    }, 250)
                }, w = function () {
                        var b = (new Date).getTime();
                        h.center();
                        for (var c in h.messages) {
                            var d = h.messages[c],
                                e = s / 0.07 >> 0,
                                g = parseInt(d.span.innerHTML);
                            if (isFinite(g) && 100 <= g) h.remove(d.seed);
                            else {
                                if (0 === e % 5 && d.getProgress) {
                                    if (d.timeout && d.timestamp && b - d.timestamp > d.timeout) {
                                        h.remove(d.seed);
                                        continue
                                    }
                                    g = d.getProgress();
                                    if (100 <= g) {
                                        h.remove(d.seed);
                                        continue
                                    }
                                    d.span.innerHTML =
                                        (g >> 0) + "%"
                                }
                                0 === e % 10 && d.messageAnimate && (d.element.innerHTML = d._message + d.messageAnimate[e / 10 % d.messageAnimate.length])
                            }
                        }
                        c || h.stop();
                        if (isFinite(h.percent)) h.meterContainer.style.display = "", h.meter.style.width = h.percent + "%";
                        else {
                            h.meterContainer.style.display = "none";
                            u.save();
                            u.clearRect(0, 0, r * t, r * t);
                            u.scale(t, t);
                            u.translate(r / 2, r / 2);
                            b = 360 - 360 / q;
                            for (c = 0; c < q; c++) {
                                d = 2 * (c / q) * a + s;
                                u.save();
                                u.translate(p * Math.sin(-d), p * Math.cos(-d));
                                u.rotate(d);
                                var d = -f.lineWidth / 2,
                                    e = f.lineWidth,
                                    g = f.lineHeight,
                                    k = e / 2;
                                u.beginPath();
                                u.moveTo(d + k, 0);
                                u.lineTo(d + e - k, 0);
                                u.quadraticCurveTo(d + e, 0, d + e, 0 + k);
                                u.lineTo(d + e, 0 + g - k);
                                u.quadraticCurveTo(d + e, 0 + g, d + e - k, 0 + g);
                                u.lineTo(d + k, 0 + g);
                                u.quadraticCurveTo(d, 0 + g, d, 0 + g - k);
                                u.lineTo(d, 0 + k);
                                u.quadraticCurveTo(d, 0, d + k, 0);
                                u.fillStyle = "hsla(" + c / (q - 1) * b + ", 100%, 50%, 0.85)";
                                u.fill();
                                u.restore()
                            }
                            u.restore();
                            s += 0.07
                        }
                    };
                if (!1 === f.display) return this;
                this.start();
                return this
            }
        }
    };
    var c = function (a, b) {
        return "\t\t-webkit-transition-property: " + a + ";\t\t-webkit-transition-duration: " + b + "ms;\t\t-moz-transition-property: " +
            a + ";\t\t-moz-transition-duration: " + b + "ms;\t\t-o-transition-property: " + a + ";\t\t-o-transition-duration: " + b + "ms;\t\t-ms-transition-property: " + a + ";\t\t-ms-transition-duration: " + b + "ms;"
    }, b = function (a) {
            if (window.innerWidth && window.innerHeight) var b = window.innerWidth,
            c = window.innerHeight;
            else "CSS1Compat" === document.compatMode && document.documentElement && document.documentElement.offsetWidth ? (b = document.documentElement.offsetWidth, c = document.documentElement.offsetHeight) : document.body && document.body.offsetWidth &&
                (b = document.body.offsetWidth, c = document.body.offsetHeight);
            a && (b = a.offsetWidth);
            return {
                width: b,
                height: c
            }
        }
})();
"undefined" === typeof widget && (widget = {});
widget.Range = function (a) {
    function g(a) {
        var b = [];
        if (!a) return [];
        for ("number" === typeof a ? a = [a] : "string" === typeof a && (a = -1 !== a.indexOf(",") ? a.split(",") : a.split(" ")); a.length;) {
            var d = parseFloat(a.shift());
            b.push(d)
        }
        return b
    }

    function d(a, b) {
        return "number" === typeof a ? a : "NaN" === String(parseFloat(a)) ? b : parseFloat(a)
    }
    return function (a) {
        var b = this,
            f = a.onchange;
        this.target = a.target;
        this.setValue = function (a, c) {
            1 === b.thumbs.length && "undefined" === typeof c && (c = a, a = 0);
            b.thumbs[a].value = c;
            b.update(a, "set")
        };
        this.target &&
            (this.target.onchange && (f = this.target.onchange), this.target.setValue = this.setValue, a.value = this.target.value, a.min = this.target.getAttribute("min"), a.max = this.target.getAttribute("max"), a.step = this.target.getAttribute("step"));
        this.value = g(a.value, 0);
        this.min = d(a.min, 0);
        this.max = d(a.max, 100);
        this.step = d(a.step, 1);
        this.thumbs = [];
        this.format = a.format;
        !0 === a.canCross ? (this.canCross = !0, this.canPush = !1) : !1 === a.canPush ? this.canPush = this.canCross = !1 : (this.canCross = !1, this.canPush = !0);
        if ("object" !== typeof a.css &&
            (a.css = {}, a.className ? (a.css.slider = "", a.css.thumb = "") : (a.css.slider = "background: #000 -webkit-radial-gradient(45px 45px, cover, rgb(0, 0, 0) 0%, rgb(255, 255, 255) 100%); border: 1px solid #000; border-radius: 25px; width: 500px; height: 40px; top: 0; position: relative; z-index: 100", a.css.thumb = "background: #fff -webkit-radial-gradient(45px 45px, cover, rgb(0, 100, 255) 0%, rgb(255, 255, 255) 100%); border: 2px solid rgba(0,100,255,1); top: -2px; border-radius: 25px; width: 40px; height: 40px; position: absolute;"),
                sketch.generate && sketch.generate.rangeBar)) {
            var h = sketch.generate.rangeBar(a.gradient);
            a.css.slider += "background-image: url(" + h + ");"
        }
        for (var e = document.createElement("div"), l = 0, m = this.value.length, h = 0; h < m; h++) {
            var k = document.createElement("div");
            e.appendChild(k);
            this.thumbs.push({
                index: h,
                element: k,
                left: 0,
                value: this.value[h]
            })
        }
        if (2 === m) {
            var q = document.createElement("div");
            q.className = "rangeSpan";
            e.appendChild(q);
            var p = document.createElement("div");
            p.className = "rangeSpan";
            p.style.display = "none";
            e.appendChild(p)
        }
        this.element =
            e;
        this.setup = function () {
            e.className = a.className;
            e.style.cssText = a.css.slider;
            e.style.width = "236px";
            for (var b = 0; b < m; b++) this.thumbs[b].element.style.cssText = a.css.thumb
        };
        this.setAnimate = function (b, d) {
            var e = this.thumbs[b].element,
                f = e.style.left;
            e.style.cssText = a.css.thumb + (d ? "-webkit-transition: top, left 0.1s;     -moz-transition: top, left 0.1s;       -o-transition: top, left 0.1s;          transition: top, left 0.1s;" : "");
            e.style.left = f
        };
        this.update = function (d, g) {
            var h = b.thumbs[d || 0],
                k = h.element,
                l = e.offsetWidth || 236,
                w = k.offsetWidth || 10,
                v = Math.max(0, Math.min(l - w, (h.value - b.min) / (b.max - b.min) * (l - w))),
                w = w / 2;
            if (this.canPush) {
                var x = v + w;
                if (x < h.left)
                    for (var A = h.index - 1; - 1 < A; A--) {
                        var C = this.thumbs[A];
                        C.left > x && (C.element.style.cssText = a.css.thumb, C.element.style.left = Math.round(v) + "px", C.left = x, C.value = h.value, b.state = g || "change", f(b, C))
                    } else
                        for (A = h.index + 1; A < m; A++) C = this.thumbs[A], C.left < x && (C.element.style.cssText = a.css.thumb, C.element.style.left = Math.round(v) + "px", C.left = x, C.value = h.value, b.state =
                            g || "change", f(b, C));
                k.style.left = Math.round(v) + "px";
                h.left = x
            } else if (this.canCross) k.style.left = Math.round(v) + "px", h.left = v + w;
            else {
                x = v + w;
                if (x < h.left)
                    for (A = h.index - 1; - 1 < A; A--) {
                        if (C = this.thumbs[A], C.left > x) {
                            v = C.left - w;
                            x = C.left;
                            C.value = h.value;
                            b.state = g || "change";
                            f(b, C);
                            break
                        }
                    } else
                        for (A = h.index + 1; A < m; A++)
                            if (C = this.thumbs[A], C.left < x) {
                                v = C.left - w;
                                x = C.left;
                                C.value = h.value;
                                b.state = g || "change";
                                f(b, C);
                                break
                            }
                k.style.left = Math.round(v) + "px";
                h.left = x
            }
            b.state = g || "change";
            f(b, h);
            2 === m && (h = b.thumbs[0].left, k = b.thumbs[1].left,
                h <= k ? (q.style.left = Math.min(h, k) + "px", q.style.width = Math.abs(h - k) + "px", p.style.display = "none") : (q.style.left = "0px", q.style.width = k + "px", p.style.left = h + "px", p.style.width = l - h + "px", p.style.display = "block"))
        };
        this.wheel = function (a, c) {
            var d = b.thumbs[0],
                e = (d.value - b.min) / (b.max - b.min),
                e = Math.min(1, Math.max(0, e - c.wheelDelta / 5E3));
            d.value = e * (b.max - b.min) + b.min;
            b.update(0, c.state)
        };
        this.mousedown = function (a, c) {
            for (var d = Event.proxy.getCoord(a), f = Event.proxy.getBoundingBox(e), g = Infinity, h, d = d.x - f.x1, f = 0; f <
                m; f++) {
                var k = b.thumbs[f],
                    p = k.left - d,
                    q = Math.abs(p);
                if (0 > p && q <= g || -1 < p && q < g) g = q, h = k
            }
            if (h) {
                var C = h.element,
                    D = h.index;
                C.style.zIndex = ++l;
                Event.proxy.drag({
                    event: a,
                    target: e,
                    position: "relative",
                    listener: function (a, d) {
                        var f = e.offsetWidth;
                        b.setAnimate(D, "move" !== d.state);
                        var g = C.offsetWidth,
                            f = Math.max(0, Math.min(f - g, d.x - g / 2)) / (f - g);
                        "down" === d.state ? (Event.blur(), Event.cancel(a), g = "start") : "up" === d.state ? (Event.cancel(a), g = "end") : (Event.cancel(a), g = "change");
                        h.value = f * (b.max - b.min) + b.min;
                        b.update(D, g);
                        c &&
                            c(d)
                    }
                })
            }
        };
        Event.add(e, "wheel", this.wheel);
        Event.add(e, "mousedown", this.mousedown);
        this.target && this.target.parentNode && (this.target.parentNode.insertBefore(e, this.target), this.target.style.display = "none");
        this.setup();
        setTimeout(function () {
            for (var a = m - 1; - 1 < a; a--) b.setAnimate(a, !0), b.update(a, "load"), b.state = "load"
        }, 1);
        return this
    }
}({});
"undefined" === typeof widget && (widget = {});
widget.Thumbnailer = function (a) {
    var g = {
        background: "",
        width: 300,
        height: 100,
        useCache: !0,
        center: !0,
        crop: "edge",
        src: "path.to.image"
    };
    return a = function (a) {
        var c = this;
        a || (a = {});
        for (var b in g) "undefined" === typeof a[b] && (a[b] = g[b]);
        this.images = {};
        this.conf = a;
        this.height = a.height;
        this.width = a.width;
        this.generate = function (b) {
            "string" === typeof b && (b = {
                src: b
            });
            var g, e = b.src,
                l = b.canvas,
                m = "undefined" !== typeof FlashCanvas,
                k;
            for (k in b) a[k] = b[k];
            var q = isFinite(b.useCache) ? b.useCache : a.useCache,
                p = isFinite(b.center) ?
                    b.center : a.center,
                r = (b.crop || a.crop).toLowerCase(),
                t = isFinite(b.croparea) ? b.croparea : a.croparea,
                s = b.background || a.background;
            "none" === s && (s = "");
            var u = isFinite(b.width) ? b.width : a.width,
                y = isFinite(b.height) ? b.height : a.height,
                w = b.onload || a.onload;
            t && t.length && (t = {
                x1: t[0],
                y1: t[1],
                x2: t[2],
                y2: t[3]
            });
            if ("undefined" === typeof l)
                if (q && this.images[e]) l = this.images[e].canvas;
                else if (l = document.createElement("canvas"), "undefined" !== typeof Event && Event.add) {
                var v = {};
                for (k in a) "function" === typeof a[k] && (v[k] = a[k]);
                for (k in b) "function" === typeof b[k] && (v[k] = b[k]);
                Event.add(l, v)
            }
            var x = l.getContext("2d");
            b = function () {
                if (g.width || g.height) {
                    t || (t = {
                        x1: 0,
                        y1: 0,
                        x2: g.width,
                        y2: g.height
                    });
                    var a = t.x1 || 0,
                        b = t.y1 || 0,
                        c = t.x2 - t.x1 || u,
                        d = t.y2 - t.y1 || y;
                    "auto" === u ? (l.height = y, l.width = u = c / d * y) : (l.height = "auto" === y ? y = d / c * u : y, l.width = u);
                    var e = 1,
                        f = 0,
                        k = 0;
                    "none" !== r && (e = u / y < c / d, e = (f = "fit" === r) && e || !f && !e ? y / d : u / c);
                    d = Math.round(t.x2 * e) || 1;
                    c = Math.round(t.y2 * e) || 1;
                    f = Math.round(p ? (u - d) / 2 : 0);
                    k = Math.round(p ? (y - c) / 2 : 0);
                    l.width = u;
                    l.height = y;
                    x.save();
                    x.beginPath();
                    x.rect(0, 0, u, y);
                    s && (x.fillStyle = s, x.fill());
                    x.translate(f, k);
                    x.scale(e, e);
                    x.drawImage(g, -a / 2, -b / 2);
                    x.restore()
                }
                w && w(l, g)
            };
            k = String(e);
            "[object HTMLImageElement]" === k || "[object HTMLCanvasElement]" === k || m && "[object]" === k ? (g = e, b()) : q && this.images[e] ? (g = this.images[e], b()) : (l.src = e, g = new Image, c.images[e] = g, c.images[e].canvas = l, m ? (g.src = e, x.loadImage(g, b)) : (g.onload = b, g.src = e));
            return l
        };
        this.regenerate = function (a, b) {
            for (var c in this.images) thumb.generate({
                src: c,
                canvas: this.images[c].canvas
            })
        };
        return this
    }
}({});
if ("undefined" !== typeof module && module.exports && (module.exports = widget.Thumbnailer, "undefined" === typeof document)) {
    var canvas = require("canvas");
    document = {
        createElement: function () {
            return new canvas
        }
    };
    Image = canvas.Image
}
"undefined" === typeof widget && (widget = {});
widget.Uploader = function (a) {
    var g = this;
    a = a || {};
    this.debug = !1;
    this.action = a.action || "./filemanager.php?upload=true";
    this.confirm = a.confirm || "text";
    this.onUpload = a.onUpload || a.onupload;
    this.onProgress = a.onProgress || a.onprogress;
    this.onLoad = a.onLoad || a.onload;
    this.onInputReady = a.onInputReady || a.oninputready;
    this.onError = a.onError || a.onerror;
    this.onAbort = a.onAbort || a.onabort;
    this.onChangeDefault = this.onChange = a.onChange || a.onchange;
    this.mode = a.mode || "read";
    this.maxFiles = a.maxFiles || 1;
    this.maxFileSize =
        a.maxFileSize || 104857600;
    this.directory = a.directory || !1;
    "object" === typeof a.fakeInput ? (this.fakeInput = a.fakeInput, this.fakeInputParent = a.fakeInputParent || null) : "object" === typeof a.fileInput && (this.fileInput = a.fileInput);
    this.dropAreaContainer = a.dropArea || document.body;
    this.dropAreaMessage = a.dropAreaMessage || "Drop File(s) Here";
    this.dropAreaStyle = a.dropAreaStyle || "";
    this.files = {};
    this.filesByName = {};
    this.filesByPath = {};
    this.formats = {};
    var d = (a.formats || "jpg,jpeg,gif,png").split(",");
    for (a = 0; a < d.length; a++) this.formats[d[a].trim().toLowerCase()] = !0;
    this.createFileInput = function (a) {
        a = a || {};
        var b = a.element || a,
            c = b && b.parentNode;
        if (c) {
            if ("fakeInputContainer" === c.className) return;
            g.fakeInput = b;
            g.fileInput = null
        }
        if (g.fileInput) var e = g.fileInput;
        else if (g.fakeInput) {
            e = g.fileInput = document.createElement("input");
            e.style.cssText = "position: absolute; top: 0; z-index: 1000; font-size: 1000px; text-align: right; width: inherit; height: inherit; cursor: pointer; right: 0; filter: alpha(opacity: 0); opacity: 0;";
            var h = function (a, b) {
                g.onChange = g.onChangeDefault ||
                    g.onChange;
                Event.remove(document.body, "focus", h)
            };
            Event.add(e, "mousedown", function (b) {
                g.onChange = a.onChange || g.onChange
            });
            Event.add(e, "click", function (a, b) {
                Event.add(document.body, "focus", h)
            });
            d.length && globalExists("chrome.fileSystem.chooseEntry") ? Event.add(e, "click", function (a) {
                chrome.fileSystem.chooseEntry({
                    type: "openFile",
                    accepts: [{
                        extensions: d
                    }]
                }, function (b) {
                    b && b.file(function (b) {
                        f([b], a)
                    })
                })
            }) : e.setAttribute("type", "file");
            1 < g.maxFiles ? (e.setAttribute("name", "files[]"), e.setAttribute("multiple",
                "multiple")) : e.setAttribute("name", "file");
            g.directory && (e.setAttribute("directory", ""), e.setAttribute("mozdirectory", ""), e.setAttribute("webkitdirectory", ""));
            var k = {
                A: !0,
                SPAN: !0
            }, l = g.fakeInput,
                m = g.fakeInputContainer = document.createElement("div"),
                c = g.fakeInputParent || l.parentNode;
            m.className = "fakeInputContainer";
            m.style.cssText = "position: relative; overflow: hidden; z-index: 0;";
            l.style.cssText && (m.style.cssText += l.style.cssText);
            k[l.nodeName] && (m.style.display = "inline-block");
            var q = !0,
                b = function () {
                    q &&
                        (q = !1, g.fakeInputParent ? g.fakeInputParent.appendChild(m) : l.parentNode.replaceChild(m, l), m.appendChild(l), m.appendChild(e));
                    var a = dom.select(l).getMetrics(),
                        b = a.width,
                        a = a.height;
                    !k[l.nodeName] && (b && a) && (m.style.width = b + "px", m.style.height = a + "px");
                    if (g.onInputReady) g.onInputReady()
                }, c = dom.select(l).getMetrics(),
                A = c.height;
            c.width || A ? b() : window.setTimeout(b, 250)
        }
        this.initFileInput(e)
    };
    this.initFileInput = function (a) {
        a && (a.onchange = function (b) {
            if (a.files && a.files.length) f(b.target.files, b, function () {
                a.value =
                    ""
            });
            else {
                var c = a.value,
                    d = c.replace(/\\/g, "/").replace(/.*\//, "");
                f([{
                    src: c,
                    name: d
                }], b)
            }
        })
    };
    var c = document.createElement("form");
    c.style.cssText = "z-index: 999999999; background: rgba(0,200,0, 0.5); position: fixed; width: 100%; height: 100%; left: 0; top: 0; display: none; font-weight: bold; font-size: 2.5em; color: #fff; line-height: 6em; text-align: center; text-shadow: 0 0 15px #000;";
    this.createDropArea = function (a) {
        var b = !! a;
        a = a || this.dropAreaContainer;
        g.dropAreaStyle && (c.style.cssText += g.dropAreaStyle);
        c.innerHTML = g.dropAreaMessage;
        c.onclick = function () {
            c.style.display = "none"
        };
        c.ondragenter = function (a) {
            a.preventDefault();
            a.stopPropagation();
            return !1
        };
        c.ondragover = function (a) {
            a.preventDefault();
            a.stopPropagation();
            return !1
        };
        c.ondrop = function (a) {
            a.preventDefault();
            a.stopPropagation();
            c.style.display = "none";
            var b = a.dataTransfer;
            "undefined" !== typeof b && ("undefined" !== typeof b.items ? new q(b.items, function (b) {
                b.length && f(b, a)
            }) : "undefined" !== typeof b.files && (b = b.files, 0 !== b.length && f(b, a)))
        };
        c.ondragleave =
            function (a) {
                a.preventDefault();
                a.stopPropagation();
                setTimeout(function () {
                    c.style.display = "none"
                }, 100)
        };
        a === window && (a = document.body);
        b || a.appendChild(c);
        a.ondragenter = function (a) {
            "undefined" !== typeof a.dataTransfer && "undefined" !== typeof a.dataTransfer.files && setTimeout(function () {
                c.style.display = "block"
            }, 10)
        };
        a === document.body && (window.onresize = function (a) {
            window.innerWidth && window.innerHeight && (c.style.width = window.innerWidth + "px", c.style.height = window.innerHeight + "px")
        })()
    };
    var b = {
        length: 0
    }, f = function (a,
            c, d) {
            if (g.onProgress) g.onProgress({
                transferPercent: 0
            }, c);
            var e = 0,
                f = function (a, b) {
                    b.src && (b = [b]);
                    for (var c in b) {
                        var d = g.files[c],
                            e = b[c];
                        d.src = e.src;
                        d.size = e.size;
                        d.type = e.type;
                        d.name = e.name
                    }
                    l()
                }, h = {
                    jpg: !0,
                    jpeg: !0,
                    gif: !0,
                    png: !0
                }, k = function (a) {
                    var b = a.hash;
                    if (a.type && !h[a.type.substr(6).toLowerCase()]) {
                        var c = new FileReader;
                        c.onload = function (a) {
                            g.files[b].src = a.target.result;
                            g.files[b].isRead = !0;
                            return l()
                        };
                        c.readAsText(a)
                    } else try {
                        var d = (window.URL || window.webkitURL).createObjectURL(a);
                        g.files[b].src =
                            d;
                        g.files[b].isRead = !0;
                        return l()
                    } catch (e) {
                        try {
                            c = new FileReader, c.onload = function (a) {
                                g.files[b].src = a.target.result;
                                g.files[b].isRead = !0;
                                return l()
                            }, c.readAsDataURL(a)
                        } catch (k) {
                            a.upload = new g.upload({
                                file: a,
                                onUpload: f
                            })
                        }
                    }
                }, l = function (a) {
                    a ? m() : setTimeout(m, 30)
                }, m = function () {
                    if (g.onProgress) g.onProgress({
                        transferPercent: 100 * (e / a.length) >> 0
                    }, c);
                    var h = a[e];
                    if (++e > g.maxFiles || !h) {
                        d && d();
                        if (g.onLoad) g.onLoad();
                        if (1 === g.maxFiles) {
                            if ("undefined" === typeof a[0]) {
                                if (g.onError) g.onError(g, "UPLOAD_ERR_FORMAT");
                                return
                            }
                            g.file = a[0];
                            return g.onChange(g, c)
                        }
                        for (var m in g.files);
                        return g.files[m] ? g.onChange(g, c) : void 0
                    }
                    m = h.name || h.fileName || "";
                    var q = h.path || m,
                        y = m.substr(m.lastIndexOf(".") + 1).toLowerCase(),
                        x = g.createFileHash(h),
                        G = g.files[x];
                    if (G && (g.changedFiles[x] = G, g.changedFilesByName[m] = G, g.changedFilesByPath[q] = G, "upload" === g.mode && G.isUploaded || "read" === g.mode && G.isRead)) return l(!0);
                    b[x] = b.length++;
                    if (!g.formats[y]) {
                        if (g.onError) g.onError(g, "UPLOAD_ERR_FORMAT");
                        return l(!0)
                    }
                    y = h.fileSize || h.size;
                    if (0 ===
                        y) {
                        if (g.onError) g.onError(g, "UPLOAD_ERR_NO_FILE");
                        return l(!0)
                    }
                    if (y && y > g.maxFileSize) {
                        if (g.onError) g.onError(g, "UPLOAD_ERR_FORM_SIZE");
                        return l(!0)
                    }
                    h.hash = x;
                    g.files[x] = h;
                    g.filesByName[m] = h;
                    g.filesByPath[q] = h;
                    g.changedFiles[x] = h;
                    g.changedFilesByName[m] = h;
                    g.changedFilesByPath[q] = h;
                    if ("upload" === g.mode) h.upload = new g.upload({
                        file: h,
                        onUpload: f
                    });
                    else if ("read" === g.mode) k(h);
                    else return l(!0)
                };
            g.changedFiles = {};
            g.changedFilesByName = {};
            g.changedFilesByPath = {};
            l()
        };
    this.createFileHash = function (a) {
        var b = {};
        b.name = a.name || a.fileName;
        b.src = a.src;
        b.size = a.size || a.fileSize;
        b.type = a.type;
        a = JSON.stringify(b);
        for (var b = 5381, c = 0, d = a.length; c < d; c++) var e = a.substr(c, 1).charCodeAt(),
        b = (b << 5) + b + e;
        return b
    };
    this.setLanguage = function (a) {
        for (var b in a) this.translation[b] = a[b]
    };
    this.translation = {
        UPLOAD_ERR_INI_SIZE: "The uploaded file exceeds the upload_max_filesize directive",
        UPLOAD_ERR_FORM_SIZE: "The uploaded file exceeds the MAX_FILE_SIZE directive",
        UPLOAD_ERR_PARTIAL: "The uploaded file was only partially uploaded",
        UPLOAD_ERR_NO_FILE: "No file was uploaded",
        UPLOAD_ERR_NO_TMP_DIR: "Missing a temporary folder",
        UPLOAD_ERR_CANT_WRITE: "Failed to write file to disk",
        UPLOAD_ERR_EXTENSION: "A PHP extension stopped the file upload",
        UPLOAD_ERR_FORMAT: "The uploaded file was an invalid format",
        UPLOAD_ERR_XHTTP: ""
    };
    this.upload = function (a) {
        this.onAbort = a.onAbort;
        this.onUpload = a.onUpload;
        this.onProgress = a.onProgress;
        this.action = a.action || g.action;
        this.confirm = a.confirm || g.confirm;
        this.files = 0 === String(a.file).indexOf("[object") ? [a.file] : a.files;
        this.bytes = this.timeLapse = this.timeRemaining = this.transferPercent = this.transferTotal = this.transferSpeed = 0;
        if (g.onUpload) g.onUpload(this);
        window.FormData ? e(this, a.onUpload) : l(this, a.onUpload)
    };
    var h = function (a, b) {
        var c = Object.prototype.toString.call(a);
        "[object Object]" === c && a.src && (c = "");
        switch (c) {
        case "[object Array]":
            for (var c = 0, d = a.length; c < d; c++) b(a[c]);
            break;
        case "[object Object]":
            for (d in a) b(a[d], d);
            break;
        default:
            b(a)
        }
    }, e = function (a, b) {
            if ("[object Blob]" === String(a.files)) var c =
                a.files;
            else c = new FormData, h(a.files, function (a, b) {
                if ("undefined" !== typeof a.data) c.append(b || a.name || a.fileName, a.data);
                else if (a.src && "data:" === a.src.substr(0, 5)) {
                    var d = JSON.stringify(a);
                    c.append(b || a.name || a.fileName, d)
                } else c.append(b || a.hash, a)
            });
            var d = new XMLHttpRequest;
            d.upload.onprogress = function (b) {
                if (b.lengthComputable) {
                    var c = b.loaded;
                    a.transferPercent = Math.round(100 * c / b.total);
                    a.transferTotal = m(c);
                    var d = 2 * (c - a.bytes);
                    0 !== d && (a.bytes = c, a.transferSpeed = m(d), a.timeRemaining = k((b.total - a.bytes) /
                        d), a.timeLapse = k(Date.now() - b.timeStamp));
                    if (a.onProgress) a.onProgress(a, b);
                    else if (g.onProgress) g.onProgress(a, b)
                } else a.transferSpeed = 0, a.transferTotal = 0, a.transferPercent = 0, a.timeRemaining = 0
            };
            d.onload = function (c) {
                "[object Blob]" !== String(a.files) && h(a.files, function (a, b) {
                    "undefined" === typeof a.date && (a.isUploaded = !0)
                });
                var d = c.target.responseText;
                if ("json" === a.confirm) try {
                    d = JSON.parse(d)
                } catch (e) {
                    console.log(c.target.responseText)
                }
                if (g.translation[d]) {
                    if (g.onError) g.onError(g, d)
                } else {
                    if (g.onLoad) g.onLoad(a,
                        d);
                    b && b(a, d)
                }
            };
            d.onerror = function (a) {
                if (g.onError) g.onError(g, "UPLOAD_ERR_XHTTP", a)
            };
            d.onabort = function (b) {
                if (g.onAbort) g.onAbort(a, "UPLOAD_ERR_XHTTP", b)
            };
            d.open("POST", a.action, !0);
            d.send(c)
        }, l = function (a, b) {
            var c = document.createElement("form");
            document.body.appendChild(c);
            var d = document.createElement("iframe");
            d.setAttribute("id", "upload_iframe");
            d.setAttribute("name", "upload_iframe");
            d.setAttribute("width", "0");
            d.setAttribute("height", "0");
            d.setAttribute("border", "0");
            d.setAttribute("style", "width: 0; height: 0; border: none;");
            var e = function () {
                try {
                    var e = d.contentDocument.body
                } catch (f) {
                    try {
                        e = d.contentWindow.document.body
                    } catch (k) {
                        e = d.document.body
                    }
                }
                if (e.innerHTML) {
                    h(a.files, function (a) {
                        "undefined" === typeof a.date && (a.isUploaded = !0)
                    });
                    e = e.innerHTML;
                    if ("json" === a.confirm) try {
                        e = JSON.parse(e)
                    } catch (l) {
                        console.log && console.log(e)
                    }
                    if (g.translation[e]) {
                        if (g.onError) g.onError(g, e)
                    } else {
                        if (g.onLoad) g.onLoad(a, e);
                        b && b(a, e)
                    }
                }
                setTimeout(function () {
                        c.parentNode && c.parentNode.removeChild(c);
                        g.fileInput.parent && g.fileInput.parent.appendChild(g.fileInput)
                    },
                    250)
            };
            d.addEventListener ? d.addEventListener("load", e, !0) : d.attachEvent && d.attachEvent("onload", e);
            c.appendChild(d);
            window.frames.upload_iframe.name = "upload_iframe";
            h(a.files, function (a, b) {
                if ("undefined" !== typeof a.data) {
                    var d = document.createElement("input");
                    d.type = "hidden";
                    d.value = a.data;
                    d.name = b || a.name || a.fileName
                } else a.src && "data:image/" === a.src.substr(0, 11) ? (d = document.createElement("input"), d.type = "hidden", d.value = JSON.stringify(a), d.name = b || a.name || a.fileName) : "string" === typeof a ? (d = document.createElement("input"),
                    d.type = "hidden", d.value = a, d.name = b) : (d = g.fileInput, d.parent = d.parentNode, d.name = b || a.hash);
                c.appendChild(d)
            });
            c.setAttribute("target", "upload_iframe");
            c.setAttribute("action", a.action);
            c.setAttribute("method", "post");
            c.setAttribute("enctype", "multipart/form-data");
            c.setAttribute("encoding", "multipart/form-data");
            c.submit()
        }, m = function (a) {
            return 1048576 < a ? Math.round(100 * a / 1048576) / 100 + "MB" : 1024 < a ? Math.round(a / 1024) + "KB" : a + "B"
        }, k = function (a) {
            var b = a / 3600 >> 0,
                c = (a - 3600 * b) / 60 >> 0;
            a = a - 3600 * b - 60 * c;
            10 > b &&
                (b = "0" + b);
            10 > c && (c = "0" + c);
            10 > a && (a = "0" + a);
            return b + ":" + c + ":" + a
        }, q = function (a, b, c) {
            c = isFinite(c) ? c : Infinity;
            var d = this;
            this.files = [];
            this.pending = 0;
            this.recurse = function (a, b, c) {
                this.pending++;
                if (!a) return d.runCallback();
                a.isFile ? a.file(function (a) {
                    a.path = b + a.name;
                    d.files.push(a);
                    d.runCallback()
                }) : a.isDirectory && a.createReader().readEntries(function (e) {
                    for (var f = 0; f < e.length; f++) d.recurse(e[f], b + a.name + "/", c + 1);
                    d.runCallback()
                })
            };
            this.runCallback = function () {
                --this.pending || b(this.files)
            };
            for (c = 0; c <
                a.length; c++)
                if (a[c].webkitGetAsEntry) {
                    var e = a[c].webkitGetAsEntry();
                    this.recurse(e, "", 0)
                }
            return this
        };
    this.dropAreaContainer && this.createDropArea();
    (this.fakeInput || this.fileInput) && this.createFileInput();
    return this
};
if ("undefined" === typeof zIndexGlobal) var zIndexGlobal = 100;
"undefined" === typeof widget && (widget = {});
widget = function (a) {
    var g = a.windows = [];
    g.focused = [];
    g.idToIdx = {};
    g.add = function (a, b, d, h) {
        var e = "function" === typeof b ? b : null;
        if ("string" === typeof a) a = {
            id: a,
            left: b,
            top: d,
            display: h
        };
        else if (a.id) "px" === a.format && (a.x = a.left, a.y = a.top, a.left /= window.innerWidth, a.top /= window.innerHeight);
        else {
            for (var l in a) b = a[l], b.id = l, g.add(b);
            g.restore();
            e && e();
            return
        }
        e = (a.position || "top left").split(" ");
        delete a.position;
        a.vAlign = e[0] || "top";
        a.hAlign = e[1] || "left";
        isFinite(h) && (h = h ? "block" : "none");
        g.idToIdx[a.id] =
            g.length;
        g.push(a);
        sketch.getItem(a.id, function (b) {
            b && (b = JSON.parse(b), "boolean" === typeof h && h ? b.display = "block" : h && (b.display = h), "NONE" === a.display && (b.display = "none"), "BLOCK" === a.display && (b.display = "block"), mergeObject(b, a))
        })
    };
    g.setCurrentTab = function (a, b) {
        a && b && (dom.setClassName({
            className: "selected",
            list: "div",
            target: document.querySelector("#" + a + " " + b)
        }), widget.windows.record({
            id: a,
            className: b
        }))
    };
    g.getWindowById = function (a) {
        a = g.idToIdx[a];
        return "undefined" === typeof a ? !1 : g[a]
    };
    g.record = function (a) {
        var b =
            g.getWindowById(a.id);
        if (b) {
            "undefined" !== typeof a.x && (b.x = a.x);
            "undefined" !== typeof a.y && (b.y = a.y);
            "undefined" !== typeof a.left && (b.left = a.left);
            "undefined" !== typeof a.top && (b.top = a.top);
            "undefined" !== typeof a.display && (b.display = a.display);
            "undefined" !== typeof a.index && (b.index = a.index);
            "undefined" !== typeof a.className && (b.className = a.className);
            var d = JSON.stringify(b);
            sketch.setItem(a.id, d);
            g.focusElement(a.id, b.display)
        }
    };
    g.restore = function () {
        var a = document.body.scrollTop,
            b = document.body.scrollLeft,
            f = window.innerWidth,
            h = window.innerHeight;
        d.element && g.setContainer(d.element);
        for (var e = [], l = {}, m = 0; m < g.length; m++) {
            var k = g[m],
                q = k.vAlign,
                p = k.hAlign,
                r = document.getElementById(k.id);
            if (r && r.style) {
                r.style.display = "block";
                var r = Event.proxy.getBoundingBox(r),
                    t = d[q || "top"],
                    s = d[p || "left"];
                k.objectBoundingBox && (k.x = 0.5 * f - r.width / 2, k.y = 0.5 * h - r.height / 2 + 20);
                var t = (isFinite(k.y) ? k.y : k.top * h) + t,
                    k = (isFinite(k.x) ? k.x : k.left * f) + s,
                    t = t + a,
                    k = k + b,
                    s = Math.min(t, h),
                    u = Math.min(k, f);
                l.BOTTOM = t + r.height - h;
                l.TOP = s - t;
                l.RIGHT =
                    k + r.width - f;
                l.LEFT = u - k;
                l[q] = Math.max(l[q] || 0, l[q.toUpperCase()]);
                l[p] = Math.max(l[p] || 0, l[p.toUpperCase()]);
                t -= Math.max(0, l.BOTTOM);
                k -= Math.max(0, l.RIGHT);
                e.push({
                    top: Math.max(d.y, t),
                    left: Math.max(d.x, k)
                })
            }
        }
        a = 100;
        for (m = 0; m < g.length; m++) k = g[m], k.display && !0 !== k.display || (k.display = "block"), (r = document.getElementById(k.id)) && r.style && (f = e[m], b = "bottom" === k.vAlign ? f.top - l.bottom : f.top + l.top, f = "right" === k.hAlign ? f.left - l.right : f.left + l.left, b = Math.ceil(b), f = Math.ceil(f), r.style.top = b + "px", r.style.left =
            f + "px", r.style.display = k.display || "block", r.style.zIndex = k.zIndexFixed || k.index || ++a, zIndexGlobal = Math.max(zIndexGlobal, k.index || 0), "block" === k.display && -1 === r.className.indexOf("opened") && (r.className += " opened"))
    };
    g.blink = function (a, b) {
        var d = document.getElementById(a);
        g.isOpen(d) || g.open(a);
        setTimeout(function () {
            d.blinking = !1
        }, 250);
        d.blinking ? b && b(!0) : (d.blinking = !0, d.className = (" " + d.className + " ").split(" blink ").join(" blink-stall ").trim(), setTimeout(function () {
            d.className = (" " + d.className +
                " ").split(" blink-stall ").join(" ").trim(); - 1 === d.className.indexOf("opened") ? g.open(a) : d.className += " blink";
            b && b(!0)
        }, 0))
    };
    g.open = function (a) {
        var b = document.getElementById(a);
        if (b) {
            -1 === (" " + b.className + " ").indexOf(" opened ") && (b.className = (b.className + " opened").trim());
            var d = g.getWindowById(a),
                d = d.zIndexFixed ? d.zIndexFixed : ++zIndexGlobal;
            b.style.display = "block";
            b.style.zIndex = d;
            b.style.opacity = 1;
            clearTimeout(b.interval);
            g.record({
                id: a,
                display: "block",
                index: d
            })
        }
    };
    g.focus = function (a) {
        var b =
            document.getElementById(a);
        if (b) {
            var d = g.getWindowById(a),
                d = d.zIndexFixed ? d.zIndexFixed : ++zIndexGlobal;
            b.style.zIndex = d;
            g.record({
                id: a,
                index: d
            })
        }
    };
    g.clearFocus = function () {
        g.focused = []
    };
    g.focusElement = function (a, b) {
        if ("none" !== b) {
            var d = g.focused.slice(-1)[0],
                h = " " + g.focused.join(" ") + " ";
            d !== a && -1 === h.indexOf(a) && g.focused.push(a)
        }
    };
    g.hasFocus = function () {
        return !!g.idToIdx[g.focused.slice(-1)[0]]
    };
    g.closeFocused = function () {
        var a = g.focused.pop();
        g.close(a)
    };
    g.close = function (a) {
        var b = document.getElementById(a);
        b.style.opacity = 0;
        b.className = (" " + b.className + " ").split(" opened ").join(" ").trim();
        b.interval = setTimeout(function () {
            b.style.opacity = 1;
            b.style.display = "none";
            g.record({
                id: a,
                display: "none"
            })
        }, 250)
    };
    g.isOpen = function (a) {
        "string" === typeof a && (-1 === a.indexOf("#") && (a = "#" + a), a = document.querySelector(a));
        if (a) return "none" === a.style.display ? !1 : -1 !== (" " + a.className + " ").indexOf(" opened ")
    };
    g.isClosed = function (a) {
        return !g.isOpen(a)
    };
    g.toggle = function (a, b) {
        var d, h = document.getElementById(a);
        if (!h) return console.log("missing",
            a);
        g.isOpen(h) ? (g.close(a), d = !1) : (g.open(a), g.restore(), d = !0);
        b && setTimeout(function () {
            b(d)
        }, 1)
    };
    var d = {
        x: 0,
        y: 0,
        left: 0,
        right: 0,
        top: 0,
        bottom: 0,
        vAlign: "top",
        hAlign: "left"
    };
    g.setClamp = function (a, b, f, h, e) {
        "object" === typeof a && (a.element && g.setContainer(a.element), e = a.format, h = a.height, f = a.width, b = a.y, a = a.x);
        d.x = a || null;
        d.y = b || null;
        d.width = f || null;
        d.height = h || null;
        d.format = e
    };
    g.setContainer = function (a) {
        var b = Event.proxy.getBoundingBox(a);
        d.element = a;
        d.metrics = b;
        d.left = b.x1;
        d.right = b.x2;
        d.top = b.y1;
        d.bottom =
            b.y2
    };
    g.drag = function (a, b) {
        var f = document.body.scrollTop,
            h = document.body.scrollLeft;
        return Event.proxy.drag({
            event: b,
            target: a,
            position: "move",
            listener: function (b, l) {
                Event.cancel(b);
                var m = Event.proxy.getBoundingBox(l.target),
                    k = m.border[0],
                    q = m.border[2];
                l.target.state = l.state;
                l.width = m.width;
                l.height = m.height;
                var m = d.x || 0,
                    p = d.y || 0,
                    r = d.width || window.innerWidth,
                    t = d.height || window.innerHeight;
                l.x + l.width > r && (l.x = r - l.width);
                l.x < m && (l.x = m);
                l.y + l.height > t && (l.y = t - l.height);
                l.y < p && (l.y = p);
                a.style.left = Math.ceil(l.x -
                    k) + "px";
                a.style.top = Math.ceil(l.y - q) + "px";
                p = g.getWindowById(a.id);
                "down" === l.state ? (k = p.zIndexFixed ? p.zIndexFixed : ++zIndexGlobal, a.style.zIndex = k) : "up" === l.state && (m = "bottom" === p.vAlign ? l.y - d.bottom : l.y - d.top - f, p = "right" === p.hAlign ? l.x - d.right : l.x - d.left - h, g.record({
                    id: a.id,
                    x: p - k,
                    y: m - q,
                    left: p / window.innerWidth,
                    top: m / window.innerHeight,
                    index: zIndexGlobal
                }), g.restore())
            }
        })
    };
    g.write = function (a) {
        sketch.ui.foxybox(a);
        (a = document.querySelector("#sketch-help .content")) && Event.proxy.wheelPreventElasticBounce(a);
        g.restore()
    };
    g.lazyloader = function (a) {
        a = document.querySelectorAll(a);
        for (var b = 0; b < a.length; b++) {
            var d = a[b];
            d.src = d.getAttribute("data-src");
            d.className = (" " + d.className + " ").replace(" lazy ", " ").trim()
        }
    };
    return a
}(widget);
"undefined" === typeof sketch && (sketch = {});
var sketch = function (a) {
    if (window.FlashCanvas) var g = window,
    d = "load";
    else g = "body", d = "ready";
    a.setup.sketchpad = function (b) {
        var c = "?debug" === window.location.search;
        a.peer.detectGetUserMedia() || dom.selectAll(".for-effect-mode").css("display", "none");
        globalExists("chrome.fileSystem.chooseEntry") && (dom.selectAll("#tool-menu-export").css("display", "none"), dom.selectAll(".export-project-cloud").css("display", "none"));
        a.construct({
            onready: b,
            container: "#sketchpad .content",
            configure: {
                lang: "en",
                defaultSketch: "sketch=new",
                prefix: "sketch-src",
                background: "transparent",
                defaultFill: {
                    type: "color"
                },
                fileName: "Drawing",
                fileDescription: "made with Sketchpad - https://sketch.io/sketchpad",
                fileFormat: "sketch"
            },
            icons: {
                brushes: {
                    arrow: "./media/ux/tools/Brush_Arrow.png",
                    calligraphy: "./media/ux/tools/Brush_Calligraphy.png",
                    crayon: "./media/ux/tools/Brush_Crayon.png",
                    paintbrush: "./media/ux/tools/Brush_Paintbrush.png",
                    pencil: "./media/ux/tools/Brush_Pencil.png",
                    spraypaint: "./media/ux/tools/Brush_Spraypaint.png",
                    streamer: "./media/ux/tools/Brush_Streamer.png",
                    chrome: "./media/ux/tools/Brush_Chrome.png",
                    fur: "./media/ux/tools/Brush_Fur.png",
                    sketchy: "./media/ux/tools/Brush_Sketchy.png",
                    web: "./media/ux/tools/Brush_Web.png",
                    spirograph: "./media/ux/tools/Brush_Spirograph.png"
                },
                shapes: {
                    square: "./media/ux/tools/Shape_Rectangle.png",
                    circle: "./media/ux/tools/Shape_Ellipse.png",
                    regularPolygon: "./media/ux/tools/Shape_Polygon.png",
                    triangle: "./media/ux/tools/Shape_Polygon.png",
                    star: "./media/ux/tools/Shape_Star.png",
                    burst: "./media/ux/tools/Shape_Burst.png",
                    gear: "./media/ux/tools/Shape_Gear.png",
                    radialBurst: "./media/ux/tools/Shape_Radial_Burst.png",
                    spiral: "./media/ux/tools/Shape_Spiral.png"
                }
            },
            feature: {
                log: c,
                debug: c,
                preventScroll: !c,
                canvas: {
                    infinite: !0,
                    scaleContainer: !0,
                    clearWithBackground: !0,
                    usePointInPath: !1,
                    usePointInBoundingBox: !0,
                    usePointInImageData: !0,
                    editable: !0,
                    cache257: !0,
                    cache: !0
                },
                ui: {
                    mediaSelect: !0
                },
                exportDrop: !0,
                hotkeys: "select text brush stamp shape floodfill clipart eraser camera".split(" "),
                history: {
                    vector: !0,
                    limit: INFINITY
                },
                tools: {
                    controls: {
                        ne: !0,
                        nw: !0,
                        se: !0,
                        sw: !0
                    },
                    drawBoundingBox: !0,
                    usePointInPath: !1,
                    usePointInBoundingBox: !0,
                    usePointInImageData: !0,
                    movable: !0
                },
                palette: {
                    eyeDropper: !0,
                    gradient: !0,
                    grid: !0
                },
                placement: {
                    drag: !0,
                    click: !1,
                    mediaClick: !1,
                    mediaDrag: !0,
                    maxWidth: 2048,
                    maxHeight: 2048,
                    minWidth: 1,
                    minHeight: 1
                },
                stream: {
                    audio: !1,
                    maxFileSize: 0,
                    video: !0,
                    videoAtop: !0,
                    sketch: !1,
                    sketchLive: !1,
                    tech: "RTCDataChannel",
                    text: !1
                },
                sync: {
                    folder: !0,
                    thumb: {
                        format: "png",
                        toBlob: !0,
                        suffix: "thumb",
                        compress: 1,
                        width: 480,
                        height: 480,
                        getBoundingBox: !1,
                        clampToLayer: !0,
                        center: !0,
                        crop: "fit"
                    }
                }
            },
            hosts: {
                localhost: {
                    pathWeb: "localhost/sketch.io/sketch-src/public/",
                    pathJS: "localhost/sketch.io/sketch-src/public/js/",
                    hostIO: "localhost:4000",
                    hostRTC: "localhost:3001",
                    alias: ["192.168.0.3", "mud.local"]
                },
                "spectra.nodejitsu.com": {
                    pathWeb: "spectra.nodejitsu.com/",
                    pathJS: "spectra.nodejitsu.com/js/",
                    pathGet: "spectra0.nodejitsu.com/get/",
                    pathSave: "spectra0.nodejitsu.com/save/",
                    hostIO: "spectra0.nodejitsu.com",
                    hostRTC: "spectra.nodejitsu.com"
                },
                "sketch.io": {
                    pathWeb: "sketch.io/",
                    pathJS: "sketch.io/js/",
                    pathGet: "sketch.io:4000/get/",
                    pathSave: "sketch.io:4000/save/",
                    hostIO: "sketch.io:4000",
                    hostRTC: "sketch.io",
                    alias: "spectra.mudcu.be"
                }
            }
        });
        widget.windows.setClamp({
            element: document.body,
            format: "px",
            x: a.canvas2d.bounds.x1 = 10,
            y: a.canvas2d.bounds.y1 = 40
        });
        widget.windows.add({
            sketchpad: {
                format: "px",
                display: "BLOCK",
                position: "top left",
                left: 0.5,
                top: 0.5,
                zIndexFixed: 1,
                objectBoundingBox: !0
            },
            "sketch-configure": {
                format: "px",
                display: "none",
                position: "top right",
                left: -258,
                top: 40
            },
            "sketch-open": {
                format: "%",
                display: "block",
                position: "top left",
                left: 0.5 - 260 / window.innerWidth,
                top: 0.5 - 112.5 / window.innerHeight
            },
            "sketch-palette": {
                format: "px",
                display: "none",
                position: "top left",
                left: 20,
                top: 40
            }
        }, function () {
            if (widget.windows.isOpen("sketch-open")) {
                var a = widget.windows.getWindowById("sketch-open");
                sketch.ui.openProjectWindow(a.className)
            }
        })
    };
    var c = {};
    a.display.toggle = function () {
        "effect" === a.display.mode ? a.display.sketchpad() : a.display.effect()
    };
    a.display.effect = function (b, d) {
        if (a.__enabled || d) a.display.effect.loaded || (a.display.effect.loaded = !0), a.display.mode = "effect", a.disable(), dom.selectAll("#toolbar .for-sketch-mode").css("display",
            "none"), c.tap && c.tap.remove(), c.keydown = Event.add(window, "keydown", a.keydown), c.keyup = Event.add(window, "keyup", a.keyup), a.$("#videos").style.display = "block", a.$("#filters").style.display = "block", a.$("#sketchpad").style.display = "none", a.rtc.arrange("single"), a.colorPalette && a.colorPalette.disable()
    };
    a.display.sketchpad = function (b) {
        !0 !== a.__enabled && (a.display.mode = "sketchpad", dom.selectAll("#toolbar .for-sketch-mode").css("display", ""), c.keydown && c.keydown.remove(), c.keyup && c.keyup.remove(), a.enable(),
            a.$("#filters").style.display = "none", a.$("#sketchpad").style.display = "block", a.feature.stream.videoAtop ? (a.$("#videos").style.display = "block", a.rtc.arrange("singleBottomRight")) : (a.$("#videos").style.display = "none", a.rtc.pause()))
    };
    Event.add(g, d, function () {
        a.loader = new widget.Loader;
        Vector.Text.attach({
            name: "Capriola",
            filename: "capriola/Capriola"
        });
        Vector.Text.attach({
            family: "FontAwesome",
            filename: "fontawesome/fontawesome",
            test: "\uf0c9"
        }, function () {
            document.body.className += " font-awesome-loaded"
        });
        glfx.loadFilters(function () {
            var b = 2,
                c = function (c) {
                    switch (c) {
                    case "sketch":
                        alertify.log("Welcome to Sketchpad!");
                        a.display.sketchpad();
                        a.feature.debug ? (a.run("select"), setTimeout(function () {}, 700)) : (c = a.actions.getLast() || {}, a.run(c.type || "streamer"), a.style.update(c));
                        c = parseUri(window.location.search).queryKey;
                        c.image && a.open.image({
                            src: c.image,
                            openAsNew: !0
                        });
                        setTimeout(function () {
                                dom.selectAll("#toolbar").css("display", "block");
                                dom.selectAll("#window-container").css("display", "block");
                                widget.windows.restore()
                            },
                            100);
                        break;
                    case "effect":
                        a.util.changeVideoFilter(1), a.rtc.pause()
                    }--b
                };
            a.setup.sketchpad(function () {
                c("sketch")
            });
            menyInit();
            Event.proxy.wheelPreventElasticBounce("#apps");
            Event.proxy.wheelPreventElasticBounce("#filters")
        })
    });
    return a
}(sketch),
    tests = function () {
        window.onload = function () {
            var a = {}, g = {};
            Leap.loop({
                enableGestures: !0
            }, function (d) {
                g = {};
                for (var c = 0; c < d.pointables.length; c++) g[d.pointables[c].id] = d.pointables[c];
                var b, c = window.innerHeight / 350,
                    f = window.innerWidth / 350,
                    h;
                for (h in g) {
                    b = a[h];
                    d =
                        g[h];
                    var e = d.tipPosition.x * f + window.innerWidth / 2 + sketch.project.scrollLeft,
                        l = -(d.tipPosition.y * c) + (window.innerHeight + 50) + sketch.project.scrollTop;
                    b ? -250 > d.tipPosition.z || 250 < d.tipPosition.z || (-250 > b.tipPosition.z || 250 < b.tipPosition.z) || (sketch.toolkit.brush.device && (b = Math.min(150, Math.max(1, -(d.tipPosition.z - 100))), sketch.toolkit.brush.device && (sketch.toolkit.brush.device.diameter.value = b), e -= b / 2, l -= b / 2), sketch.toolkit.brush.record({}, {
                        state: "move",
                        identifier: d.id,
                        x: e,
                        y: l
                    })) : sketch.toolkit.brush.record({}, {
                        state: "down",
                        identifier: d.id,
                        x: e,
                        y: l
                    })
                }
                for (h in a) g[h] || (d = a[h], e = d.tipPosition.x * f + window.innerWidth / 2 + sketch.project.scrollLeft, l = -(d.tipPosition.y * c) + (window.innerHeight + 50) + sketch.project.scrollTop, sketch.toolkit.brush.record({}, {
                    state: "up",
                    identifier: d.id,
                    x: e,
                    y: l
                }));
                a = g
            })
        };
        globalExists("chrome.permissions") && dom.selectAll("#tool-menu-export").css("display", "none")
    };
"undefined" === typeof sketch && (sketch = {});
"undefined" === typeof sketch.configure && (sketch.configure = {});
"undefined" === typeof sketch.configure.tools && (sketch.configure.tools = {});
sketch = function (a) {
    var g = a.vars;
    a.configure.tools.ellipse = {
        toolkit: "shape",
        type: "ellipse",
        composite: "paint",
        movement: "placement",
        fill: {
            type: "color",
            color: "fff000",
            gradient: "0,ffff5db1,0.5,ffef017c,1,ffef017c",
            mode: "radial",
            noise: !1
        },
        opacity: new g.clamp(100, 0, 100, "%")
    };
    a.configure.tools.rectangle = {
        toolkit: "shape",
        type: "rectangle",
        composite: "paint",
        movement: "placement",
        fill: {
            type: "gradient",
            color: "fff000",
            gradient: "0,ffff0000,0.25,ffffff00,0.5,ffffff00,0.75,ff00ff00,1,ff00ff00",
            mode: "radial",
            noise: !1
        },
        opacity: new g.clamp(100, 0, 100, "%")
    };
    a.configure.tools.regularPolygon = {
        toolkit: "shape",
        type: "regularPolygon",
        composite: "paint",
        movement: "placement",
        fill: {
            type: "gradient",
            color: "fff000",
            gradient: "0,ffff0000,0.25,ffffff00,0.5,ffffff00,0.75,ff00ff00,1,ff00ff00",
            mode: "radial",
            noise: !1
        },
        noise: !1,
        opacity: new g.clamp(100, 1, 100, "%"),
        sides: new g.clamp(5, 1, 25, "int")
    };
    a.configure.tools.gear = {
        toolkit: "shape",
        type: "gear",
        composite: "paint",
        movement: "placement",
        fill: {
            type: "gradient",
            color: "fff000",
            gradient: "0,ff2c539e,0.5,ff2c539e,1,ff2c539e",
            mode: "radial",
            noise: !1
        },
        opacity: new g.clamp(100, 1, 100, "%"),
        sides: new g.clamp(30, 2, 100, "int"),
        slope: new g.clamp(1.1, 0.0010, 1, "float")
    };
    a.configure.tools.star = {
        toolkit: "shape",
        type: "star",
        composite: "paint",
        movement: "placement",
        fill: {
            type: "gradient",
            color: "fff000",
            gradient: "0,ffcdeb8b,0.5,ffcdeb8b,1,ffcdeb8b",
            mode: "radial",
            noise: !1
        },
        opacity: new g.clamp(100, 1, 100, "%"),
        sides: new g.clamp(5, 2, 100, "int"),
        slope: new g.clamp(0.5, 1, 10, "float")
    };
    a.configure.tools.burst = {
        toolkit: "shape",
        type: "burst",
        composite: "paint",
        movement: "placement",
        fill: {
            type: "gradient",
            color: "fff000",
            gradient: "0,ff9c2224,0.09,ffc42d25,0.18,ffc42d25,0.255,ffe23f30,0.33,ffe23f30,0.415,ffef5d41,0.5,ffef5d41,0.55,fff38d4e,0.6,fff38d4e,0.67,fff59a3a,0.74,fff59a3a,0.815,fffabf58,0.89,fffabf58,0.945,fffccfa0,1,fffccfa0",
            mode: "radial",
            noise: !1
        },
        opacity: new g.clamp(100, 1, 100, "%"),
        sides: new g.clamp(5, 2, 100, "int"),
        slope: new g.clamp(0.0010, 0.0010, 10, "float")
    };
    a.configure.tools.radialBurst = {
        toolkit: "shape",
        type: "radialBurst",
        composite: "paint",
        movement: "placement",
        fill: {
            type: "gradient",
            color: "fff000",
            gradient: "0,ff9c2224,0.09,ffc42d25,0.18,ffc42d25,0.255,ffe23f30,0.33,ffe23f30,0.415,ffef5d41,0.5,ffef5d41,0.55,fff38d4e,0.6,fff38d4e,0.67,fff59a3a,0.74,fff59a3a,0.815,fffabf58,0.89,fffabf58,0.945,fffccfa0,1,fffccfa0",
            mode: "radial",
            noise: !1
        },
        opacity: new g.clamp(100, 1, 100, "%"),
        sides: new g.clamp(12, 1, 100, "int"),
        spread: new g.clamp(0.5, -1, 1, "float")
    };
    a.configure.tools.spiral = {
        toolkit: "shape",
        type: "spiral",
        composite: "paint",
        movement: "placement",
        fill: {
            type: "gradient",
            color: "fff000",
            gradient: "0,ff607e80,0.25,ff9fd962,0.5,ff9fd962,0.75,fff3fa58,1,fff3fa58",
            mode: "radial",
            noise: !1
        },
        opacity: new g.clamp(100, 1, 100, "%"),
        sides: new g.clamp(10, 1, 50, "int"),
        coils: new g.clamp(1, 1, 10, "int"),
        spread: new g.clamp(25, 0.5, 50, "%")
    };
    a.configure.tools.supershape = {
        toolkit: "shape",
        type: "supershape",
        composite: "paint",
        movement: "placement",
        fill: {
            type: "gradient",
            color: "ff0000",
            gradient: "0,ff15aeeb,0.3333333,ff8157ba,0.50818891461434,ffed008a,0.6717635,fff47961,1,fffbf239",
            mode: "radial",
            noise: !1
        },
        opacity: new g.clamp(100, 1, 100, "%"),
        points: new g.clamp(500, 50, 1E3, "int"),
        m: new g.clamp(39, 0.1, 50, "int"),
        n1: new g.clamp(1, 0.1, 15, "float"),
        n2: new g.clamp(0.9, 0.1, 15, "float"),
        n3: new g.clamp(0.25, 0.1, 15, "float")
    };
    a.configure.tools.text = {
        toolkit: "text",
        type: "text",
        composite: "paint",
        fontWeight: "normal",
        fontSize: new g.clamp(30, 1, 120, "float"),
        fontFamily: "Arial",
        fontVariant: "normal",
        fontStyle: "normal",
        lineHeight: 1,
        letterSpacing: 0,
        textAlign: "center",
        textDecoration: "none",
        textTransform: "none",
        fill: {
            type: "color",
            color: "0085c8",
            gradient: "0,ff15aeeb,0.3333333,ff8157ba,0.50818891461434,ffed008a,0.6717635,fff47961,1,fffbf239"
        },
        opacity: new g.clamp(100, 1, 100, "%")
    };
    a.configure.tools.image = {
        toolkit: "media",
        type: "image",
        composite: "paint",
        src: "./media/stamp/Basic/0-live.png",
        exposure: {
            id: "Exposure->Exposure",
            type: "ColorMatrix",
            gradient: ["#777", "#eee"],
            value: 1,
            clamp: {
                min: 0,
                max: 2
            }
        },
        brightness: {
            id: "Exposure->Brightness",
            type: "ColorMatrix",
            color: ["#ddd", "#eee"],
            value: 0,
            clamp: {
                min: -100,
                max: 100
            }
        },
        contrast: {
            id: "Enhance->Contrast",
            type: "ColorMatrix",
            value: 0,
            clamp: {
                min: -1,
                max: 1
            }
        },
        saturation: {
            id: "Enhance->Saturation",
            type: "ColorMatrix",
            value: 1,
            clamp: {
                min: 0,
                max: 3
            }
        },
        opacity: new g.clamp(100, 1, 100, "%")
    };
    a.configure.tools.clipart = {
        toolkit: "media",
        type: "clipart",
        composite: "paint",
        color: "rgba(0,0,0,1)",
        fill: {
            type: "color",
            color: "000000"
        },
        opacity: new g.clamp(100, 1, 100, "%"),
        filePicker: new g.filePicker
    };
    a.configure.tools.textbrush = {
        toolkit: "brush",
        type: "textbrush",
        composite: "paint",
        content: '"The quick brown fox jumps over the lazy dog" is an English-language pangram \u2013 a phrase that contains all of the letters of the English alphabet.',
        fill: {
            type: "color",
            color: "0085c8",
            mode: "cycle",
            noise: !1
        },
        opacity: new g.clamp(100, 1, 100, "%"),
        spacing: {
            min: 1,
            max: INFINITY
        },
        diameter: new g.clamp(10, 1, 100, "px")
    };
    a.configure.tools.pencil = {
        toolkit: "brush",
        type: "pencil",
        composite: "paint",
        fill: {
            type: "color",
            color: "0085c8",
            mode: "cycle",
            noise: !1
        },
        opacity: new g.clamp(100, 1, 100, "%"),
        spacing: {
            min: 5,
            max: INFINITY
        },
        diameter: new g.clamp(2, 1, 100, "px")
    };
    a.configure.tools.path = {
        toolkit: "brush",
        type: "path",
        composite: "paint",
        fill: {
            type: "color",
            color: "0085c8"
        },
        opacity: new g.clamp(100,
            1, 100, "%"),
        spacing: {
            min: 5,
            max: INFINITY
        },
        diameter: new g.clamp(1, 1, 100, "px")
    };
    a.configure.tools.scissor = {
        toolkit: "brush",
        type: "scissor",
        composite: "paint",
        fill: {
            type: "color",
            color: "0085c8"
        },
        opacity: new g.clamp(100, 1, 100, "%"),
        spacing: {
            min: 5,
            max: INFINITY
        },
        diameter: new g.clamp(1, 1, 100, "px")
    };
    a.configure.tools.eraser = {
        toolkit: "brush",
        type: "eraser",
        composite: "erase",
        fill: {
            type: "color",
            color: "rgba(0,0,0,0.75)"
        },
        opacity: new g.clamp(100, 1, 100, "%"),
        spacing: {
            min: 1,
            max: INFINITY
        },
        diameter: new g.clamp(40, 1, 250, "px"),
        blur: new g.clamp(20, 0, 100, "%")
    };
    a.configure.tools.paintbrush = {
        toolkit: "brush",
        type: "paintbrush",
        composite: "paint",
        fill: {
            type: "color",
            color: "e90808",
            gradient: "0,fffa6c0c,0.04,fff6300a,0.08,fff6300a,0.145,ffd11b7e,0.21,ffd11b7e,0.28,ff7425b1,0.35,ff7425b1,0.42,ff0a62da,0.49,ff0a62da,0.56,ff00c000,0.63,ff00c000,0.715,fff6ef2a,0.8,fff6ef2a,0.9,fffa6c0c,1,fffa6c0c",
            mode: "cycle",
            noise: !1
        },
        opacity: new g.clamp(100, 1, 100, "%"),
        spacing: {
            min: 1,
            max: INFINITY
        },
        diameter: new g.clamp(100, 1, 250, "px"),
        blur: new g.clamp(20,
            0, 100, "%")
    };
    a.configure.tools.streamer = {
        toolkit: "brush",
        type: "streamer",
        composite: "paint",
        fill: {
            type: "color",
            color: "000000",
            gradient: "0.06567889822065,ff005ee6,0.1176747,ff1912ea,0.22994306504649997,ff27032e,0.37598319999999996,ff43013a,0.43984393878431993,ff5f0046,0.544758,ff7e003a,0.6070303324195799,ff9e002f,0.7105123,ffce1129,0.77393466551848,fffe2323,0.8197397,fff6441a,0.8692658678592999,ffee6611,0.930715,fff68617,0.9802042847244999,ffffa61e",
            mode: "cycle",
            noise: !1
        },
        opacity: new g.clamp(100, 1, 100,
            "%"),
        spacing: {
            min: 1,
            max: 50
        }
    };
    a.configure.tools.calligraphy = {
        toolkit: "brush",
        type: "calligraphy",
        composite: "paint",
        fill: {
            type: "color",
            color: "1b0045",
            gradient: "0,ff000022,0.175,ff191024,0.28333335,ff322027,0.3916667,ff4c322d,0.5000000499999999,ff664433,0.6083334,ff8a5d3d,0.71666675,ffae7747,0.8250001,ffce9056,1,ffeeaa66",
            mode: "cycle",
            noise: !1
        },
        opacity: new g.clamp(100, 1, 100, "%"),
        spacing: {
            min: 5,
            max: INFINITY
        },
        diameter: new g.clamp(17, 1, 50, "px")
    };
    a.configure.tools.chrome = {
        toolkit: "brush",
        type: "chrome",
        composite: "paint",
        fill: {
            type: "color",
            color: "fff000",
            gradient: "0,ff45484d,0.5,ff000000,1,ff000000",
            mode: "cycle",
            noise: !1
        },
        opacity: {
            value: 15,
            clamp: {
                min: 1,
                max: 100
            }
        },
        spacing: {
            min: 1,
            max: 100
        },
        lineWidth: new g.clamp(1, 0.1, 5, "px"),
        spread: new g.clamp(20, 1, 50, "float"),
        lookback: 2E3
    };
    a.configure.tools.shader = {
        toolkit: "brush",
        type: "shader",
        composite: "paint",
        fill: {
            type: "color",
            color: "FF0000",
            gradient: "0,ff000022,0.175,ff191024,0.28333335,ff322027,0.3916667,ff4c322d,0.5000000499999999,ff664433,0.6083334,ff8a5d3d,0.71666675,ffae7747,0.8250001,ffce9056,1,ffeeaa66",
            mode: "cycle",
            noise: !1
        },
        opacity: new g.clamp(75, 1, 100, "%"),
        spacing: {
            min: 1,
            max: 100
        },
        lineWidth: new g.clamp(0.5, 0.1, 5, "px"),
        spread: new g.clamp(40, 1, 50, "float"),
        lookback: 2E3
    };
    a.configure.tools.sketchy = {
        toolkit: "brush",
        type: "sketchy",
        composite: "paint",
        fill: {
            type: "color",
            color: "fff000",
            gradient: "0,ff7d7e7d,0.5,ff0e0e0e,1,ff0e0e0e",
            mode: "cycle",
            noise: !1
        },
        opacity: new g.clamp(50, 1, 100, "%"),
        spacing: {
            min: 1,
            max: 100
        },
        lineWidth: new g.clamp(1, 0.1, 5, "px"),
        spread: new g.clamp(40, 1, 50, "float"),
        lookback: 2E3
    };
    a.configure.tools.web = {
        toolkit: "brush",
        type: "web",
        composite: "paint",
        fill: {
            type: "gradient",
            color: "FF0000",
            gradient: "0,fffa6c0c,0.04,fff6300a,0.08,fff6300a,0.145,ffd11b7e,0.21,ffd11b7e,0.28,ff7425b1,0.35,ff7425b1,0.42,ff0a62da,0.49,ff0a62da,0.56,ff00c000,0.63,ff00c000,0.715,fff6ef2a,0.8,fff6ef2a,0.9,fffa6c0c,1,fffa6c0c",
            mode: "cycle",
            noise: !1
        },
        opacity: new g.clamp(25, 1, 100, "%"),
        spacing: {
            min: 1,
            max: 100
        },
        lineWidth: new g.clamp(1, 0.1, 5, "px"),
        spread: new g.clamp(70, 1, 100, "int"),
        lookback: 2E3
    };
    a.configure.tools.fur = {
        toolkit: "brush",
        type: "fur",
        composite: "paint",
        fill: {
            type: "color",
            color: "fff000",
            gradient: "0,ff7d7e7d,0.5,ff0e0e0e,1,ff0e0e0e",
            mode: "cycle",
            noise: !1
        },
        opacity: new g.clamp(100, 1, 100, "%"),
        spacing: {
            min: 1,
            max: 10
        },
        lineWidth: new g.clamp(0.5, 0.1, 5, "px"),
        diameter: new g.clamp(250, 1, 500, "px"),
        lookback: 2E3
    };
    a.configure.tools.hair = {
        toolkit: "brush",
        type: "hair",
        composite: "paint",
        fill: {
            type: "color",
            color: "0fffff",
            gradient: "0.06567889822065,ff0c0126,0.1176747,ff19022a,0.22994306504649997,ff27032e,0.37598319999999996,ff43013a,0.43984393878431993,ff5f0046,0.544758,ff7e003a,0.6070303324195799,ff9e002f,0.7105123,ffce1129,0.77393466551848,fffe2323,0.8197397,fff6441a,0.8692658678592999,ffee6611,0.930715,fff68617,0.9802042847244999,ffffa61e",
            mode: "cycle",
            noise: !1
        },
        opacity: new g.clamp(100, 1, 100, "%"),
        spacing: {
            min: 1,
            max: 10
        },
        lineWidth: new g.clamp(0.5, 0.1, 10, "px"),
        diameter: new g.clamp(50, 1, 100, "px"),
        lookback: 20
    };
    a.configure.tools.spirograph = {
        toolkit: "brush",
        type: "spirograph",
        composite: "paint",
        fill: {
            type: "color",
            color: "fff000",
            gradient: "0,ff4c36b3,0.15,ffa1207d,0.24734265,fff60a48,0.3446853,fffa7e3b,0.43132864374999996,fffff32e,0.5326573,ff87f874,0.6721152827415,ff0ffebb,0.8,ff26a0be,1,ff3d43c1",
            mode: "cycle",
            noise: !1
        },
        opacity: new g.clamp(60,
            1, 100, "%"),
        spacing: {
            min: 1,
            max: INFINITY
        },
        lineWidth: new g.clamp(0.1, 0.1, 2, "px"),
        distance: new g.clamp(100, 1, 250, "float"),
        contract: 0.0050,
        outerRadius: new g.clamp(35.16814159292035, 1, 100, "float"),
        innerRadius: new g.clamp(43.92920353982301, 1, 100, "float"),
        increment: new g.clamp(0.576991150442478, 0.1, 5, "float")
    };
    a.configure.tools.spraypaint = {
        toolkit: "brush",
        type: "spraypaint",
        composite: "paint",
        fill: {
            type: "color",
            color: "cc0000",
            gradient: "0.06567889822065,ff0c0126,0.1176747,ff19022a,0.22994306504649997,ff27032e,0.37598319999999996,ff43013a,0.43984393878431993,ff5f0046,0.544758,ff7e003a,0.6070303324195799,ff9e002f,0.7105123,ffce1129,0.77393466551848,fffe2323,0.8197397,fff6441a,0.8692658678592999,ffee6611,0.930715,fff68617,0.9802042847244999,ffffa61e",
            mode: "cycle",
            noise: !1
        },
        opacity: new g.clamp(25, 1, 100, "%"),
        spacing: {
            min: 1,
            max: 100
        },
        diameter: new g.clamp(150, 50, 250, "px")
    };
    a.configure.tools.crayon = {
        toolkit: "brush",
        type: "crayon",
        composite: "paint",
        fill: {
            type: "color",
            color: "1b0045",
            gradient: "0,fffa6c0c,0.04,fff6300a,0.08,fff6300a,0.145,ffd11b7e,0.21,ffd11b7e,0.28,ff7425b1,0.35,ff7425b1,0.42,ff0a62da,0.49,ff0a62da,0.56,ff00c000,0.63,ff00c000,0.715,fff6ef2a,0.8,fff6ef2a,0.9,fffa6c0c,1,fffa6c0c",
            mode: "cycle",
            noise: !1
        },
        opacity: new g.clamp(100, 1, 100, "%"),
        rotate: {
            hidden: !0,
            min: 0,
            max: 360
        },
        diameter: new g.clamp(19, 3, 42, "px")
    };
    a.configure.tools.stamp = {
        toolkit: "brush",
        type: "stamp",
        composite: "paint",
        fill: {
            type: "color",
            color: "1b0045",
            gradient: "0,fffa6c0c,0.04,fff6300a,0.08,fff6300a,0.145,ffd11b7e,0.21,ffd11b7e,0.28,ff7425b1,0.35,ff7425b1,0.42,ff0a62da,0.49,ff0a62da,0.56,ff00c000,0.63,ff00c000,0.715,fff6ef2a,0.8,fff6ef2a,0.9,fffa6c0c,1,fffa6c0c",
            mode: "radial",
            noise: !1
        },
        opacity: new g.clamp(100, 1, 100, "%"),
        diameter: new g.clamp(100, 5, 500, "px"),
        rotate: new g.clamp([1,
            360
        ], 1, 360, "degree"),
        scale: new g.clamp([0.05, 1.5], 0.05, 3, "px"),
        translate: new g.clamp([0, 0], 0, 250, "px"),
        spacing: new g.clamp([15, INFINITY], 1, 250, "px"),
        pollock: !1
    };
    a.configure.tools.floodfill = {
        toolkit: "brush",
        type: "floodfill",
        composite: "paint",
        fill: {
            type: "color",
            color: "fff000",
            gradient: "0,ff607e80,0.25,ff9fd962,0.5,ff9fd962,0.75,fff3fa58,1,fff3fa58",
            mode: "cycle",
            noise: !1
        },
        opacity: new g.clamp(100, 1, 100, "%"),
        tolerance: new g.clamp(60, 1, 100, "%"),
        antialias: !1,
        contiguous: !0,
        click: !0
    };
    a.configure.tools.oil = {
        toolkit: "brush",
        type: "oil",
        composite: "paint",
        blend: 0.98,
        bristles: 8,
        fill: {
            type: "color",
            color: "fff000",
            gradient: "0,ff607e80,0.25,ff9fd962,0.5,ff9fd962,0.75,fff3fa58,1,fff3fa58"
        },
        opacity: new g.clamp(100, 1, 100, "%"),
        spacing: {
            min: 1,
            max: 1
        },
        diameter: new g.clamp(50, 1, 100, "px")
    };
    a.configure.tools.pastel = {
        toolkit: "brush",
        type: "pastel",
        composite: "paint",
        blend: 0.97,
        bristles: 35,
        fill: {
            type: "color",
            color: "fff000",
            gradient: "0,fffa6c0c,0.04,fff6300a,0.08,fff6300a,0.145,ffd11b7e,0.21,ffd11b7e,0.28,ff7425b1,0.35,ff7425b1,0.42,ff0a62da,0.49,ff0a62da,0.56,ff00c000,0.63,ff00c000,0.715,fff6ef2a,0.8,fff6ef2a,0.9,fffa6c0c,1,fffa6c0c"
        },
        opacity: new g.clamp(100, 1, 100, "%"),
        rotate: {
            hidden: !0,
            min: 0,
            max: 360
        },
        diameter: new g.clamp(25, 3, 42, "px")
    };
    g = function (d, c) {
        a.configure.tools[c] = clone(a.configure.tools[d]);
        a.configure.tools[c].type = c
    };
    g("clipart", "symbol");
    g("rectangle", "square");
    g("ellipse", "circle");
    g("regularPolygon", "triangle");
    delete a.configure.tools.triangle.sides;
    g("pencil", "arrow");
    a.configure.tools.arrow.diameter.value = 14;
    g("pencil", "rainbow");
    g("path", "polygon");
    g("path", "polyline");
    (function () {
        var d = clone(a.configure.tools);
        a.reset.configure = function (c) {
            a.configure.tools[c] = clone(d[c])
        }
    })();
    return a
}(sketch);
"undefined" === typeof sketch && (sketch = {});
sketch = function (a) {
    var g, d, c = function (a) {
            var c = a.ctx,
                d = c.canvas,
                e = c.createPattern(d, "repeat");
            d.toBlob(function (c) {
                c = URL.createObjectURL(c);
                e.css = "url('" + c + "')";
                e.data = c;
                a.callback && a.callback(e)
            });
            return e
        };
    a.generate.paper = function (b, d) {
        var g = (a.convert.metrics || FiniteMath.getScreenMetrics())["in>px"],
            g = {
                notebook: {
                    lineStartTop: 0.85 * g,
                    lineHeight: 30,
                    lineColor: "#8CA6BD",
                    marginLeft: 0.85 * g,
                    marginColor: "#FF7088",
                    fillColor: "#F8F9B3"
                },
                looseLeaf: {
                    lineStartTop: 0.85 * g,
                    lineHeight: 30,
                    lineColor: "#CAEAFB",
                    marginLeft: 0.85 *
                        g,
                    marginColor: "#FF7088",
                    fillColor: "#FAFAFA"
                },
                lined: {
                    lineStartTop: -0.5,
                    gutter: 0.25 * g,
                    lineHeight: 30,
                    lineColor: "#8CA6BD",
                    fillColor: "#FAFAFA"
                }
            };
        b = g[b] || b || g.notebook;
        b.callback = d;
        var e = b.grid || 0,
            l = b.gutter || 0,
            m = b.lineStartTop || 0,
            k = b.lineStartLeft || 0,
            g = b.lineHeight || 1,
            q = b.lineColor || "#8CA6BD",
            p = b.marginLeft || 0,
            r = b.marginColor || "#C37F9B",
            t = document.createElement("canvas").getContext("2d");
        t.canvas.width = 1024;
        t.canvas.height = 1024;
        t.fillStyle = b.fillColor || "#fff";
        t.fillRect(0, 0, 1024, 1024);
        e && (t.save(), t.translate(l,
            l), e = a.generate.grid({
            size: e,
            strokeColor: q,
            fillColor: "none"
        }), t.fillStyle = e, t.fillRect(0, 0, 1024, 1024), t.restore());
        e = 1024 / g;
        t.save();
        t.translate(k, m);
        for (m = 0; m < e; m++) t.beginPath(), t.moveTo(0, m * g), t.lineTo(1024, m * g), t.lineWidth = 1, t.strokeStyle = q, t.stroke();
        t.restore();
        p && (t.save(), t.beginPath(), t.moveTo(p, 0), t.lineTo(p, 1024), t.lineWidth = 1, t.strokeStyle = r, t.stroke(), t.restore());
        b.ctx = t;
        return c(b)
    };
    a.generate.grid = function (a, d) {
        var g = {
            grid: {
                size: 20,
                strokeColor: "#ddd",
                fillColor: "#fff"
            },
            graphPaper: {
                size: 20,
                strokeColor: "#BEE0BD",
                fillColor: "#F0FCE1"
            },
            bluePrint: {
                size: 20,
                strokeColor: "#2893e0",
                fillColor: "#0078CF"
            }
        }, e = document.createElement("canvas").getContext("2d");
        a = g[a] || a || g.grid;
        a.callback = d;
        a.ctx = e;
        var g = a.size || 12,
            l = a.strokeColor || "#000",
            m = a.fillColor || "#1f1f1f";
        e.canvas.width = g;
        e.canvas.height = g;
        e.fillStyle = m;
        e.fillRect(0, 0, g, g);
        e.moveTo(0, 0);
        e.lineTo(0, g);
        e.moveTo(0, 0);
        e.lineTo(g, 0);
        e.lineWidth = 1;
        e.strokeStyle = l;
        e.stroke();
        return c(a)
    };
    a.generate.interlace = function (a, d, g, e) {
        a = a || 12;
        d = d || "#000";
        g = g || "#1f1f1f";
        e = document.createElement("canvas").getContext("2d");
        e.canvas.width = 2 * a;
        e.canvas.height = 2 * a;
        e.fillStyle = d;
        e.fillRect(0, 0, a, a);
        e.fillStyle = g;
        e.fillRect(a, 0, a, a);
        e.fillStyle = g;
        e.fillRect(0, a, a, a);
        e.fillStyle = d;
        e.fillRect(a, a, a, a);
        return c({
            ctx: e
        })
    };
    a.generate.rangeBar = function (a) {
        g || (g = document.createElement("canvas"), d = g.getContext("2d"));
        g.width = 234;
        g.height = 19;
        d.clearRect(0, 8, 233, 30);
        d.fillStyle = "#151515";
        if (a) {
            for (var c = d.createLinearGradient(0, 0, 233, 0), h = 0, e = a.length; h < e; h++) c.addColorStop(h /
                (e - 1 || 1), a[h]);
            d.fillStyle = c
        } else d.fillStyle = "#333";
        a = 0.5;
        d.lineWidth = 0.25;
        d.strokeStyle = "#000";
        Vector.Shapes ? Vector.Shapes.roundRect(d, a, 8, a + 233, 6, 5) : d.rect(a, 8, a + 233, 6);
        d.fill();
        d.stroke();
        d.save();
        d.globalAlpha = 0.07;
        c = d.createLinearGradient(0, 8, 0, 13);
        c.addColorStop(0, "#fff");
        c.addColorStop(1, "#111");
        d.fillStyle = c;
        d.fill();
        d.restore();
        c = 0;
        d.beginPath();
        for (h = 0; 225 >= h; h += 22.5) a = Math.round(h) + 0 + 4.5, d.moveTo(a, 6), d.lineTo(a, 8 - (c % 5 ? 4 : 5)), d.strokeStyle = "#888", d.stroke(), d.beginPath(), c++;
        return g.toDataURL()
    };
    return a
}(sketch);
"undefined" === typeof sketch && (sketch = {});
"undefined" === typeof sketch.media && (sketch.media = {});
sketch = function (a) {
    var g = a.media.stamp = {};
    g.path = "./media/stamp";
    g.thumbnail = {
        width: 44,
        height: 44,
        columns: 4,
        rows: 3,
        padding: 3
    };
    g.defaultCategory = "Water Colors";
    g.tree = {
        yourFiles: {}
    };
    mergeObject({
        Butterflies: {
            "Butterflies/0-live.png": "0-live.png",
            "Butterflies/1-live.png": "1-live.png",
            "Butterflies/10-live.png": "10-live.png",
            "Butterflies/11-live.png": "11-live.png",
            "Butterflies/12-live.png": "12-live.png",
            "Butterflies/13-live.png": "13-live.png",
            "Butterflies/14-live.png": "14-live.png",
            "Butterflies/15-live.png": "15-live.png",
            "Butterflies/16-live.png": "16-live.png",
            "Butterflies/17-live.png": "17-live.png",
            "Butterflies/18-live.png": "18-live.png",
            "Butterflies/19-live.png": "19-live.png",
            "Butterflies/2-live.png": "2-live.png",
            "Butterflies/20-live.png": "20-live.png",
            "Butterflies/21-live.png": "21-live.png",
            "Butterflies/22-live.png": "22-live.png",
            "Butterflies/23-live.png": "23-live.png",
            "Butterflies/24-live.png": "24-live.png",
            "Butterflies/25-live.png": "25-live.png",
            "Butterflies/26-live.png": "26-live.png",
            "Butterflies/3-live.png": "3-live.png",
            "Butterflies/4-live.png": "4-live.png",
            "Butterflies/5-live.png": "5-live.png",
            "Butterflies/6-live.png": "6-live.png",
            "Butterflies/7-live.png": "7-live.png",
            "Butterflies/8-live.png": "8-live.png",
            "Butterflies/9-live.png": "9-live.png"
        },
        Doodles: {
            "Doodles/0-live.png": "0-live.png",
            "Doodles/1-live.png": "1-live.png",
            "Doodles/10-live.png": "10-live.png",
            "Doodles/2-live.png": "2-live.png",
            "Doodles/3-live.png": "3-live.png",
            "Doodles/4-live.png": "4-live.png",
            "Doodles/5-live.png": "5-live.png",
            "Doodles/6-live.png": "6-live.png",
            "Doodles/7-live.png": "7-live.png",
            "Doodles/8-live.png": "8-live.png",
            "Doodles/9-live.png": "9-live.png"
        },
        Flowers: {
            "Flowers/0-live.png": "0-live.png",
            "Flowers/1-live.png": "1-live.png",
            "Flowers/10-live.png": "10-live.png",
            "Flowers/11-live.png": "11-live.png",
            "Flowers/12-live.png": "12-live.png",
            "Flowers/13-live.png": "13-live.png",
            "Flowers/14-live.png": "14-live.png",
            "Flowers/15-live.png": "15-live.png",
            "Flowers/16-live.png": "16-live.png",
            "Flowers/17-live.png": "17-live.png",
            "Flowers/18-live.png": "18-live.png",
            "Flowers/19-live.png": "19-live.png",
            "Flowers/2-live.png": "2-live.png",
            "Flowers/20-live.png": "20-live.png",
            "Flowers/21-live.png": "21-live.png",
            "Flowers/22-live.png": "22-live.png",
            "Flowers/23-live.png": "23-live.png",
            "Flowers/24-live.png": "24-live.png",
            "Flowers/25-live.png": "25-live.png",
            "Flowers/26-live.png": "26-live.png",
            "Flowers/27-live.png": "27-live.png",
            "Flowers/3-live.png": "3-live.png",
            "Flowers/4-live.png": "4-live.png",
            "Flowers/5-live.png": "5-live.png",
            "Flowers/6-live.png": "6-live.png",
            "Flowers/7-live.png": "7-live.png",
            "Flowers/8-live.png": "8-live.png",
            "Flowers/9-live.png": "9-live.png"
        },
        Footprints: {
            "Footprints/0-live.png": "0-live.png",
            "Footprints/1-live.png": "1-live.png",
            "Footprints/10-live.png": "10-live.png",
            "Footprints/11-live.png": "11-live.png",
            "Footprints/12-live.png": "12-live.png",
            "Footprints/13-live.png": "13-live.png",
            "Footprints/14-live.png": "14-live.png",
            "Footprints/15-live.png": "15-live.png",
            "Footprints/16-live.png": "16-live.png",
            "Footprints/17-live.png": "17-live.png",
            "Footprints/2-live.png": "2-live.png",
            "Footprints/3-live.png": "3-live.png",
            "Footprints/4-live.png": "4-live.png",
            "Footprints/5-live.png": "5-live.png",
            "Footprints/6-live.png": "6-live.png",
            "Footprints/7-live.png": "7-live.png",
            "Footprints/8-live.png": "8-live.png",
            "Footprints/9-live.png": "9-live.png"
        },
        Leafs: {
            "Leafs/0-live.png": "0-live.png",
            "Leafs/1-live.png": "1-live.png",
            "Leafs/10-live.png": "10-live.png",
            "Leafs/11-live.png": "11-live.png",
            "Leafs/12-live.png": "12-live.png",
            "Leafs/13-live.png": "13-live.png",
            "Leafs/14-live.png": "14-live.png",
            "Leafs/15-live.png": "15-live.png",
            "Leafs/16-live.png": "16-live.png",
            "Leafs/17-live.png": "17-live.png",
            "Leafs/18-live.png": "18-live.png",
            "Leafs/19-live.png": "19-live.png",
            "Leafs/2-live.png": "2-live.png",
            "Leafs/20-live.png": "20-live.png",
            "Leafs/21-live.png": "21-live.png",
            "Leafs/22-live.png": "22-live.png",
            "Leafs/23-live.png": "23-live.png",
            "Leafs/24-live.png": "24-live.png",
            "Leafs/25-live.png": "25-live.png",
            "Leafs/26-live.png": "26-live.png",
            "Leafs/27-live.png": "27-live.png",
            "Leafs/28-live.png": "28-live.png",
            "Leafs/29-live.png": "29-live.png",
            "Leafs/3-live.png": "3-live.png",
            "Leafs/30-live.png": "30-live.png",
            "Leafs/31-live.png": "31-live.png",
            "Leafs/32-live.png": "32-live.png",
            "Leafs/33-live.png": "33-live.png",
            "Leafs/34-live.png": "34-live.png",
            "Leafs/35-live.png": "35-live.png",
            "Leafs/36-live.png": "36-live.png",
            "Leafs/37-live.png": "37-live.png",
            "Leafs/38-live.png": "38-live.png",
            "Leafs/39-live.png": "39-live.png",
            "Leafs/4-live.png": "4-live.png",
            "Leafs/40-live.png": "40-live.png",
            "Leafs/41-live.png": "41-live.png",
            "Leafs/42-live.png": "42-live.png",
            "Leafs/43-live.png": "43-live.png",
            "Leafs/44-live.png": "44-live.png",
            "Leafs/45-live.png": "45-live.png",
            "Leafs/46-live.png": "46-live.png",
            "Leafs/47-live.png": "47-live.png",
            "Leafs/48-live.png": "48-live.png",
            "Leafs/49-live.png": "49-live.png",
            "Leafs/5-live.png": "5-live.png",
            "Leafs/6-live.png": "6-live.png",
            "Leafs/7-live.png": "7-live.png",
            "Leafs/8-live.png": "8-live.png",
            "Leafs/9-live.png": "9-live.png"
        },
        Retro: {
            "Retro/0-live.png": "0-live.png",
            "Retro/1-live.png": "1-live.png",
            "Retro/10-live.png": "10-live.png",
            "Retro/11-live.png": "11-live.png",
            "Retro/12-live.png": "12-live.png",
            "Retro/13-live.png": "13-live.png",
            "Retro/14-live.png": "14-live.png",
            "Retro/15-live.png": "15-live.png",
            "Retro/16-live.png": "16-live.png",
            "Retro/17-live.png": "17-live.png",
            "Retro/18-live.png": "18-live.png",
            "Retro/19-live.png": "19-live.png",
            "Retro/2-live.png": "2-live.png",
            "Retro/20-live.png": "20-live.png",
            "Retro/21-live.png": "21-live.png",
            "Retro/22-live.png": "22-live.png",
            "Retro/23-live.png": "23-live.png",
            "Retro/24-live.png": "24-live.png",
            "Retro/25-live.png": "25-live.png",
            "Retro/26-live.png": "26-live.png",
            "Retro/27-live.png": "27-live.png",
            "Retro/28-live.png": "28-live.png",
            "Retro/29-live.png": "29-live.png",
            "Retro/3-live.png": "3-live.png",
            "Retro/4-live.png": "4-live.png",
            "Retro/5-live.png": "5-live.png",
            "Retro/6-live.png": "6-live.png",
            "Retro/7-live.png": "7-live.png",
            "Retro/8-live.png": "8-live.png",
            "Retro/9-live.png": "9-live.png"
        },
        "Simple Smudges": {
            "Simple Smudges/0-live.png": "0-live.png",
            "Simple Smudges/1-live.png": "1-live.png",
            "Simple Smudges/10-live.png": "10-live.png",
            "Simple Smudges/11-live.png": "11-live.png",
            "Simple Smudges/12-live.png": "12-live.png",
            "Simple Smudges/13-live.png": "13-live.png",
            "Simple Smudges/2-live.png": "2-live.png",
            "Simple Smudges/3-live.png": "3-live.png",
            "Simple Smudges/4-live.png": "4-live.png",
            "Simple Smudges/5-live.png": "5-live.png",
            "Simple Smudges/6-live.png": "6-live.png",
            "Simple Smudges/7-live.png": "7-live.png",
            "Simple Smudges/8-live.png": "8-live.png",
            "Simple Smudges/9-live.png": "9-live.png"
        },
        Tizzape: {
            "Tizzape/0-live.png": "0-live.png",
            "Tizzape/1-live.png": "1-live.png",
            "Tizzape/10-live.png": "10-live.png",
            "Tizzape/11-live.png": "11-live.png",
            "Tizzape/12-live.png": "12-live.png",
            "Tizzape/13-live.png": "13-live.png",
            "Tizzape/14-live.png": "14-live.png",
            "Tizzape/15-live.png": "15-live.png",
            "Tizzape/16-live.png": "16-live.png",
            "Tizzape/17-live.png": "17-live.png",
            "Tizzape/18-live.png": "18-live.png",
            "Tizzape/19-live.png": "19-live.png",
            "Tizzape/2-live.png": "2-live.png",
            "Tizzape/3-live.png": "3-live.png",
            "Tizzape/4-live.png": "4-live.png",
            "Tizzape/5-live.png": "5-live.png",
            "Tizzape/6-live.png": "6-live.png",
            "Tizzape/7-live.png": "7-live.png",
            "Tizzape/8-live.png": "8-live.png",
            "Tizzape/9-live.png": "9-live.png"
        },
        Typogrunge: {
            "Typogrunge/0-live.png": "0-live.png",
            "Typogrunge/1-live.png": "1-live.png",
            "Typogrunge/10-live.png": "10-live.png",
            "Typogrunge/11-live.png": "11-live.png",
            "Typogrunge/12-live.png": "12-live.png",
            "Typogrunge/13-live.png": "13-live.png",
            "Typogrunge/14-live.png": "14-live.png",
            "Typogrunge/15-live.png": "15-live.png",
            "Typogrunge/16-live.png": "16-live.png",
            "Typogrunge/17-live.png": "17-live.png",
            "Typogrunge/18-live.png": "18-live.png",
            "Typogrunge/19-live.png": "19-live.png",
            "Typogrunge/2-live.png": "2-live.png",
            "Typogrunge/20-live.png": "20-live.png",
            "Typogrunge/21-live.png": "21-live.png",
            "Typogrunge/22-live.png": "22-live.png",
            "Typogrunge/23-live.png": "23-live.png",
            "Typogrunge/3-live.png": "3-live.png",
            "Typogrunge/4-live.png": "4-live.png",
            "Typogrunge/5-live.png": "5-live.png",
            "Typogrunge/6-live.png": "6-live.png",
            "Typogrunge/7-live.png": "7-live.png",
            "Typogrunge/8-live.png": "8-live.png",
            "Typogrunge/9-live.png": "9-live.png"
        },
        "Water Colors": {
            "Water Colors/0-live.png": "0-live.png",
            "Water Colors/1-live.png": "1-live.png",
            "Water Colors/10-live.png": "10-live.png",
            "Water Colors/11-live.png": "11-live.png",
            "Water Colors/12-live.png": "12-live.png",
            "Water Colors/13-live.png": "13-live.png",
            "Water Colors/14-live.png": "14-live.png",
            "Water Colors/15-live.png": "15-live.png",
            "Water Colors/16-live.png": "16-live.png",
            "Water Colors/2-live.png": "2-live.png",
            "Water Colors/3-live.png": "3-live.png",
            "Water Colors/4-live.png": "4-live.png",
            "Water Colors/5-live.png": "5-live.png",
            "Water Colors/6-live.png": "6-live.png",
            "Water Colors/7-live.png": "7-live.png",
            "Water Colors/8-live.png": "8-live.png",
            "Water Colors/9-live.png": "9-live.png"
        }
    }, g.tree);
    g.process = function () {
        this.paths = [];
        for (var a in this.tree) {
            var c = this.tree[a];
            if ("object" === typeof c)
                for (var b in c) {
                    if (0 === b.indexOf("#")) var f = b,
                    g = b;
                    else f = this.path + "-preview/" + b.replace(".svg", ".png"), g = this.path + "/" + b;
                    this.paths.push(c[b] = {
                        type: "stamp",
                        filename: c[b],
                        path: g,
                        thumbnail: f,
                        folder: a
                    })
                }
        }
    };
    g.process();
    a.media.stamp_credits = {
        Butterflies: {
            email: "bulletproof.cupidx@gmail.com",
            url: "http://dead-brushes.deviantart.com/art/ps7-butterfly-brushes-61623697",
            name: "dead-brushes"
        },
        Doodles: {
            email: "punksafetypin@gmail.com",
            url: "http://punksafetypin.deviantart.com/art/Brush-Set-21-Boney-Doodles-57365483",
            name: "punksafetypin"
        },
        Flowers: {
            email: "ir@hawksmont.com",
            url: "http://hawksmont.com/",
            name: "hawksmont"
        },
        Footprints: {
            email: "jonas@rognemedia.no",
            url: "http://chain.deviantart.com/art/Footprint-brushes-60108797",
            name: "chain"
        },
        Leafs: {
            email: "ir@hawksmont.com",
            url: "http://hawksmont.com/",
            name: "hawksmont"
        },
        Retro: {
            email: "vivekdhage@gmail.com",
            url: "http://vwake.deviantart.com/art/Retr0-Brushes-1689219",
            name: "vwake"
        },
        "Simple Smudges": {
            email: "p.szczepanski@gmail.com",
            url: "http://env1ro.deviantart.com/art/SimpleSmudges-1-Brushes-Pack-52089760",
            name: "env1ro"
        },
        Tizzape: {
            email: "services@dirt2.com",
            url: "http://keepwaiting.deviantart.com/art/Tizzape-Tape-Brushes-29459997",
            name: "keepwaiting"
        },
        Typogrunge: {
            email: "",
            url: "http://scully7491.deviantart.com/art/Typographic-Grunge-Brushes-30565921",
            name: "scully7491"
        },
        "Water Colors": {
            email: "p.szczepanski@gmail.com",
            url: "http://env1ro.deviantart.com/art/WaterColor-Reloaded-98294189",
            name: "env1ro"
        }
    };
    return a
}(sketch);
"undefined" === typeof sketch && (sketch = {});
"undefined" === typeof sketch.ui && (sketch.ui = {});
sketch = function (a) {
    var g = /[^0-9]/gi,
        d = function (b, c, d, e) {
            var f = d.getValue(),
                f = f.length ? f : [f];
            "Spacing" === e && (f = [f[0]]);
            a.ui.addLineBreak(b);
            var h = document.createElement("div");
            h.className = "slider";
            var k = document.createElement("span");
            k.className = "title";
            h.appendChild(k);
            var l = e.match(/[A-Za-z0-9]*/g),
                l = l ? l.join(" ") : e;
            if (a.getTranslation(l)) {
                k.setAttribute("data-cmd", l);
                k.innerHTML = a.getTranslation(l);
                e = document.createElement("span");
                e.className = "values";
                for (l = 0; l < f.length; l++) {
                    var m = document.createElement("input");
                    m.className = "value" + l;
                    m.value = f[l];
                    Event.add(m, "mousedown", Event.stop);
                    Event.add(m, "keydown keyup change", function (a) {
                        Event.stop(a);
                        a = this.value.replace(g, "");
                        var b = parseInt(this.className.substr(5)),
                            c = q.thumbs[b];
                        a = Math.max(q.min, Math.min(q.max, a));
                        c.value !== a && (c.value = a, q.update(b))
                    });
                    e.appendChild(m);
                    f[l + 1] && (m = document.createElement("small"), m.innerHTML = "/", e.appendChild(m))
                }
                var q = new widget.Range({
                    min: d.clamp.min,
                    max: d.clamp.max,
                    format: d.format,
                    gradient: d.gradient,
                    value: f.toString(),
                    className: "range",
                    onchange: function (b, e) {
                        a.area && a.area.inGenesis && a.area.exitGenesis();
                        b.element.parentNode.querySelector(".value" + e.index).value = 10 < d.clamp.max ? Math.round(e.value) : Math.round(10 * e.value) / 10;
                        if ("load" !== b.state) {
                            var f = k.getAttribute("data-cmd"),
                                f = (f[0].toLowerCase() + f.substr(1)).replace(" ", "");
                            a.toolkit.setActionData({
                                tool: c.type,
                                cacheObject: b,
                                param: f,
                                thumbs: b.thumbs
                            })
                        }
                    }
                });
                h.appendChild(e);
                h.appendChild(q.element);
                b.appendChild(h);
                return q
            }
            a.feature.debug && console.log("range:", l, "disabled")
        }, c = function (b) {
            if (a.actions &&
                a.actions.data) {
                var c = a.actions.data[a.actions.idx],
                    d = c ? c.toolkit : {}, e;
                for (e in a.ui.ranges) {
                    var f = a.ui.ranges[e];
                    if (!f) {
                        a.feature.debug && console.log("disabled", e);
                        break
                    }
                    var g = void 0;
                    c && (g = c[e]);
                    "undefined" === typeof g && d.device && (g = d.device.brush ? d.device.brush[e] : d.device[e]);
                    "undefined" === typeof g && (g = a.actions.fromConfigure(a.configure.tools[b][e]));
                    if ("undefined" !== typeof g)
                        if (g = "undefined" !== typeof g.max ? [g.min, g.max] : g, 2 === f.thumbs.length) {
                            if (f.thumbs[0].value !== g[0] || f.thumbs[1].value !== g[1]) f.thumbs[0].value =
                                g[0], f.thumbs[1].value = g[1], f.update(0, "load"), f.update(1, "load")
                        } else g = g[0] || g, f.thumbs[0].value !== g && (f.thumbs[0].value = g, f.update(0, "load"))
                }
            }
        };
    a.ui.buildSelect = function (b) {
        var c = document.createElement("select");
        c.id = "select-" + STRING.replaceAll(b.label, " ", "");
        Event.add(c, "mousedown", function (a) {
            widget.windows.focus("sketch-configure");
            Event.stop(a)
        });
        Event.add(c, "change", b.onchange);
        b.element.appendChild(c);
        var d = document.createElement("optgroup");
        d.label = b.label;
        for (var e in b.data) {
            var f = document.createElement("option");
            b.selected === e && (f.selected = "selected");
            f.value = b.data[e];
            f.setAttribute("data-cmd", e);
            if (b.ucwords) {
                var g = STRING.splitByUpperCase(e).join(" "),
                    g = STRING.ucwords(g.replace("regular", ""));
                f.innerHTML = a.getTranslation(g)
            } else f.innerHTML = a.getTranslation(e);
            d.appendChild(f)
        }
        b.style && (c.style.cssText = b.style);
        c.appendChild(d);
        return c
    };
    a.ui.buildConfigure = function (d, e) {
        if ((d = d || a.tool.type) || e) {
            var f = document.getElementById("sketch-configure");
            if (f) {
                if (f && ("block" === f.style.display || !f.built)) f.built =
                    1;
                else if (!e) return;
                var g = f.getAttribute("type");
                f.setAttribute("type", d);
                if (d === g && !e) return c(d);
                g = document.querySelector("#sketch-configure .header-message");
                removeChildNodes(g);
                var h = document.querySelector(".credits");
                h && (removeChildNodes(h), h.style.display = "none");
                var q = a.actions && a.actions.data[a.actions.idx] || a.configure.tools[d];
                q && (d = q.type);
                "image" === d && (d = "clipart");
                h = f.querySelector(".content");
                f.querySelector(".scroller").style.display = "none";
                if (a.detect.noConfigure[d]) {
                    removeChildNodes(h);
                    if (a.actions) {
                        var w = (a.actions.selectionCount || 0) + " selected";
                        g.innerHTML = "<span>" + STRING.ucwords(d || "") + "</span>";
                        h.innerHTML = "<div class='hr'></div><span class='selectInfo'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class='select-count'>" + w + "</span></span>"
                    }
                    widget.windows.open("sketch-configure")
                } else if (m(d), a.actions && a.actions.data) {
                    if (f = a.toolkit.getCatelog(d)) {
                        var v = d.replace("_", " ");
                        a.ui.buildSelect({
                            label: STRING.ucwords(f.replace("_", " ")),
                            element: g,
                            selected: v,
                            data: a.toolkit.__icons[f],
                            ucwords: !0,
                            onchange: function () {
                                var b = this.options[this.selectedIndex].getAttribute("data-cmd").replace(" ", "_");
                                var c = a.actions.selection;
                                if (a.feature.canvas.editable) {
                                    var d = [],
                                        e = [],
                                        f = a.actions,
                                        g = f.fromConfigure(a.configure.tools[b]),
                                        h;
                                    for (h in c)
                                        if (c = f.data[h]) {
                                            if (a.detect.shape[c.type]) {
                                                if (!a.detect.shape[b]) continue
                                            } else if (a.detect.brush[c.type]) {
                                                if (!a.detect.brush[b]) continue
                                            } else continue;
                                            var k = {
                                                id: c.id,
                                                type: b
                                            };
                                            d.push({
                                                id: c.id,
                                                type: c.type
                                            });
                                            e.push(k);
                                            c.type = b;
                                            g.spacing || delete c.spacing;
                                            c.toolkit && (delete g.fill,
                                                delete c.diameter, c.dirty = !0, c.toolkit.cloneAttributes(g, c), c.toolkit.updateActionSize(c))
                                        }
                                    d.length && e.length ? (a.history && a.history.store(d, e), a.render.actions("root.ui.configure"), a.ui.setToolMenu(b, !0), m(b)) : a.run(b.replace(" ", "_"))
                                } else a.run(b)
                            }
                        })
                    } else if (a.feature.ui.mediaSelect && a.media[d]) {
                        var x = a.media[d],
                            f = x.tree,
                            A = q.src || "",
                            h = 0,
                            C;
                        for (C in f)++h;
                        v = q.fontFamily ? (q = sketch.media.textById[q.fontFamily]) && q.category || x.defaultCategory || C : a.ui.detectFolder(d, A) || x.defaultCategory || C;
                        C = v;
                        q = {};
                        x = b[d];
                        1 < h && (q["all " + x] = "everything");
                        for (w in f) "yourFiles" === w && "yourFiles" === v ? (C = "your " + x, q["your " + x] = w) : q[w] = w;
                        a.ui.buildSelect({
                            label: STRING.ucwords(x),
                            element: g,
                            selected: C,
                            data: q,
                            ucwords: !0,
                            onchange: function () {
                                var a = this.options[this.selectedIndex].value;
                                l(d, v, a);
                                k(d, a)
                            }
                        })
                    } else v = "", C = STRING.ucwords(d.replace("gl_", "")).match(/[A-Z][a-z]+/g).join(" "), g.innerHTML = "<span>" + a.getTranslation(C) + "<span>";
                    l(d, v, v);
                    widget.windows.open("sketch-configure");
                    widget.windows.restore()
                } else g.innerHTML =
                    "<span>" + STRING.ucwords(d.replace("gl_", "").replace(/([A-Z])/g, " $1")) + "</span>", widget.windows.open("sketch-configure")
            }
        }
    };
    var b = {
        text: "fonts",
        stamp: "stamps",
        clipart: "clipart"
    }, f = function (b, c, d) {
            var e = this;
            this.type = b;
            this.library = c;
            this.folder = d;
            this.media;
            this.element;
            this.hide = function () {
                this.container.style.display = "none";
                this.content.style.display = "none"
            };
            this.show = function (b, c) {
                e.container.style.display = "block";
                e.content.style.display = "block";
                e.library = b || e.library;
                e.folder = c || e.folder;
                var d =
                    a.media[e.type];
                if (d && d.paths) {
                    var f = 0,
                        g = d.paths,
                        h = e.overflow;
                    c = e.folder;
                    for (var k = 0; k < g.length; k++) {
                        var l = g[k],
                            m = l.thumbnail,
                            p = l.image,
                            q = p.canvas,
                            r = l.path,
                            t = !c || "everything" === c,
                            O = l.folder === c;
                        "yourFiles" === c && 0 === r.indexOf("#") || O || t ? (++f <= h && (p.src = m, "stamp" !== l.type && "text" !== l.type || a.ui.sourceAtop(q)), q.style.display = "block") : q.style.display = "none"
                    }
                    g = document.querySelector(".noItemsAdded");
                    0 === f ? (a.feature.debug && console.log(d.tree, c), g || (g = document.createElement("div"), g.className = "noItemsAdded",
                        g.textContent = "No items added", e.content.appendChild(g)), g.style.display = "block") : g && (g.style.display = "none");
                    e.updateSize(e.type, d)
                }
            };
            this.updateSize = function (a, b) {
                var c = "text" === a ? mergeObject(b.thumbnail, {
                    width: 195,
                    height: 38,
                    padding: 1,
                    columns: 1,
                    rows: 5
                }) : mergeObject(b.thumbnail, {
                    width: 42,
                    height: 42,
                    padding: 0,
                    columns: 4,
                    rows: 5
                });
                this.maxHeight = (c.height + 2 * c.padding) * c.rows;
                this.overflow = c.columns * (c.rows + 1);
                this.divider = c.columns;
                this.container.style.cssText = "max-height: " + this.maxHeight + "px;";
                return c
            };
            this.construct = function (b, c, d) {
                var e = a.media[b];
                if (e && e.paths) {
                    e.thumbnail = e.thumbnail || {};
                    var f = document.querySelector("#sketch-configure .scroller");
                    this.container = f;
                    var g = document.createElement("div");
                    f.appendChild(g);
                    k(b, c);
                    var h = this.updateSize(b, e),
                        l = this.overflow,
                        m = this.divider;
                    Event.proxy.wheelPreventElasticBounce(g);
                    Event.add(f, "drag", Event.cancel);
                    Event.add(f, "scroll", this.onScroll);
                    g.onscroll = this.onScroll;
                    var p = a.actions.data[a.actions.idx];
                    p || (p = a.configure.tools[b]);
                    for (var r = q(p), s = !1, t = e.paths, O = 0; O < t.length; O++) {
                        var K = t[O],
                            R = K.image || document.createElement("img"),
                            N = R.canvas || document.createElement("canvas");
                        "text" === b ? K.fontFamily === p.fontFamily && (s = N) : K.path === r && (s = N);
                        var E = h.width,
                            aa = h.height;
                        N.style.width = E + "px";
                        N.style.height = aa + "px";
                        R.canvas || (N.width = E, N.height = aa, N.className = b, N.setAttribute("data-type", K.type), N.setAttribute("data-src", K.path), N.setAttribute("data-name", K.name), N.setAttribute("data-thumbnail", K.thumbnail), N.setAttribute("data-n", O), N.title = K.filename,
                            "clipart" !== K.type && "image" !== K.type || !a.feature.placement.mediaDrag || Event.add(N, "mousedown", function (b) {
                                Event.stop(b);
                                a.feature.canvas.editable || a.actions.deselectAll();
                                var c = this.getAttribute("data-src");
                                this.drag = a.area.addFromDrag({
                                    target: this,
                                    event: b,
                                    src: c
                                })
                            }), Event.add(N, "click", this.onClick), R.canvas = N, R.onload = function () {
                                a.thumbnailer.generate({
                                    src: this,
                                    canvas: this.canvas,
                                    width: this.width,
                                    height: this.height,
                                    croparea: !1,
                                    onload: function (c) {
                                        "stamp" !== b && "text" !== b || a.ui.sourceAtop(c)
                                    }
                                })
                            });
                        g.appendChild(N);
                        K.image = R;
                        K.canvas = N;
                        s && dom.setClassName({
                            className: "selected",
                            list: s.parentNode.querySelectorAll("." + b),
                            target: s,
                            on: !0
                        })
                    }
                    s && (f.scrollTop = s.offsetTop);
                    this.media = e;
                    this.length = e.paths.length;
                    this.type = b;
                    this.library = c;
                    this.folder = d;
                    this.divider = m;
                    this.overflow = l;
                    this.content = g;
                    this.container = f;
                    this.show()
                }
            };
            this.onClick = function (b, c) {
                var d = c.target,
                    e = d.getAttribute("data-src").split("/"),
                    f = d.getAttribute("data-type");
                k(f, e[e.length - 2]);
                d.drag && (d.drag.remove(), (e = document.querySelector("#addFromDrag")) &&
                    e.parentNode.removeChild(e));
                "text" === a.tool.type || "stamp" === a.tool.type ? a.ui.changeMediaFromElement(d) : "select" === a.tool.type && a.actions.hasSelection() ? a.ui.changeMediaFromElement(d) : a.feature.placement.mediaClick ? (e = d.getAttribute("data-src"), a.actions.deselectAll(), a.ui.changeMediaFromElement(d), a.addMedia(e)) : (a.actions.deselectAll(), a.ui.changeMediaFromElement(d))
            };
            this.onScroll = function (a) {
                a = e.content;
                var b = e.container,
                    c = e.media,
                    d = e.folder,
                    f = e.divider,
                    g = e.overflow;
                window.clearTimeout(a.timeout);
                a.timeout = window.setTimeout(function () {
                    for (var a = [], e = c.paths, h = 0; h < e.length; h++) {
                        var k = e[h],
                            l = !d || "everything" === d,
                            m = k.folder === d;
                        ("yourFiles" === d && "#" === k.path[0] || m || l) && a.push(k)
                    }
                    e = 0;
                    l = a.length;
                    m = Math.floor(b.scrollTop / b.scrollHeight * l / f) * f;
                    for (h = 0; h < l; h++) k = a[h], ++e <= g + m && e > m && (k && k.image && !k.image.src) && (k.image.src = k.canvas.getAttribute("data-thumbnail"))
                }, 100)
            };
            return this.construct(b, c, d)
        }, h, e = {}, l = function (b, c, d) {
            var g = a.media[b];
            g && g.paths && (h && h.hide(), e[b] ? e[b].length !== g.paths.length ?
                e[b] = new f(b, c, d) : e[b].show(c, d) : e[b] = new f(b, c, d), h = e[b])
        };
    a.ui.detectFolder = function (b, c, d) {
        var e = a.media[b];
        if (e) {
            b = e.tree;
            c = c.replace(e.path + "/", "");
            if (d) return d[c];
            for (var f in b)
                if (d = b[f], d[c]) return f
        }
    };
    var m = function (b) {
        var c = document.querySelector("#sketch-configure .content");
        removeChildNodes(c);
        if (b = a.configure.tools[b]) {
            a.ui.ranges = {};
            for (var e in b) {
                var f = b[e];
                if (f && f.type) {
                    var g = e[0].toUpperCase() + e.substr(1);
                    switch (f.type) {
                    case "clamp":
                        a.ui.ranges[e] = d(c, b, f, g);
                        break;
                    case "filePicker":
                        f =
                            c, g = document.createElement("div"), g.className = "sketch-file-picker", g.innerHTML = "Load your own image", f.appendChild(g), a.uploader.createFileInput(g)
                    }
                }
            }
        }
    }, k = function (b, c) {
            var d = document.querySelector(".credits");
            removeChildNodes(d);
            d.style.display = "none";
            var e = a.media[b + "_credits"];
            if (e && e[c]) {
                d.style.display = "block";
                var e = e[c],
                    f = document.createElement("a");
                f.href = e.url;
                f.target = "_blank";
                f.className = "roll";
                var g = document.createElement("span");
                g.setAttribute("data-title", e.name);
                g.innerHTML = e.name;
                f.appendChild(g);
                d.appendChild(document.createTextNode("By: "));
                d.appendChild(f)
            }
        }, q = function (b) {
            if (!b) return "";
            var c = a.detect.srcRequired;
            if (c[b.type]) {
                var d = b.type,
                    e = a.tool.type;
                !b.src && a.media[d] && (b.src = a.media[d].paths[0].path);
                c[e] && d !== e && a.setTool(d);
                return b.src
            }
            if (b.fontFamily) return "./media/font/" + b.fontFamily + ".png"
        };
    a.ui.setToolMenu = function (b, c) {
        var d, e = a.toolkit.getCatelog(b);
        "brushes" === e ? d = document.querySelector(".sketch-brush-menu") : "shapes" === e && (d = document.querySelector(".sketch-shape-menu"));
        (d = d || document.getElementById("tool-" + b) || document.querySelector("." + e)) && d.parentNode && (a.toolkit.__icons[e] && (e = a.toolkit.__icons[e][b.replace("_", " ")], !0 !== e && (d.id = "tool-" + b, d.querySelector("img").src = e)), c || dom.setClassName({
            className: "selected",
            list: a.$$(".sketch-tools .selected"),
            target: d,
            on: !0
        }))
    };
    a.ui.setCursor = function () {
        var b = a.feature.customCursor;
        b && b[tool.type] && tool.record ? (b = document.querySelector("#tool-" + tool.type + " img").src.replace("2", ""), a.active.canvas.style.cursor = "url(" +
            b + ") 12 6, default") : a.active.canvas.style.cursor = ""
    };
    a.ui.foxybox = function (b, c) {
        var d = document.querySelector("#avgrund-" + b);
        if (d || c) {
            var e = "sketch-" + b,
                f = document.querySelector("#" + e);
            if (f) widget.windows.toggle(e);
            else {
                f = document.createElement("div");
                f.className = "foxywindow";
                f.id = e;
                var g = document.createElement("div");
                g.className = "header";
                var h = document.createElement("div");
                h.className = "header-message";
                var k = document.createElement("span");
                k.className = "close icon-remove-sign";
                var l = document.createElement("div");
                l.className = "content";
                Event.add(l, "mousedown", Event.stop);
                g.appendChild(h);
                g.appendChild(k);
                f.appendChild(g);
                f.appendChild(l);
                document.querySelector(".avgrund-contents").appendChild(f);
                widget.windows.add(e, 0, 0, !0);
                widget.windows.restore();
                widget.windows.record({
                    id: e,
                    left: 0.5 - f.offsetWidth / window.innerWidth,
                    top: 0.1,
                    index: ++zIndexGlobal
                });
                widget.windows.restore();
                a.setup.foxyWindowEvent(f);
                widget.windows.lazyloader("#avgrund-" + b + " .lazy");
                l = f.querySelector(".content");
                l.innerHTML = c || d && d.innerHTML;
                Event.proxy.wheelPreventElasticBounce(l);
                h = f.querySelector(".header-message");
                (e = document.getElementById("avgrund-" + b + "-tabs")) ? (removeChildNodes(h), h.appendChild(e.cloneNode(!0))) : h.innerHTML = "<span>" + a.getTranslation(STRING.ucwords(b)) + "</span>";
                e = Math.min(420, 0.75 * window.innerWidth) + "px";
                h = Math.min(500, Math.round(0.75 * window.innerHeight)) + "px";
                f.style.width = e;
                l.style.width = e;
                l.style.maxHeight = h;
                f.querySelector("input") && a.uploader.initFileInput(f.querySelector("input"));
                a.ui.foxybox("open")
            }
        } else if (d =
            document.querySelector("#sketch-file ." + b)) {
            var f = document.querySelector("#sketch-file"),
                l = f.querySelectorAll(".data"),
                h = b.split("-"),
                e = h[0],
                h = h[1];
            h || (b = f.getAttribute("data-" + e) || e + "-computer", h = b.split("-")[1]);
            f.setAttribute("data-" + e, b);
            if (d = f.querySelector(".tabs .selected")) d.className = (" " + d.className + " ").replace(" selected ", "");
            f.querySelector(".tab-" + e).className += " selected";
            if (d = f.querySelector(".leftBar .selected.option")) d.className = (" " + d.className + " ").replace(" selected ", "");
            if (h) {
                if (d =
                    f.querySelector(".leftBar .link-" + b)) d.className += " selected";
                f.className = ((" " + f.className + " ").replace(" subcontent ", "") + " subcontent").trim()
            } else f.className = (" " + f.className + " ").replace(" subcontent ", "").trim();
            d = f.querySelectorAll(".leftBar .text");
            for (g = 0; g < d.length; g++) d[g].style.display = h ? "none" : "inline-block";
            for (g = 0; g < l.length; g++) l[g].style.display = "none";
            (l = f.querySelector("." + e + " .innerContent")) && h && (h = f.querySelector("." + b), h.style.display = "block", l.appendChild(h));
            f.querySelector("." +
                e).style.display = "block";
            l && (f.style.minHeight = "230px");
            a.loader.stop();
            a.uploader.createFileInput(document.querySelector(".foxywindow .file-input"));
            e = function (a, b, c) {
                (a = document.querySelector("#sketch-file " + a)) && Event.add(a, b, c)
            };
            e(".link-logout-drive", "click", function () {
                API.GoogleDrive.revoke();
                sketch.run("save")
            });
            e(".link-saveto-drive", "click", function () {
                API.GoogleDrive.save()
            });
            e(".link-logout-sketch", "click", function () {
                API.GoogleDrive.revoke();
                sketch.run("save")
            });
            e(".tab-open", "click", function () {
                sketch.ui.foxybox("open")
            });
            e(".tab-save", "click", function () {
                sketch.ui.foxybox("save")
            });
            e(".tab-print", "click", function () {
                sketch.ui.foxybox("print")
            });
            e(".link-open-computer", "click", function () {
                sketch.run("open-computer")
            });
            e(".link-open-sketch", "click", function () {
                sketch.run("open-sketch")
            });
            e(".link-open-drive", "click", function () {
                sketch.run("open-drive")
            });
            e(".link-save-snapshot", "click", function () {
                sketch.run("snapshot")
            });
            e(".link-save-computer", "click", function () {
                sketch.run("save-computer")
            });
            e(".link-save-sketch", "click",
                function () {
                    sketch.run("save-sketch")
                });
            e(".link-save-drive", "click", function () {
                sketch.run("save-drive")
            });
            e(".link-save-bitmap", "click", function () {
                sketch.download.image()
            });
            e(".link-save-print", "click", function () {
                sketch.print()
            });
            e(".description", "keyup", function () {
                sketch.fileName = this.value
            });
            e(".filename", "keyup", function () {
                sketch.description = this.innerHTML
            })
        }
    };
    a.ui.addLineBreak = function (a) {
        var b = document.createElement("div");
        b.className = "break";
        a.appendChild(b)
    };
    a.ui.addClick = function (a, b, c) {
        if (a =
            "string" === typeof b ? a.querySelector(b) : b) Event.add(a, "click", c), Event.add(a, "mousedown", Event.stop)
    };
    a.ui.forQuery = function (a, b, c) {
        a = a.querySelectorAll(b);
        for (b = 0; b < a.length; b++) c(a[b])
    };
    a.ui.sourceAtop = function (a) {
        var b = a.className || "";
        b.indexOf("selected");
        var c = a.getContext("2d");
        c.globalCompositeOperation = "source-atop";
        c.fillStyle = "#FFF";
        c.fillRect(0, 0, a.width, a.height);
        a.setAttribute("data-className", b)
    };
    a.ui.changeMediaFromElement = function (b) {
        var c = b.getAttribute("data-src"),
            d = b.getAttribute("data-type"),
            e = b.getAttribute("data-name");
        a.toolkit.changeMedia({
            src: c,
            fontFamily: e,
            type: d
        });
        if (b.parentNode && b.parentNode.querySelector(".selected")) {
            if ("stamp" === d || "text" === d) a.ui.sourceAtop(b.parentNode.querySelector(".selected")), a.ui.sourceAtop(b)
        } else "stamp" !== d && "text" !== d || a.ui.sourceAtop(b);
        dom.setClassName({
            className: "selected",
            list: b.parentNode.querySelectorAll("." + d),
            target: b,
            on: !0
        })
    };
    return sketch
}(sketch);
"undefined" === typeof sketch && (sketch = {});
sketch = function (a) {
    a.ui = a.ui || {};
    a.ui.button = function (a) {
        this.data = {};
        this.add = function (a) {
            if (a && a.id && !this.data[a.id]) {
                var c = a.parent;
                delete a.parent;
                var b = a.src;
                delete a.src;
                var f = document.createElement("button");
                f.events = {};
                for (var g in a) switch (g) {
                case "id":
                case "className":
                    f[g] = a[g];
                    break;
                case "style":
                    break;
                case "onclick":
                    f.events[g] = Event.add(f, g.substr(2), a[g]);
                    break;
                default:
                    f.setAttribute(g, a[g])
                }
                c.appendChild(f);
                b && (c = new Image, c.src = b, c.width = 26, f.appendChild(c));
                this.data[a.id] = f
            }
        };
        this.remove =
            function (d) {
                if (d = this.data[d]) delete this.data[a.id], d.parentNode && d.parentNode.removeChild(d)
        };
        this.disable = function (a) {
            if (a = this.data[a]) dom.setClassName(a, "disabled", !0), a.events.onclick.remove()
        };
        this.enable = function (a) {
            if (a = this.data[a]) dom.setClassName(a, "disabled", !1), a.events.onclick.add()
        };
        return a ? this.add(a) : this
    };
    return sketch
}(sketch);
"undefined" === typeof sketch && (sketch = {});
sketch = function (a) {
    a.palette = function () {
        var d = this;
        this.type = "";
        this.types = {
            color: !0,
            gradient: !0
        };
        this.update = function (c, b) {
            var f = a.style.fill;
            c = c || f.type;
            var h;
            if (d.types[c] && d.type !== c || b) h = !0, d.type = c, f.type = c;
            if (a.colorPicker) {
                var e = a.colorPicker.element.style;
                switch (f.type) {
                case "gradient":
                    e.display = "none";
                    break;
                case "color":
                    e.display = "block"
                }
            }
            var l = document.querySelector("#sketch-palette");
            if (l && (e = l.querySelector(".scroller"))) {
                l.querySelector(".tabs") || (h = !0, g(), Event.proxy.wheelPreventElasticBounce(e),
                    Event.add(e, "drag", Event.cancel));
                if (a.feature.palette.grid && h) {
                    h = "color" === f.type;
                    l = "gradient" === f.type;
                    dom.setClassName(e, "color", h);
                    dom.setClassName(e, "gradient", l);
                    for (var m = a.style[f.type], k = 0; k < m.length; k++) {
                        var q = m[k],
                            p = f.type + a.style.hashDNA(q),
                            r = e.querySelector("#" + p);
                        if (!r) {
                            if (h) {
                                var t = document.createElement("canvas");
                                t.getContext("2d");
                                a.style.renderSwatch(t, "color", q)
                            } else l && (t = document.createElement("canvas"), t.getContext("2d"), a.style.renderSwatch(t, "gradient", q));
                            r = document.createElement("li");
                            r.id = p;
                            r.className = f.type;
                            r.setAttribute("data-type", f.type);
                            r.setAttribute("data-dna", "" + q);
                            r.appendChild(t);
                            e.appendChild(r);
                            Event.add(t, "mousedown", Event.stop);
                            Event.add(t, "click", d.onClick)
                        }
                    }
                }
                a.setColorIndicator()
            }
        };
        this.updateAndRecord = function (c) {
            d.update(c);
            a.setTool(a.tool.type);
            var b = [],
                f = [],
                g = a.actions.selection,
                e;
            for (e in g) g = a.actions.data[e], b.push({
                id: g.id,
                fill: g.fill
            }), g.fill.type = c, f.push({
                id: g.id,
                fill: g.fill
            }), g.dirtyResource = !0;
            b.length && f.length && (a.history && a.history.store(b, f),
                a.render.preload())
        };
        this.deselect = function () {
            var a = document.querySelector("#sketch-palette .scroller .selected");
            a && dom.setClassName(a, "selected", !1)
        };
        this.onClick = function (c, b) {
            var d = b.target.parentNode,
                g = d.getAttribute("data-type"),
                e = d.getAttribute("data-dna"),
                l = d.parentNode.querySelector(".selected");
            l && dom.setClassName(l, "selected", !1);
            dom.setClassName(d, "selected", !0);
            "color" === g ? a.colorPicker.update(e) : a.setColor(g, e, !0, !0);
            a.feature.debug && console.log("dna", e)
        };
        this.generateColorBlock = function () {
            for (var a = {
                Cyan: [12, 6, 9.7],
                Azure: [33, 6.9, 9.2],
                Indigo: [62, 9, 8.6],
                Purple: [92, 6, 9],
                Pink: [150, 8, 9],
                Red: [180, 10, 9],
                Orange: [196, 7.7, 9.7],
                Orange3: [224, 6.2, 10],
                Yellow: [234, 4.7, 11],
                Green: [261, 11, 9.5]
            }, b = 0, d = 0, g = [], e, l = 1; 9 >= l; l++) {
                for (var m in a) {
                    if (1 === l) e = Color.Space.HSL_RGB({
                        H: 0,
                        S: 0,
                        L: 100 - 100 * (d / 12)
                    }), d++;
                    else {
                        n = l - 1;
                        e = a[m];
                        var k = Math.min(1, n / e[1]),
                            q = Math.min(1, 1 - n / e[2]);
                        e = Color.Space.HSI_RGB({
                            H: (e[0] + 180) % 360,
                            S: 150 * k,
                            I: 250 * q
                        })
                    }
                    e = Color.Space(e, "RGB>HEX24>W3");
                    g.push(e.substr(1));
                    b++
                }
                b = 0
            }
            return g
        };
        this.update();
        return this
    };
    var g = function () {
        var d = document.querySelector("#sketch-palette .header-message");
        if (d) {
            var c = document.querySelector("#light-mode");
            if (a.feature.palette.blendmode && c) {
                var b = new Image;
                b.src = "./media/ux/light-mode.png";
                b.title = "Light mode";
                b.height = "24";
                c.appendChild(b);
                Event.add(b, "click", a.style.setBlendMode)
            }
            if (a.feature.palette.gradient) {
                c = a.generate.interlace(12, "#fff", "#d9d9d9").css;
                b = document.createElement("ol");
                b.className = "tabs";
                d.appendChild(b);
                var f = document.createElement("canvas");
                f.innerHTML =
                    "";
                f.className = "color-indicator";
                f.style.background = c;
                Event.add(f, "click", function () {
                    a.palette.updateAndRecord("color")
                });
                b.appendChild(f);
                f = document.createElement("canvas");
                f.innerHTML = "";
                f.className = "gradient-indicator";
                f.style.background = c;
                Event.add(f, "click", function () {
                    a.palette.updateAndRecord("gradient")
                });
                b.appendChild(f);
                a.ui.addLineBreak(d)
            }
        }
    };
    a.setup.colorPicker = function () {
        if (globalExists("Color.Picker")) {
            var d = a.feature.palette.eyeDropper ? {
                canvas: a.canvas2d.layers.layer0,
                target: a.canvas2d.layers.active
            } :
                null;
            a.colorPicker = new Color.Picker({
                recordId: "sketch-palette",
                recordWindow: widget.windows.record,
                color: "#008BE1",
                container: document.querySelector("#sketch-palette .editor"),
                feature: {
                    closeButton: a.feature.palette.closeButton,
                    eyeDropper: d
                },
                modules: {
                    hue: !0,
                    satval: !0,
                    alpha: !1
                }
            });
            a.colorPicker.sketchCallback = a.colorPicker.callback = function (c, b, d) {
                a.setColor("color", d, !0, b, a.actions.selection, !0)
            };
            d = document.createElement("div");
            d.className = "clear";
            a.colorPicker.element.appendChild(d);
            return a.colorPicker
        }
        a.feature.debug &&
            console.log("missing Color.Picker module")
    };
    return sketch
}(sketch);
"undefined" === typeof sketch && (sketch = {});
"undefined" === typeof sketch.ui && (sketch.ui = {});
(function (a) {
    var g = {
        openProject: function (b) {
            a.ui.forQuery(b, ".open-project-remove", function (c) {
                a.ui.addClick(b, c, function (b) {
                    a.fileSystem.removeFile();
                    a.reset()
                })
            });
            a.ui.forQuery(b, ".open-project-save", function (c) {
                a.ui.addClick(b, c, function (b) {
                    a.fileSystem.save()
                })
            });
            a.ui.forQuery(b, ".open-project-save-copy", function (c) {
                a.ui.addClick(b, c, function (b) {
                    a.fileSystem.createFile()
                })
            });
            a.ui.forQuery(b, ".open-project-import", function (b) {
                a.uploader.createFileInput({
                    element: b,
                    onChange: function (b) {
                        b.fileInput.value =
                            "";
                        a.setBackground("#fff");
                        a.feature.openImageAsSketch = !0;
                        b.addMedia(a.uploader, null, function () {
                            a.feature.openImageAsSketch = !1
                        })
                    }
                });
                Event.add(a.uploader.fakeInputContainer, "mousedown", Event.stop)
            });
            a.ui.addClick(b, ".open-project-start", function () {
                a.ui.openProjectWindow(".open-project")
            });
            a.ui.addClick(b, ".export-project-start", function () {
                a.ui.openProjectWindow(".export-project")
            });
            a.ui.addClick(b, ".new-project-start", function () {
                a.ui.openProjectWindow(".new-project")
            })
        },
        exportProject: function (b) {
            a.ui.forQuery(b,
                ".export-project-png", function (c) {
                    a.supports.png ? a.ui.addClick(b, c, function (b) {
                        a.download.image({
                            mime: "image/png"
                        })
                    }) : c.style.display = "none"
                });
            a.ui.forQuery(b, ".export-project-jpeg", function (c) {
                a.supports.jpeg ? a.ui.addClick(b, c, function (b) {
                    a.download.image({
                        mime: "image/jpeg"
                    })
                }) : c.style.display = "none"
            });
            a.ui.forQuery(b, ".export-project-webp", function (c) {
                a.supports.webp ? a.ui.addClick(b, c, function (b) {
                    a.download.image({
                        mime: "image/webp"
                    })
                }) : c.style.display = "none"
            });
            a.ui.forQuery(b, ".export-project-pdf",
                function (c) {
                    a.supports.blob ? a.ui.addClick(b, c, function (b) {
                        a.download.pdf()
                    }) : c.style.display = "none"
                });
            a.ui.forQuery(b, ".export-project-zip", function (c) {
                a.supports.blob ? a.ui.addClick(b, c, function (b) {
                    a.download.zip()
                }) : c.style.display = "none"
            });
            var c = function (c) {
                a.ui.forQuery(b, ".export-project-" + c, function (d) {
                    a.ui.addClick(b, d, function (b) {
                        b = a.configure.fileName;
                        var d = a.configure.fileDescription;
                        a.api.test(c, a.save.canvas(), b, d)
                    })
                })
            };
            c("facebook");
            c("imgur");
            c("gdrive");
            c("twitter");
            c("pinterest")
        }
    },
        d = {
            query: {},
            param: {
                units: {
                    inches: "in",
                    mm: "mm",
                    cm: "cm",
                    pixels: "px",
                    "%": "%"
                },
                presets: {
                    "Size of Screen": "screen",
                    "Size of Window": "window",
                    "640 x 480": "size:640x480,units:px,res:72",
                    "800 x 600": "size:800x600,units:px,res:72",
                    "1024 x 768": "size:1024x768,units:px,res:72",
                    "1280 x 800": "size:1280x800,units:px,res:72",
                    "1680 x 1050": "size:1680x1050,units:px,res:72",
                    "1920 x 1200": "size:1920x1200,units:px,res:72",
                    "180 x 150 (Rectangle)": "size:180x150,units:px,res:72",
                    "300 x 250 (Medium Rectangle)": "size:200x250,units:px,res:72",
                    "728 x 90 (Leaderboard)": "size:728x90,units:px,res:72",
                    "550 x 250 (Wide Skyscraper)": "size:550x250,units:px,res:72",
                    "2 x 3": "size:2x3,units:in,res:300",
                    "3 x 5 (Index Card)": "size:3x5,units:in,res:300",
                    "4 x 6 (Postcard)": "size:4x6,units:in,res:300",
                    "5 x 7 (L, 2L)": "size:5x7,units:in,res:300",
                    "8 x 10 (Photo)": "size:8x10,units:in,res:300",
                    "8.5 x 11 (Letter)": "size:8.5x11,units:in,res:300",
                    "11 x 14 (Legal)": "size:11x14,units:in,res:300",
                    "11 x 17 (Tabloid)": "size:11x17,units:in,res:300",
                    "16 x 20 (Poster)": "size:16x20,units:in,res:300",
                    "20 x 30 (Poster)": "size:20x20,units:in,res:300",
                    Custom: "custom"
                }
            },
            WIDTH: 100,
            HEIGHT: 100,
            RESOLUTION: 72,
            BACKGROUND: "transparent",
            PRESET: "window",
            UNITS: "%",
            getPresetData: function (a) {
                var b = {};
                each(a.split(","), function (a) {
                    a = a.split(":");
                    b[a[0]] = a[1]
                });
                if (b.size) return a = b.size.split("x"), b.width = parseFloat(a[0]), b.height = parseFloat(a[1]), b
            },
            getPresetIndex: function (a, b) {
                var c = -1,
                    g;
                for (g in a) {
                    var m = d.getPresetData(a[g]);
                    if (m && m.width === d.WIDTH && m.height === d.HEIGHT) return c + 1;
                    ++c
                }
                return c
            },
            getDataIndex: function (a,
                b) {
                var c = -1,
                    d;
                for (d in a) {
                    if (a[d] === b) return c + 1;
                    ++c
                }
                return c
            },
            updateFromData: function (a) {
                var b = d.query;
                if (!0 === a.autoResize) {
                    var c = 1;
                    d.WIDTH = 100 * a.width;
                    d.HEIGHT = 100 * a.height;
                    d.UNITS = "%";
                    d.PRESET = "window"
                } else c = d.getPresetIndex(d.param.presets, "custom"), d.WIDTH = a.width, d.HEIGHT = a.height, d.UNITS = "px", d.PRESET = "custom";
                b.width.value = d.WIDTH;
                b.height.value = d.HEIGHT;
                b.presets.selectedIndex = c;
                b.units.selectedIndex = d.getDataIndex(d.param.units, d.UNITS);
                d.BACKGROUND = a.background;
                d.update();
                dom.setClassName({
                    target: sketch.$(".fileEntry." +
                        d.BACKGROUND),
                    list: "div",
                    className: "fileEntrySelected"
                })
            },
            update: function () {
                var b = d.UNITS,
                    c = a.convert.metrics[b + ">px"];
                "%" === b ? (b = d.WIDTH / 100, c = d.HEIGHT / 100, a.project.setSize(b, c, !0)) : (b = d.WIDTH * c, c *= d.HEIGHT, a.project.setSize(b, c));
                a.setBackground(d.BACKGROUND);
                a.render.actions("root.startWindow")
            }
        };
    g.newProject = function (c) {
        var g = function (b, e) {
            a.ui.forQuery(c, ".new-project-" + b, function (a) {
                d.query[b] = a;
                a.value = d[e];
                var c = d[b] || (d[b] = []);
                Event.add(a, "drag", Event.stop);
                Event.add(a, "keyup,change", function () {
                    sketch.$(".new-project-presets select").selectedIndex =
                        22;
                    d[e] = parseFloat(a.value);
                    d.update()
                });
                c.push(a)
            })
        };
        g("width", "WIDTH");
        g("height", "HEIGHT");
        a.ui.forQuery(c, ".new-project-units", function (b) {
            d.units || (d.units = []);
            Event.add(b, "mousedown", Event.stop);
            b = a.ui.buildSelect({
                label: "Units",
                element: b,
                selected: "%",
                data: d.param.units,
                onchange: function () {
                    var b = this.options[this.selectedIndex],
                        c = d.WIDTH,
                        e = d.HEIGHT,
                        f = d.UNITS,
                        g = b.value;
                    "%" === f ? (c = c / 100 * window.innerWidth, e = e / 100 * window.innerWidth) : (f = a.convert.metrics[f + ">px"], c *= f, e *= f);
                    "%" === g ? (c = 100 * (c / window.innerWidth),
                        e = 100 * (e / window.innerWidth)) : (f = a.convert.metrics["px>" + g], c *= f, e *= f);
                    sketch.$(".new-project-width").value = c;
                    sketch.$(".new-project-height").value = e;
                    d.WIDTH = c;
                    d.HEIGHT = e;
                    d.UNITS = b.value
                }
            });
            d.query.units = b;
            d.units.push(b)
        });
        a.ui.forQuery(c, ".new-project-presets", function (b) {
            d.presets || (d.presets = []);
            Event.add(b, "mousedown", Event.stop);
            b = a.ui.buildSelect({
                label: "Presets",
                style: "width: 140px;",
                element: b,
                selected: "Size of Window",
                data: d.param.presets,
                onchange: function () {
                    d.PRESET = this.options[this.selectedIndex].value;
                    switch (d.PRESET) {
                    case "custom":
                        break;
                    case "window":
                        d.WIDTH = 100;
                        d.HEIGHT = 100;
                        d.UNITS = "%";
                        break;
                    case "screen":
                        d.WIDTH = window.screen.width;
                        d.HEIGHT = window.screen.height;
                        d.UNITS = "px";
                        break;
                    default:
                        var a = d.getPresetData(d.PRESET);
                        d.WIDTH = a.width;
                        d.HEIGHT = a.height;
                        d.UNITS = a.units
                    }
                    d.update();
                    a = function (a, b) {
                        for (var c = d[a], e = 0; e < c.length; e++) b(c[e])
                    };
                    a("units", function (a) {
                        for (var b = a.options, c = 0; c < b.length; c++) b[c].value === d.UNITS && (a.selectedIndex = c)
                    });
                    a("width", function (a) {
                        a.value = d.WIDTH
                    });
                    a("height",
                        function (a) {
                            a.value = d.HEIGHT
                        })
                }
            });
            d.query.presets = b;
            d.presets.push(b)
        });
        var e = {
            Transparent: {
                id: "transparent",
                background: a.generate.interlace(12, "#fff", "#d9d9d9")
            },
            White: {
                id: "white",
                background: "#eee"
            },
            Black: {
                id: "black",
                background: "#111"
            },
            Notebook: {
                id: "notebook",
                background: a.generate.paper("notebook")
            },
            "Loose Leaf": {
                id: "looseLeaf",
                background: a.generate.paper("looseLeaf")
            },
            Lined: {
                id: "lined",
                background: a.generate.paper("lined")
            },
            Grid: {
                id: "grid",
                background: a.generate.grid("grid")
            },
            "Graph Paper": {
                id: "graphPaper",
                background: a.generate.grid("graphPaper")
            },
            Blueprint: {
                id: "bluePrint",
                background: a.generate.grid("bluePrint")
            }
        }, g = c.querySelector(".new-project-listing");
        Event.proxy.wheelPreventElasticBounce(g);
        for (var l in e) {
            var m = document.createElement("div"),
                k = e[l];
            m.className = "fileEntry " + k.id;
            m.title = l;
            g.appendChild(m);
            k.id === d.BACKGROUND && (m.className += " fileEntrySelected");
            var q = document.createElement("span");
            q.innerHTML = l;
            m.appendChild(q);
            var q = document.createElement("canvas"),
                p = q.getContext("2d");
            q.width =
                155;
            q.height = 97;
            p.scale(0.5, 0.5);
            p.fillStyle = k.background;
            p.fillRect(0, 0, 310, 194);
            m.appendChild(q)
        }
        a.ui.forQuery(c, ".new-project .fileEntry", function (b) {
            a.ui.addClick(c, b, function (c) {
                dom.setClassName({
                    target: b,
                    list: "div",
                    className: "fileEntrySelected"
                });
                c = e[b.title];
                a.setBackground(c.id);
                d.BACKGROUND = c.id;
                d.update()
            })
        });
        a.ui.forQuery(c, ".new-project-create", function (b) {
            a.ui.addClick(c, b, function (b) {
                a.reset();
                a.fileSystem.createFile();
                a.ui.openProjectWindow(".open-project")
            })
        });
        a.ui.forQuery(c, ".new-project-cancel",
            function (e) {
                a.ui.addClick(c, e, function (c) {
                    d.WIDTH = b.WIDTH;
                    d.HEIGHT = b.HEIGHT;
                    d.UNITS = b.UNITS;
                    d.PRESET = b.PRESET;
                    d.BACKGROUND = b.BACKGROUND;
                    d.update();
                    a.ui.openProjectWindow(".start")
                })
            })
    };
    var c = {
        ".start": "Welcome to Sketchpad",
        ".open-project": "My Projects",
        ".export-project": "Export",
        ".new-project": "New Project"
    }, b = {};
    a.ui.openProjectWindow = function (f, g) {
        f = f || "";
        var e = a.$("#sketch-open"),
            l = (e.querySelector("div.selected") || {}).className || "";
        b = clone(d);
        ".new-project" === f && a.project.width && d.updateFromData(a.project);
        if ((e = widget.windows.isOpen(e)) && -1 !== l.indexOf(f.substr(1))) g && widget.windows.blink("sketch-open");
        else {
            l = a.$("#sketch-open .header-message");
            removeChildNodes(l);
            if (".start" !== f) {
                var m = document.createElement("span");
                m.className = "link";
                m.textContent = "File";
                m.onclick = function () {
                    a.ui.openProjectWindow(".start")
                };
                l.appendChild(m);
                l.appendChild(document.createTextNode(" | "))
            }
            m = document.createElement("span");
            m.className = "tree";
            m.textContent = c[f];
            l.appendChild(m);
            widget.windows.setCurrentTab("sketch-open",
                f);
            g && e ? widget.windows.blink("sketch-open") : widget.windows.open("sketch-open");
            ".open-project" === f ? a.fileSystem.updateRecentProjects(null, widget.windows.restore) : setTimeout(widget.windows.restore, 500)
        }
    };
    a.ui.setupStartWindow = function () {
        var b = a.$("#sketch-open");
        b && (g.exportProject(b), g.newProject(b), g.openProject(b))
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
sketch = function (a) {
    a.setup.uploader = function () {
        var g = "jpg jpeg gif png svg json sketch zip ggr gpl woff pat".split(" ");
        window.PDFJS && g.push("pdf");
        window.PSD && g.push("psd");
        a.convert.blobToABR && g.push("abr");
        a.convert.blobToGBR && g.push("gbr");
        a.uploader = new widget.Uploader({
            confirm: "json",
            action: a.location.host + "filesystem.php?upload=true",
            mode: "read",
            maxFiles: Infinity,
            formats: g.join(","),
            onChange: function (d, c) {
                if ("undefined" !== typeof c.pageX) {
                    var b = a.canvas2d.container,
                        f = Event.proxy.getCoord(c),
                        b = Event.proxy.getBoundingBox(b);
                    a.uploader.addMedia(d, {
                        x: f.x - b.x1 - b.scrollBodyLeft,
                        y: f.y - b.y1 - b.scrollBodyTop
                    })
                } else a.uploader.addMedia(d)
            },
            onProgress: function (d) {
                a.loader.thread ? a.loader.update(a.loader.thread, "Uploading...", d.transferPercent) : a.loader.thread = a.loader.add("Uploading...", d.transferPercent)
            },
            onError: function (d, c, b) {
                a.loader.stop()
            }
        });
        a.uploader.addMedia = function (d, c, b) {
            if (a.addMedia) {
                a.reset.configure("image");
                a.actions.deselectAll();
                var f = [],
                    g = function () {
                        a.feature.canvas.editable ||
                            a.actions.deselectAll();
                        isFinite(a.actions.idx) && f.push(a.actions.idx);
                        window.setTimeout(l.next, 50)
                    }, e = d.changedFilesByName;
                if (e["sketch.json"]) return a.open.folder(e);
                var l = new Queue({
                    items: d.changedFiles,
                    oncomplete: function () {
                        1 >= f.length ? f.length && a.ui.buildConfigure(a.actions.data[f[0]].type) : (a.run("select"), a.actions.deselectAll(), a.actions.select(f), a.actions.render("root.setup.uploader"), a.actions.renderControls(a.actions.selection, !0));
                        b && b()
                    },
                    next: function (b) {
                        a.vortex && 0 === (b.type || "").indexOf("image/") ?
                            a.vortex(b, event, function () {
                                a.addMedia(b, c, g)
                            }) : a.addMedia(b, c, g)
                    }
                })
            }
        }
    };
    return a
}(sketch);